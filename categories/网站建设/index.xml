<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>网站建设 on Gaein nidb 的博客</title><link>https://blog.gaein.cn/categories/%E7%BD%91%E7%AB%99%E5%BB%BA%E8%AE%BE/</link><description>Recent content in 网站建设 on Gaein nidb 的博客</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Fri, 07 Jun 2019 18:40:33 +0800</lastBuildDate><atom:link href="https://blog.gaein.cn/categories/%E7%BD%91%E7%AB%99%E5%BB%BA%E8%AE%BE/index.xml" rel="self" type="application/rss+xml"/><item><title>nginX设置错误页面</title><link>https://blog.gaein.cn/passages/nginx-error-page/</link><pubDate>Fri, 07 Jun 2019 18:40:33 +0800</pubDate><guid>https://blog.gaein.cn/passages/nginx-error-page/</guid><description>&lt;p>最近几天完善了一下网站，尤其是nginx默认的丑的要死的错误页面（标题图那样的）。今天把nginx配置错误页面的方法写在这里&lt;/p>
&lt;!-- more -->
&lt;p>首先在网上搜教程，说必须要有
&lt;code>fastcgi_intercept_errors on; &lt;/code>
自定义的错误页面才会生效，但是我删除这句话仍然可以正常跳转。大家依据实际需求添加。
接下来就是配置错误页面的具体代码了
&lt;code> error_page 404 /404.html; error_page 502 /502.html; location = /404.html{ root /data/errpages; } location = /502.html{ root /data/errpages; } &lt;/code>
error_page的意思是设置错误页，后面接状态码和页面文件，然后使用location来跳转。由于location的存在，这部分代码只能写在server区块里面。&lt;/p></description></item><item><title>网站转战阿里云服务器</title><link>https://blog.gaein.cn/passages/change-idc-to-alicloud/</link><pubDate>Sat, 27 Apr 2019 23:40:49 +0800</pubDate><guid>https://blog.gaein.cn/passages/change-idc-to-alicloud/</guid><description>&lt;p>网站有一段时间不能访问，原因是转备案到阿里云了。&lt;/p>
&lt;h2 id="原因">原因
&lt;/h2>&lt;p>最近网站没法访问了，原因很简单，不是服务器日常爆炸，而是拿去转备案了。
因为备案比较费事，不说材料准备，审核也要挺长时间（这次大概是15天）所以我不会轻易的转备案的。
不过最近仍然抛弃了陪伴我2年的主机屋，入了阿里云，原因很简单：&lt;/p>
&lt;ol>
&lt;li>阿里云确实在性能上比主机屋强&lt;/li>
&lt;li>阿里云的学生云服务器（24岁以下）才114/年，相比较90/月的老服务器来说太值了！&lt;/li>
&lt;li>服务稳定，工作效率高&lt;/li>
&lt;li>备案服务免费&lt;/li>
&lt;li>功能齐全，其他各项服务也很优秀&lt;/li>
&lt;/ol>
&lt;p>当然，主机屋也有一定的优点，比如很少需要手机验证码（因为上学的原因，没办法接收短信，以至于在阿里云重启服务器都成了难题）&lt;/p>
&lt;h2 id="购买前">购买前
&lt;/h2>&lt;p>实在是无法相信自己的眼睛，114/年，确认再三后终于入手。因为是放假前三天看见的，就提前在闲鱼买了阿里云的幕布（他自己印的，20块钱，这样比较方便）&lt;/p>
&lt;p>放假当天，先买了服务器，不过需要审核（因为限制24岁）&lt;/p>
&lt;p>流程：购买&amp;gt;审核&amp;gt;发放提货券&amp;gt;绑定账号&amp;gt;提取阿里云服务器。&lt;/p>
&lt;p>提货券有效期一个月，记得及时用啊！一开始我还以为商品有问题，那个有效期是服务器，还专门打了电话问一下。&lt;/p>
&lt;h2 id="备案">备案
&lt;/h2>&lt;p>到手后申请备案，然后打印核验单，把幕布粘墙上，架起三脚架和相机，拍照。家里有个相机是真的舒服。&lt;/p>
&lt;p>阿里云上传资料是不限制大小的，不过尽量不要上传太大的文件，容易由于网络原因出错，当然，也要保证清晰。&lt;/p>
&lt;p>第二天阿里云审核就给我来电话了，先后来了两次（清明节都不放假的？）&lt;/p>
&lt;blockquote>
&lt;p>第一次比较戏剧，客服跟我说我还没到年龄。我就很迷茫了，我初三就备案成功了，高二反而没到年龄？客服于是和我解释说阿里云这边要求16周岁（按照身份证上面的生日算），您还有两个个月才够岁数。蒙了一秒钟，我默默回复了一句，今年是2019年&amp;hellip;客服沉默了一下，才发现日期算错了&amp;hellip;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>第二次来电是提醒我域名快要到期，并且提醒我说如果中间到期备案是不会成功的，可见服务之细致。我还真忘了这码子事，赶紧续费一波。&lt;/p>&lt;/blockquote>
&lt;p>一番折腾，上传图片，终于进入到了管局审核阶段。&lt;/p>
&lt;h2 id="部署">部署
&lt;/h2>&lt;p>一狠心上了大佬们说很“优雅”的CentOS，以前都是用的Ubuntu（2021补：屑CentOS的时代过去了，Ubuntu好时代，来力！）&lt;/p>
&lt;p>一点点部署nginx，nodejs，hexo&amp;hellip;&amp;hellip;&lt;/p>
&lt;p>到现在主页也没有完成，虽然没感觉CentOS怎么好用（因为Ubuntu习惯了吧）不过确实学到了很多东西。具体部署可能会以后再发。&lt;/p></description></item><item><title>NodeBB设置——使用NginX进行反代理并优化</title><link>https://blog.gaein.cn/passages/configure-nginx-for-nodebb/</link><pubDate>Wed, 25 Jul 2018 21:16:00 +0800</pubDate><guid>https://blog.gaein.cn/passages/configure-nginx-for-nodebb/</guid><description>&lt;p>nodeBB在默认的4567开启，通常需要nginx作为反代理才能更好的访问，并且nginx也能开启一些优化使访问更快速&lt;/p>
&lt;!-- More -->
&lt;p>默认安装nginx的配置文件在 /etc/nginx/nginx.conf 使用&lt;/p>
&lt;p>vim /etc/nginx/nginx.conf&lt;/p>
&lt;p>编辑配置文件，在http{}之间，追加&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">server {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 80;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server_name www.xxx.com; ## 你的域名
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Real-IP $remote_addr;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Forwarded-Proto $scheme;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Host $http_host;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-NginX-Proxy true;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_pass http://127.0.0.1:4567;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_redirect off;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ## Socket.IO Support
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_http_version 1.1;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Upgrade $http_upgrade;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Connection &amp;#34;upgrade&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>因为我网站跑的服务器在香港，配置又不行，所以只能想办法来优化一下&lt;/p>
&lt;p>先上整个的配置文件，因为用了宝塔面板（SSL实在弄不好）所以配置文件可能与其他的有出入，请自行修改&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##基础设置
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 80;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 443 ssl;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server_name www.minecrafter.cn;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##错误页面
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> error_page 502 /502.html;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location = /502.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> root /502;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> internal;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##反代理设置
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Real-IP $remote_addr;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Forwarded-Proto $scheme;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Host $http_host;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-NginX-Proxy true;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##proxy_pass http://127.0.0.1:4567;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##proxy_pass http://io_nodes;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_redirect off;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ## Socket.IO Support
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_http_version 1.1;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Upgrade $http_upgrade;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Connection &amp;#34;upgrade&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##gizip设置
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gzip on;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gzip_min_length 1000;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gzip_proxied off;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gzip_types text/plain application/xml text/javascript application/javascript application/x-javascript text/css application/json;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##SSL-START SSL相关配置，请勿删除或修改下一行带注释的404规则
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##error_page 404/404.html;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##HTTP_TO_HTTPS_START
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if ($server_port !~ 443)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> rewrite ^(/.*)$ https://$host$1 permanent;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##HTTP_TO_HTTPS_END
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_certificate /etc/letsencrypt/live/www.minecrafter.cn/fullchain.pem;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_certificate_key /etc/letsencrypt/live/www.minecrafter.cn/privkey.pem;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_protocols TLSv1.1 TLSv1.2;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_prefer_server_ciphers on;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_session_cache shared:SSL:10m;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_session_timeout 10m;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> error_page 497 https://$host$request_uri;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##SSL-END
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##静态资源代理设置
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location @nodebb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_pass http://io_nodes;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location ~ ^/assets/(.*)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> root /data/nodebb/;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> try_files /build/public/$1 /public/$1 @nodebb;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location /plugins/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> root /data/nodebb/build/public/;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> try_files $uri @nodebb;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_pass http://io_nodes;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##负载均衡设置
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">upstream io_nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip_hash;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server 127.0.0.1:526;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server 127.0.0.1:527;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这是最终版本，有负载均衡，资源代理，压缩&lt;/p>
&lt;p>不需要压缩删除 ##gzip设置的内容即可&lt;/p>
&lt;p>不需要负载均衡（仅一个端口）删除 ##负载均衡的内容，将 ##静态资源代理设置的内容中&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">proxy_pass http://io_nodes;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>改成&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">proxy_pass ##端口依情况而定
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>不需要静态资源代理删除 ##静态资源代理内容，如果有负载均衡，删除&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">##proxy_pass http://io_nodes;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>前的“##”&lt;/p>
&lt;p>没有则删除&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">proxy_pass http://127.0.0.1:4567; ##端口依情况而定
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>前的“##”&lt;/p>
&lt;p>除了nginx之外要做的&lt;/p>
&lt;p>集群使用：&lt;/p>
&lt;p>默认情况下，NodeBB将在一个进程上运行，某些调用可能比其他进程更长，从而导致相同资源的延迟或队列等待。要解决这个问题，可以通过添加多个端口到config.json中来指示NodeBB在多个进程上运行。&lt;/p>
&lt;p>我习惯把端口数目设置为核心数，首先使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cat /proc/cpuinfo| grep &amp;#34;cpu cores&amp;#34;| uniq
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看核心数目（我的四核）&lt;/p>
&lt;p>在nodebb目录下（就是输./nodebb setup那个目录），使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">vim config.json
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>编辑配置文件&lt;/p>
&lt;p>将与端口有关的port:4567,改成&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;port&amp;#34;: [&amp;#34;4567&amp;#34;, &amp;#34;4568&amp;#34;] //这将启动2个进程，分别监听这2个端口
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>具体为什么可以百度JSON格式，如果重启nodebb出错请检查这个文件，端口随便写，不要占用80(HTTP),22(SSH),443(SSL),6379(Redis),27017(MongoDB)等&lt;/p>
&lt;p>在Nginx配置文件中加入&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">upstream io_nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip_hash;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server 127.0.0.1:4567;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server 127.0.0.1:4568;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>端口依config内容而定&lt;/p>
&lt;p>然后把以前配置文件中的&lt;/p>
&lt;p>proxy_pass 一行&lt;/p>
&lt;p>改成&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">proxy_pass http://io_nodes;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>即可&lt;/p></description></item><item><title>NodeBB小贴士——也是所有云服务器的小贴士：记得在相关软件中开启端口</title><link>https://blog.gaein.cn/passages/tips-for-nodebb/</link><pubDate>Wed, 25 Jul 2018 01:27:20 +0800</pubDate><guid>https://blog.gaein.cn/passages/tips-for-nodebb/</guid><description>&lt;pre>&lt;code>因为没有在面板中开启端口，碰壁过好几次
回来想想哭笑不得，但是这样的例子还不止我一个
&lt;/code>&lt;/pre>
&lt;h2 id="所以提示大家记得在">所以提示大家，记得在
&lt;/h2>&lt;pre>&lt;code> 1. 服务器系统防火墙
2. 服务器系统安全狗
3. 服务器自己安装的面板
4. 服务商提供的管理面板
5. 服务商提供的安全策略组
中开启相应端口
&lt;/code>&lt;/pre>
&lt;h2 id="nodebb需要端口">NodeBB需要端口
&lt;/h2>&lt;pre>&lt;code> 80，http
4567，默认端口（记得添加你在config.json中定义的）
6379，redis
27017，mongodb
443，SSL
按需添加
&amp;lt;img src=&amp;quot;https://s1.ax1x.com/2018/07/25/PYOYhn.jpg&amp;quot; alt=&amp;quot;&amp;quot; data-load=&amp;quot;full&amp;quot; style=&amp;quot;&amp;quot; width=&amp;quot;1697&amp;quot; height=&amp;quot;548&amp;quot;/&amp;gt;
&lt;/code>&lt;/pre></description></item><item><title>在CentOS上搭建现代化的论坛Nodebb|NodeBB安装记录（Linux-CentOS篇）</title><link>https://blog.gaein.cn/passages/install-nodebb-on-centos/</link><pubDate>Sat, 21 Jul 2018 19:20:03 +0800</pubDate><guid>https://blog.gaein.cn/passages/install-nodebb-on-centos/</guid><description>&lt;p>
CentOS在各种服务器上使用的较多，所以捏，就来尝试一下CnetOS上安装NodeBB
&lt;/p>
&lt;p>
CentOS 7 on VMWare
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8H8tf.jpg" alt="" data-load="full" style="" width="1717" height="935"/>
&lt;/p>
&lt;p>
不过我这次选择的数据库是MongoDB
&lt;/p>
&lt;p>
一、准备工作
&lt;/p>
&lt;p>
打开终端，切换到root用户
&lt;/p>
&lt;pre class="fy-prettyprint linenums">su root&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8H3AP.jpg" alt="https://s1.ax1x.com/2018/07/21/P8H3AP.jpg"/>
&lt;/p>
&lt;p>
关闭SELinux（有些可能没有，跳过）
&lt;/p>
&lt;pre class="fy-prettyprint linenums">vim /etc/sysconfig/selinux&lt;/pre>
&lt;p>
如果没有vim（见&lt;a href="https://blog-old.gaein.cn/post/Nodebb-Linux-Ubuntu.html" target="_self" textvalue="https://blog-old.gaein.cn/post/Nodebb-Linux-Ubuntu.html">https://blog-old.gaein.cn/post/Nodebb-Linux-Ubuntu.html&lt;/a>
&lt;/p>
&lt;p>
就用yum安装呗
&lt;/p>
&lt;pre class="fy-prettyprint linenums">yum install vim ##如果 vim 指令未安装，那就安装它&lt;/pre>
&lt;p>
按下i键（当然如果你想知道有什么键可以自行百度）
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8HOud.jpg" alt="" data-load="full" style="" width="750" height="521"/>
&lt;/p>
&lt;p>
找到 &lt;code>SELINUX&lt;/code> 然后修改成 &lt;code>disabled&lt;/code>.
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8Hbge.jpg" alt="" data-load="full" style="" width="756" height="517"/>
&lt;/p>
&lt;p>
按下ESC退出编辑模式，输入:，再输入退出并保存命令：wq
&lt;/p>
&lt;pre class="fy-prettyprint linenums">yum update
yum -y install epel-release
yum -y groupinstall &amp;quot;Development Tools&amp;quot;
yum -y install git ImageMagick ImageMagick-devel##更新系统并安装一些基础工具&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8HqjH.jpg" alt="" width="619" height="477"/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8bm5V.jpg" alt="" data-load="full" style="" width="769" height="547"/>
&lt;/p>
&lt;p>
二、安装NodeJS
&lt;/p>
&lt;p>
在Github可以找到最新的nvm安装命令
&lt;/p>
&lt;p>
&lt;a href="https://github.com/creationix/nvm" _src="https://github.com/creationix/nvm">https://github.com/creationix/nvm&lt;/a>&lt;br/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8buCT.jpg" alt="" data-load="full" style="" width="1098" height="732"/>
&lt;/p>
&lt;p>
所以我们使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash
##或者
wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash&lt;/pre>
&lt;p>
安装nvm（这是一个快速部署的脚本）
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8beU0.jpg" alt="" data-load="full" style="" width="744" height="193"/>
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">export NVM_DIR=&amp;quot;$HOME/.nvm&amp;quot;
[ -s &amp;quot;$NVM_DIR/nvm.sh&amp;quot; ] &amp;amp;&amp;amp; . &amp;quot;$NVM_DIR/nvm.sh&amp;quot; ## This loads nvm&lt;/pre>
&lt;p>
把nvm添加到环境变量
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">source ~/.bashrc&lt;/pre>
&lt;p>
令环境变量生效
&lt;/p>
&lt;p>
最后使用&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">command -v nvm&lt;/pre>
&lt;p>
检查是否安装成功
&lt;/p>
&lt;p>
安装成功之后，如果是国内的机器需要使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">export NVM_NODEJS_ORG_MIRROR=http://npm.taobao.org/mirrors/node
export NVM_IOJS_ORG_MIRROR=http://npm.taobao.org/mirrors/iojs&lt;/pre>
&lt;p>
让nvm使用淘宝源&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">npm config set registry http://registry.npm.taobao.org/&lt;/pre>
&lt;p>
让npm使用淘宝源
&lt;/p>
&lt;p>
使用&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">nvm install --lts&lt;/pre>
&lt;p>
安装lts版本的nodejs
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfSzj.jpg" alt="" data-load="full" style="" width="723" height="233"/>
&lt;/p>
&lt;p>
之后记得使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">npm -v&lt;/pre>
&lt;p>
和
&lt;/p>
&lt;pre class="fy-prettyprint linenums">nodeb -v&lt;/pre>
&lt;p>
检查版本，如果成功输出版本号，则安装成功
&lt;/p>
&lt;p>
三，安装数据库（MongoDB）
&lt;/p>
&lt;p>
使用命令&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">vim /etc/yum.repos.d/mongodb-org-3.6.repo&lt;/pre>
&lt;p>
创建文件并且输入i进行编辑，将以下内容粘贴进去
&lt;/p>
&lt;pre class="fy-prettyprint linenums">[mongodb-org-3.6]name=MongoDB
Repositorybaseurl=
gpgcheck=1
enabled=1
gpgkey=https://www.mongodb.org/static/pgp/server-3.6.asc&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYWzWQ.jpg" alt="" data-load="full" style="" width="781" height="534"/>
&lt;/p>
&lt;p>
输入:wq保存并退出
&lt;/p>
&lt;p>
再使用&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">yum updata&lt;/pre>
&lt;p>
更新
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfkwV.jpg" alt="" width="380" height="181"/>
&lt;/p>
&lt;p>
使用&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">yum -y install mongodb-org&lt;/pre>
&lt;p>
安装mongoDB
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYWvFS.jpg" alt="" data-load="full" style="" width="738" height="506"/>
&lt;/p>
&lt;p>
因为是国外的服务器所以速度不行，当然也可以自行在使用update之前把链接替换为国内的镜像站
&lt;/p>
&lt;p>
完成之后使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">service mongod start ##启动 Mongodb
mongod --version ##查看 Mongodb 版本&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYf9Qs.jpg" alt="" width="555" height="478"/>
&lt;/p>
&lt;p>
&lt;span style="color: ##0070C0;">有一点需要注意：如果版本3.4.10的话需要升级，因为3.4.10以下有风险&lt;/span>
&lt;/p>
&lt;p>
安装完成后，为了消除 MongoDB 的性能警告，需要关闭 Linux 巨型页：
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">echo never &amp;gt; /sys/kernel/mm/transparent_hugepage/enabled
echo never &amp;gt; /sys/kernel/mm/transparent_hugepage/defrag&lt;/pre>
&lt;p>
来关闭
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfKyR.jpg" alt="" data-load="full" style="" width="744" height="63"/>
&lt;/p>
&lt;p>
不同于官方文档，在获取nodebb之前，我选择先进行数据库设置
&lt;/p>
&lt;p>
输入
&lt;/p>
&lt;pre class="fy-prettyprint linenums">mongo&lt;/pre>
&lt;p>
进入mongoDB的命令行
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfPLq.jpg" alt="" data-load="full" style="" width="777" height="373"/>
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">use nodebb&lt;/pre>
&lt;p>
新建数据库（名为nodebb）
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfFe0.jpg" alt="" width="224" height="64"/>
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">db.createUser({user: &amp;quot;nodebb&amp;quot; ,pwd: &amp;quot;替换成你的密码&amp;quot; ,roles:[ &amp;quot;readWrite&amp;quot; ]})&lt;/pre>
&lt;p>
添加用户角色&lt;span style="color: ##0070C0;">（牢记用户名（此处为nodebb）和密码！）&lt;/span>
&lt;/p>
&lt;p>
&lt;span style="color: ##0070C0;">&lt;img src="https://s1.ax1x.com/2018/07/24/PYfAoT.jpg" alt="" data-load="full" style="" width="767" height="113"/>&lt;/span>
&lt;/p>
&lt;p>
如果需要在nodebb后台查看数据库数据，输入以下代码
&lt;/p>
&lt;pre class="fy-prettyprint linenums">db.grantRolesToUser( &amp;quot;nodebb&amp;quot; ,[{ role: &amp;quot;clusterMonitor&amp;quot;, db: &amp;quot;admin&amp;quot; }]);&lt;/pre>
&lt;p>
打开权限认证，使用命令
&lt;/p>
&lt;pre class="fy-prettyprint linenums">vim /etc/mongod.conf&lt;/pre>
&lt;p>
取消注释并改为
&lt;/p>
&lt;pre class="fy-prettyprint linenums">security:
authorization: enabled&lt;/pre>
&lt;p>
如图所示
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfeW4.jpg" alt="" data-load="full" style="" width="752" height="270"/>
&lt;/p>
&lt;p>
使用&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">service mongod restart&lt;/pre>
&lt;p>
重启mongoDB
&lt;/p>
&lt;p>
四、安装NodeBB
&lt;/p>
&lt;p>
如果没有git，请使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">yum install git&lt;/pre>
&lt;p>
中文社区的文档中已经说明
&lt;/p>
&lt;blockquote>
&lt;p>
&lt;em>&lt;strong>在开始之前:&lt;/strong>&lt;/em>&lt;br/>&lt;strong>① 提前切换成root用户，免得麻烦。&lt;/strong>&lt;br/>&lt;strong>② 不要直接下载 Github 上发布的 release 压缩包&lt;/strong>，那里面没有 &lt;code>.git/config&lt;/code> 配置文件，而在安装过程中需要读取配置文件的值。正确的做法是使用 Git 从 GitHub 上克隆源代码。&lt;br/>
&lt;/p>
&lt;/blockquote>
&lt;p>
新建一个目录（如果是云服务器的话最好放在数据盘里面，默认的/root目录不会太大，不过因为我比较懒就直接这样了）
&lt;/p>
&lt;p>
可以使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">mkdir 目录&lt;/pre>
&lt;p>
来新建文件夹（注意有&amp;##39;/&amp;##39;和没有的区别）
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">cd 目录&lt;/pre>
&lt;p>
进入刚刚新建的目录（同样注意&amp;##39;/&amp;##39;）
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">git clone -b v1.10.x https://github.com/NodeBB/NodeBB.git nodebb##把nodebb克隆进nodebb文件夹&lt;/pre>
&lt;blockquote>
&lt;p>
现在，你可以使用国内的镜像仓库(&lt;code>https://gitee.com/NodeBB-CN/NodeBB.git&lt;/code>)来提高连接速度。&lt;br/>
&lt;/p>
&lt;/blockquote>
&lt;p>
这是中文社区文档上的话，但是...
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfCyn.jpg" alt="" data-load="full" style="" width="754" height="76"/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/25/PYLpqg.jpg" alt="" width="457" height="55"/>（这个是当时没有截图后来用物理机补的:D）
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/25/PYLCZQ.jpg" alt="" width="453" height="420"/>嗯...
&lt;/p>
&lt;p>
所以我闲的创建了一个仓库，可以使用 &lt;a href="https://gitee.com/nidb/NodeBB.git" _src="https://gitee.com/nidb/NodeBB.git">https://gitee.com/nidb/NodeBB.git&lt;/a>&lt;br/>
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">./nodebb setup&lt;/pre>
&lt;p>
来安装，当然，上一篇（&lt;a href="https://blog-old.gaein.cn/post/Nodebb-Linux-Ubuntu.html" target="_blank">在Ubuntu上搭建现代化的论坛Nodebb|NodeBB安装记录（Linux-Ubuntu篇）&lt;/a>）中说过，可以使用可视化的界面来安装，使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">./nodebb install&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfVFU.jpg" alt="" data-load="full" style="" width="1722" height="937"/>
&lt;/p>
&lt;p>
和普通的博客安装差不多啦！
&lt;/p>
&lt;p>
说明：
&lt;/p>
&lt;p>
Web Address(URL)是以后访问的地址，如果是搭建的论坛记得写域名（可以不加端口，以后在nginx反代理）当然，建议先使用默认的调试。注意不要忘记“http://”，结尾不要加&amp;##39;/&amp;##39;，只有这个链接能够访问论坛，其他链接访问会显示链接断开（比如我有一个服务器，IP是1.2.3.4，域名www.exp.com和exp.com都A记录过去了，这里我填写www.exp.com，那么exp.com和1.2.3.4访问的时候都会显示与“NodeBB的链接断开”）&lt;br/>
&lt;/p>
&lt;p>
Username，Email Address ，Password是论坛管理员的账号邮箱密码，牢记。邮箱要填写可以用的，以便以后开邮件验证功能的时候不用再去修改
&lt;/p>
&lt;p>
Confirm Password是确认密码
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfZYF.jpg" alt="" data-load="full" style="" width="778" height="693"/>
&lt;/p>
&lt;p>
数据库选择MongoDB
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYful9.jpg" alt="" data-load="full" style="" width="1118" height="185"/>
&lt;/p>
&lt;p>
Redis的话自己去网上看资料吧23333
&lt;/p>
&lt;p>
中文社区的文档都很详细的，这个是CentOS+Redis的链接：&lt;a href="https://www.kancloud.cn/a632079/nodebb-cn/372107" _src="https://www.kancloud.cn/a632079/nodebb-cn/372107">https://www.kancloud.cn/a632079/nodebb-cn/372107&lt;/a>&amp;nbsp; ，至于Ubuntu，看我以前的博文
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfnSJ.jpg" alt="" data-load="full" style="" width="726" height="685"/>
&lt;/p>
&lt;p>
Host IP or address of your MongoDB instance是数据库的地址，如果使用的是本机，默认即可
&lt;/p>
&lt;p>
Host port of your MongoDB instance是数据库端口，如果没有改过，默认即可
&lt;/p>
&lt;p>
MongoDB username是用户名，Password of your MongoDB database是密码，前面设置过的
&lt;/p>
&lt;p>
MongoDB database name是数据库名，前面use nodebb创建的
&lt;/p>
&lt;p>
点击Install NodeBB安装
&lt;/p>
&lt;p>
终端已经有反应了
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYflex.jpg" alt="" data-load="full" style="" width="1034" height="797"/>
&lt;/p>
&lt;p>
然后开始部署
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfMO1.jpg" alt="" data-load="full" style="" width="1014" height="637"/>
&lt;/p>
&lt;p>
这可能需要几分钟，部署完成后提示你使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">./nodebb start&lt;/pre>
&lt;p>
开启nodebb
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYf7hF.jpg" alt="" data-load="full" style="" width="1056" height="658"/>
&lt;/p>
&lt;p>
NodeBB已经成功运行，并且提示你三个常用的命令：分别是停止、日志（实时）、和重启
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfGFO.jpg" alt="" data-load="full" style="" width="1529" height="572"/>
&lt;/p>
&lt;p>
打开&lt;a href="http://127.0.0.1:4567" _src="http://127.0.0.1:4567">http://127.0.0.1:4567&lt;/a>&lt;br/>
&lt;/p>
&lt;p>
已经可以正常访问！&lt;br/>
&lt;/p></description></item><item><title>在Ubuntu上搭建现代化的论坛Nodebb|NodeBB安装记录（Linux-Ubuntu篇）</title><link>https://blog.gaein.cn/passages/install-nodebb-on-ubuntu/</link><pubDate>Fri, 22 Jun 2018 23:47:33 +0800</pubDate><guid>https://blog.gaein.cn/passages/install-nodebb-on-ubuntu/</guid><description>&lt;p>
继上次&amp;nbsp;&lt;a href="https://blog-old.gaein.cn/post/nodeBB-windows-4.html" _src="https://blog-old.gaein.cn/post/nodeBB-windows-4.html">https://blog-old.gaein.cn/post/nodeBB-windows-4.html&lt;/a>&amp;nbsp;失败后，我仍然不思悔改，NodeBB就是好看！在老家闲来无事的时候租用了一个服务器，于是，故事开始了
&lt;/p>
&lt;p>
NodeBB是基于nodejs的现代化论坛程序
&lt;/p>
&lt;p>
系统我选择了Ubuntu，再多次干到凌晨四五点后，终于让网站成功运行了！
&lt;/p>
&lt;p>
&lt;br/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pphves.md.png"/>
&lt;/p>
&lt;p>
因为服务器是使用SSH链接的，所以即使有桌面，我也选择用终端（在安装NodeBB这方面桌面好像没用...）
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/PphqSS.png"/>
&lt;/p>
&lt;p>
&lt;br/>
&lt;/p>
&lt;p>
相关安装文档查看：
&lt;/p>
&lt;p>
&lt;a href="https://www.kancloud.cn/a632079/nodebb-cn/" _src="https://www.kancloud.cn/a632079/nodebb-cn/">https://www.kancloud.cn/a632079/nodebb-cn/&lt;/a>
&lt;/p>
&lt;div>
&lt;p>
&lt;br/>
&lt;/p>
&lt;p>
&lt;br/>
&lt;/p>
&lt;hr/>
&lt;p>
&lt;span style="font-size: 24px; color: ##FFC000;">前奏&lt;/span>
&lt;/p>
&lt;p>
第一步我选择切换到管理员账户（root）&lt;br/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp49YV.png"/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/PphHW8.png"/>
&lt;/p>
&lt;p>
貌似没有vim（一个强大的文本编辑软件）
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/PphOyQ.png"/>
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">apt-get install vim&lt;/pre>
&lt;p>
按y同意安装
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pphzoq.png"/>
&lt;/p>
&lt;p>
这网速真是伤感
&lt;/p>
&lt;p>
如果安装失败了，尝试用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">apt-get update&lt;/pre>
&lt;p>
更新，然后再尝试
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pphxwn.png"/>
&lt;/p>
&lt;p>
在执行第一条命令（快速安装nodejs用）的时候，又报错了&lt;br/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4pF0.png"/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4CWT.png"/>
&lt;/p>
&lt;p>
这系统真是纯洁，啥都没有...
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">apt install curl&lt;/pre>
&lt;p>
安装curl
&lt;/p>
&lt;hr/>
&lt;p>
&lt;span style="font-size: 24px; color: ##FFC000;">安装Node.js LTS&lt;/span>&lt;br/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4AOJ.png"/>
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -&lt;/pre>
&lt;p>
来快速安装Node.js
&lt;/p>
&lt;p>
如果服务器在大陆的话&lt;br/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4ky4.png"/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">vim /etc/apt/sources.list.d/nodesource.list&lt;/pre>
&lt;p>
将链接全部换成
&lt;/p>
&lt;pre class="fy-prettyprint linenums">https://mirrors.ustc.edu.cn/nodesource/deb/node_{版本号，例如: 8}.x&lt;/pre>
&lt;p>
&lt;br/>
&lt;/p>
&lt;p>
按“i”进入编辑模式，完成后按ESC退出编辑模式，再输入:wq 保存退出
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4iSU.png"/>&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4ZwR.png"/>
&lt;/p>
&lt;p>
再次更新APT源
&lt;/p>
&lt;pre class="fy-prettyprint linenums">sudo apt-get update&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4Vm9.png"/>
&lt;/p>
&lt;p>
然后通过APT安装Node.js&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">sudo apt-get install -y nodejs&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4eT1.png"/>
&lt;/p>
&lt;p>
使用&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">node -v&lt;/pre>
&lt;p>
检查版本，确实已经安装完成
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4uY6.png"/>
&lt;/p>
&lt;hr/>
&lt;p>
&lt;span style="font-size: 24px; color: ##FFC000;">数据库：Redis&lt;/span>&lt;br/>
&lt;/p>
&lt;p>
鉴于Redis体积较小等优点，数据库我选择了redis
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4KfK.png"/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">sudo add-apt-repository ppa:chris-lea/redis-server
sudo apt-get update
sudo apt-get install -y redis-server ##安装redis&lt;/pre>
&lt;p>
使用这三行来安装redis（当然是从上到下一行一行来）
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4nFx.png"/>
&lt;/p>
&lt;p>
按回车键继续
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp4xje.png"/>
&lt;/p>
&lt;p>
最后一步，慢慢等待
&lt;/p>
&lt;p>
&lt;span style="color: ##8064A2;">Redis安全设置（强烈推荐进行这一步）&lt;/span>&lt;br/>
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">vim /etc/redis/redis.conf&lt;/pre>
&lt;p>
编辑配置文件&lt;br/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp4vcD.png"/>
&lt;/p>
&lt;p>
按“i”进入编辑模式，在前面插入如下三行
&lt;/p>
&lt;pre class="fy-prettyprint linenums">requirepass yourpassword
bind 127.0.0.1
rename-command FLUSHALL &amp;quot;&amp;quot;&lt;/pre>
&lt;p>
其中，“yourpassword”是你自己设置的密码，记住它，后面要用到的
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp4X9K.png"/>
&lt;/p>
&lt;p>
我设置为2018password
&lt;/p>
&lt;p>
按ESC再输入:wq保存
&lt;/p>
&lt;p>
使用：
&lt;/p>
&lt;pre class="fy-prettyprint linenums">service redis-server restart&lt;/pre>
&lt;p>
重启redis
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp4Lh6.png"/>
&lt;/p>
&lt;p>
如果没有任何报错信息就是没问题了，否则检查你的配置文件
&lt;/p>
&lt;hr/>
&lt;p>
&lt;span style="font-size: 24px; color: ##FFC000;">NodeBB的安装&lt;/span>&lt;br/>
&lt;/p>
&lt;p>
一切无误，进入最后步骤了（这当然不是全部的全部）
&lt;/p>
&lt;p>
如果没有git，使用：
&lt;/p>
&lt;pre class="fy-prettyprint linenums">sudo apt-get install -y git build-essential&lt;/pre>
&lt;p>
安装它&lt;br/>
&lt;/p>
&lt;p>
不知道有没有，使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">git&lt;/pre>
&lt;p>
如果返回了一大串东西则是安装了，返回“Command &amp;##39;git&amp;##39; not found, but can be installed with:......”则是没有安装
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp4qtx.png"/>
&lt;/p>
&lt;p>
安装完毕后进入一个你喜欢的目录&lt;br/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp5pBd.png"/>
&lt;/p>
&lt;p>
在新版本的Ubuntu，你需要先
&lt;/p>
&lt;pre class="fy-prettyprint linenums">mkdir /www ##你喜欢的名字，带不带/有很大区别的&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp4j1O.png"/>
&lt;/p>
&lt;p>
然后再
&lt;/p>
&lt;pre class="fy-prettyprint linenums">cd /www&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp59HA.png"/>
&lt;/p>
&lt;p>
使用命令，从git克隆nodebb
&lt;/p>
&lt;pre class="fy-prettyprint linenums">sudo git clone -b v1.9.x https://github.com/NodeBB/NodeBB.git nodebb ##这将在 /home 下面 新建一个名叫nodebb的文件夹并且会把程序从Github克隆到里面&lt;/pre>
&lt;p>
在大陆，尤其是网络环境不好的情况下，这个过程可能会非常漫长（解决方案见&lt;a href="https://blog-old.gaein.cn/post/NodeBB-Linux-CentOS.html）">https://blog-old.gaein.cn/post/NodeBB-Linux-CentOS.html）&lt;/a>&lt;br/>
&lt;/p>
&lt;p>
目前NodeBB已经更新v1.10.x，请将“v1.9.x”替换成“v1.10.x”在发送命令，以获取最新版
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp5SnH.png"/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp5PAI.png"/>
&lt;/p>
&lt;p>
在50kib/s的速度下，需要将近16分钟！
&lt;/p>
&lt;p>
妈呀，终于完成了，合个影&lt;br/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp5GgU.png"/>
&lt;/p>
&lt;p>
输入：&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">cd nodebb&lt;/pre>
&lt;p>
进入目录
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp583T.png"/>
&lt;/p>
&lt;p>
使用：&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">./nodebb setup ##尽管我使用的是./nodebb start &amp;lt;=习惯的锅，由于没有运行过，仍然会进行安装&lt;/pre>
&lt;p>
进行安装
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp53CV.png"/>
&lt;/p>
&lt;p>
可能还需要一些时间，顺便一提，在新版的NodeBB（1.7以后，也不算新啦！）中，可以使用：
&lt;/p>
&lt;pre class="fy-prettyprint linenums">./nodebb install&lt;/pre>
&lt;p>
进行可视化安装，也就是在服务器上面进入
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/24/P9Gyrj.png" alt="" style="" width="1078" height="827"/>
&lt;/p>
&lt;p>
&lt;a href="http://127.0.0.1:4567">http://127.0.0.1:4567&lt;/a>
&lt;/p>
&lt;p>
进行安装，和普通的PHP博客论坛什么的差不多，很简单！
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/PpIS2T.png"/>
&lt;/p>
&lt;p>
GOOGLE字体库全责！
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/PpICMF.png"/>
&lt;/p>
&lt;p>
再次成功翻车！
&lt;/p>
&lt;p>
无奈挂VPN
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/24/P9GDxg.png" alt="" style="" width="903" height="617"/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/24/P9G2aq.png" alt="" style="" width="1359" height="441"/>
&lt;/p>
&lt;p>
这个就是安装完成了，需要你输入一些信息
&lt;/p>
&lt;p>
第一个URL used... 如果有相要对外开放，请输入实际使用的域名:端口（4567），如果使用的不是这里设置的域名，会出现 无法连接的现象
&lt;/p>
&lt;p>
第二个是直接回车
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/24/P9G0G8.png" alt="" width="390" height="50"/>
&lt;/p>
&lt;p>
第三个我们安装的数据库是redis，熟入redis即可
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/24/P9GBRS.png" alt="" width="514" height="94"/>
&lt;/p>
&lt;p>
然后是前面设置的数据库密码（LINUX输入密码不会显示任何东西！）
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/24/P9GsMQ.png" alt="" width="320" height="132"/>
&lt;/p>
&lt;p>
管理员用户名和密码
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/24/P9GgZn.png" alt="" width="428" height="139"/>
&lt;/p>
&lt;p>
完成设置
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/24/P9GRI0.png" alt="" style="" width="1371" height="807"/>
&lt;/p>
&lt;p>
NODEBB基础搭建完成！&lt;br/>
&lt;/p>
&lt;p>
&lt;br/>
&lt;/p>
&lt;/div></description></item></channel></rss>