<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>CentOS on Gaein nidb 的博客</title><link>https://blog.gaein.cn/tags/centos/</link><description>Recent content in CentOS on Gaein nidb 的博客</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Thu, 16 Apr 2020 15:40:30 +0800</lastBuildDate><atom:link href="https://blog.gaein.cn/tags/centos/index.xml" rel="self" type="application/rss+xml"/><item><title>CentOS配置PHP+Nginx+MySQL——记一次环境配置的过程</title><link>https://blog.gaein.cn/passages/config-lnmp-on-centos/</link><pubDate>Thu, 16 Apr 2020 15:40:30 +0800</pubDate><guid>https://blog.gaein.cn/passages/config-lnmp-on-centos/</guid><description>&lt;h2 id="缘由">缘由
&lt;/h2>&lt;blockquote>
&lt;p>最近阿里云的服务器到期了，由于阿里云学生机活动规则更改了，而我手里的服务器已经升级无法再使用优惠价格续费。只好中转其它服务器，再将手里的第二台服务器退款。总之是很折腾的&lt;/p>&lt;/blockquote>
&lt;h2 id="过程">过程
&lt;/h2>&lt;p>我选择的安装方式并不是一键安装包、也没有用面板。总感觉那些东西安装完成之后不在自己习惯的位置。用着很不舒服，改配置文件还要搜索。所以我使用熟悉的yum来进行安装&lt;/p>
&lt;h3 id="使用我自己写的脚本">使用我自己写的脚本
&lt;/h3>&lt;p>&lt;code>wget https://res.gaein.cn/files/bash/init.sh&amp;amp;&amp;amp;sudo ./init/sh&lt;/code>&lt;/p>
&lt;p>进行自动化安装
（如果提示未知命令请先安装wget，参考下文）&lt;/p>
&lt;blockquote>
&lt;p>脚本因为用不到所以删了&lt;/p>&lt;/blockquote>
&lt;h3 id="安装基础软件i">安装基础软件I
&lt;/h3>&lt;p>包括&lt;/p>
&lt;ul>
&lt;li>wget (下载)&lt;/li>
&lt;li>tmux (终端复用)。&lt;/li>
&lt;/ul>
&lt;p>没有他们无法完成下一步的配置yum源。&lt;/p>
&lt;h4 id="安装wget">安装wget
&lt;/h4>&lt;p>使用命令 &lt;code>wget&lt;/code>&lt;/p>
&lt;p>如果输出&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">wget: missing URL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage: wget &lt;span class="o">[&lt;/span>OPTION&lt;span class="o">]&lt;/span>... &lt;span class="o">[&lt;/span>URL&lt;span class="o">]&lt;/span>...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Try &lt;span class="s1">&amp;#39;wget --help&amp;#39;&lt;/span> &lt;span class="k">for&lt;/span> more options.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>则已经安装wget。&lt;/p>
&lt;p>如果输出未知命令之类的，则使用 &lt;code>yum install -y wget&lt;/code> 安装wget。&lt;/p>
&lt;h4 id="安装tmux">安装tmux
&lt;/h4>&lt;blockquote>
&lt;p>tmux是一款优秀的终端复用神器，它可以在后端运行。也就是在里面运行的进程不会在你关闭SSH时结束。对于压缩转移大文件、下载大文件很有用（比如稍后我们安装MySQL用到将近一个小时，就是在tmux里面操作的）同时tmux还提供窗口切分、切换，让我们更方便的使用终端。&lt;/p>&lt;/blockquote>
&lt;p>&lt;strong>目前已知tmux和lrzsz不兼容&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Config-LNMP-On-CentOS/01.webp"
loading="lazy"
alt="tmux截屏"
>&lt;/p>
&lt;p>使用命令 &lt;code>tmux --help&lt;/code> 来查看是否安装了tmux。如果输出&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">usage: tmux &lt;span class="o">[&lt;/span>-2CluvV&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-c shell-command&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-f file&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-L socket-name&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>-S socket-path&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="nb">command&lt;/span> &lt;span class="o">[&lt;/span>flags&lt;span class="o">]]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>则已经安装，输出未知指令之类的，则使用 &lt;code>yum install -y tmux&lt;/code> 进行安装&lt;/p>
&lt;h5 id="使用tmux">使用tmux
&lt;/h5>&lt;p>tmux采用快捷键 &lt;code>Ctrl+B&lt;/code> 来激活控制台。同时按下键盘上面的&lt;code>Ctrl&lt;/code> 和 &lt;code>B&lt;/code> ，然后在按键盘就是tmux命令（快捷键）了。注意，使用 &lt;code>Ctrl+C&lt;/code> 无法强制结束tmux，只会结束里面的任务。
&lt;code>Ctrl+B&lt;/code> 后的常用快捷键（注意先按Ctrl+B再按下快捷键！）&lt;/p>
&lt;ul>
&lt;li>&lt;code>D&lt;/code>隐藏tmux（类似于windows的最小化，隐藏窗口而不退出，里面的进程继续）&lt;/li>
&lt;li>&lt;code>X&lt;/code>关闭tmux当前窗口（需要输入 &lt;code>y/n&lt;/code> 确定或取消）&lt;/li>
&lt;li>&lt;code>N&lt;/code>下一个窗口&lt;/li>
&lt;li>&lt;code>P&lt;/code>上一个窗口&lt;/li>
&lt;li>&lt;code>%&lt;/code>将窗口分为左右两块&lt;/li>
&lt;li>&lt;code>&amp;quot;&lt;/code>将窗口分为上下两块，注意是英文半角的&amp;quot;&lt;/li>
&lt;/ul>
&lt;p>记住这些命令也就暂时够了，其它的以后再研究&lt;/p>
&lt;h3 id="配置yum源">配置yum源
&lt;/h3>&lt;p>默认的yum源速度较慢、而且提供的软件不是很多。&lt;/p>
&lt;h4 id="配置epel">配置epel
&lt;/h4>&lt;p>使用命令 &lt;code>yum install -y epel-release&lt;/code> 安装epel&lt;/p>
&lt;h4 id="使用阿里镜像">使用阿里镜像
&lt;/h4>&lt;p>输入命令&lt;/p>
&lt;p>&lt;code>wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo&lt;/code>&lt;/p>
&lt;p>下载repo文件&lt;/p>
&lt;h4 id="配置webstatic">配置WebStatic
&lt;/h4>&lt;p>WebStatic提供最高到PHP7.2（目前我就需要PHP,yum默认的是PHP5.6）&lt;/p>
&lt;p>使用命令&lt;/p>
&lt;p>&lt;code>yum install -y https://mirror.WebStatic.com/yum/el7/WebStatic-release.rpm &lt;/code>&lt;/p>
&lt;p>安装rpm包&lt;/p>
&lt;p>配置完后别忘了使用&lt;/p>
&lt;p>&lt;code>yum clean all &amp;amp;&amp;amp; yum makecache&lt;/code> 来清空yum的缓存，使用 &lt;code>yum update&lt;/code> 来进行更新。&lt;/p>
&lt;h3 id="安装基础软件ii">安装基础软件II
&lt;/h3>&lt;p>操作服务器的一些常用软件。一般来说都预装的。可惜，我这神奇服务器没有。&lt;/p>
&lt;p>包括：&lt;/p>
&lt;ul>
&lt;li>vim(文本编辑)&lt;/li>
&lt;li>curl(下载)&lt;/li>
&lt;li>tar(tar压缩)&lt;/li>
&lt;li>7za(7z压缩)&lt;/li>
&lt;li>lrzsz(通过XShell终端传输文件)&lt;/li>
&lt;li>git&lt;/li>
&lt;/ul>
&lt;p>对于这些软件我无所谓版本，直接 &lt;code>yum install&lt;/code> 安装就可以(不说都是最新的也旧不了太多吧)&lt;/p>
&lt;p>这些软件都可以使用yum安装&lt;/p>
&lt;p>&lt;code>yum install -y curl lrzsz yum-utils vim p7zip git-core&lt;/code>&lt;/p>
&lt;h3 id="安装nginx">安装nginx
&lt;/h3>&lt;p>使用命令&lt;/p>
&lt;p>&lt;code>wget http://nginx.org/packages/centos/7/x86_64/RPMS/nginx-1.16.1-1.el7.ngx.x86_64.rpm &lt;/code>&lt;/p>
&lt;p>下载rpm包，然使用命令&lt;/p>
&lt;p>&lt;code>rpm -ivh nginx-1.16.1-1.el7.ngx.x86_64.rpm&lt;/code>&lt;/p>
&lt;p>安装nginx官方的rpm（版本1.16.1）需要其它可以自行到官方查看&lt;/p>
&lt;p>&lt;a class="link" href="https://nginx.org/packages/" target="_blank" rel="noopener"
>nginx官网&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>注意：使用 &lt;code>yum install nginx&lt;/code> 安装的为WebStatic源中的1.12版&lt;/p>&lt;/blockquote>
&lt;h4 id="常用命令">常用命令
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">nginx -v &lt;span class="c1">#查看nginx版本&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service nginx start&lt;span class="p">|&lt;/span>stop&lt;span class="p">|&lt;/span>restart &lt;span class="c1">#启动|停止|重启nginx服务&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx -t &lt;span class="c1">#检查配置文件是否正确&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx -s reload &lt;span class="c1">#重载配置文件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx &lt;span class="c1">#启动nginx&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="安装php">安装PHP
&lt;/h3>&lt;p>使用命令&lt;/p>
&lt;p>&lt;code>yum install -y php72w-common php72w-fpm php72w-opcache php72w-gd php72w-mysqlnd php72w-mbstring php72w-pecl-redis php72w-pecl-memcached php72w-devel&lt;/code>&lt;/p>
&lt;p>进行安装&lt;/p>
&lt;p>这里安装了PHP PHP-FPM和一些常用模块，可以自行裁决。一般这些模块已经可以完美的支持WordPress、ZBlog等博客程序了&lt;/p>
&lt;blockquote>
&lt;p>如果想要安装PHP其它版本，把72w改成版本+w就可以咯&lt;/p>&lt;/blockquote>
&lt;h3 id="安装mysql">安装MySQL
&lt;/h3>&lt;p>参考以前写过的文章：&lt;/p>
&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/MySQL8-CentOS7/" target="_blank" rel="noopener"
>CentOS部署MySQL8步骤&lt;/a>&lt;/p>
&lt;p>进行，这里只写主要步骤&lt;/p>
&lt;p>下载rpm&lt;/p>
&lt;p>&lt;code>wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm&lt;/code>&lt;/p>
&lt;p>//由于MySQL的rpm很大，所以采用先下载后安装&lt;/p>
&lt;p>使用命令导入MySQL rpm&lt;/p>
&lt;p>&lt;code>sudo rpm -Uvh mysql80-community-release-el7-3.noarch.rpm&lt;/code>&lt;/p>
&lt;p>使用命令&lt;/p>
&lt;p>&lt;code>yum install -y mysql-community-server &lt;/code>&lt;/p>
&lt;p>来安装&lt;/p>
&lt;h3 id="常用命令-1">常用命令
&lt;/h3>&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Config-LNMP-On-CentOS/02.webp"
loading="lazy"
alt="mysql截屏"
>&lt;/p>
&lt;p>更多命令见 &lt;a class="link" href="https://blog.gaein.cn/passages/MySQL-usage/" target="_blank" rel="noopener"
>MySQL常用命令：导入导出、创建数据库等&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">service mysqld start &lt;span class="c1">##启动&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service mysqld status &lt;span class="c1">##查看状态&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo grep &lt;span class="s1">&amp;#39;temporary password&amp;#39;&lt;/span> /var/log/mysqld.log &lt;span class="c1">##查看默认密码&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql -u root -p &lt;span class="c1">##连接&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;root&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IDENTIFIED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;pWD123456-&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">#更改密码
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SHOW&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASES&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">#显示数据库
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">USE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">数据库名&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">#切换到数据库
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">exit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">#退出
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>在CentOS上搭建现代化的论坛Nodebb|NodeBB安装记录（Linux-CentOS篇）</title><link>https://blog.gaein.cn/passages/install-nodebb-on-centos/</link><pubDate>Sat, 21 Jul 2018 19:20:03 +0800</pubDate><guid>https://blog.gaein.cn/passages/install-nodebb-on-centos/</guid><description>&lt;p>
CentOS在各种服务器上使用的较多，所以捏，就来尝试一下CnetOS上安装NodeBB
&lt;/p>
&lt;p>
CentOS 7 on VMWare
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8H8tf.jpg" alt="" data-load="full" style="" width="1717" height="935"/>
&lt;/p>
&lt;p>
不过我这次选择的数据库是MongoDB
&lt;/p>
&lt;p>
一、准备工作
&lt;/p>
&lt;p>
打开终端，切换到root用户
&lt;/p>
&lt;pre class="fy-prettyprint linenums">su root&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8H3AP.jpg" alt="https://s1.ax1x.com/2018/07/21/P8H3AP.jpg"/>
&lt;/p>
&lt;p>
关闭SELinux（有些可能没有，跳过）
&lt;/p>
&lt;pre class="fy-prettyprint linenums">vim /etc/sysconfig/selinux&lt;/pre>
&lt;p>
如果没有vim（见&lt;a href="https://blog-old.gaein.cn/post/Nodebb-Linux-Ubuntu.html" target="_self" textvalue="https://blog-old.gaein.cn/post/Nodebb-Linux-Ubuntu.html">https://blog-old.gaein.cn/post/Nodebb-Linux-Ubuntu.html&lt;/a>
&lt;/p>
&lt;p>
就用yum安装呗
&lt;/p>
&lt;pre class="fy-prettyprint linenums">yum install vim ##如果 vim 指令未安装，那就安装它&lt;/pre>
&lt;p>
按下i键（当然如果你想知道有什么键可以自行百度）
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8HOud.jpg" alt="" data-load="full" style="" width="750" height="521"/>
&lt;/p>
&lt;p>
找到 &lt;code>SELINUX&lt;/code> 然后修改成 &lt;code>disabled&lt;/code>.
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8Hbge.jpg" alt="" data-load="full" style="" width="756" height="517"/>
&lt;/p>
&lt;p>
按下ESC退出编辑模式，输入:，再输入退出并保存命令：wq
&lt;/p>
&lt;pre class="fy-prettyprint linenums">yum update
yum -y install epel-release
yum -y groupinstall &amp;quot;Development Tools&amp;quot;
yum -y install git ImageMagick ImageMagick-devel##更新系统并安装一些基础工具&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8HqjH.jpg" alt="" width="619" height="477"/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8bm5V.jpg" alt="" data-load="full" style="" width="769" height="547"/>
&lt;/p>
&lt;p>
二、安装NodeJS
&lt;/p>
&lt;p>
在Github可以找到最新的nvm安装命令
&lt;/p>
&lt;p>
&lt;a href="https://github.com/creationix/nvm" _src="https://github.com/creationix/nvm">https://github.com/creationix/nvm&lt;/a>&lt;br/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8buCT.jpg" alt="" data-load="full" style="" width="1098" height="732"/>
&lt;/p>
&lt;p>
所以我们使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash
##或者
wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash&lt;/pre>
&lt;p>
安装nvm（这是一个快速部署的脚本）
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8beU0.jpg" alt="" data-load="full" style="" width="744" height="193"/>
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">export NVM_DIR=&amp;quot;$HOME/.nvm&amp;quot;
[ -s &amp;quot;$NVM_DIR/nvm.sh&amp;quot; ] &amp;amp;&amp;amp; . &amp;quot;$NVM_DIR/nvm.sh&amp;quot; ## This loads nvm&lt;/pre>
&lt;p>
把nvm添加到环境变量
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">source ~/.bashrc&lt;/pre>
&lt;p>
令环境变量生效
&lt;/p>
&lt;p>
最后使用&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">command -v nvm&lt;/pre>
&lt;p>
检查是否安装成功
&lt;/p>
&lt;p>
安装成功之后，如果是国内的机器需要使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">export NVM_NODEJS_ORG_MIRROR=http://npm.taobao.org/mirrors/node
export NVM_IOJS_ORG_MIRROR=http://npm.taobao.org/mirrors/iojs&lt;/pre>
&lt;p>
让nvm使用淘宝源&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">npm config set registry http://registry.npm.taobao.org/&lt;/pre>
&lt;p>
让npm使用淘宝源
&lt;/p>
&lt;p>
使用&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">nvm install --lts&lt;/pre>
&lt;p>
安装lts版本的nodejs
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfSzj.jpg" alt="" data-load="full" style="" width="723" height="233"/>
&lt;/p>
&lt;p>
之后记得使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">npm -v&lt;/pre>
&lt;p>
和
&lt;/p>
&lt;pre class="fy-prettyprint linenums">nodeb -v&lt;/pre>
&lt;p>
检查版本，如果成功输出版本号，则安装成功
&lt;/p>
&lt;p>
三，安装数据库（MongoDB）
&lt;/p>
&lt;p>
使用命令&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">vim /etc/yum.repos.d/mongodb-org-3.6.repo&lt;/pre>
&lt;p>
创建文件并且输入i进行编辑，将以下内容粘贴进去
&lt;/p>
&lt;pre class="fy-prettyprint linenums">[mongodb-org-3.6]name=MongoDB
Repositorybaseurl=
gpgcheck=1
enabled=1
gpgkey=https://www.mongodb.org/static/pgp/server-3.6.asc&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYWzWQ.jpg" alt="" data-load="full" style="" width="781" height="534"/>
&lt;/p>
&lt;p>
输入:wq保存并退出
&lt;/p>
&lt;p>
再使用&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">yum updata&lt;/pre>
&lt;p>
更新
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfkwV.jpg" alt="" width="380" height="181"/>
&lt;/p>
&lt;p>
使用&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">yum -y install mongodb-org&lt;/pre>
&lt;p>
安装mongoDB
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYWvFS.jpg" alt="" data-load="full" style="" width="738" height="506"/>
&lt;/p>
&lt;p>
因为是国外的服务器所以速度不行，当然也可以自行在使用update之前把链接替换为国内的镜像站
&lt;/p>
&lt;p>
完成之后使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">service mongod start ##启动 Mongodb
mongod --version ##查看 Mongodb 版本&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYf9Qs.jpg" alt="" width="555" height="478"/>
&lt;/p>
&lt;p>
&lt;span style="color: ##0070C0;">有一点需要注意：如果版本3.4.10的话需要升级，因为3.4.10以下有风险&lt;/span>
&lt;/p>
&lt;p>
安装完成后，为了消除 MongoDB 的性能警告，需要关闭 Linux 巨型页：
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">echo never &amp;gt; /sys/kernel/mm/transparent_hugepage/enabled
echo never &amp;gt; /sys/kernel/mm/transparent_hugepage/defrag&lt;/pre>
&lt;p>
来关闭
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfKyR.jpg" alt="" data-load="full" style="" width="744" height="63"/>
&lt;/p>
&lt;p>
不同于官方文档，在获取nodebb之前，我选择先进行数据库设置
&lt;/p>
&lt;p>
输入
&lt;/p>
&lt;pre class="fy-prettyprint linenums">mongo&lt;/pre>
&lt;p>
进入mongoDB的命令行
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfPLq.jpg" alt="" data-load="full" style="" width="777" height="373"/>
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">use nodebb&lt;/pre>
&lt;p>
新建数据库（名为nodebb）
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfFe0.jpg" alt="" width="224" height="64"/>
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">db.createUser({user: &amp;quot;nodebb&amp;quot; ,pwd: &amp;quot;替换成你的密码&amp;quot; ,roles:[ &amp;quot;readWrite&amp;quot; ]})&lt;/pre>
&lt;p>
添加用户角色&lt;span style="color: ##0070C0;">（牢记用户名（此处为nodebb）和密码！）&lt;/span>
&lt;/p>
&lt;p>
&lt;span style="color: ##0070C0;">&lt;img src="https://s1.ax1x.com/2018/07/24/PYfAoT.jpg" alt="" data-load="full" style="" width="767" height="113"/>&lt;/span>
&lt;/p>
&lt;p>
如果需要在nodebb后台查看数据库数据，输入以下代码
&lt;/p>
&lt;pre class="fy-prettyprint linenums">db.grantRolesToUser( &amp;quot;nodebb&amp;quot; ,[{ role: &amp;quot;clusterMonitor&amp;quot;, db: &amp;quot;admin&amp;quot; }]);&lt;/pre>
&lt;p>
打开权限认证，使用命令
&lt;/p>
&lt;pre class="fy-prettyprint linenums">vim /etc/mongod.conf&lt;/pre>
&lt;p>
取消注释并改为
&lt;/p>
&lt;pre class="fy-prettyprint linenums">security:
authorization: enabled&lt;/pre>
&lt;p>
如图所示
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfeW4.jpg" alt="" data-load="full" style="" width="752" height="270"/>
&lt;/p>
&lt;p>
使用&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">service mongod restart&lt;/pre>
&lt;p>
重启mongoDB
&lt;/p>
&lt;p>
四、安装NodeBB
&lt;/p>
&lt;p>
如果没有git，请使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">yum install git&lt;/pre>
&lt;p>
中文社区的文档中已经说明
&lt;/p>
&lt;blockquote>
&lt;p>
&lt;em>&lt;strong>在开始之前:&lt;/strong>&lt;/em>&lt;br/>&lt;strong>① 提前切换成root用户，免得麻烦。&lt;/strong>&lt;br/>&lt;strong>② 不要直接下载 Github 上发布的 release 压缩包&lt;/strong>，那里面没有 &lt;code>.git/config&lt;/code> 配置文件，而在安装过程中需要读取配置文件的值。正确的做法是使用 Git 从 GitHub 上克隆源代码。&lt;br/>
&lt;/p>
&lt;/blockquote>
&lt;p>
新建一个目录（如果是云服务器的话最好放在数据盘里面，默认的/root目录不会太大，不过因为我比较懒就直接这样了）
&lt;/p>
&lt;p>
可以使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">mkdir 目录&lt;/pre>
&lt;p>
来新建文件夹（注意有&amp;##39;/&amp;##39;和没有的区别）
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">cd 目录&lt;/pre>
&lt;p>
进入刚刚新建的目录（同样注意&amp;##39;/&amp;##39;）
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">git clone -b v1.10.x https://github.com/NodeBB/NodeBB.git nodebb##把nodebb克隆进nodebb文件夹&lt;/pre>
&lt;blockquote>
&lt;p>
现在，你可以使用国内的镜像仓库(&lt;code>https://gitee.com/NodeBB-CN/NodeBB.git&lt;/code>)来提高连接速度。&lt;br/>
&lt;/p>
&lt;/blockquote>
&lt;p>
这是中文社区文档上的话，但是...
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfCyn.jpg" alt="" data-load="full" style="" width="754" height="76"/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/25/PYLpqg.jpg" alt="" width="457" height="55"/>（这个是当时没有截图后来用物理机补的:D）
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/25/PYLCZQ.jpg" alt="" width="453" height="420"/>嗯...
&lt;/p>
&lt;p>
所以我闲的创建了一个仓库，可以使用 &lt;a href="https://gitee.com/nidb/NodeBB.git" _src="https://gitee.com/nidb/NodeBB.git">https://gitee.com/nidb/NodeBB.git&lt;/a>&lt;br/>
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">./nodebb setup&lt;/pre>
&lt;p>
来安装，当然，上一篇（&lt;a href="https://blog-old.gaein.cn/post/Nodebb-Linux-Ubuntu.html" target="_blank">在Ubuntu上搭建现代化的论坛Nodebb|NodeBB安装记录（Linux-Ubuntu篇）&lt;/a>）中说过，可以使用可视化的界面来安装，使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">./nodebb install&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfVFU.jpg" alt="" data-load="full" style="" width="1722" height="937"/>
&lt;/p>
&lt;p>
和普通的博客安装差不多啦！
&lt;/p>
&lt;p>
说明：
&lt;/p>
&lt;p>
Web Address(URL)是以后访问的地址，如果是搭建的论坛记得写域名（可以不加端口，以后在nginx反代理）当然，建议先使用默认的调试。注意不要忘记“http://”，结尾不要加&amp;##39;/&amp;##39;，只有这个链接能够访问论坛，其他链接访问会显示链接断开（比如我有一个服务器，IP是1.2.3.4，域名www.exp.com和exp.com都A记录过去了，这里我填写www.exp.com，那么exp.com和1.2.3.4访问的时候都会显示与“NodeBB的链接断开”）&lt;br/>
&lt;/p>
&lt;p>
Username，Email Address ，Password是论坛管理员的账号邮箱密码，牢记。邮箱要填写可以用的，以便以后开邮件验证功能的时候不用再去修改
&lt;/p>
&lt;p>
Confirm Password是确认密码
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfZYF.jpg" alt="" data-load="full" style="" width="778" height="693"/>
&lt;/p>
&lt;p>
数据库选择MongoDB
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYful9.jpg" alt="" data-load="full" style="" width="1118" height="185"/>
&lt;/p>
&lt;p>
Redis的话自己去网上看资料吧23333
&lt;/p>
&lt;p>
中文社区的文档都很详细的，这个是CentOS+Redis的链接：&lt;a href="https://www.kancloud.cn/a632079/nodebb-cn/372107" _src="https://www.kancloud.cn/a632079/nodebb-cn/372107">https://www.kancloud.cn/a632079/nodebb-cn/372107&lt;/a>&amp;nbsp; ，至于Ubuntu，看我以前的博文
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfnSJ.jpg" alt="" data-load="full" style="" width="726" height="685"/>
&lt;/p>
&lt;p>
Host IP or address of your MongoDB instance是数据库的地址，如果使用的是本机，默认即可
&lt;/p>
&lt;p>
Host port of your MongoDB instance是数据库端口，如果没有改过，默认即可
&lt;/p>
&lt;p>
MongoDB username是用户名，Password of your MongoDB database是密码，前面设置过的
&lt;/p>
&lt;p>
MongoDB database name是数据库名，前面use nodebb创建的
&lt;/p>
&lt;p>
点击Install NodeBB安装
&lt;/p>
&lt;p>
终端已经有反应了
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYflex.jpg" alt="" data-load="full" style="" width="1034" height="797"/>
&lt;/p>
&lt;p>
然后开始部署
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfMO1.jpg" alt="" data-load="full" style="" width="1014" height="637"/>
&lt;/p>
&lt;p>
这可能需要几分钟，部署完成后提示你使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">./nodebb start&lt;/pre>
&lt;p>
开启nodebb
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYf7hF.jpg" alt="" data-load="full" style="" width="1056" height="658"/>
&lt;/p>
&lt;p>
NodeBB已经成功运行，并且提示你三个常用的命令：分别是停止、日志（实时）、和重启
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfGFO.jpg" alt="" data-load="full" style="" width="1529" height="572"/>
&lt;/p>
&lt;p>
打开&lt;a href="http://127.0.0.1:4567" _src="http://127.0.0.1:4567">http://127.0.0.1:4567&lt;/a>&lt;br/>
&lt;/p>
&lt;p>
已经可以正常访问！&lt;br/>
&lt;/p></description></item></channel></rss>