<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>MySQL on Gaein nidb 的博客</title><link>https://blog.gaein.cn/tags/mysql/</link><description>Recent content in MySQL on Gaein nidb 的博客</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Fri, 17 Apr 2020 15:10:44 +0800</lastBuildDate><atom:link href="https://blog.gaein.cn/tags/mysql/index.xml" rel="self" type="application/rss+xml"/><item><title>MySQL常用命令：导入导出、创建数据库等</title><link>https://blog.gaein.cn/passages/mysql-usage/</link><pubDate>Fri, 17 Apr 2020 15:10:44 +0800</pubDate><guid>https://blog.gaein.cn/passages/mysql-usage/</guid><description>&lt;p>由于博客和其它的程序，经常要接触MySQL数据库。自己暑假想要学习PHP，肯定也要用到MySQL数据库。为了避免经常上网查常用的命令，就写篇博客备用。&lt;/p>
&lt;p>p.s. 为什么我感觉我从一个写桌面程序(CSharp.NET)的孩子变成了web运维(???)&lt;/p>
&lt;h2 id="相关链接">相关链接
&lt;/h2>&lt;p>&lt;a class="link" href="https://www.runoob.com/mysql" target="_blank" rel="noopener"
>菜鸟教程&lt;/a>
&lt;a class="link" href="https://www.mysql.com/downloads/" target="_blank" rel="noopener"
>MySQL官网下载&lt;/a>&lt;/p>
&lt;h2 id="终端命令">终端命令
&lt;/h2>&lt;h6 id="连接mysql">连接MySQL
&lt;/h6>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mysql -p &lt;span class="c1">##使用root连接，如果需要在命令行中输入密码，则密码与&amp;#34;-p&amp;#34;之间没有空格&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>参数&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">-u &lt;span class="c1">##指定用户&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-p &lt;span class="c1">##密码（必选，新版MySQL已经不支持无密码登录）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-P &lt;span class="c1">##端口，默认3306&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-h &lt;span class="c1">##服务器地址&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-D &lt;span class="c1">##数据库名&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="开启关闭mysql">开启、关闭MySQL
&lt;/h6>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mysqladmin -u root -p shutdown &lt;span class="c1">##关闭MySQL，需要输入密码&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##切记！千万不要使用kill等命令关闭MySQL，可能会造成数据损坏&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service mysqld start &lt;span class="c1">##启动MySQL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service mysqld status &lt;span class="c1">##查看运行状态&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="查看默认密码">查看默认密码
&lt;/h6>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo grep &lt;span class="s1">&amp;#39;temporary password&amp;#39;&lt;/span> /var/log/mysqld.log &lt;span class="c1">##刚安装完MySQL时候使用此命令查看初始化的密码&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="备份与恢复">备份与恢复
&lt;/h2>&lt;h6 id="备份导出sql文件">备份（导出.sql文件）
&lt;/h6>&lt;p>终端输入：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mysqldump -u root -p 用户名 数据库名 &amp;gt; dump.sql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="恢复导入sql文件">恢复（导入.sql文件）
&lt;/h6>&lt;p>MySQL输入：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">SOURCE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">文件路径&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="修复">修复
&lt;/h6>&lt;p>有时候错误的关闭MySQL会造成数据损害，此时可以尝试修复。MySQL内输入命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CHECK&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">表名称&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="c1">##检查数据表是否损坏
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">REPAIRE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">表名称&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="c1">##修复损坏的表
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">REPAIR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">EXTENDED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">表名称&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="c1">##速度慢，修复率高
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="mysql命令">MySQL命令
&lt;/h2>&lt;h6 id="用户管理">用户管理
&lt;/h6>&lt;blockquote>
&lt;p>新版MySQL的密码规则要求密码必须包含大小写字母、特殊字符、数字，并且长度在8个字符及以上。不符合会弹出&amp;quot;ERROR 1819 (HY000): Your password does not satisfy the current policy requirements&amp;quot;
在某些数据库中localhost可能是&amp;quot;%&amp;quot;
########## 新建用户&lt;/p>&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;用户名&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IDENTIFIED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;密码&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>########## 添加权限&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">GRANT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">权限&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">数据库&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="err">数据表&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;用户名&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WITH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">GRANT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">OPTION&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其中权限有&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">1) 授予数据库权限时，&amp;lt;权限类型&amp;gt;可以指定为以下值：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SELECT：表示授予用户可以使用 SELECT 语句访问特定数据库中所有表和视图的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INSERT：表示授予用户可以使用 INSERT 语句向特定数据库中所有表添加数据行的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DELETE：表示授予用户可以使用 DELETE 语句删除特定数据库中所有表的数据行的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UPDATE：表示授予用户可以使用 UPDATE 语句更新特定数据库中所有数据表的值的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REFERENCES：表示授予用户可以创建指向特定的数据库中的表外键的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CREATE：表示授权用户可以使用 CREATE TABLE 语句在特定数据库中创建新表的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ALTER：表示授予用户可以使用 ALTER TABLE 语句修改特定数据库中所有数据表的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SHOW VIEW：表示授予用户可以查看特定数据库中已有视图的视图定义的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CREATE ROUTINE：表示授予用户可以为特定的数据库创建存储过程和存储函数的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ALTER ROUTINE：表示授予用户可以更新和删除数据库中已有的存储过程和存储函数的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INDEX：表示授予用户可以在特定数据库中的所有数据表上定义和删除索引的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DROP：表示授予用户可以删除特定数据库中所有表和视图的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CREATE TEMPORARY TABLES：表示授予用户可以在特定数据库中创建临时表的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CREATE VIEW：表示授予用户可以在特定数据库中创建新的视图的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">EXECUTE ROUTINE：表示授予用户可以调用特定数据库的存储过程和存储函数的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LOCK TABLES：表示授予用户可以锁定特定数据库的已有数据表的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ALL 或 ALL PRIVILEGES：表示以上所有权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2) 授予表权限时，&amp;lt;权限类型&amp;gt;可以指定为以下值：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SELECT：授予用户可以使用 SELECT 语句进行访问特定表的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INSERT：授予用户可以使用 INSERT 语句向一个特定表中添加数据行的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DELETE：授予用户可以使用 DELETE 语句从一个特定表中删除数据行的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DROP：授予用户可以删除数据表的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UPDATE：授予用户可以使用 UPDATE 语句更新特定数据表的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ALTER：授予用户可以使用 ALTER TABLE 语句修改数据表的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REFERENCES：授予用户可以创建一个外键来参照特定数据表的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CREATE：授予用户可以使用特定的名字创建一个数据表的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INDEX：授予用户可以在表上定义索引的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ALL 或 ALL PRIVILEGES：所有的权限名。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>（权限列表摘自biancheng.net）
########## 回收权限&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">REVOKE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">权限&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">数据库&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="err">数据表&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;用户名&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>########## 更改密码&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;用户名&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IDENTIFIED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;密码&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">##更改密码
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>########## 删除用户&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;用户名&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="数据管理">数据管理
&lt;/h6>&lt;p>########## 列出数据库&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SHOW&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASES&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>########## 选中数据库&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">USE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">数据库名&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>########## 查看数据库大小&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">USE information_schema;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">select concat(round(sum(data_length/1024/1024),2),&amp;#39;MB&amp;#39;) as data from tables;##查看总大小
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">select concat(round(sum(data_length/1024/1024),2),&amp;#39;MB&amp;#39;) as data from tables where table_schema=&amp;#39;数据库名&amp;#39;;##查看指定数据库大小
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">select concat(round(sum(data_length/1024/1024),2),&amp;#39;MB&amp;#39;) as data from tables where table_schema=&amp;#39;数据库名&amp;#39; and table_name=&amp;#39;表名&amp;#39;;##查看指定表的大小
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>########## 新建数据库&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">数据库名&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>########## 删除数据库&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">数据库名&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>CentOS配置PHP+Nginx+MySQL——记一次环境配置的过程</title><link>https://blog.gaein.cn/passages/config-lnmp-on-centos/</link><pubDate>Thu, 16 Apr 2020 15:40:30 +0800</pubDate><guid>https://blog.gaein.cn/passages/config-lnmp-on-centos/</guid><description>&lt;h2 id="缘由">缘由
&lt;/h2>&lt;blockquote>
&lt;p>最近阿里云的服务器到期了，由于阿里云学生机活动规则更改了，而我手里的服务器已经升级无法再使用优惠价格续费。只好中转其它服务器，再将手里的第二台服务器退款。总之是很折腾的&lt;/p>&lt;/blockquote>
&lt;h2 id="过程">过程
&lt;/h2>&lt;p>我选择的安装方式并不是一键安装包、也没有用面板。总感觉那些东西安装完成之后不在自己习惯的位置。用着很不舒服，改配置文件还要搜索。所以我使用熟悉的yum来进行安装&lt;/p>
&lt;h3 id="使用我自己写的脚本">使用我自己写的脚本
&lt;/h3>&lt;p>&lt;code>wget https://res.gaein.cn/files/bash/init.sh&amp;amp;&amp;amp;sudo ./init/sh&lt;/code>&lt;/p>
&lt;p>进行自动化安装
（如果提示未知命令请先安装wget，参考下文）&lt;/p>
&lt;blockquote>
&lt;p>脚本因为用不到所以删了&lt;/p>&lt;/blockquote>
&lt;h3 id="安装基础软件i">安装基础软件I
&lt;/h3>&lt;p>包括&lt;/p>
&lt;ul>
&lt;li>wget (下载)&lt;/li>
&lt;li>tmux (终端复用)。&lt;/li>
&lt;/ul>
&lt;p>没有他们无法完成下一步的配置yum源。&lt;/p>
&lt;h4 id="安装wget">安装wget
&lt;/h4>&lt;p>使用命令 &lt;code>wget&lt;/code>&lt;/p>
&lt;p>如果输出&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">wget: missing URL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage: wget &lt;span class="o">[&lt;/span>OPTION&lt;span class="o">]&lt;/span>... &lt;span class="o">[&lt;/span>URL&lt;span class="o">]&lt;/span>...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Try &lt;span class="s1">&amp;#39;wget --help&amp;#39;&lt;/span> &lt;span class="k">for&lt;/span> more options.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>则已经安装wget。&lt;/p>
&lt;p>如果输出未知命令之类的，则使用 &lt;code>yum install -y wget&lt;/code> 安装wget。&lt;/p>
&lt;h4 id="安装tmux">安装tmux
&lt;/h4>&lt;blockquote>
&lt;p>tmux是一款优秀的终端复用神器，它可以在后端运行。也就是在里面运行的进程不会在你关闭SSH时结束。对于压缩转移大文件、下载大文件很有用（比如稍后我们安装MySQL用到将近一个小时，就是在tmux里面操作的）同时tmux还提供窗口切分、切换，让我们更方便的使用终端。&lt;/p>&lt;/blockquote>
&lt;p>&lt;strong>目前已知tmux和lrzsz不兼容&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Config-LNMP-On-CentOS/01.webp"
loading="lazy"
alt="tmux截屏"
>&lt;/p>
&lt;p>使用命令 &lt;code>tmux --help&lt;/code> 来查看是否安装了tmux。如果输出&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">usage: tmux &lt;span class="o">[&lt;/span>-2CluvV&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-c shell-command&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-f file&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-L socket-name&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>-S socket-path&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="nb">command&lt;/span> &lt;span class="o">[&lt;/span>flags&lt;span class="o">]]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>则已经安装，输出未知指令之类的，则使用 &lt;code>yum install -y tmux&lt;/code> 进行安装&lt;/p>
&lt;h5 id="使用tmux">使用tmux
&lt;/h5>&lt;p>tmux采用快捷键 &lt;code>Ctrl+B&lt;/code> 来激活控制台。同时按下键盘上面的&lt;code>Ctrl&lt;/code> 和 &lt;code>B&lt;/code> ，然后在按键盘就是tmux命令（快捷键）了。注意，使用 &lt;code>Ctrl+C&lt;/code> 无法强制结束tmux，只会结束里面的任务。
&lt;code>Ctrl+B&lt;/code> 后的常用快捷键（注意先按Ctrl+B再按下快捷键！）&lt;/p>
&lt;ul>
&lt;li>&lt;code>D&lt;/code>隐藏tmux（类似于windows的最小化，隐藏窗口而不退出，里面的进程继续）&lt;/li>
&lt;li>&lt;code>X&lt;/code>关闭tmux当前窗口（需要输入 &lt;code>y/n&lt;/code> 确定或取消）&lt;/li>
&lt;li>&lt;code>N&lt;/code>下一个窗口&lt;/li>
&lt;li>&lt;code>P&lt;/code>上一个窗口&lt;/li>
&lt;li>&lt;code>%&lt;/code>将窗口分为左右两块&lt;/li>
&lt;li>&lt;code>&amp;quot;&lt;/code>将窗口分为上下两块，注意是英文半角的&amp;quot;&lt;/li>
&lt;/ul>
&lt;p>记住这些命令也就暂时够了，其它的以后再研究&lt;/p>
&lt;h3 id="配置yum源">配置yum源
&lt;/h3>&lt;p>默认的yum源速度较慢、而且提供的软件不是很多。&lt;/p>
&lt;h4 id="配置epel">配置epel
&lt;/h4>&lt;p>使用命令 &lt;code>yum install -y epel-release&lt;/code> 安装epel&lt;/p>
&lt;h4 id="使用阿里镜像">使用阿里镜像
&lt;/h4>&lt;p>输入命令&lt;/p>
&lt;p>&lt;code>wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo&lt;/code>&lt;/p>
&lt;p>下载repo文件&lt;/p>
&lt;h4 id="配置webstatic">配置WebStatic
&lt;/h4>&lt;p>WebStatic提供最高到PHP7.2（目前我就需要PHP,yum默认的是PHP5.6）&lt;/p>
&lt;p>使用命令&lt;/p>
&lt;p>&lt;code>yum install -y https://mirror.WebStatic.com/yum/el7/WebStatic-release.rpm &lt;/code>&lt;/p>
&lt;p>安装rpm包&lt;/p>
&lt;p>配置完后别忘了使用&lt;/p>
&lt;p>&lt;code>yum clean all &amp;amp;&amp;amp; yum makecache&lt;/code> 来清空yum的缓存，使用 &lt;code>yum update&lt;/code> 来进行更新。&lt;/p>
&lt;h3 id="安装基础软件ii">安装基础软件II
&lt;/h3>&lt;p>操作服务器的一些常用软件。一般来说都预装的。可惜，我这神奇服务器没有。&lt;/p>
&lt;p>包括：&lt;/p>
&lt;ul>
&lt;li>vim(文本编辑)&lt;/li>
&lt;li>curl(下载)&lt;/li>
&lt;li>tar(tar压缩)&lt;/li>
&lt;li>7za(7z压缩)&lt;/li>
&lt;li>lrzsz(通过XShell终端传输文件)&lt;/li>
&lt;li>git&lt;/li>
&lt;/ul>
&lt;p>对于这些软件我无所谓版本，直接 &lt;code>yum install&lt;/code> 安装就可以(不说都是最新的也旧不了太多吧)&lt;/p>
&lt;p>这些软件都可以使用yum安装&lt;/p>
&lt;p>&lt;code>yum install -y curl lrzsz yum-utils vim p7zip git-core&lt;/code>&lt;/p>
&lt;h3 id="安装nginx">安装nginx
&lt;/h3>&lt;p>使用命令&lt;/p>
&lt;p>&lt;code>wget http://nginx.org/packages/centos/7/x86_64/RPMS/nginx-1.16.1-1.el7.ngx.x86_64.rpm &lt;/code>&lt;/p>
&lt;p>下载rpm包，然使用命令&lt;/p>
&lt;p>&lt;code>rpm -ivh nginx-1.16.1-1.el7.ngx.x86_64.rpm&lt;/code>&lt;/p>
&lt;p>安装nginx官方的rpm（版本1.16.1）需要其它可以自行到官方查看&lt;/p>
&lt;p>&lt;a class="link" href="https://nginx.org/packages/" target="_blank" rel="noopener"
>nginx官网&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>注意：使用 &lt;code>yum install nginx&lt;/code> 安装的为WebStatic源中的1.12版&lt;/p>&lt;/blockquote>
&lt;h4 id="常用命令">常用命令
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">nginx -v &lt;span class="c1">#查看nginx版本&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service nginx start&lt;span class="p">|&lt;/span>stop&lt;span class="p">|&lt;/span>restart &lt;span class="c1">#启动|停止|重启nginx服务&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx -t &lt;span class="c1">#检查配置文件是否正确&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx -s reload &lt;span class="c1">#重载配置文件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx &lt;span class="c1">#启动nginx&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="安装php">安装PHP
&lt;/h3>&lt;p>使用命令&lt;/p>
&lt;p>&lt;code>yum install -y php72w-common php72w-fpm php72w-opcache php72w-gd php72w-mysqlnd php72w-mbstring php72w-pecl-redis php72w-pecl-memcached php72w-devel&lt;/code>&lt;/p>
&lt;p>进行安装&lt;/p>
&lt;p>这里安装了PHP PHP-FPM和一些常用模块，可以自行裁决。一般这些模块已经可以完美的支持WordPress、ZBlog等博客程序了&lt;/p>
&lt;blockquote>
&lt;p>如果想要安装PHP其它版本，把72w改成版本+w就可以咯&lt;/p>&lt;/blockquote>
&lt;h3 id="安装mysql">安装MySQL
&lt;/h3>&lt;p>参考以前写过的文章：&lt;/p>
&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/MySQL8-CentOS7/" target="_blank" rel="noopener"
>CentOS部署MySQL8步骤&lt;/a>&lt;/p>
&lt;p>进行，这里只写主要步骤&lt;/p>
&lt;p>下载rpm&lt;/p>
&lt;p>&lt;code>wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm&lt;/code>&lt;/p>
&lt;p>//由于MySQL的rpm很大，所以采用先下载后安装&lt;/p>
&lt;p>使用命令导入MySQL rpm&lt;/p>
&lt;p>&lt;code>sudo rpm -Uvh mysql80-community-release-el7-3.noarch.rpm&lt;/code>&lt;/p>
&lt;p>使用命令&lt;/p>
&lt;p>&lt;code>yum install -y mysql-community-server &lt;/code>&lt;/p>
&lt;p>来安装&lt;/p>
&lt;h3 id="常用命令-1">常用命令
&lt;/h3>&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Config-LNMP-On-CentOS/02.webp"
loading="lazy"
alt="mysql截屏"
>&lt;/p>
&lt;p>更多命令见 &lt;a class="link" href="https://blog.gaein.cn/passages/MySQL-usage/" target="_blank" rel="noopener"
>MySQL常用命令：导入导出、创建数据库等&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">service mysqld start &lt;span class="c1">##启动&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service mysqld status &lt;span class="c1">##查看状态&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo grep &lt;span class="s1">&amp;#39;temporary password&amp;#39;&lt;/span> /var/log/mysqld.log &lt;span class="c1">##查看默认密码&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql -u root -p &lt;span class="c1">##连接&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;root&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IDENTIFIED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;pWD123456-&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">#更改密码
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SHOW&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASES&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">#显示数据库
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">USE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">数据库名&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">#切换到数据库
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">exit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">#退出
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>CentOS部署MySQL8步骤</title><link>https://blog.gaein.cn/passages/install-mysql8-on-centos7/</link><pubDate>Mon, 15 Jul 2019 10:52:59 +0800</pubDate><guid>https://blog.gaein.cn/passages/install-mysql8-on-centos7/</guid><description>&lt;p>早就想去写的一篇博文，因为我在部署现在这个网站的服务器时，使用了最新版的MySQL，按照网上的教程安装出现了不少问题，写在这里备忘。&lt;/p>
&lt;!-- more -->
&lt;h2 id="获取rpm">获取rpm
&lt;/h2>&lt;ol>
&lt;li>访问 &lt;a class="link" href="https://www.mysql.com/downloads/" target="_blank" rel="noopener"
>https://www.mysql.com/downloads/&lt;/a>
&lt;img src="https://s2.ax1x.com/2019/07/15/ZoEUeO.md.png"
loading="lazy"
alt="MySQL官网的下载界面"
>
选择Yum Repository&lt;/li>
&lt;li>选择适合于自己系统的版本，比如我的是CentOS7，则选择这个，点击下载（Donwnload）
&lt;img src="https://s2.ax1x.com/2019/07/15/ZoEJQx.png"
loading="lazy"
alt="下载栏"
>&lt;/li>
&lt;li>忽略下载页面的登录提示，右键&amp;quot;No thanks,just start my download.&amp;quot;，复制连接
&lt;img src="https://s2.ax1x.com/2019/07/15/ZoEYy6.md.png"
loading="lazy"
alt="下载页面"
>&lt;/li>
&lt;li>连接到服务器，使用wget命令下载rpm&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://s2.ax1x.com/2019/07/15/ZoEtOK.png"
loading="lazy"
alt="wget下载完成"
>&lt;/p>
&lt;h2 id="安装mysql">安装MySQL
&lt;/h2>&lt;ol>
&lt;li>导入rpm，使用命令：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo rpm -Uvh mysql80-community-release-el7-3.noarch.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://s2.ax1x.com/2019/07/15/ZoEGS1.png"
loading="lazy"
alt="导入rpm"
>
2. 完成后使用：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> yum install mysql-community-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装MySQL社区版
&lt;img src="https://s2.ax1x.com/2019/07/15/ZoEawD.md.png"
loading="lazy"
alt="Mysql社区版安装"
>
提示后按y开始安装，会自动下载文件，可能需要一段时间，依网速和服务器位置而定
提示&amp;quot;Is this ok&amp;quot;时再次输入y并回车，确认
&lt;img src="https://s2.ax1x.com/2019/07/15/ZoEBYd.md.png"
loading="lazy"
alt="确认"
>&lt;/p>
&lt;h2 id="设置mysql">设置MySQL
&lt;/h2>&lt;ol>
&lt;li>启动MySQL
使用&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo service mysqld start
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>启动MySQL服务
使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo service mysqld status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看状态
&lt;img src="https://s2.ax1x.com/2019/07/15/ZoEylt.png"
loading="lazy"
alt="状态"
>
不能使用mysqld来启动，会启动失败
&lt;img src="https://s2.ax1x.com/2019/07/15/ZoEdTe.png"
loading="lazy"
alt="启动失败"
>
2. 连接到MySQL
MySQL8不支持无密码登录，在初次安装时就自动生成了root用户的密码
使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sudo&lt;/span> &lt;span class="n">grep&lt;/span> &lt;span class="s1">&amp;#39;temporary password&amp;#39;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mysqld&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">log&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看root用户的密码
&lt;img src="https://s2.ax1x.com/2019/07/15/ZoEDfA.png"
loading="lazy"
alt="查看密码"
>
使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mysql -u root -p
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>并输入默认密码（Linux系统输入密码时不会显示）
连接到MySQL服务器
&lt;img src="https://s2.ax1x.com/2019/07/15/ZoE66P.md.png"
loading="lazy"
alt="连接到MySQL"
>&lt;/p>
&lt;h2 id="修改默认密码">修改默认密码
&lt;/h2>&lt;p>连接到MySQL服务器后，使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">alter user &amp;#39;root&amp;#39;@&amp;#39;localhost&amp;#39;IDENTIFIED BY &amp;#39;pWD123456-&amp;#39;;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>修改root的密码，其中&amp;rsquo;pWD123456-&amp;lsquo;是要修改成的新密码&lt;/p>
&lt;blockquote>
&lt;p>注意！MySQL8默认安装 validate_password 插件。这将要求密码包含至少一个大写字母，一个小写字母，一个数字和一个特殊字符，
并且密码总长度至少为8个字符。&lt;/p>&lt;/blockquote>
&lt;p>如果不符合密码规范，修改密码会失败&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ERROR 1819 (HY000): Your password does not satisfy the current policy requirements
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>修改成功会控制台输出&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Query OK, 0 rows affected (0.01 sec)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://s2.ax1x.com/2019/07/15/Zoe76I.png"
loading="lazy"
alt="实例"
>
使用“exit”或“quit”命令退出MySQL&lt;/p></description></item><item><title>MySQL8服务器配置远程连接用户</title><link>https://blog.gaein.cn/passages/mysql8-connect/</link><pubDate>Mon, 15 Jul 2019 08:50:50 +0800</pubDate><guid>https://blog.gaein.cn/passages/mysql8-connect/</guid><description>&lt;p>最近需要有网站程序连接到数据库，但网站程序放在另外一个服务器上，所以需要设置数据库的远程连接。不同于网上给root远程连接权限的方法，我准备新建一个用户。&lt;/p>
&lt;!-- more -->
&lt;blockquote>
&lt;p>最近需要有网站程序连接到数据库，但网站程序放在另外一个服务器上，所以需要设置数据库的远程连接。不同于网上给root远程连接权限的方法，我准备新建一个用户。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>服务器环境：
操作系统：CentOS7
MySQL版本：8.0.16 MySQL Community Server&lt;/p>&lt;/blockquote>
&lt;p>########## 首先，登录服务器ssh
使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mysql -u root -p
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>并输入密码，进入mysql
由于我使用的是MySQL8，安全级别比以前高，不能同时创建用户并且赋值
首先创建用户&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">create user testuser@&amp;#39;%&amp;#39; identified by &amp;#39;TestUserPWD0&amp;#39;;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>再进行赋值&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">grant all privileges on *.* to testuser@&amp;#39;%&amp;#39; with grant option;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>刷新&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">flush privileges
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>因为MySQL8使用的是caching_sha2_password加密规则，所以为了方便连接，需要更改一下规则&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ALTER USER &amp;#39;testuser&amp;#39;@&amp;#39;%&amp;#39; IDENTIFIED WITH mysql_native_password BY &amp;#39;TestUserPWD0&amp;#39;;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>########## 注意事项
testuser是你要创建的用户的用户名
TestUserPWD0是新创建的用户的密码
MySQL8默认安装 validate_password 插件。这将要求密码包含至少一个大写字母，一个小写字母，一个数字和一个特殊字符，并且密码总长度至少为8个字符。
如果无法连接，主要检查服务器防火墙或安全狗等规则限制&lt;/p></description></item></channel></rss>