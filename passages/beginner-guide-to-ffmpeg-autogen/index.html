<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="A Beginner&rsquo;s Guide to FFmpeg.AutoGen Introduction FFmpeg.AutoGen is an auto-generated unsafe bindings for C#/.NET and Mono. It can be used in C#/.NET to invoke ffmpeg&rsquo;s C/C++ libraries.\nThe usage is the same as C/C++ API so you can refer to ffmpeg official documents. However, in C#/.NET, we need to load the libraries first, which confused me for a long time.\nHere I concluded the some useful information for beginners to start using ffmpeg.AutoGen.\n"><title>A Beginner's Guide to FFmpeg.AutoGen</title>
<link rel=canonical href=https://blog.gaein.cn/passages/beginner-guide-to-ffmpeg-autogen/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="A Beginner's Guide to FFmpeg.AutoGen"><meta property='og:description' content="A Beginner&rsquo;s Guide to FFmpeg.AutoGen Introduction FFmpeg.AutoGen is an auto-generated unsafe bindings for C#/.NET and Mono. It can be used in C#/.NET to invoke ffmpeg&rsquo;s C/C++ libraries.\nThe usage is the same as C/C++ API so you can refer to ffmpeg official documents. However, in C#/.NET, we need to load the libraries first, which confused me for a long time.\nHere I concluded the some useful information for beginners to start using ffmpeg.AutoGen.\n"><meta property='og:url' content='https://blog.gaein.cn/passages/beginner-guide-to-ffmpeg-autogen/'><meta property='og:site_name' content='Gaein nidb 的博客'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='CSharp'><meta property='article:tag' content='DotNet'><meta property='article:tag' content='FFmpeg'><meta property='article:tag' content='多媒体编解码'><meta property='article:published_time' content='2025-02-22T00:35:00+08:00'><meta property='article:modified_time' content='2025-02-22T00:35:00+08:00'><meta name=twitter:title content="A Beginner's Guide to FFmpeg.AutoGen"><meta name=twitter:description content="A Beginner&rsquo;s Guide to FFmpeg.AutoGen Introduction FFmpeg.AutoGen is an auto-generated unsafe bindings for C#/.NET and Mono. It can be used in C#/.NET to invoke ffmpeg&rsquo;s C/C++ libraries.\nThe usage is the same as C/C++ API so you can refer to ffmpeg official documents. However, in C#/.NET, we need to load the libraries first, which confused me for a long time.\nHere I concluded the some useful information for beginners to start using ffmpeg.AutoGen.\n"><link rel="shortcut icon" href=https://img.cdn.gaein.cn/favicon.ico><head><meta itemprop=name content="A Beginner's Guide to FFmpeg.AutoGen"><meta itemprop=image content="http://img.cdn.gaein.cn/website_used/avatars/avatar-256x.webp"><meta itemprop=description content="A Beginner&rsquo;s Guide to FFmpeg.AutoGen
Introduction
FFmpeg.AutoGen is an auto-generated unsafe bindings for C#/.NET and Mono. It can be used in C#/.NET to invoke ffmpeg&rsquo;s C/C++ libraries.
The usage is the same as C/C++ API so you can refer to ffmpeg official documents. However, in C#/.NET, we need to load the libraries first, which confused me for a long time.
Here I concluded the some useful information for beginners to start using ffmpeg.AutoGen."></head></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar-256x_hu_d97b16840c038ea4.webp width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🥰</span></figure><div class=site-meta><h1 class=site-name><a href=/>Gaein nidb 的博客</a></h1><h2 class=site-description>记录生活</h2></div></header><ol class=menu-social><li><a href=https://github.com/nidbCN target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=https://gaein.cn><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>首页</span></a></li><li><a href=/><svg class="icon icon-tabler icon-tabler-library" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 3m0 2.667A2.667 2.667.0 019.667 3h8.666A2.667 2.667.0 0121 5.667v8.666A2.667 2.667.0 0118.333 17H9.667A2.667 2.667.0 017 14.333z"/><path d="M4.012 7.26A2.005 2.005.0 003 8.997v10c0 1.1.9 2 2 2h10c.75.0 1.158-.385 1.5-1"/><path d="M11 7h5"/><path d="M11 10h6"/><path d="M11 13h3"/></svg>
<span>博客</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>归档</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>搜索</span></a></li><li><a href=https://www.gaein.cn/friends><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>链接</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#introduction>Introduction</a></li><li><a href=#which-nuget-package-should-i-use---ffmpegautogen-packages>which nuget package should I use? - ffmpeg.AutoGen packages</a><ol><li><a href=#packages-list>packages list</a></li><li><a href=#introduct-to-each-packages>Introduct to each packages</a><ol><li><a href=#ffmpegautogenbindingsdynamicallylinked>FFmpeg.AutoGen.Bindings.DynamicallyLinked</a></li><li><a href=#ffmpegautogenbindingsdynamicallyloaded>FFmpeg.AutoGen.Bindings.DynamicallyLoaded</a></li><li><a href=#ffmpegautogenbindingsstaticallylinked>FFmpeg.AutoGen.Bindings.StaticallyLinked</a></li><li><a href=#ffmpegautogenabstractions>FFmpeg.AutoGen.Abstractions</a></li><li><a href=#ffmpegautogen>FFmpeg.AutoGen</a></li></ol></li><li><a href=#conclusion-of-which-package-should-i-choose>conclusion of which package should I choose</a></li></ol></li><li><a href=#how-to-configure-the-libraries-root-path---use-prop-in-dynamicallyloaded-or-ffmpegautogen>how to configure the libraries root path? - use prop in DynamicallyLoaded or FFmpeg.AutoGen</a></li><li><a href=#hot-to-load-libraries-from-system-default-path---just-do-nothing>hot to load libraries from system default path - just do nothing</a><ol><li><a href=#search-order-on-windows-and-linux>Search order on Windows and Linux</a></li></ol></li><li><a href=#hot-to-solve-systemnotsupportexception---a-few-debug-tips>hot to solve <code>System.NotSupportException</code>? - a few debug tips</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/%E4%BB%A3%E7%A0%81%E5%A6%82%E8%AF%97/>代码如诗</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/passages/beginner-guide-to-ffmpeg-autogen/>A Beginner's Guide to FFmpeg.AutoGen</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2025 Feb 22</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 3 分钟</time></div></footer></div></header><section class=article-content><h1 id=a-beginners-guide-to-ffmpegautogen>A Beginner&rsquo;s Guide to FFmpeg.AutoGen</h1><h2 id=introduction>Introduction</h2><p>FFmpeg.AutoGen is an auto-generated unsafe bindings for C#/.NET and Mono. It can be used in C#/.NET to invoke ffmpeg&rsquo;s C/C++ libraries.</p><p>The usage is the same as C/C++ API so you can refer to ffmpeg official documents. However, in C#/.NET, we need to load the libraries first, which confused me for a long time.</p><p>Here I concluded the some useful information for beginners to start using ffmpeg.AutoGen.</p><p>This guide addresses the following questions:</p><ul><li>which nuget package should I use?</li><li>how to configure the libraries root path?</li><li>how to load libraries from system default path?</li><li>how to solve <code>System.NotSupportedException</code>?</li></ul><h2 id=which-nuget-package-should-i-use---ffmpegautogen-packages>which nuget package should I use? - ffmpeg.AutoGen packages</h2><h3 id=packages-list>packages list</h3><p>FFmpeg.AutoGen has the following packages on NuGet:</p><ul><li><a class=link href=https://www.nuget.org/packages/FFmpeg.AutoGen target=_blank rel=noopener>FFmpeg.AutoGen</a></li><li><a class=link href=https://www.nuget.org/packages/FFmpeg.AutoGen.Abstractions target=_blank rel=noopener>FFmpeg.AutoGen.Abstractions</a></li><li><a class=link href=https://www.nuget.org/packages/FFmpeg.AutoGen.Bindings.DynamicallyLoaded target=_blank rel=noopener>FFmpeg.AutoGen.Bindings.DynamicallyLoaded</a></li><li><a class=link href=https://www.nuget.org/packages/FFmpeg.AutoGen.Bindings.DynamicallyLinked target=_blank rel=noopener>FFmpeg.AutoGen.Bindings.DynamicallyLinked</a></li><li><a class=link href=https://www.nuget.org/packages/FFmpeg.AutoGen.Bindings.StaticallyLinked target=_blank rel=noopener>FFmpeg.AutoGen.Bindings.StaticallyLinked</a></li></ul><h3 id=introduct-to-each-packages>Introduct to each packages</h3><h4 id=ffmpegautogenbindingsdynamicallylinked>FFmpeg.AutoGen.Bindings.DynamicallyLinked</h4><p><code>FFmpeg.AutoGen.Bindings.DynamicallyLinked</code> uses <code>DllImport</code> to load libraries.</p><p>It loads libraries from the default path.</p><p>But the file name passed to <code>DllImport</code> is hard-coded in Windows file naming convention, such as something like &ldquo;avutil-59&rdquo;. That means you <strong>can not use this package directly on other platforms</strong>. But you can implement a custom resolver to adapt the filename convention from windows to others platforms by using the code below:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=k>class</span> <span class=nc>LibraryUtil</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>IntPtr</span> <span class=n>LinuxFfMpegDllImportResolver</span><span class=p>(</span><span class=kt>string</span> <span class=n>libraryName</span><span class=p>,</span> <span class=n>Assembly</span> <span class=n>assembly</span><span class=p>,</span> <span class=n>DllImportSearchPath</span><span class=p>?</span> <span class=n>searchPath</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>=&gt;</span> <span class=n>FfMpegDllImportResolverCore</span><span class=p>(</span><span class=n>libraryName</span><span class=p>,</span> <span class=n>assembly</span><span class=p>,</span> <span class=n>searchPath</span><span class=p>,</span> <span class=s>&#34;so&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>IntPtr</span> <span class=n>MacOsFfMpegDllImportResolver</span><span class=p>(</span><span class=kt>string</span> <span class=n>libraryName</span><span class=p>,</span> <span class=n>Assembly</span> <span class=n>assembly</span><span class=p>,</span> <span class=n>DllImportSearchPath</span><span class=p>?</span> <span class=n>searchPath</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>=&gt;</span> <span class=n>FfMpegDllImportResolverCore</span><span class=p>(</span><span class=n>libraryName</span><span class=p>,</span> <span class=n>assembly</span><span class=p>,</span> <span class=n>searchPath</span><span class=p>,</span> <span class=s>&#34;dylib&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>IntPtr</span> <span class=n>FfMpegDllImportResolverCore</span><span class=p>(</span><span class=n>ReadOnlySpan</span><span class=p>&lt;</span><span class=kt>char</span><span class=p>&gt;</span> <span class=n>loadNameSpan</span><span class=p>,</span> <span class=n>Assembly</span> <span class=n>assembly</span><span class=p>,</span> <span class=n>DllImportSearchPath</span><span class=p>?</span> <span class=n>searchPath</span><span class=p>,</span> <span class=kt>string</span> <span class=n>extension</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>partedIndex</span> <span class=p>=</span> <span class=n>loadNameSpan</span><span class=p>.</span><span class=n>IndexOf</span><span class=p>(</span><span class=sc>&#39;-&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// contains 0 or multi &#39;-&#39;, format not ffmpeg library</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>partedIndex</span> <span class=p>==</span> <span class=p>-</span><span class=m>1</span> <span class=p>||</span> <span class=n>loadNameSpan</span><span class=p>.</span><span class=n>LastIndexOf</span><span class=p>(</span><span class=sc>&#39;-&#39;</span><span class=p>)</span> <span class=p>!=</span> <span class=n>partedIndex</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>NativeLibrary</span><span class=p>.</span><span class=n>Load</span><span class=p>(</span><span class=n>loadNameSpan</span><span class=p>.</span><span class=n>ToString</span><span class=p>(),</span> <span class=n>assembly</span><span class=p>,</span> <span class=n>searchPath</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>libraryName</span> <span class=p>=</span> <span class=n>loadNameSpan</span><span class=p>[..</span><span class=n>partedIndex</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// library not in map table, not ffmpeg library</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(!</span><span class=n>DynamicallyLoadedBindings</span><span class=p>.</span><span class=n>LibraryVersionMap</span><span class=p>.</span><span class=n>ContainsKey</span><span class=p>(</span><span class=n>libraryName</span><span class=p>.</span><span class=n>ToString</span><span class=p>()))</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>NativeLibrary</span><span class=p>.</span><span class=n>Load</span><span class=p>(</span><span class=n>loadNameSpan</span><span class=p>.</span><span class=n>ToString</span><span class=p>(),</span> <span class=n>assembly</span><span class=p>,</span> <span class=n>searchPath</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>versionName</span> <span class=p>=</span> <span class=n>loadNameSpan</span><span class=p>[(</span><span class=n>partedIndex</span> <span class=p>+</span> <span class=m>1</span><span class=p>)..];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>styledName</span> <span class=p>=</span> <span class=s>$&#34;{libraryName}.{extension}.{versionName}&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>NativeLibrary</span><span class=p>.</span><span class=n>Load</span><span class=p>(</span><span class=n>styledName</span><span class=p>,</span> <span class=n>assembly</span><span class=p>,</span> <span class=n>searchPath</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>And using thos codes to configure DllImport use custom resolver:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=c1>// instantiate the logger before here or change `logger.LogInformation` to `Console.WriteLine`</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(!</span><span class=n>RuntimeInformation</span><span class=p>.</span><span class=n>IsOSPlatform</span><span class=p>(</span><span class=n>OSPlatform</span><span class=p>.</span><span class=n>Windows</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// not windows</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>bindingAssembly</span> <span class=p>=</span> <span class=k>typeof</span><span class=p>(</span><span class=n>DynamicallyLinkedBindings</span><span class=p>).</span><span class=n>Assembly</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>RuntimeInformation</span><span class=p>.</span><span class=n>IsOSPlatform</span><span class=p>(</span><span class=n>OSPlatform</span><span class=p>.</span><span class=n>Linux</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>||</span> <span class=n>RuntimeInformation</span><span class=p>.</span><span class=n>IsOSPlatform</span><span class=p>(</span><span class=n>OSPlatform</span><span class=p>.</span><span class=n>FreeBSD</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=p>.</span><span class=n>LogInformation</span><span class=p>(</span><span class=s>&#34;Linux/FreeBSD platform, use resolver {name} for assembly `{asm}`.&#34;</span><span class=p>,</span> <span class=n>nameof</span><span class=p>(</span><span class=n>LibraryUtil</span><span class=p>.</span><span class=n>LinuxFfMpegDllImportResolver</span><span class=p>),</span> <span class=n>bindingAssembly</span><span class=p>.</span><span class=n>GetName</span><span class=p>());</span>
</span></span><span class=line><span class=cl>        <span class=n>NativeLibrary</span><span class=p>.</span><span class=n>SetDllImportResolver</span><span class=p>(</span><span class=n>bindingAssembly</span><span class=p>,</span> <span class=n>LibraryUtil</span><span class=p>.</span><span class=n>LinuxFfMpegDllImportResolver</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>RuntimeInformation</span><span class=p>.</span><span class=n>IsOSPlatform</span><span class=p>(</span><span class=n>OSPlatform</span><span class=p>.</span><span class=n>OSX</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=p>.</span><span class=n>LogInformation</span><span class=p>(</span><span class=s>&#34;OSX platform, use resolver {name} for assembly `{asm}`.&#34;</span><span class=p>,</span> <span class=n>nameof</span><span class=p>(</span><span class=n>LibraryUtil</span><span class=p>.</span><span class=n>LinuxFfMpegDllImportResolver</span><span class=p>),</span> <span class=n>bindingAssembly</span><span class=p>.</span><span class=n>GetName</span><span class=p>());</span>
</span></span><span class=line><span class=cl>        <span class=n>NativeLibrary</span><span class=p>.</span><span class=n>SetDllImportResolver</span><span class=p>(</span><span class=n>bindingAssembly</span><span class=p>,</span> <span class=n>LibraryUtil</span><span class=p>.</span><span class=n>MacOsFfMpegDllImportResolver</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>throw</span> <span class=k>new</span> <span class=n>PlatformNotSupportedException</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=ffmpegautogenbindingsdynamicallyloaded>FFmpeg.AutoGen.Bindings.DynamicallyLoaded</h4><p><code>FFmpeg.AutoGen.Bindings.DynamicallyLoaded</code> use <code>LoadLibrary</code> method in <code>Kernel32</code> library on Windows, use <code>dlopen</code> method in <code>Libdl</code> on Linux and MacOS.</p><h4 id=ffmpegautogenbindingsstaticallylinked>FFmpeg.AutoGen.Bindings.StaticallyLinked</h4><p>This package use <code>DllImport("__Internal")</code> to import libraries, it required you build the library into assembly.</p><h4 id=ffmpegautogenabstractions>FFmpeg.AutoGen.Abstractions</h4><p>This package contains definitions about structs and functions. But you can&rsquo;t invoke functions define in this package, because it&rsquo;s only have definitions but no body, you need install others <code>Bindings</code> package and use <code>DynamicallyLinkedBindings.Initialize();</code> or <code>DynamicallyLoadedBindings.Initialize();</code> method to initialize.</p><h4 id=ffmpegautogen>FFmpeg.AutoGen</h4><p>This package looks like a combine of <code>FFmpeg.AutoGen.Abstractions</code> and <code>FFmpeg.AutoGen.Bindings.DynamicallyLoaded</code> with a few properties changed.</p><p>The offical example use ``FFmpeg.AutoGen.Bindings.DynamicallyLoadedBindings<code>instead of</code>FFmpeg.AutoGen<code>, but the README use </code>ffmpeg.RootPath = <code>to set libraries path which is defined in</code>FFmpeg.AutoGen`.</p><h3 id=conclusion-of-which-package-should-i-choose>conclusion of which package should I choose</h3><ul><li><p>If you&rsquo;re using ffmpeg in Mono, choose <code>FFmpeg.AutoGen.Bindings.StaticallyLinked</code> and <code>FFmpeg.AutoGen.Abstractions</code>.</p></li><li><p>If your app only run on Windows, choose <code>FFmpeg.AutoGen.Bindings.DynamicallyLinked</code> and <code>FFmpeg.AutoGen.Abstractions</code>.</p></li><li><p>If your app running on mult-platform, choose <code>FFmpeg.AutoGen.Bindings.DynamicallyLoaded</code> and <code>FFmpeg.AutoGen.Abstractions</code> or <code>FFmpeg.AutoGen.Bindings.DynamicallyLinked</code> with custom resolver. Use <code>FFmpeg.AutoGen</code> is also a good choice.</p></li></ul><h2 id=how-to-configure-the-libraries-root-path---use-prop-in-dynamicallyloaded-or-ffmpegautogen>how to configure the libraries root path? - use prop in DynamicallyLoaded or FFmpeg.AutoGen</h2><p><code>DynamicallyLinked</code> can&rsquo;t specify a custom root path for libraries.</p><p>If you want to use the library files which are not in the default search path, use <code>DynamicallyLoaded</code> and set the path to property <code>DynamicallyLoadedBindings.LibrariesPath</code>.</p><p><code>ffmpeg.RootPath</code> from package <code>FFmpeg.AutoGen</code> is the same as <code>DynamicallyLoadedBindings.LibrariesPath</code>.</p><p>By the way, the libraries root should contains libs like <code>avutil-59.dll</code> on Windows, and <code>libavutil.59.so</code> on Linux.</p><h2 id=hot-to-load-libraries-from-system-default-path---just-do-nothing>hot to load libraries from system default path - just do nothing</h2><p>In the previous section, I explained the libraries load function of each packages. According to Microsoft Docs and Linux manual page we can find the search order.</p><h3 id=search-order-on-windows-and-linux>Search order on Windows and Linux</h3><p>On windows, the main search order are:</p><ol><li>Application directory;</li><li>System directory;</li><li>Windows directory;</li><li>Current work directory;</li><li>Directories in the <code>PATH</code> environment variable;</li></ol><p>For more information, see reference:</p><ul><li><a class=link href=https://learn.microsoft.com/en-us/windows/win32/dlls/dynamic-link-library-search-order target=_blank rel=noopener>Dynamic-link library search order - Win32 apps | Microsoft Learn</a></li></ul><p>On Linux, the main search order are:</p><ol><li>Directories in the <code>LD_LIBRARY_PATH</code> environment variable;</li><li><code>/etc/ld.so.cache</code> directory;</li><li><code>/lib</code> and <code>/usr/lib</code> directories.</li></ol><p>For more information, see reference:</p><ul><li><a class=link href=https://man7.org/linux/man-pages/man3/dlopen.3.html#DESCRIPTION target=_blank rel=noopener>dlopen(3) - Linux manual page</a></li><li><a class=link href=https://man7.org/linux/man-pages/man8/ld.so.8.html#DESCRIPTION target=_blank rel=noopener>ld.so(8) - Linux manual page</a></li><li><a class=link href=https://github.com/Ruslan-B/FFmpeg.AutoGen/tree/master/FFmpeg.AutoGen.Bindings.DynamicallyLoaded/Native target=_blank rel=noopener>FFmpeg.AutoGen/FFmpeg.AutoGen.Bindings.DynamicallyLoaded/Native at master · Ruslan-B/FFmpeg.AutoGen</a></li></ul><p>I have no computer with MacOS, so I haven&rsquo;t figured out the search order on MacOS, but I guess it maybe very like the order on Linux.</p><p>If you want to use <code>DynamicallyLoaded</code> with default path, just do not modify <code>DynamicallyLoadedBindings.LibrariesPath</code> or ensure its value are <code>string.Empty</code>. This prop will be added to the front of library name and version. Keep it empty and the package will deliver pure library file name to the method which load the library to memory, that will lead the load method use default search path.</p><h2 id=hot-to-solve-systemnotsupportexception---a-few-debug-tips>hot to solve <code>System.NotSupportException</code>? - a few debug tips</h2><p>If you invoke a <code>ffmpeg.*</code> function and throw this exception, it is often because you didn&rsquo;t load the libraries successfully.</p><p>First, make sure you install the <code>FFmpeg.AutoGen.Bindings</code> or <code>FFmpeg.AutoGen</code> and called the <code>Initialize()</code>.</p><p>Second, make sure your libraries files are in correct path with correct file name. If you use the custom root path, just open it and have a look, If you use system default path, try using the system tools to ensure it can be found, such as <code>ldconfig -p -N | grep lib&lt;name>.&lt;version></code>.</p><p>Third, make sure all libraries are fine. You can set <code>DynamicallyLoadedBindings.ThrowErrorIfFunctionNotFound</code> to <code>true</code>, then the exception will sent during libraries loading. I suggess you print all libriaries version to ensure they are all loaded with the code below:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=c1>// instantiate the logger before here or change `logger.Log*` to `Console.WriteLine`</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>try</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>version</span> <span class=p>=</span> <span class=n>ffmpeg</span><span class=p>.</span><span class=n>av_version_info</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>libraryVersion</span> <span class=p>=</span> <span class=k>new</span> <span class=n>StringBuilder</span><span class=p>(</span><span class=m>48</span> <span class=p>*</span> <span class=n>DynamicallyLoadedBindings</span><span class=p>.</span><span class=n>LibraryVersionMap</span><span class=p>.</span><span class=n>Count</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>foreach</span> <span class=p>(</span><span class=kt>var</span> <span class=p>(</span><span class=n>library</span><span class=p>,</span> <span class=n>requiredVersion</span><span class=p>)</span> <span class=k>in</span> <span class=n>DynamicallyLoadedBindings</span><span class=p>.</span><span class=n>LibraryVersionMap</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>versionFunc</span> <span class=p>=</span> <span class=k>typeof</span><span class=p>(</span><span class=n>ffmpeg</span><span class=p>).</span><span class=n>GetMethod</span><span class=p>(</span><span class=s>$&#34;{library}_version&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>versionInfo</span> <span class=p>=</span> <span class=k>new</span> <span class=n>VersionInfo</span><span class=p>((</span><span class=kt>uint</span><span class=p>)(</span><span class=n>versionFunc</span><span class=p>?.</span><span class=n>Invoke</span><span class=p>(</span><span class=kc>null</span><span class=p>,</span> <span class=kc>null</span><span class=p>)</span> <span class=p>??</span> <span class=m>0</span><span class=n>u</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>libraryVersion</span><span class=p>.</span><span class=n>AppendLine</span><span class=p>(</span><span class=s>$&#34;\tLibrary: {library}, require `{requiredVersion}`, load `{versionInfo}`&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>libraryVersion</span><span class=p>.</span><span class=n>Remove</span><span class=p>(</span><span class=n>libraryVersion</span><span class=p>.</span><span class=n>Length</span> <span class=p>-</span> <span class=m>1</span><span class=p>,</span> <span class=m>1</span><span class=p>);</span>    <span class=c1>// remove &#39;\n&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>logger</span><span class=p>.</span><span class=n>LogInformation</span><span class=p>(</span><span class=s>&#34;Load ffmpeg, version `{v}`&#34;</span><span class=p>,</span> <span class=n>version</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>logger</span><span class=p>.</span><span class=n>LogInformation</span><span class=p>(</span><span class=s>&#34;Load ffmpeg, libraries:\n{libInfo}&#34;</span><span class=p>,</span> <span class=n>libraryVersion</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>catch</span> <span class=p>(</span><span class=n>NotSupportedException</span> <span class=n>e</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>logger</span><span class=p>.</span><span class=n>LogCritical</span><span class=p>(</span><span class=n>e</span><span class=p>,</span> <span class=s>&#34;Failed to load ffmpeg, exit.&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>appLifeTime</span> <span class=p>=</span> <span class=n>provider</span><span class=p>.</span><span class=n>GetRequiredService</span><span class=p>&lt;</span><span class=n>IHostApplicationLifetime</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>    <span class=n>appLifeTime</span><span class=p>.</span><span class=n>StopApplication</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>You can also just add the project source code as a dependency of your project and debug in file <code>FunctionResolverBase.cs</code> or files under <code>Native</code> folder.</p></section><footer class=article-footer><section class=article-tags><a href=/tags/csharp/>CSharp</a>
<a href=/tags/dotnet/>DotNET</a>
<a href=/tags/ffmpeg/>FFmpeg</a>
<a href=/tags/%E5%A4%9A%E5%AA%92%E4%BD%93%E7%BC%96%E8%A7%A3%E7%A0%81/>多媒体编解码</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/passages/auto-deploy-cert-to-alicdn/><div class=article-image><img src=https://img.cdn.gaein.cn/website_used/blog/Auto-Deploy-Cert-to-AliCdn/banner.webp loading=lazy data-key data-hash=https://img.cdn.gaein.cn/website_used/blog/Auto-Deploy-Cert-to-AliCdn/banner.webp></div><div class=article-details><h2 class=article-title>将 Certbot/ACME.sh 自动化申请的证书自动部署到阿里云 CDN</h2></div></a></article><article><a href=/passages/leetcode-417-pacificatlanticwaterflow/><div class=article-details><h2 class=article-title>太平洋大西洋水流问题-力扣417 深都优先搜索</h2></div></a></article><article><a href=/passages/leetcode-221-maximalsquare/><div class=article-details><h2 class=article-title>二叉树的中序遍历-力扣94 中序遍历</h2></div></a></article><article><a href=/passages/leetcode-13-romantointeger/><div class=article-details><h2 class=article-title>罗马数字转整数-力扣13 遍历吧</h2></div></a></article><article><a href=/passages/leetcode-94-binarytreeinordertraversal/><div class=article-details><h2 class=article-title>二叉树的中序遍历-力扣94 中序遍历</h2></div></a></article></div></div></aside><script src=//cdn.jsdelivr.net/npm/twikoo@1.6.39/dist/twikoo.all.min.js></script><div id=tcomment></div><style>.twikoo{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}:root[data-scheme=dark]{--twikoo-body-text-color-main:rgba(255, 255, 255, 0.9);--twikoo-body-text-color:rgba(255, 255, 255, 0.7)}.twikoo .el-input-group__prepend,.twikoo .tk-action-icon,.twikoo .tk-submit-action-icon,.twikoo .tk-time,.twikoo .tk-comments-no,.twikoo .tk-comments-count{color:var(--twikoo-body-text-color)}.twikoo .el-input__inner,.twikoo .el-textarea__inner,.twikoo .tk-preview-container,.twikoo .tk-content,.twikoo .tk-nick,.twikoo .tk-send{color:var(--twikoo-body-text-color-main)}.twikoo .el-button{color:var(--twikoo-body-text-color)!important}.twikoo .el-input__count{color:var(--twikoo-body-text-color)!important}.OwO .OwO-body{background-color:var(--body-background)!important;color:var(--body-text-color)!important}</style><script>twikoo.init({envId:"https://api.gaein.cn/comments/",el:"#tcomment",lang:"zh-CN"})</script><footer class=site-footer><section class=copyright>&copy;
2017 -
2025 Gaein nidb 的博客</section><section class=powerby>冀ICP备17015375-1号<br>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.29.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>