<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="å‰è¨€ ä¸çŸ¥ä¸è§‰æ–°çš„ä¸€å¹´æ¥äº†ï¼Œå¤§å­¦åŠå¹´ç”Ÿæ´»ä¹Ÿè½ä¸‹å¸·å¹•ã€‚ç»è¿‡è¿™åŠå¹´å’Œå„ä½å¤§ä½¬ä»¬çš„æ‘¸é±¼ï¼Œæ·±æ„Ÿè‡ªèº«æŠ€èƒ½ä¸è¶³ï¼Œè¶ç€å¯’å‡æ²¡ä»€ä¹ˆäº‹æƒ…ï¼Œå­¦ä¹ ä¸€ä¸‹ web æ¡†æ¶â€”â€”ASP.NET Coreï¼ˆä¸»è¦æ˜¯åç«¯éƒ¨åˆ†ï¼‰ã€‚é€‰æ‹© ASP.NET Core æ˜¯å› ä¸º ASP.NET Core æ˜¯é«˜æ•ˆçš„ web æ¡†æ¶ï¼ŒåŒæ—¶è‡ªå·±ç”¨äº†æŒºé•¿æ—¶é—´çš„ C# ï¼Œè½¬æˆ˜å…¶å®ƒè¯­è¨€ä¹ŸæŒºä¸ä¹ æƒ¯ã€‚å¦å¤–ï¼Œç®—æ˜¯åŠä¸ªè½¯ç²‰äº†ã€‚\nä¸è¿‡æœ‰ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼ŒASP.NET è¿™ç©æ„è€æ˜¯è‡ªåŠ¨è“æˆé“¾æ¥ã€‚\n"><title>ASP.NET Core ä»£ç å„ä¸ªæ–‡ä»¶éƒ½æ˜¯ä»€ä¹ˆâ€”â€”é¡¹ç›®ç»“æ„â€”â€”ASP.NET Core å…¥é—¨(1)</title>
<link rel=canonical href=https://blog.gaein.cn/passages/aspnetcore-note1-projects/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="ASP.NET Core ä»£ç å„ä¸ªæ–‡ä»¶éƒ½æ˜¯ä»€ä¹ˆâ€”â€”é¡¹ç›®ç»“æ„â€”â€”ASP.NET Core å…¥é—¨(1)"><meta property='og:description' content="å‰è¨€ ä¸çŸ¥ä¸è§‰æ–°çš„ä¸€å¹´æ¥äº†ï¼Œå¤§å­¦åŠå¹´ç”Ÿæ´»ä¹Ÿè½ä¸‹å¸·å¹•ã€‚ç»è¿‡è¿™åŠå¹´å’Œå„ä½å¤§ä½¬ä»¬çš„æ‘¸é±¼ï¼Œæ·±æ„Ÿè‡ªèº«æŠ€èƒ½ä¸è¶³ï¼Œè¶ç€å¯’å‡æ²¡ä»€ä¹ˆäº‹æƒ…ï¼Œå­¦ä¹ ä¸€ä¸‹ web æ¡†æ¶â€”â€”ASP.NET Coreï¼ˆä¸»è¦æ˜¯åç«¯éƒ¨åˆ†ï¼‰ã€‚é€‰æ‹© ASP.NET Core æ˜¯å› ä¸º ASP.NET Core æ˜¯é«˜æ•ˆçš„ web æ¡†æ¶ï¼ŒåŒæ—¶è‡ªå·±ç”¨äº†æŒºé•¿æ—¶é—´çš„ C# ï¼Œè½¬æˆ˜å…¶å®ƒè¯­è¨€ä¹ŸæŒºä¸ä¹ æƒ¯ã€‚å¦å¤–ï¼Œç®—æ˜¯åŠä¸ªè½¯ç²‰äº†ã€‚\nä¸è¿‡æœ‰ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼ŒASP.NET è¿™ç©æ„è€æ˜¯è‡ªåŠ¨è“æˆé“¾æ¥ã€‚\n"><meta property='og:url' content='https://blog.gaein.cn/passages/aspnetcore-note1-projects/'><meta property='og:site_name' content='Gaein nidb çš„åšå®¢'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='CSharp'><meta property='article:tag' content='dotNET'><meta property='article:tag' content='AspNetCore'><meta property='article:tag' content='ç¼–ç¨‹'><meta property='article:tag' content='ç¬”è®°'><meta property='article:tag' content='åç«¯'><meta property='article:published_time' content='2021-01-26T22:35:31+08:00'><meta property='article:modified_time' content='2025-01-13T21:50:00+08:00'><meta name=twitter:title content="ASP.NET Core ä»£ç å„ä¸ªæ–‡ä»¶éƒ½æ˜¯ä»€ä¹ˆâ€”â€”é¡¹ç›®ç»“æ„â€”â€”ASP.NET Core å…¥é—¨(1)"><meta name=twitter:description content="å‰è¨€ ä¸çŸ¥ä¸è§‰æ–°çš„ä¸€å¹´æ¥äº†ï¼Œå¤§å­¦åŠå¹´ç”Ÿæ´»ä¹Ÿè½ä¸‹å¸·å¹•ã€‚ç»è¿‡è¿™åŠå¹´å’Œå„ä½å¤§ä½¬ä»¬çš„æ‘¸é±¼ï¼Œæ·±æ„Ÿè‡ªèº«æŠ€èƒ½ä¸è¶³ï¼Œè¶ç€å¯’å‡æ²¡ä»€ä¹ˆäº‹æƒ…ï¼Œå­¦ä¹ ä¸€ä¸‹ web æ¡†æ¶â€”â€”ASP.NET Coreï¼ˆä¸»è¦æ˜¯åç«¯éƒ¨åˆ†ï¼‰ã€‚é€‰æ‹© ASP.NET Core æ˜¯å› ä¸º ASP.NET Core æ˜¯é«˜æ•ˆçš„ web æ¡†æ¶ï¼ŒåŒæ—¶è‡ªå·±ç”¨äº†æŒºé•¿æ—¶é—´çš„ C# ï¼Œè½¬æˆ˜å…¶å®ƒè¯­è¨€ä¹ŸæŒºä¸ä¹ æƒ¯ã€‚å¦å¤–ï¼Œç®—æ˜¯åŠä¸ªè½¯ç²‰äº†ã€‚\nä¸è¿‡æœ‰ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼ŒASP.NET è¿™ç©æ„è€æ˜¯è‡ªåŠ¨è“æˆé“¾æ¥ã€‚\n"><link rel="shortcut icon" href=https://img.cdn.gaein.cn/favicon.ico><head><meta itemprop=name content="ASP.NET Core ä»£ç å„ä¸ªæ–‡ä»¶éƒ½æ˜¯ä»€ä¹ˆâ€”â€”é¡¹ç›®ç»“æ„â€”â€”ASP.NET Core å…¥é—¨(1)"><meta itemprop=image content="http://img.cdn.gaein.cn/website_used/avatars/avatar-256x.webp"><meta itemprop=description content="å‰è¨€

ä¸çŸ¥ä¸è§‰æ–°çš„ä¸€å¹´æ¥äº†ï¼Œå¤§å­¦åŠå¹´ç”Ÿæ´»ä¹Ÿè½ä¸‹å¸·å¹•ã€‚ç»è¿‡è¿™åŠå¹´å’Œå„ä½å¤§ä½¬ä»¬çš„æ‘¸é±¼ï¼Œæ·±æ„Ÿè‡ªèº«æŠ€èƒ½ä¸è¶³ï¼Œè¶ç€å¯’å‡æ²¡ä»€ä¹ˆäº‹æƒ…ï¼Œå­¦ä¹ ä¸€ä¸‹ web æ¡†æ¶â€”â€”ASP.NET Coreï¼ˆä¸»è¦æ˜¯åç«¯éƒ¨åˆ†ï¼‰ã€‚é€‰æ‹© ASP.NET Core æ˜¯å› ä¸º ASP.NET Core æ˜¯é«˜æ•ˆçš„ web æ¡†æ¶ï¼ŒåŒæ—¶è‡ªå·±ç”¨äº†æŒºé•¿æ—¶é—´çš„ C# ï¼Œè½¬æˆ˜å…¶å®ƒè¯­è¨€ä¹ŸæŒºä¸ä¹ æƒ¯ã€‚å¦å¤–ï¼Œç®—æ˜¯åŠä¸ªè½¯ç²‰äº†ã€‚
ä¸è¿‡æœ‰ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼ŒASP.NET è¿™ç©æ„è€æ˜¯è‡ªåŠ¨è“æˆé“¾æ¥ã€‚"></head></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar-256x_hu_d97b16840c038ea4.webp width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥°</span></figure><div class=site-meta><h1 class=site-name><a href=/>Gaein nidb çš„åšå®¢</a></h1><h2 class=site-description>è®°å½•ç”Ÿæ´»</h2></div></header><ol class=menu-social><li><a href=https://github.com/nidbCN target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=https://gaein.cn><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>é¦–é¡µ</span></a></li><li><a href=/><svg class="icon icon-tabler icon-tabler-library" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 3m0 2.667A2.667 2.667.0 019.667 3h8.666A2.667 2.667.0 0121 5.667v8.666A2.667 2.667.0 0118.333 17H9.667A2.667 2.667.0 017 14.333z"/><path d="M4.012 7.26A2.005 2.005.0 003 8.997v10c0 1.1.9 2 2 2h10c.75.0 1.158-.385 1.5-1"/><path d="M11 7h5"/><path d="M11 10h6"/><path d="M11 13h3"/></svg>
<span>åšå®¢</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>å½’æ¡£</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>æœç´¢</span></a></li><li><a href=https://www.gaein.cn/friends><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>é“¾æ¥</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#å‰è¨€>å‰è¨€</a></li><li><a href=#aspnet-core>ASP.NET Core</a></li><li><a href=#é¡¹ç›®åŸºæœ¬ç»“æ„æ—§æ¨¡æ¿>é¡¹ç›®åŸºæœ¬ç»“æ„ï¼ˆæ—§æ¨¡æ¿ï¼‰</a><ol><li><a href=#main-æ–¹æ³•>Main æ–¹æ³•</a></li><li><a href=#createhostbuilder-æ–¹æ³•>CreateHostBuilder æ–¹æ³•</a></li><li><a href=#starup-ç±»æ–‡ä»¶>StarUp ç±»æ–‡ä»¶</a><ol><li><a href=#configureservices-æ–¹æ³•>ConfigureServices æ–¹æ³•</a></li><li><a href=#configure-æ–¹æ³•>Configure æ–¹æ³•</a></li></ol></li></ol></li><li><a href=#é¡¹ç›®åŸºæœ¬ç»“æ„æ–°æ¨¡æ¿>é¡¹ç›®åŸºæœ¬ç»“æ„ï¼ˆæ–°æ¨¡æ¿ï¼‰</a></li><li><a href=#è¿è¡Œ-aspnet-core-åº”ç”¨>è¿è¡Œ ASP.NET Core åº”ç”¨</a><ol><li><a href=#ç¯å¢ƒè®¾ç½®>ç¯å¢ƒè®¾ç½®</a></li><li><a href=#åŒ…ç®¡ç†>åŒ…ç®¡ç†</a><ol><li><a href=#åç«¯>åç«¯</a></li><li><a href=#å‰ç«¯>å‰ç«¯</a></li></ol></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/%E4%BB%A3%E7%A0%81%E5%A6%82%E8%AF%97/>ä»£ç å¦‚è¯—</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/passages/aspnetcore-note1-projects/>ASP.NET Core ä»£ç å„ä¸ªæ–‡ä»¶éƒ½æ˜¯ä»€ä¹ˆâ€”â€”é¡¹ç›®ç»“æ„â€”â€”ASP.NET Core å…¥é—¨(1)</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2021 Jan 26</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 6 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><h2 id=å‰è¨€>å‰è¨€</h2><blockquote><p>ä¸çŸ¥ä¸è§‰æ–°çš„ä¸€å¹´æ¥äº†ï¼Œå¤§å­¦åŠå¹´ç”Ÿæ´»ä¹Ÿè½ä¸‹å¸·å¹•ã€‚ç»è¿‡è¿™åŠå¹´å’Œå„ä½å¤§ä½¬ä»¬çš„æ‘¸é±¼ï¼Œæ·±æ„Ÿè‡ªèº«æŠ€èƒ½ä¸è¶³ï¼Œè¶ç€å¯’å‡æ²¡ä»€ä¹ˆäº‹æƒ…ï¼Œå­¦ä¹ ä¸€ä¸‹ web æ¡†æ¶â€”â€”ASP.NET Coreï¼ˆä¸»è¦æ˜¯åç«¯éƒ¨åˆ†ï¼‰ã€‚é€‰æ‹© ASP.NET Core æ˜¯å› ä¸º ASP.NET Core æ˜¯é«˜æ•ˆçš„ web æ¡†æ¶ï¼ŒåŒæ—¶è‡ªå·±ç”¨äº†æŒºé•¿æ—¶é—´çš„ C# ï¼Œè½¬æˆ˜å…¶å®ƒè¯­è¨€ä¹ŸæŒºä¸ä¹ æƒ¯ã€‚å¦å¤–ï¼Œç®—æ˜¯åŠä¸ªè½¯ç²‰äº†ã€‚<br><del>ä¸è¿‡æœ‰ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼ŒASP.NET è¿™ç©æ„è€æ˜¯è‡ªåŠ¨è“æˆé“¾æ¥ã€‚</del></p></blockquote><blockquote><p>è¿™æ˜¯å­¦ä¹  ASP.NET Coreçš„ç¬”è®°ï¼Œä¸»è¦æ˜¯æ ¹æ®å¾®è½¯ MVP æ¨æ—­çš„è¯¾ç¨‹æ¥èµ°çš„ï¼Œå½“ç„¶ä¹Ÿæœ‰è‡ªå·±çš„åå‘ã€‚å…³äºè¿™äº›å†…å®¹çš„ç¬”è®°å’Œä»£ç ä»¥åŠæ›´å¤šçš„ç®€ä»‹åœ¨<a class=link href=https://github.com/nidbCN/ASP.NET-Core-Note target=_blank rel=noopener>Github</a>ä¸Šã€‚</p></blockquote><blockquote><p>è¿™ä¸€ç¯‡ä¸»è¦æ˜¯çœ‹ ASP.NET Core é¡¹ç›®çš„ç»“æ„ã€é…ç½®ä»¥åŠä¸€äº›åŸºç¡€çš„å†…å®¹ã€‚</p></blockquote><h2 id=aspnet-core>ASP.NET Core</h2><p>ASP.NET Core å’Œ ASP.NET ä¸æ˜¯ä¸€å›äº‹ï¼ŒASP.NET Core åŸºäº.NET Coreï¼ˆæˆ–è€… .NET 5 ä»¥åŠæ›´æ–°çš„ç‰ˆæœ¬ï¼‰ï¼Œå®ƒçš„æ•ˆç‡è¿œé«˜äºåŸºäº .NET Framework çš„ ASP.NETã€‚<br>ASP.NET Core é¡¹ç›®æœ¬è´¨ä¸Šä»ç„¶æ˜¯ .NET Core æ§åˆ¶å°åº”ç”¨ã€‚</p><h2 id=é¡¹ç›®åŸºæœ¬ç»“æ„æ—§æ¨¡æ¿>é¡¹ç›®åŸºæœ¬ç»“æ„ï¼ˆæ—§æ¨¡æ¿ï¼‰</h2><h3 id=main-æ–¹æ³•>Main æ–¹æ³•</h3><p>ç¨‹åºå…¥å£ç‚¹ï¼Œé…ç½®æ•´ä¸ª ASP.NET Core ç„¶åè¿è¡Œã€‚<br>è°ƒç”¨äº†ä¸€ä¸ªé™æ€æ–¹æ³•</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=n>IHostBuilder</span> <span class=n>CreateHostBuilder</span><span class=p>(</span><span class=kt>string</span><span class=p>[]</span> <span class=n>args</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè¿”å› <code>IHostBuilder</code> æ‰§è¡Œ <code>Build()</code> æ–¹æ³•åæ§åˆ¶å°é¡¹ç›®è½¬å˜ä¸ºäº† ASP.NET Core é¡¹ç›®ï¼Œç„¶åæ‰§è¡Œ <code>Run()</code> æ–¹æ³•å¯åŠ¨ã€‚</p><h3 id=createhostbuilder-æ–¹æ³•>CreateHostBuilder æ–¹æ³•</h3><p>lambda è¡¨è¾¾å¼</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=n>IHostBuilder</span> <span class=n>CreateHostBuilder</span><span class=p>(</span><span class=kt>string</span><span class=p>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>    <span class=n>Host</span><span class=p>.</span><span class=n>CreateDefaultBuilder</span><span class=p>(</span><span class=n>args</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=n>ConfigureWebHostDefaults</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=c1>// ...</span>
</span></span><span class=line><span class=cl>            <span class=c1>// Code</span>
</span></span><span class=line><span class=cl>            <span class=c1>// ...</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>ï¼Œå³ä¾§è¿”å›è°ƒç”¨ <code>Host</code> é™æ€ç±»çš„ä¸€ä¸ªé™æ€æ–¹æ³• <code>CreateDefaultBuilder()</code> çš„è¿”å›è°ƒç”¨ <code>ConfigureWebHostDefaults()</code> æ–¹æ³•ï¼Œé…ç½® ASP.NET Coreã€‚<br>ç¬¬äºŒä¸ª lambda è¡¨è¾¾å¼</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=c1>// ...</span>
</span></span><span class=line><span class=cl><span class=c1>// Code</span>
</span></span><span class=line><span class=cl><span class=c1>// ...</span>
</span></span><span class=line><span class=cl>    <span class=n>Host</span><span class=p>.</span><span class=n>CreateDefaultBuilder</span><span class=p>(</span><span class=n>args</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=n>ConfigureWebHostDefaults</span><span class=p>(</span><span class=n>webBuilder</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>webBuilder</span><span class=p>.</span><span class=n>UseStartup</span><span class=p>&lt;</span><span class=n>Startup</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>å·¦ä¾§å‚æ•°åä¸ºè‡ªåŠ¨æ¨æ–­ç±»å‹çš„ <code>webBuilder</code> ï¼Œå°† WebBuilder çš„ä¸€äº›æ–¹æ³•è¿”å›ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚</p><blockquote><p>è¿™éƒ¨åˆ†å¯ä»¥é…ç½® ASP.NET Core ç›¸å…³çš„å†…å®¹ï¼Œåªéœ€è¦è°ƒç”¨ <code>webBuilder.&lt;æ–¹æ³•>()</code></p></blockquote><p>ç„¶å <code>webBuilder</code> ä½¿ç”¨ <code>StartUp</code> ç±»æ¥åˆå§‹åŒ–ã€‚</p><h3 id=starup-ç±»æ–‡ä»¶>StarUp ç±»æ–‡ä»¶</h3><p>è¿™ä¸ªç±»æ²¡æœ‰å®ç°ä»»ä½•çš„æ¥å£ç­‰ï¼Œè¿™é‡Œé¢æ–¹æ³•çš„åç§°æ˜¯è¿è¡Œæ—¶çš„çº¦å®šåç§°ï¼Œè¿è¡Œæ—¶é€šè¿‡åå­—æ¥è¿›è¡Œè°ƒç”¨ä¸¤ä¸ªæ–¹æ³•ï¼š<code>ConfigureServices</code>å’Œ<code>Configure</code>ã€‚</p><h4 id=configureservices-æ–¹æ³•>ConfigureServices æ–¹æ³•</h4><p>è´Ÿè´£é…ç½®ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ç­‰</p><h5 id=ä¾èµ–æ³¨å…¥-di>ä¾èµ–æ³¨å…¥ DI</h5><p>å®ƒæ˜¯ ASP.NET Core ä¸å¯åˆ†å‰²çš„ä¸€éƒ¨åˆ†ï¼Œä¾èµ–äº IoC å®¹å™¨ã€‚</p><p>é¦–å…ˆåœ¨ ASP.NET Core å¯åŠ¨æ—¶ä¼šè¿›è¡Œæ³¨å†Œï¼Œå¯ä»¥å‘ IoC å®¹å™¨è¯·æ±‚è¢«æ³¨å†Œçš„æœåŠ¡çš„ç¤ºä¾‹ã€‚åœ¨æ³¨å†Œæ—¶å¯ä»¥é…ç½®è¢«æ³¨å†Œçš„æœåŠ¡çš„ç”Ÿå‘½å‘¨æœŸã€‚<br>ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰ç§ï¼š</p><ol><li><code>Transient</code> : æ¯æ¬¡è¢«è¯·æ±‚è¿™ä¸ªæœåŠ¡çš„æ—¶å€™éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å®ä¾‹ï¼›</li><li><code>Scoped</code> : æ¯æ¬¡ Web è¯·æ±‚çš„æ—¶å€™ç”Ÿæˆä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œç”Ÿå‘½å‘¨æœŸåˆ° Web è¯·æ±‚æœ€ç»ˆå¤„ç†å®Œï¼›</li><li><code>Singleton</code> : ä¸€æ—¦è¢«åˆ›å»ºï¼Œæ¯æ¬¡è¯·æ±‚éƒ½æ˜¯è¿™ä¸€ä¸ªå®ä¾‹ï¼›</li></ol><h6 id=æ³¨å†ŒæœåŠ¡>æ³¨å†ŒæœåŠ¡</h6><p>ä½¿ç”¨é€šè¿‡ <code>IServiceCollection</code> æ¥å£çš„å˜é‡ <code>service</code> æ³¨å†ŒæœåŠ¡ï¼Œæ¯”å¦‚ MVC çš„æ³¨å†Œæ–¹æ³•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=n>services</span><span class=p>.</span><span class=n>AddControllersWithViews</span><span class=p>();</span>     <span class=c1>// ä¼ ç»Ÿ ASP.NET Core MVC</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸éœ€è¦ <code>Views</code> åš API åªç”¨ Controllers åˆ™ä½¿ç”¨</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=n>services</span><span class=p>.</span><span class=n>AddControllers</span><span class=p>();</span>              <span class=c1>// æ·»åŠ æ§åˆ¶å™¨</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=è‡ªå®šæœåŠ¡>è‡ªå®šæœåŠ¡</h6><ol><li><p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹(é€šå¸¸å‘½åä¸º"Services")</p></li><li><p>æ–°å»ºä¸€ä¸ªæ¥å£ï¼Œæ¯”å¦‚ <code>IClock</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl> <span class=kd>public</span> <span class=k>interface</span> <span class=nc>IClock</span> <span class=p>{}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>æ–°å»º CSharp ç±»ï¼Œå®ç°æ¥å£</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl> <span class=kd>public</span> <span class=k>class</span> <span class=nc>ChineseClock</span><span class=p>:</span> <span class=n>IClock</span> <span class=p>{}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>æ³¨å†Œè‡ªå·±å†™çš„æœåŠ¡ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl> <span class=n>services</span><span class=p>.</span><span class=n>AddTransient</span><span class=p>&lt;&gt;();</span>
</span></span><span class=line><span class=cl> <span class=n>services</span><span class=p>.</span><span class=n>AddScoped</span><span class=p>&lt;&gt;();</span>
</span></span><span class=line><span class=cl> <span class=n>services</span><span class=p>.</span><span class=n>AddSingleton</span><span class=p>&lt;&gt;();</span>
</span></span><span class=line><span class=cl><span class=c1>// æ³¨å†ŒæŒ‡å®šç”Ÿå‘½å‘¨æœŸçš„æœåŠ¡</span>
</span></span></code></pre></td></tr></table></div></div><p>æ¯”å¦‚ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=c1>// æ³›å‹ï¼šæœ‰å®ä¾‹è¯·æ±‚IClockæ¥å£çš„å¯¹è±¡,è¿”å›ChineseClockç±»å‹çš„å®ä¾‹</span>
</span></span><span class=line><span class=cl> <span class=n>services</span><span class=p>.</span><span class=n>AddSingleton</span><span class=p>&lt;</span><span class=n>IClock</span><span class=p>,</span> <span class=n>ChineseClock</span><span class=p>&gt;();</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>ä½¿ç”¨æœåŠ¡ï¼š</p><ol><li><p>å»ºç«‹æ–‡ä»¶å¤¹ <code>Controllers</code> ï¼ŒASP.NET Core ä¸€èˆ¬éƒ½æœ‰ä¸€ä¸ªæ–‡ä»¶å¤¹å«åšè¿™ä¸ªåå­—ï¼Œé‡Œé¢æ”¾ç€æ‰€æœ‰çš„æ§åˆ¶å™¨ï¼›</p></li><li><p>æ–°å»ºç±» <code>xxxxController.cs</code> ï¼ŒæŒ‰ç…§çº¦å®šï¼Œåº”è¯¥ä»¥ <code>"Controller"</code> ç»“å°¾;</p></li><li><p>é¦–å…ˆè®©æ–°å»ºçš„è¿™ä¸ªç±»ï¼ˆæ¯”å¦‚ <code>HomeController</code> ï¼‰<del>ç»§æ‰¿ Controller</del>ï¼ˆåœ¨å‘½åç©ºé—´ <code>Microsoft.AspNetCore.Mvc</code> ä¸‹ï¼Œç–‘ä¼¼å·²ç»æ›´æ”¹ä¸º <code>ControllerBase</code>ï¼‰è¿™ä¸ªçˆ¶ç±»ï¼›</p></li><li><p>å†™æ„é€ å‡½æ•°ï¼Œå‚æ•°ç±»å‹ä¸ºå‰é¢å®šä¹‰çš„æ¥å£ï¼›</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl>  <span class=kd>public</span> <span class=k>class</span> <span class=nc>HomeController</span><span class=p>:</span> <span class=n>Controller</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kd>public</span> <span class=n>HomeController</span><span class=p>(</span><span class=n>IClock</span> <span class=n>clock</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>æ³¨å†ŒæœåŠ¡åï¼Œä¼ ç»™æ§åˆ¶å™¨çš„å‚æ•°çš„ç±»å‹ä¸ºæ³›å‹çš„ç¬¬äºŒä¸ªå‚æ•°ï¼›è¿™æ ·å†™å®ç°ä¸€ä¸ªæ¥å£å¯ä»¥ä¿è¯åœ¨æ›´æ”¹æœåŠ¡æ³¨å…¥å…¶å®ƒç±»çš„æ—¶å€™ä¸éœ€è¦æ›´æ”¹æ§åˆ¶å™¨çš„ä¼ å…¥å‚æ•°ã€‚è¿™æ ·å¯ä»¥ä½¿æ§åˆ¶å™¨å’Œå…·ä½“çš„æœåŠ¡ç±»è§£è€¦ã€‚</p></blockquote></li></ol></li></ol><h6 id=di-çš„ä¼˜ç‚¹>DI çš„ä¼˜ç‚¹</h6><ol><li>è§£è€¦ï¼Œæ²¡æœ‰å¼ºä¾èµ–ï¼Œåˆ©äºè¿›è¡Œå•å…ƒæµ‹è¯•ï¼›</li><li>ä¸éœ€è¦äº†è§£å…·ä½“çš„æœåŠ¡ç±»ï¼›</li><li>ä¸éœ€è¦æ‰‹åŠ¨ç®¡ç†æœåŠ¡ç±»çš„ç”Ÿå‘½å‘¨æœŸã€‚</li></ol><h4 id=configure-æ–¹æ³•>Configure æ–¹æ³•</h4><p>å®é™…ä¸Šä¼ å…¥çš„å‚æ•° <code>IApplicationBuilder app</code> å¯¹åº”çš„æ˜¯ä¸€ä¸ªæœåŠ¡ï¼Œé€šè¿‡ä¾èµ–æ³¨å…¥ï¼ˆåœ¨ <code>CreateHostBuilder()</code> æ—¶å€™ï¼‰æ³¨å…¥è¿›æ¥ã€‚</p><p>æ­¤æ–¹æ³•ç”¨æ¥é…ç½® ASP.NET Core å¯¹å¤„ç† HTTP è¯·æ±‚çš„ç®¡é“ï¼ˆpipelineï¼‰ï¼ŒæŒ‡å®šæ•´ä¸ªåº”ç”¨å¯¹ HTTP è¯·æ±‚çš„å¤„ç†æ–¹æ³•ï¼ŒHTTP è¯·æ±‚ä»ç®¡é“è¿›å»ï¼Œåˆä»ç®¡é“è¿”å›ã€‚</p><h5 id=ç®¡é“ä¸ä¸­é—´ä»¶>ç®¡é“ä¸ä¸­é—´ä»¶</h5><p>å¦‚æœç®¡é“ä»€ä¹ˆä¹Ÿæ²¡æœ‰ï¼Œé‚£ä¹ˆå¯¹ HTTP è¯·æ±‚ä¸ä¼šåšä»»ä½•å¤„ç†ã€‚</p><p>æ”¾åœ¨ç®¡é“é‡Œé¢ã€å¤„ç†è¯·æ±‚çš„å«åšä¸­é—´ä»¶ã€‚</p><h6 id=ä¸­é—´ä»¶å¼€å‘æ¨¡å¼è®¾ç½®>ä¸­é—´ä»¶ï¼šå¼€å‘æ¨¡å¼è®¾ç½®</h6><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=c1>// åˆ¤æ–­æ˜¯å¦ä¸ºå¼€å‘æ¨¡å¼</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>env</span><span class=p>.</span><span class=n>IsDevelopment</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å¼€å‘æ¨¡å¼ä¸­é—´ä»¶ï¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯é¡µé¢</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=p>.</span><span class=n>UseDeveloperExceptionPage</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å¯ä»¥é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡æ¥å¯ç”¨æˆ–å…³é—­å¼€å‘æ¨¡å¼ã€‚å¼€å‘æ¨¡å¼æ—¶ <code>env.IsDevelopment()</code> å³è¿”å› <code>true</code> ã€‚</p><p>ç¯å¢ƒå˜é‡åç§°ä¸ºï¼š <code>ASPNETCORE_ENVIRONMENT</code>
å€¼ä¸ºï¼š</p><ol><li>å¼€å‘ç¯å¢ƒâ€”â€”&ldquo;Development&rdquo;</li><li>ç”Ÿäº§ç¯å¢ƒâ€”â€”&ldquo;Production&rdquo;</li><li>é¢„å‘å¸ƒç¯å¢ƒâ€”â€”&ldquo;Staging&rdquo;</li><li>è‡ªå®šä¹‰ç¯å¢ƒâ€”â€”&ldquo;è‡ªå®šä¹‰å­—ç¬¦ä¸²&rdquo;<blockquote><p>ä½¿ç”¨ <code>env.IsEnvironment("è‡ªå®šä¹‰å­—ç¬¦ä¸²")</code> æ¥åˆ¤æ–­è‡ªå®šä¹‰ç¯å¢ƒå˜é‡ã€‚</p></blockquote></li></ol><h5 id=ä¸­é—´ä»¶è·¯ç”±>ä¸­é—´ä»¶ï¼šè·¯ç”±</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=n>app</span><span class=p>.</span><span class=n>UseRouting</span><span class=p>();</span>   <span class=c1>// ä¸­é—´ä»¶ï¼šä½¿ç”¨è·¯ç”±</span>
</span></span></code></pre></td></tr></table></div></div><p>è·¯ç”±ä¸­é—´ä»¶èƒ½åˆ¤æ–­ HTTP è¯·æ±‚å‡ºç°åœ¨é‚£ä¸ªç«¯ç‚¹ã€‚</p><h5 id=ä¸­é—´ä»¶ç«¯ç‚¹>ä¸­é—´ä»¶ï¼šç«¯ç‚¹</h5><p>ç«¯ç‚¹å°±æ˜¯ HTTP è¯·æ±‚çš„ URL çš„ç»“å°¾éƒ¨åˆ†ã€‚è¿™ä¸€éƒ¨åˆ†ä¼šè¢«ä¸­é—´ä»¶ä»¶å¤„ç†ã€‚</p><p>æ¯”å¦‚ <code>https://api.gaein.cn/WebCommitApi/write</code> ä¸­ <code>WebCommitApi/write</code> å°±æ˜¯ç«¯ç‚¹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=n>app</span><span class=p>.</span><span class=n>UseEndpoints</span><span class=p>(</span><span class=n>endpoints</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å¯¹ç«¯ç‚¹è¿›è¡Œé…ç½®</span>
</span></span><span class=line><span class=cl>    <span class=n>endpoints</span><span class=p>.</span><span class=n>MapGet</span><span class=p>(</span><span class=s>&#34;/&#34;</span><span class=p>,</span> <span class=kd>async</span> <span class=n>context</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// åŒ¹é…ç«¯ç‚¹ååœ¨æµè§ˆå™¨æ‰“å°HW</span>
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=n>context</span><span class=p>.</span><span class=n>Response</span><span class=p>.</span><span class=n>WriteAsync</span><span class=p>(</span><span class=s>&#34;Hello World!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>é€šè¿‡ lambda è¡¨è¾¾å¼æ¥é…ç½®ç«¯ç‚¹ã€‚<br>å¦‚æœä½¿ç”¨å±æ€§æ ‡ç­¾ï¼ˆå°±æ˜¯åœ¨ Action ä¸Šé¢ä¸­æ‹¬å·ä¹¦å†™è·¯ç”±çš„è¯ï¼‰ï¼Œåªéœ€è¦è¿™æ ·å°±å¯ä»¥äº†ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=n>app</span><span class=p>.</span><span class=n>UseEndpoints</span><span class=p>(</span><span class=n>endpoints</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>endpoints</span><span class=p>.</span><span class=n>MapControllers</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=ä¸­é—´ä»¶é™æ€æ–‡ä»¶>ä¸­é—´ä»¶ï¼šé™æ€æ–‡ä»¶</h5><p>å¦‚æœéœ€è¦é™æ€æ–‡ä»¶çš„è¯ï¼ˆè¿”å› HTMLã€JS ç­‰ï¼‰éœ€è¦ä¸­é—´ä»¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=n>app</span><span class=p>.</span><span class=n>UseStaticFiles</span><span class=p>();</span>
</span></span></code></pre></td></tr></table></div></div><p>æƒ³è¦ä½¿ç”¨é™æ€æ–‡ä»¶ï¼Œéœ€è¦æ–°å»ºæ–‡ä»¶å¤¹åä¸º<code>wwwroot</code>ï¼Œåœ¨æ–‡ä»¶å¤¹é‡Œé¢çš„é™æ€æ–‡ä»¶å¯ä»¥è¢«è®¿é—®åˆ°ï¼ˆä¸éœ€è¦åœ¨ URL åŠ ä¸Š"wwwroot"ï¼‰ã€‚</p><p>å›¾ç‰‡å­˜å‚¨çš„è·¯å¾„ä¸º
<code>./wwwroot/daily-picture/today.png</code></p><p>åˆ™ url ä¸º
<code>https://api.gaein.cn/daily-picture/today.png</code></p><h5 id=ä¸­é—´ä»¶å¼ºåˆ¶-https>ä¸­é—´ä»¶ï¼šå¼ºåˆ¶ HTTPS</h5><p>å¦‚æœéœ€è¦å°† HTTP è¯·æ±‚å¼ºåˆ¶è·³è½¬åˆ° HTTPS åˆ™éœ€è¦ä¸­é—´ä»¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=n>app</span><span class=p>.</span><span class=n>UseHttpsRedirection</span><span class=p>();</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=ä¸­é—´ä»¶é¡ºåº>ä¸­é—´ä»¶é¡ºåº</h5><p>ä¸­é—´ä»¶çš„é¡ºåºå°±æ˜¯å¤„ç†çš„é¡ºåºï¼Œé¡ºåºå¾ˆé‡è¦ã€‚æ¯”å¦‚ Auth ä¼šæ”¾åœ¨å‰è¾¹ï¼Œè·¯ç”±ã€ç«¯ç‚¹ç­‰å†™åœ¨è®¤è¯çš„åè¾¹ã€‚</p><h2 id=é¡¹ç›®åŸºæœ¬ç»“æ„æ–°æ¨¡æ¿>é¡¹ç›®åŸºæœ¬ç»“æ„ï¼ˆæ–°æ¨¡æ¿ï¼‰</h2><p>æ–°çš„æ¨¡æ¿ä½¿ç”¨äº†é¡¶çº§è¯­å¥æ¥ä½œä¸ºç¨‹åºå…¥å£ï¼Œè¯¦è§ <a class=link href=https://learn.microsoft.com/en-us/dotnet/csharp/fundamentals/program-structure/top-level-statements target=_blank rel=noopener>Top-level statements - programs without Main methods - C# | Microsoft Learn</a>ã€‚</p><p>å¼€å¤´å³ä½¿ç”¨ <code>WebApplication</code> çš„é™æ€æ–¹æ³•æ¥åˆ›å»º builderã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=kt>var</span> <span class=n>builder</span> <span class=p>=</span> <span class=n>WebApplication</span><span class=p>.</span><span class=n>CreateBuilder</span><span class=p>(</span><span class=n>args</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¹‹åä½¿ç”¨ builder çš„ <code>Services</code> å±æ€§å’Œ <code>Configuration</code> å±æ€§æ¥è®¿é—®å’Œæ·»åŠ æœåŠ¡ï¼Œå…·ä½“ä»£ç ä¸ä¸Šæ–‡ç›¸åŒã€‚</p><p>ä¹‹åé€šè¿‡</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=kt>var</span> <span class=n>app</span> <span class=p>=</span> <span class=n>builder</span><span class=p>.</span><span class=n>Build</span><span class=p>();</span>
</span></span></code></pre></td></tr></table></div></div><p>æ¥æ„å»ºä¸»æœºï¼Œæ„å»ºåè®¾ç½®ä¸­é—´ä»¶ä¸ä¸Šæ–‡ç›¸åŒã€‚</p><h2 id=è¿è¡Œ-aspnet-core-åº”ç”¨>è¿è¡Œ ASP.NET Core åº”ç”¨</h2><p>åœ¨ VS ä¸­è¿è¡Œæ—¶ï¼Œæœ‰ä¸¤ä¸ªé€‰é¡¹ï¼šå¯ä»¥é€‰æ‹© IIS Expressï¼Œä¹Ÿå¯ä»¥é€‰æ‹©é¡¹ç›®æœ¬èº«ï¼ˆASP.NET Core æ§åˆ¶å°åº”ç”¨å†…åµŒäº†ä¸€ä¸ª Web æœåŠ¡å™¨ï¼Œåå« Kestrelï¼‰ã€‚<br>å¯ä»¥åœ¨â€œé¡¹ç›®â€->â€œå³é”®â€->â€œå±æ€§â€æ¥é…ç½®å¯åŠ¨æ—¶å€™çš„å·¥ä½œã€‚</p><h3 id=ç¯å¢ƒè®¾ç½®>ç¯å¢ƒè®¾ç½®</h3><ol><li>é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®ï¼›</li><li>é€šè¿‡çº¦å®šåç§°æ–¹æ³•ï¼Œæ¯”å¦‚ <code>Configure()</code> æ–¹æ³•å’Œ <code>ConfigureDevelopment()</code> æ–¹æ³•ã€‚</li><li>é€šè¿‡çº¦å®šåç§°ç±»ï¼Œæ¯”å¦‚ <code>StarUpDevelopment</code> ç±»ã€‚æ³¨æ„ï¼Œéœ€è¦è®¾ç½® Program.cs æ–‡ä»¶ä¸­çš„ <code>webBuilder</code> ï¼Œå°†å…¶æ›´æ”¹ä¸º<div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=n>webBuilder</span><span class=p>.</span><span class=n>UseStartup</span><span class=p>(</span><span class=k>typeof</span><span class=p>(</span><span class=n>Program</span><span class=p>));</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><h3 id=åŒ…ç®¡ç†>åŒ…ç®¡ç†</h3><h4 id=åç«¯>åç«¯</h4><h5 id=nuget>NuGet</h5><h4 id=å‰ç«¯>å‰ç«¯</h4><blockquote><p>ä½†æ˜¯å®é™…ä¸Šæ‰‹çš„è¯å‰åç«¯åˆ†ç¦»é¦™ä¸€äº›</p></blockquote><h5 id=npm>NPM</h5><ol><li>æ·»åŠ  <code>package.json</code> æ–‡ä»¶ï¼ˆæœ‰æ¨¡æ¿ï¼‰</li><li>åœ¨ <code>devDependencies</code> ä¸­æ·»åŠ åŒ…ï¼Œä½¿ç”¨ json é”®å€¼å¯¹æ¥è®¾ç½®åŒ…å’Œç‰ˆæœ¬ï¼Œæ¯”å¦‚ï¼š<div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl> <span class=s2>&#34;devDependencies&#34;</span><span class=err>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>     <span class=nt>&#34;aPlayer&#34;</span><span class=p>:</span> <span class=s2>&#34;1.10.1&#34;</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><h5 id=libman>LibMan</h5><ol><li>â€œå³é”®â€->â€œæ·»åŠ â€->â€œæ·»åŠ å®¢æˆ·ç«¯åº“â€</li><li>â€œæä¾›ç¨‹åºâ€é€‰æ‹©"unpkg"</li><li>æœç´¢ã€å®‰è£…ï¼Œä¼šè‡ªåŠ¨å®‰è£…åˆ° wwwroot æ–‡ä»¶å¤¹</li></ol></section><footer class=article-footer><section class=article-tags><a href=/tags/csharp/>CSharp</a>
<a href=/tags/dotnet/>DotNET</a>
<a href=/tags/aspnetcore/>AspNetCore</a>
<a href=/tags/%E7%BC%96%E7%A8%8B/>ç¼–ç¨‹</a>
<a href=/tags/%E7%AC%94%E8%AE%B0/>ç¬”è®°</a>
<a href=/tags/%E5%90%8E%E7%AB%AF/>åç«¯</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>æœ€åæ›´æ–°äº 2025 Jan 13 21:50</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article><a href=/passages/aspnetcore-webapi-note4-http_method/><div class=article-details><h2 class=article-title>GETã€POSTéƒ½æ˜¯ä»€ä¹ˆâ€”â€”å¸¸ç”¨çš„HTTPæ–¹æ³•â€”â€”ASP.NET Core Web API(4)</h2></div></a></article><article><a href=/passages/aspnetcore-webapi-note3-standard/><div class=article-details><h2 class=article-title>æ€ä¹ˆè®¾è®¡ä¼˜é›…çš„APIâ€”â€”æ™®é€šAPIå¯¹å¤–åˆçº¦â€”â€”ASP.NET Core Web API(3)</h2></div></a></article><article><a href=/passages/aspnetcore-webapi-note2-restful/><div class=article-details><h2 class=article-title>ä»€ä¹ˆæ˜¯ RESTâ€”â€”RESTful API ç®€ä»‹â€”â€”ASP.NET Core Web API(2)</h2></div></a></article><article><a href=/passages/aspnetcore-webapi-note1-start/><div class=article-details><h2 class=article-title>å¦‚ä½•åˆ›å»º ASP.NET Core Web APIâ€”â€”å‡†å¤‡å·¥ä½œâ€”â€”ASP.NET Core Web API(1)</h2></div></a></article><article><a href=/passages/aspnetcore-note5-signalr/><div class=article-details><h2 class=article-title>åœ¨ ASP.NET Core ä¸­çš„å®æ—¶é€šä¿¡â€”â€”SignalR å®æ—¶é€šä¿¡â€”â€”ASP.NET Core å…¥é—¨(3)</h2></div></a></article></div></div></aside><script src=//cdn.jsdelivr.net/npm/twikoo@1.6.39/dist/twikoo.all.min.js></script><div id=tcomment></div><style>.twikoo{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}:root[data-scheme=dark]{--twikoo-body-text-color-main:rgba(255, 255, 255, 0.9);--twikoo-body-text-color:rgba(255, 255, 255, 0.7)}.twikoo .el-input-group__prepend,.twikoo .tk-action-icon,.twikoo .tk-submit-action-icon,.twikoo .tk-time,.twikoo .tk-comments-no,.twikoo .tk-comments-count{color:var(--twikoo-body-text-color)}.twikoo .el-input__inner,.twikoo .el-textarea__inner,.twikoo .tk-preview-container,.twikoo .tk-content,.twikoo .tk-nick,.twikoo .tk-send{color:var(--twikoo-body-text-color-main)}.twikoo .el-button{color:var(--twikoo-body-text-color)!important}.twikoo .el-input__count{color:var(--twikoo-body-text-color)!important}.OwO .OwO-body{background-color:var(--body-background)!important;color:var(--body-text-color)!important}</style><script>twikoo.init({envId:"https://api.gaein.cn/comments/",el:"#tcomment",lang:"zh-CN"})</script><footer class=site-footer><section class=copyright>&copy;
2017 -
2025 Gaein nidb çš„åšå®¢</section><section class=powerby>å†€ICPå¤‡17015375-1å·<br>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º<br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.29.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>