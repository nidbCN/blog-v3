<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Gaein nidb 的博客</title><link>https://blog.gaein.cn/</link><description>Recent content on Gaein nidb 的博客</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Sat, 22 Feb 2025 00:35:00 +0800</lastBuildDate><atom:link href="https://blog.gaein.cn/index.xml" rel="self" type="application/rss+xml"/><item><title>A Beginner's Guide to FFmpeg.AutoGen</title><link>https://blog.gaein.cn/passages/beginner-guide-to-ffmpeg-autogen/</link><pubDate>Sat, 22 Feb 2025 00:35:00 +0800</pubDate><guid>https://blog.gaein.cn/passages/beginner-guide-to-ffmpeg-autogen/</guid><description>&lt;h1 id="a-beginners-guide-to-ffmpegautogen">A Beginner&amp;rsquo;s Guide to FFmpeg.AutoGen
&lt;/h1>&lt;h2 id="introduction">Introduction
&lt;/h2>&lt;p>FFmpeg.AutoGen is an auto-generated unsafe bindings for C#/.NET and Mono. It can be used in C#/.NET to invoke ffmpeg&amp;rsquo;s C/C++ libraries.&lt;/p>
&lt;p>The usage is the same as C/C++ API so you can refer to ffmpeg official documents. However, in C#/.NET, we need to load the libraries first, which confused me for a long time.&lt;/p>
&lt;p>Here I concluded the some useful information for beginners to start using ffmpeg.AutoGen.&lt;/p>
&lt;p>This guide addresses the following questions:&lt;/p>
&lt;ul>
&lt;li>which nuget package should I use?&lt;/li>
&lt;li>how to configure the libraries root path?&lt;/li>
&lt;li>how to load libraries from system default path?&lt;/li>
&lt;li>how to solve &lt;code>System.NotSupportedException&lt;/code>?&lt;/li>
&lt;/ul>
&lt;h2 id="which-nuget-package-should-i-use---ffmpegautogen-packages">which nuget package should I use? - ffmpeg.AutoGen packages
&lt;/h2>&lt;h3 id="packages-list">packages list
&lt;/h3>&lt;p>FFmpeg.AutoGen has the following packages on NuGet:&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.nuget.org/packages/FFmpeg.AutoGen" target="_blank" rel="noopener"
>FFmpeg.AutoGen&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.nuget.org/packages/FFmpeg.AutoGen.Abstractions" target="_blank" rel="noopener"
>FFmpeg.AutoGen.Abstractions&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.nuget.org/packages/FFmpeg.AutoGen.Bindings.DynamicallyLoaded" target="_blank" rel="noopener"
>FFmpeg.AutoGen.Bindings.DynamicallyLoaded&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.nuget.org/packages/FFmpeg.AutoGen.Bindings.DynamicallyLinked" target="_blank" rel="noopener"
>FFmpeg.AutoGen.Bindings.DynamicallyLinked&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.nuget.org/packages/FFmpeg.AutoGen.Bindings.StaticallyLinked" target="_blank" rel="noopener"
>FFmpeg.AutoGen.Bindings.StaticallyLinked&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="introduct-to-each-packages">Introduct to each packages
&lt;/h3>&lt;h4 id="ffmpegautogenbindingsdynamicallylinked">FFmpeg.AutoGen.Bindings.DynamicallyLinked
&lt;/h4>&lt;p>&lt;code>FFmpeg.AutoGen.Bindings.DynamicallyLinked&lt;/code> uses &lt;code>DllImport&lt;/code> to load libraries.&lt;/p>
&lt;p>It loads libraries from the default path.&lt;/p>
&lt;p>But the file name passed to &lt;code>DllImport&lt;/code> is hard-coded in Windows file naming convention, such as something like &amp;ldquo;avutil-59&amp;rdquo;. That means you &lt;strong>can not use this package directly on other platforms&lt;/strong>. But you can implement a custom resolver to adapt the filename convention from windows to others platforms by using the code below:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">LibraryUtil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="n">IntPtr&lt;/span> &lt;span class="n">LinuxFfMpegDllImportResolver&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">libraryName&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Assembly&lt;/span> &lt;span class="n">assembly&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">DllImportSearchPath&lt;/span>&lt;span class="p">?&lt;/span> &lt;span class="n">searchPath&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">FfMpegDllImportResolverCore&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">libraryName&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">assembly&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">searchPath&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;so&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="n">IntPtr&lt;/span> &lt;span class="n">MacOsFfMpegDllImportResolver&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">libraryName&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Assembly&lt;/span> &lt;span class="n">assembly&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">DllImportSearchPath&lt;/span>&lt;span class="p">?&lt;/span> &lt;span class="n">searchPath&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">FfMpegDllImportResolverCore&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">libraryName&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">assembly&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">searchPath&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;dylib&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="n">IntPtr&lt;/span> &lt;span class="n">FfMpegDllImportResolverCore&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ReadOnlySpan&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">char&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">loadNameSpan&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Assembly&lt;/span> &lt;span class="n">assembly&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">DllImportSearchPath&lt;/span>&lt;span class="p">?&lt;/span> &lt;span class="n">searchPath&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">extension&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">partedIndex&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">loadNameSpan&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">IndexOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sc">&amp;#39;-&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// contains 0 or multi &amp;#39;-&amp;#39;, format not ffmpeg library&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">partedIndex&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="p">||&lt;/span> &lt;span class="n">loadNameSpan&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">LastIndexOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sc">&amp;#39;-&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">!=&lt;/span> &lt;span class="n">partedIndex&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">NativeLibrary&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">loadNameSpan&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToString&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">assembly&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">searchPath&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">libraryName&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">loadNameSpan&lt;/span>&lt;span class="p">[..&lt;/span>&lt;span class="n">partedIndex&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// library not in map table, not ffmpeg library&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(!&lt;/span>&lt;span class="n">DynamicallyLoadedBindings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">LibraryVersionMap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ContainsKey&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">libraryName&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToString&lt;/span>&lt;span class="p">()))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">NativeLibrary&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">loadNameSpan&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToString&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">assembly&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">searchPath&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">versionName&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">loadNameSpan&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="n">partedIndex&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">)..];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">styledName&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">$&amp;#34;{libraryName}.{extension}.{versionName}&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">NativeLibrary&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">styledName&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">assembly&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">searchPath&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>And using thos codes to configure DllImport use custom resolver:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// instantiate the logger before here or change `logger.LogInformation` to `Console.WriteLine`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(!&lt;/span>&lt;span class="n">RuntimeInformation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">IsOSPlatform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">OSPlatform&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Windows&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// not windows&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">bindingAssembly&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">typeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">DynamicallyLinkedBindings&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">Assembly&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">RuntimeInformation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">IsOSPlatform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">OSPlatform&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Linux&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">||&lt;/span> &lt;span class="n">RuntimeInformation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">IsOSPlatform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">OSPlatform&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">FreeBSD&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">LogInformation&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Linux/FreeBSD platform, use resolver {name} for assembly `{asm}`.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">nameof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">LibraryUtil&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">LinuxFfMpegDllImportResolver&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">bindingAssembly&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetName&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">NativeLibrary&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SetDllImportResolver&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">bindingAssembly&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">LibraryUtil&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">LinuxFfMpegDllImportResolver&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">RuntimeInformation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">IsOSPlatform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">OSPlatform&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">OSX&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">LogInformation&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;OSX platform, use resolver {name} for assembly `{asm}`.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">nameof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">LibraryUtil&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">LinuxFfMpegDllImportResolver&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">bindingAssembly&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetName&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">NativeLibrary&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SetDllImportResolver&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">bindingAssembly&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">LibraryUtil&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">MacOsFfMpegDllImportResolver&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">PlatformNotSupportedException&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="ffmpegautogenbindingsdynamicallyloaded">FFmpeg.AutoGen.Bindings.DynamicallyLoaded
&lt;/h4>&lt;p>&lt;code>FFmpeg.AutoGen.Bindings.DynamicallyLoaded&lt;/code> use &lt;code>LoadLibrary&lt;/code> method in &lt;code>Kernel32&lt;/code> library on Windows, use &lt;code>dlopen&lt;/code> method in &lt;code>Libdl&lt;/code> on Linux and MacOS.&lt;/p>
&lt;h4 id="ffmpegautogenbindingsstaticallylinked">FFmpeg.AutoGen.Bindings.StaticallyLinked
&lt;/h4>&lt;p>This package use &lt;code>DllImport(&amp;quot;__Internal&amp;quot;)&lt;/code> to import libraries, it required you build the library into assembly.&lt;/p>
&lt;h4 id="ffmpegautogenabstractions">FFmpeg.AutoGen.Abstractions
&lt;/h4>&lt;p>This package contains definitions about structs and functions. But you can&amp;rsquo;t invoke functions define in this package, because it&amp;rsquo;s only have definitions but no body, you need install others &lt;code>Bindings&lt;/code> package and use &lt;code>DynamicallyLinkedBindings.Initialize();&lt;/code> or &lt;code>DynamicallyLoadedBindings.Initialize();&lt;/code> method to initialize.&lt;/p>
&lt;h4 id="ffmpegautogen">FFmpeg.AutoGen
&lt;/h4>&lt;p>This package looks like a combine of &lt;code>FFmpeg.AutoGen.Abstractions&lt;/code> and &lt;code>FFmpeg.AutoGen.Bindings.DynamicallyLoaded&lt;/code> with a few properties changed.&lt;/p>
&lt;p>The offical example use ``FFmpeg.AutoGen.Bindings.DynamicallyLoadedBindings&lt;code>instead of&lt;/code>FFmpeg.AutoGen&lt;code>, but the README use &lt;/code>ffmpeg.RootPath = &lt;code>to set libraries path which is defined in&lt;/code>FFmpeg.AutoGen`.&lt;/p>
&lt;h3 id="conclusion-of-which-package-should-i-choose">conclusion of which package should I choose
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>If you&amp;rsquo;re using ffmpeg in Mono, choose &lt;code>FFmpeg.AutoGen.Bindings.StaticallyLinked&lt;/code> and &lt;code>FFmpeg.AutoGen.Abstractions&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>If your app only run on Windows, choose &lt;code>FFmpeg.AutoGen.Bindings.DynamicallyLinked&lt;/code> and &lt;code>FFmpeg.AutoGen.Abstractions&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>If your app running on mult-platform, choose &lt;code>FFmpeg.AutoGen.Bindings.DynamicallyLoaded&lt;/code> and &lt;code>FFmpeg.AutoGen.Abstractions&lt;/code> or &lt;code>FFmpeg.AutoGen.Bindings.DynamicallyLinked&lt;/code> with custom resolver. Use &lt;code>FFmpeg.AutoGen&lt;/code> is also a good choice.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="how-to-configure-the-libraries-root-path---use-prop-in-dynamicallyloaded-or-ffmpegautogen">how to configure the libraries root path? - use prop in DynamicallyLoaded or FFmpeg.AutoGen
&lt;/h2>&lt;p>&lt;code>DynamicallyLinked&lt;/code> can&amp;rsquo;t specify a custom root path for libraries.&lt;/p>
&lt;p>If you want to use the library files which are not in the default search path, use &lt;code>DynamicallyLoaded&lt;/code> and set the path to property &lt;code>DynamicallyLoadedBindings.LibrariesPath&lt;/code>.&lt;/p>
&lt;p>&lt;code>ffmpeg.RootPath&lt;/code> from package &lt;code>FFmpeg.AutoGen&lt;/code> is the same as &lt;code>DynamicallyLoadedBindings.LibrariesPath&lt;/code>.&lt;/p>
&lt;p>By the way, the libraries root should contains libs like &lt;code>avutil-59.dll&lt;/code> on Windows, and &lt;code>libavutil.59.so&lt;/code> on Linux.&lt;/p>
&lt;h2 id="hot-to-load-libraries-from-system-default-path---just-do-nothing">hot to load libraries from system default path - just do nothing
&lt;/h2>&lt;p>In the previous section, I explained the libraries load function of each packages. According to Microsoft Docs and Linux manual page we can find the search order.&lt;/p>
&lt;h3 id="search-order-on-windows-and-linux">Search order on Windows and Linux
&lt;/h3>&lt;p>On windows, the main search order are:&lt;/p>
&lt;ol>
&lt;li>Application directory;&lt;/li>
&lt;li>System directory;&lt;/li>
&lt;li>Windows directory;&lt;/li>
&lt;li>Current work directory;&lt;/li>
&lt;li>Directories in the &lt;code>PATH&lt;/code> environment variable;&lt;/li>
&lt;/ol>
&lt;p>For more information, see reference:&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://learn.microsoft.com/en-us/windows/win32/dlls/dynamic-link-library-search-order" target="_blank" rel="noopener"
>Dynamic-link library search order - Win32 apps | Microsoft Learn&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>On Linux, the main search order are:&lt;/p>
&lt;ol>
&lt;li>Directories in the &lt;code>LD_LIBRARY_PATH&lt;/code> environment variable;&lt;/li>
&lt;li>&lt;code>/etc/ld.so.cache&lt;/code> directory;&lt;/li>
&lt;li>&lt;code>/lib&lt;/code> and &lt;code>/usr/lib&lt;/code> directories.&lt;/li>
&lt;/ol>
&lt;p>For more information, see reference:&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://man7.org/linux/man-pages/man3/dlopen.3.html#DESCRIPTION" target="_blank" rel="noopener"
>dlopen(3) - Linux manual page&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://man7.org/linux/man-pages/man8/ld.so.8.html#DESCRIPTION" target="_blank" rel="noopener"
>ld.so(8) - Linux manual page&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/Ruslan-B/FFmpeg.AutoGen/tree/master/FFmpeg.AutoGen.Bindings.DynamicallyLoaded/Native" target="_blank" rel="noopener"
>FFmpeg.AutoGen/FFmpeg.AutoGen.Bindings.DynamicallyLoaded/Native at master · Ruslan-B/FFmpeg.AutoGen&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>I have no computer with MacOS, so I haven&amp;rsquo;t figured out the search order on MacOS, but I guess it maybe very like the order on Linux.&lt;/p>
&lt;p>If you want to use &lt;code>DynamicallyLoaded&lt;/code> with default path, just do not modify &lt;code>DynamicallyLoadedBindings.LibrariesPath&lt;/code> or ensure its value are &lt;code>string.Empty&lt;/code>. This prop will be added to the front of library name and version. Keep it empty and the package will deliver pure library file name to the method which load the library to memory, that will lead the load method use default search path.&lt;/p>
&lt;h2 id="hot-to-solve-systemnotsupportexception---a-few-debug-tips">hot to solve &lt;code>System.NotSupportException&lt;/code>? - a few debug tips
&lt;/h2>&lt;p>If you invoke a &lt;code>ffmpeg.*&lt;/code> function and throw this exception, it is often because you didn&amp;rsquo;t load the libraries successfully.&lt;/p>
&lt;p>First, make sure you install the &lt;code>FFmpeg.AutoGen.Bindings&lt;/code> or &lt;code>FFmpeg.AutoGen&lt;/code> and called the &lt;code>Initialize()&lt;/code>.&lt;/p>
&lt;p>Second, make sure your libraries files are in correct path with correct file name. If you use the custom root path, just open it and have a look, If you use system default path, try using the system tools to ensure it can be found, such as &lt;code>ldconfig -p -N | grep lib&amp;lt;name&amp;gt;.&amp;lt;version&amp;gt;&lt;/code>.&lt;/p>
&lt;p>Third, make sure all libraries are fine. You can set &lt;code>DynamicallyLoadedBindings.ThrowErrorIfFunctionNotFound&lt;/code> to &lt;code>true&lt;/code>, then the exception will sent during libraries loading. I suggess you print all libriaries version to ensure they are all loaded with the code below:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// instantiate the logger before here or change `logger.Log*` to `Console.WriteLine`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">try&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">version&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">ffmpeg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">av_version_info&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">libraryVersion&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">StringBuilder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">48&lt;/span> &lt;span class="p">*&lt;/span> &lt;span class="n">DynamicallyLoadedBindings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">LibraryVersionMap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Count&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">foreach&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">library&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">requiredVersion&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="n">DynamicallyLoadedBindings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">LibraryVersionMap&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">versionFunc&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">typeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ffmpeg&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">GetMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;{library}_version&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">versionInfo&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">VersionInfo&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="kt">uint&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="n">versionFunc&lt;/span>&lt;span class="p">?.&lt;/span>&lt;span class="n">Invoke&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">??&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">libraryVersion&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AppendLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;\tLibrary: {library}, require `{requiredVersion}`, load `{versionInfo}`&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">libraryVersion&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Remove&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">libraryVersion&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Length&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// remove &amp;#39;\n&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">LogInformation&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Load ffmpeg, version `{v}`&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">version&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">LogInformation&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Load ffmpeg, libraries:\n{libInfo}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">libraryVersion&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">catch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">NotSupportedException&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">LogCritical&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Failed to load ffmpeg, exit.&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">appLifeTime&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">provider&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetRequiredService&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">IHostApplicationLifetime&lt;/span>&lt;span class="p">&amp;gt;();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">appLifeTime&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">StopApplication&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>You can also just add the project source code as a dependency of your project and debug in file &lt;code>FunctionResolverBase.cs&lt;/code> or files under &lt;code>Native&lt;/code> folder.&lt;/p></description></item><item><title>正确设置摄影工作流程中 Adobe Camera Raw 和 Photoshop 的色彩空间</title><link>https://blog.gaein.cn/passages/configure-photography-workflow-colorspace/</link><pubDate>Wed, 04 Dec 2024 10:54:00 +0800</pubDate><guid>https://blog.gaein.cn/passages/configure-photography-workflow-colorspace/</guid><description>&lt;h1 id="前言">前言
&lt;/h1>&lt;p>我发现身边很多朋友确实没有注意过色彩空间的设置，虽然默认的如果全是 sRGB 那&lt;strong>足够的稳妥&lt;/strong>，通常情况下也不会引起任何问题。去深究相机（传感器）、ACR 和 PS 以及屏幕这四个色彩空间也不会提升你的摄影和后期水平。&lt;/p>
&lt;p>当前，不是说这些并不重要，去对显示设备校色和完善工作流程中的色彩空间设置，有助于确保自己所作的后期是有意义的——在另一块校色的屏幕上可以还原出来调色时候自己看到的画面。尽管色彩受到很多方面的影响，不同人有不同的风格，不同人看到的颜色也和其他人脑海中的不尽相同，但是我始终认为，至少应该还原出来调色时候所看到的画面，否则你的创造和成果还只是在你调色当时的那块屏幕上的画面，不具有广泛分发和复现的能力，那创造的成果也是不能分享且不稳定的存在。&lt;/p>
&lt;p>当然，&lt;strong>如果你没有耐心也没有任何广色域的设备以及打印需求&lt;/strong>，请&lt;strong>全部选择 sRGB&lt;/strong>，这样至少不会犯错，总比没有正确设置的准确性要高。&lt;/p>
&lt;p>但是，需要注意的是，&lt;strong>如果你没有一台颜色准确的显示器&lt;/strong>，在所有地方都选择 sRGB 似乎也无济于事，因为计算机不知道如何正确的把颜色转换到你显示器的色彩空间，只能转到 sRGB 然后听天由命吧。&lt;/p>
&lt;p>如果你有这方面的追求、有一个广色域的屏幕或者有一个校色的屏幕，请继续看。&lt;/p>
&lt;p>以下内容全是个人的研究和理解，有错误还请指正。&lt;/p>
&lt;h2 id="举个例子说明下重要性">举个例子说明下重要性
&lt;/h2>&lt;p>听说广色域 “更好”？&lt;/p>
&lt;p>当你使用一个没有任何色彩管理的笨蛋软件，在 sRGB 的显示器上打开 Adobe RGB（比 sRGB 要广）的照片之后你发现——他的饱和度甚至还降低了！&lt;/p>
&lt;p>于是，摄影师精心修正的图像，在一个笨蛋软件的手里，变得灰灰暗暗的。&lt;/p>
&lt;p>如下图所示，左侧是支持色彩管理的软件显示的效果（即转换到 sRGB 显示），右侧是不使用色彩管理软件显示的结果（直接将 ProPhoto 当作 sRGB 来显示）。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Configure-Photography-Workflow-Colorspace/left_normal_right_wrong.webp"
loading="lazy"
alt="色彩空间出错对比图"
>&lt;/p>
&lt;p>更要命的是，如果你是一个没有正确设置色彩空间的摄影师，你看到的是灰灰的，就会把他试图拉回“正常”，而换到正常的软件的情况下，刚刚那张拉回“正常”的图，饱和度已经炸眼了！&lt;/p>
&lt;p>例子中的原因是，软件没有读取 exif 中的色彩空间信息，将 Adobe RGB remap 到了 sRGB，对整张图的色彩范围都进行了一次“压缩”，自然在 Adobe RGB 上正常的在这里就变灰了。&lt;/p>
&lt;p>所以说，全 sRGB 是一个稳妥的选择，至少不会发生以上的情况。&lt;/p>
&lt;h2 id="背景知识">背景知识
&lt;/h2>&lt;p>需要对 CIE xyz 以及 RGB 模型有了解，对色彩空间、色域（虽然大多数人都混为一谈了）也有所了解。发现要解释这些绕不开的。&lt;/p>
&lt;h3 id="色域与色彩空间">色域与色彩空间
&lt;/h3>&lt;p>色域这个词更多在卖显示器的那看见，比如 100% sRGB，不过注意，色域是 “100% sRGB” 而不是 “sRGB”。简单来说，&lt;strong>色域是一个设备可以表现的色彩覆盖了某种色彩空间的范围&lt;/strong>，因此色域也就表现了显示器显示颜色的能力，这里的色彩仅指色度，显示器亮/明度还有另一个指标，准度也是另一个指标，100% 覆盖但是准度不行也是白给。&lt;/p>
&lt;p>而色彩空间，就是算上明度的一个完整空间了，CIE xyz 是最大的，涵盖了所有的颜色，&lt;/p>
&lt;h1 id="景象如何从相机来到你的屏幕">景象如何从相机来到你的屏幕
&lt;/h1>&lt;p>似乎在数码摄影中，这个问题不难回答，把拍摄的 RAW 文件拷贝到硬盘里，打开，就好了。对于你作品的观赏者来说，打开你分发的文件，就好了。&lt;/p>
&lt;p>但是不同相机的传感器前的滤色片是不同的，传感器的摄取色彩的范围是不同的，不同的显示器更是。所以文件的存储、编辑、显示都需要涉及到色彩空间的转换，才能让你看到准确的颜色。&lt;/p>
&lt;p>接下来，就让我们看看这一过程中色彩空间是如何转换的。&lt;/p>
&lt;h2 id="拍摄">拍摄
&lt;/h2>&lt;p>光线经过镜头到传感器，经过滤色镜、光电转换、放大后存储在相机内存的 RAW 文件中，通常来说，RAW 文件内是相机特有的色彩空间（由生厂商检测、校正）。同时，如果开启了机内直出，会根据预设调整色调等，然后转换为用户设置的（sRGB/Adobe RGB）色彩空间，并存储在 JPEG 文件。&lt;/p>
&lt;p>将文件从相机拷贝到电脑的过程，由于是复制所以不会进行任何改变。&lt;/p>
&lt;p>此时图片（RAW）的色彩空间是相机特有的色彩空间。JPEG 是用户设置的标准色彩空间。两者内都通过 exif 附加有 icc 校色文件，icc 校色文件可以提供一种色彩空间到另一种的转换，因此无论是否是标准色彩空间，都可以通过其附加的 icc 文件转换为 CIE xyz。&lt;/p>
&lt;h2 id="查看机内直出-jpeg">查看机内直出 JPEG
&lt;/h2>&lt;h3 id="相机内部存储及查看">相机内部存储及查看
&lt;/h3>&lt;p>相机内部程序将色彩空间从传感器特定的色彩空间转换到 CIE xyz，再转换成你在相机内设置的 sRGB 或 Adobe RGB，存储在文件中。&lt;/p>
&lt;p>查看时通过 icc 文件转换到标准的 CIE xyz，再通过屏幕的校色文件转换到屏幕色彩空间表现出来。&lt;/p>
&lt;h3 id="支持色彩管理的软件">支持色彩管理的软件
&lt;/h3>&lt;p>在支持色彩管理的软件中，读取 JPEG icc 并通过其将图片转换到 CIE xyz 空间，再将通过色彩管理中的配置文件（应该配置为屏幕校色文件，如果没有则会使用标准的 sRGB icc），将 CIE xyz 转换到屏幕的色彩空间。&lt;/p>
&lt;p>在 Windows 这种没有全局色彩管理的系统，有可能有软件不使用屏幕校色文件，使用内置的 sRGB 配置进行转换。&lt;/p>
&lt;h3 id="不支持色彩管理的软件">不支持色彩管理的软件
&lt;/h3>&lt;p>不支持色彩管理的软件不会进行任何的色彩空间转换，直接将其显示，如果此时文件的色彩空间与系统设置的（通常是 sRGB 或屏幕校色文件）不匹配，则颜色饱和度会变低或变高。&lt;/p>
&lt;h3 id="adobe-photoshop">Adobe Photoshop
&lt;/h3>&lt;p>Adobe Photoshop 会读取配置文件，如果色彩空间与菜单“编辑-色彩设置”中的“工作空间”不一致，将询问你的处理方式（如下图）：&lt;/p>
&lt;ol>
&lt;li>使用嵌入的配置文件（代替工作空间）：不进行转换，使用文件中的色彩空间，并且暂时修改工作空间为文件中的色彩空间； &lt;strong>不会有任何损失&lt;/strong>&lt;/li>
&lt;li>将文档的颜色转换到工作空间：通过配置文件将文件中的色彩空间转换到配置的工作空间；&lt;strong>如果工作空间比配置文件中的广，则一般不会有损失，但是如果差的过多而且色深没有增加的话会损失精度&lt;/strong>&lt;/li>
&lt;li>扔掉嵌入的配置文件（不进行色彩管理）：&lt;strong>不推荐&lt;/strong>，行为与 “不支持色彩管理的软件” 的一致，容易引发颜色不匹配等问题。&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Configure-Photography-Workflow-Colorspace/ps_alert.webp"
loading="lazy"
alt="PS 的处理方式询问框"
>&lt;/p>
&lt;h2 id="adobe-camera-raw-或相机厂商发布的-解-raw-软件">Adobe Camera Raw 或相机厂商发布的 “解 RAW” 软件
&lt;/h2>&lt;p>这类软件所作的工作是解码存储在 RAW 中的数据，按照彩色阵列将亮度信息转换为色彩信息。&lt;/p>
&lt;p>首先，将传感器色彩空间转换到 CIE xyz 再转换到到你设置的工作空间，供调色、编辑使用。&lt;/p>
&lt;p>同时，通过校色文件转换工作空间到 CIE xyz 到屏幕色彩空间，供显示、校对使用。&lt;/p>
&lt;h1 id="如何设置色彩空间">如何设置色彩空间
&lt;/h1>&lt;p>在前面的章节中，我们已经提到了在 Adobe Photoshop 和 Adobe Camera Raw 中，色彩空间的转换过程，这涉及到如下四个色彩空间：&lt;/p>
&lt;ul>
&lt;li>原色彩空间：照片文件中存储的&lt;/li>
&lt;li>工作空间：供调色、编辑使用的临时色彩空间&lt;/li>
&lt;li>显示空间：供显示器显示所使用的&lt;/li>
&lt;li>存储空间：导出文件中的色彩空间&lt;/li>
&lt;/ul>
&lt;p>原色彩空间通常在拍摄时候已经决定，没有必要进行修改。如果要编辑直出的 JPEG 的话，可以考虑设置为 Adobe RGB，这样可以存储更广泛的颜色范围供编辑使用。&lt;/p>
&lt;p>工作空间用于处理图像，在调色过程中可能会存在本来在显示器色域范围外的颜色被调整到显示范围内的情况，因此&lt;strong>我更倾向于选择更广的 ProPhoto 色彩空间，位深选择 16bit&lt;/strong>。这样做的好处是可以完全囊括颜色，缺点是内容占用稍多。以及如果编辑的原图是 16bit，由于色彩空间更大但单色的存储空间不变会丧失精度。对于这种情况或许可以修改为空间更小的 Rec.2020 以减少损失，但我使用相机的 RAW 为 12bit，并且我不认为这会带来巨大影响。&lt;/p>
&lt;p>显示空间即显示器的校色文件，未校色的使用标准 sRGB。校色的显示器可以在系统设置中指定校色文件，Adobe 中的 ACM 大概率会使用它（未经考证）。&lt;/p>
&lt;p>存储空间即最终出片的文件中的空间，出于保证最广泛用户的准确考虑，一般使用 sRGB；大部分手机都支持 P3 ，但不能保证因为平台压缩等不会造成色彩的准确性丢失；印刷建议使用 Adobe RGB，&lt;strong>但是由于印刷所使用的 Adobe RGB 比 sRGB 要广，成品的颜色可能比 sRGB 显示器上看到的略鲜艳，如果需要严格确保所见即所得请购买 Adobe RGB 显示器。&lt;/strong>&lt;/p>
&lt;h2 id="系统设置">系统设置
&lt;/h2>&lt;p>这一部分主要是确保系统应用了显示器的校色文件来显示颜色。&lt;/p>
&lt;h3 id="windows-10">Windows 10
&lt;/h3>&lt;p>打开 “控制面板-色彩管理”，选择工作显示器后，选中 “显示器校色文件” 设置为默认，点击右下角的配置，点击 “将系统默认值重设为当前值”。&lt;/p>
&lt;h3 id="windows-11">Windows 11
&lt;/h3>&lt;p>打开 “设置-系统-显示”，在 “颜色配置文件” 处选择校色的配置文件。可以考虑点击配置文件后点击 “设置为系统默认”。如下图。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Configure-Photography-Workflow-Colorspace/windows11_settings.webp"
loading="lazy"
alt="Windows 11 设置"
>&lt;/p>
&lt;p>可以考虑 “启用自动颜色管理” ，该功能可以将完全不管颜色管理的软件输出的内容从 sRGB 转到屏幕色彩空间。&lt;/p>
&lt;h2 id="adobe-camera-raw">Adobe Camera Raw
&lt;/h2>&lt;p>打开 “首选项（右上角齿轮图标按钮）-工作流程”，色彩空间选择 “ProPhoto RGB” 或 “Rec.2020”，色彩深度选择 “16位/通道”（理由见前文关于工作空间所阐述的内容）。如下图。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Configure-Photography-Workflow-Colorspace/acr_settings.webp"
loading="lazy"
alt="ACR 设置"
>&lt;/p>
&lt;h2 id="adobe-photoshop-1">Adobe Photoshop
&lt;/h2>&lt;p>打开 “编辑-颜色设置”。选择 “北美印前2” ，修改工作空间为你在 ACR 中设置的色彩空间，同时确保 “显示器 RGB” 在列表中并且是正确的（确保正常加载）。如下图。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Configure-Photography-Workflow-Colorspace/ps_settings.webp"
loading="lazy"
alt="PS 设置"
>&lt;/p>
&lt;h2 id="图片查看软件">图片查看软件
&lt;/h2>&lt;p>以 ImageGlass 为例，我通常使用该软件来查看图片。&lt;/p>
&lt;p>打开 “设置-图像” ，在 “色彩管理” 一节，“色彩配置文件” 中选择 “当前显示器配置”。&lt;/p>
&lt;h1 id="参考">参考
&lt;/h1>&lt;ul>
&lt;li>&lt;a class="link" href="https://helpx.adobe.com/ca/camera-raw/using/camera-raw-settings.html" target="_blank" rel="noopener"
>Manage Adobe Camera Raw settings&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.adobe.com/digitalimag/pdfs/color_managed_raw_workflow.pdf" target="_blank" rel="noopener"
>A Color Managed Raw Workflow——From Camera to Final Print&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>尼康手动镜头发展历程及型号解析</title><link>https://blog.gaein.cn/passages/nikkor-manual-lens/</link><pubDate>Sat, 09 Nov 2024 15:17:00 +0800</pubDate><guid>https://blog.gaein.cn/passages/nikkor-manual-lens/</guid><description>&lt;h1 id="前言">前言
&lt;/h1>&lt;p>在尼康大 F 单反所开创的时代中，尼康作为光学大厂同样也推出了非常多款优秀的尼克尔镜头，这些手动镜头全部使用 F 卡口，但由于其标识的变化，令人难以分清。因此本文详细讲解了 F 卡口手动镜头的各种不同型号，旨在帮助读者理清其发展顺序以及方便在购买中进行辨别。&lt;/p>
&lt;h2 id="autoai-与-ai-s">AUTO/Ai 与 Ai-s
&lt;/h2>&lt;p>实际上，这些镜头并非是不同的 “口” ，相反，他们同样属于 F 卡口，拥有着同样的尺寸、法兰距与接口结构。但是，由于所采用的光圈耦合技术不同，他们并非完全兼容。&lt;/p>
&lt;p>不同于后期的 AF-D/G 等，此处的 AUTO/Ai/Ai-s 代表的与机器测光联动的方式。最早出现的是 AUTO，之后是 Ai 以及改进的 Ai-s。再之后变过渡到了自动对焦时代。但实际上 AF 系列镜头依旧属于 Ai/Ai-s。&lt;/p>
&lt;h1 id="auto-自动测光">AUTO-自动测光
&lt;/h1>&lt;p>AUTO，自动，现在听起来让人感觉像是能够自动对焦的东西。但是那个时候的自动指的可不是对焦，而是测光。&lt;/p>
&lt;p>曝光的三要素：ISO、光圈与快门。ISO 由所装载的胶卷所决定，一卷胶卷为同样的 ISO，因此该值在机身上设置，而快门也由机身调节，但是光圈是由镜头所调节，这时候要测算曝光就存在一个问题——如何让机身知晓镜头上的光圈大小？&lt;/p>
&lt;p>于是尼康在卡口外设置了一个小连杆，挂到镜头的光圈环，其下是一个滑动变阻器，与快门和 ISO 连接，通过模拟电路让合适的电流流经电流表，变指示出了曝光的程度。&lt;/p>
&lt;p>这样当然也有一个问题，快门没有开启的时候镜头始终处于最大光圈（方便你的取景和拍摄），而相机并不知道最大光圈值是多少。于是，所有镜头的联动装置都设置在 F5.6 处，装上后需要先拧到最小光圈，再拧到最大光圈。&lt;/p>
&lt;h2 id="型号标识以及发展">型号标识以及发展
&lt;/h2>&lt;p>AUTO 的镜头普遍为银色+黑色配色，而且对焦移动的镜组外面是银色、非圆形，所以被称为“菠萝”。&lt;/p>
&lt;p>最早期的镜头，使用的是 “日本光学(NIPPON KOGAKU JAPAN)” 的名字，并且使用厘米作为单位标记焦距，该产品系列的标识使用的是 “Nikkor-&amp;lt;结构&amp;gt;”，通过一个字母来表示当前镜头的结构，比如 &lt;code>Nikkor-H&lt;/code>、 &lt;code>Nikkor-S&lt;/code> 等。镜头上刻的型号类似于：&lt;/p>
&lt;p>&lt;code>NIPPON KOGAKU JAPAN No.3xxxxx NIKKOR-S 1:1.4 f=5cm&lt;/code>&lt;/p>
&lt;p>生成较少产品后，则使用毫米作为单位标注焦距，如：&lt;/p>
&lt;p>&lt;code>NIPPON KOGAKU JAPAN No.6xxxxx NIKKOR-S 1:1.4 f=50mm&lt;/code>&lt;/p>
&lt;p>而后，公司改用日本光学生产的第一款相机——“尼康”，镜头上刻的字也从 &amp;ldquo;NIPPON KOGAKU JAPAN&amp;rdquo; 改为 &amp;ldquo;Nikon&amp;rdquo;：&lt;/p>
&lt;p>&lt;code>Nikon No.10xxxxx NIKKOR-S 1:1.4 f=50mm&lt;/code>&lt;/p>
&lt;p>而后使用了多层镀膜技术后生成的镜头，则标记为 &lt;code>Nikkor-&amp;lt;结构&amp;gt;·C&lt;/code>，如：&lt;/p>
&lt;p>&lt;code>Nikon No.12xxxxx NIKKOR-S·C 1:1.4 f=50mm&lt;/code>&lt;/p>
&lt;p>AUTO 的最后一代为改进了镀膜后的镜头，被称为 “K版”，而官方的说法则是 &lt;code>New Nikkor(新型尼克尔)&lt;/code>。&lt;/p>
&lt;p>这种镜头几乎和 Ai 的设计一致：整体呈黑色，只有光圈环为银色，但光圈耦合拨杆为 AUTO 的。上面的刻的型号也和 Ai 的一样，只有 Nikon 和 Nikkor 以及焦距、光圈等，如：&lt;/p>
&lt;p>&lt;code>Nikon Nikkor 50mm 1:1.4 2xxxxxx&lt;/code>&lt;/p>
&lt;p>当然，也有很多官方和民间从 AUTO 改为 Ai 耦合系统的。&lt;/p>
&lt;h2 id="光学素质">光学素质
&lt;/h2>&lt;p>出现多层镀膜技术后的普遍较好，C 版 和 K 版都相当不错。&lt;/p>
&lt;h2 id="具体型号">具体型号
&lt;/h2>&lt;h3 id="超广角">超广角
&lt;/h3>&lt;h4 id="小于-14mm">小于 14mm
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>Nikon Auto Nikkor 7.5mm F5.6 鱼眼&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 8mm F2.8 鱼眼&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor T10.5cm F4&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="14mm-20mm">14mm-20mm
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>Nikon UW-Nikkor 15mm F2.8 NEW （ファインダー付）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 15mm F5.6 C&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 16mm F3.5 鱼眼&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 16mm F3.5 鱼眼&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 18mm F4&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="广角">广角
&lt;/h3>&lt;h4 id="20mm">20mm
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>Nikon Auto Nikkor 20mm F3.5&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 20mm F4&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="24mm">24mm
&lt;/h4>&lt;ul>
&lt;li>Nikon Auto Nikkor 24mm F2.8&lt;/li>
&lt;li>Nikon Auto Nikkor 24mm F2.8 C&lt;/li>
&lt;li>Nikon New Nikkor 24mm F2.8&lt;/li>
&lt;/ul>
&lt;h4 id="28mm">28mm
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>Nikon Auto Nikkor 28mm F2&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 28mm F2 C&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 28mm F2&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 28mm F2.8&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 28mm F3.5&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 28mm F3.5 C&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 28mm F3.5&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 28-45mm F4.5&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="35mm">35mm
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>Nikon Auto Nikkor 35mm F1.4&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 35mm F1.4 C&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 35mm F1.4&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 35mm F2&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 35mm F2 C&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 35mm F2&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 35mm F2.8&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 35mm F2.8 C&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 35mm F2.8&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="标准">标准
&lt;/h3>&lt;h4 id="35-50mm不含">35-50mm(不含)
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>Nikon Auto Nikkor 43-86mm F3.5&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 43-86mm F3.5 C&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 43-86mm F3.5&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 45mm F2.8 GN&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 45mm F2.8 GN C&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="50-70mm不含">50-70mm(不含)
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>Nikon Auto Nikkor 50mm F1.4&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 50mm F1.4 C&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 50mm F1.4&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 50mm F2&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 50mm F2 C&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 50mm F2&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 55mm F1.2&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 55mm F1.2 C&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 55mm F1.2&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Micro Nikkor 55mm F3.5&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Micro Nikkor 55mm F3.5 C&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Micro Nikkor 55mm F3.5&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Nikkor-S Auto 5.8cm F1.4&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="长焦">长焦
&lt;/h3>&lt;h4 id="70mm-105mm不含">70mm-105mm(不含)
&lt;/h4>&lt;ul>
&lt;li>Nikon Auto Nikkor 85mm F1.8&lt;/li>
&lt;li>Nikon Auto Nikkor 85mm F1.8 C&lt;/li>
&lt;li>Nikon New Nikkor 85mm F1.8&lt;/li>
&lt;/ul>
&lt;h4 id="105mm">105mm
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>Nikon Auto Nikkor 105mm F2.5&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 105mm F2.5 C&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 105mm F2.5&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 105mm F4 Micro&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="135mm">135mm
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>Nikon New Nikkor 135mm F2&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 135mm F2.8&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 135mm F2.8 C&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 135mm F2.8&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 135mm F3.5&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 135mm F3.5 C&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 135mm F3.5&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="超长焦">超长焦
&lt;/h3>&lt;h4 id="180mm">180mm
&lt;/h4>&lt;ul>
&lt;li>Nikon Auto Nikkor 180mm F2.8&lt;/li>
&lt;/ul>
&lt;h4 id="200mm-300mm不含-变焦最大值">200mm-300mm(不含) (变焦最大值)
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>Nikon Auto Nikkor 200mm F4&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 200mm F4 C&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 200mm F4&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 80-200mm F4.5&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 80-200mm F4.5 C&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 80-200mm F4.5&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 85-250mm F4-4.5&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="300mm-400mm不含-变焦最大值">300mm-400mm(不含) (变焦最大值)
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>Nikon Auto Nikkor 50-300mm F4.5&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 50-300mm F4.5&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon Auto Nikkor 300mm F4.5&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 300mm F4.5&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 300mm F4.5 ED&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="400mm-600mm不含-变焦最大值">400mm-600mm(不含) (变焦最大值)
&lt;/h4>&lt;ul>
&lt;li>Nikon Auto Nikkor 400mm F4.5 フォーカシングユニット付&lt;/li>
&lt;/ul>
&lt;h4 id="600mm-800mm不含-变焦最大值">600mm-800mm(不含) (变焦最大值)
&lt;/h4>&lt;ul>
&lt;li>Nikon Auto Nikkor 200-600mm F9.5&lt;/li>
&lt;li>Nikon Auto Nikkor 200-600mm F9.5-10.5&lt;/li>
&lt;li>Nikon New Nikkor 200-600mm F9.5&lt;/li>
&lt;/ul>
&lt;h4 id="800mm-1200mm含-变焦最大值">800mm-1200mm(含) (变焦最大值)
&lt;/h4>&lt;ul>
&lt;li>
&lt;p>Nikon Auto Nikkor 800mm F8 C&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Nikon New Nikkor 360-1200mm F11 ED&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>不行怎么尼玛尼康出了这么多镜头，那先咕咕了&lt;/p></description></item><item><title>将 alpine 系统配置为软路由</title><link>https://blog.gaein.cn/passages/setup-apline-as-router/</link><pubDate>Sun, 06 Oct 2024 21:22:00 +0800</pubDate><guid>https://blog.gaein.cn/passages/setup-apline-as-router/</guid><description>&lt;h3 id="基础工具">基础工具
&lt;/h3>&lt;p>安装：&lt;/p>
&lt;ul>
&lt;li>zsh&lt;/li>
&lt;li>oh-my-zsh&lt;/li>
&lt;li>vim&lt;/li>
&lt;li>7zip&lt;/li>
&lt;li>git&lt;/li>
&lt;li>curl&lt;/li>
&lt;/ul>
&lt;h3 id="发行版配置">发行版配置
&lt;/h3>&lt;p>编辑：&lt;code>/etc/apk/repositories&lt;/code> ，开启社区仓库&lt;/p>
&lt;h3 id="lan-侧配置">LAN 侧配置
&lt;/h3>&lt;h4 id="ip-地址">IP 地址
&lt;/h4>&lt;p>编辑 &lt;code>/etc/network/interfaces&lt;/code>，加入如下内容（以 lan 口为 &lt;code>eth1&lt;/code> 为例）：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">auto eth1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface eth1 inet static
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> address 172.26.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> netmask 255.255.255.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="dhcp">DHCP
&lt;/h4>&lt;p>DHCP 使用 kea。ISC DHCP 已经在 2022 年宣布停止维护，kea 为其继任者。&lt;/p>
&lt;p>使用 &lt;code>apk add kea&lt;/code> 来安装。&lt;/p>
&lt;p>编辑 &lt;code>/etc/kea/kea-dhcp4.conf&lt;/code>：&lt;/p>
&lt;p>注：以下内容中使用 &lt;code>eth1&lt;/code> &lt;code>172.26.0.1&lt;/code> 作为路由器的 LAN 口网卡和 IP 地址示例，使用 &lt;code>172.26.0.0/24&lt;/code>（子网掩码 &lt;code>255.255.255.0&lt;/code>）作为 LAN 子网，使用 &lt;code>172.26.0.100-172.26.0.200&lt;/code> 作为 DHCP 地址池。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;span class="lnt">193
&lt;/span>&lt;span class="lnt">194
&lt;/span>&lt;span class="lnt">195
&lt;/span>&lt;span class="lnt">196
&lt;/span>&lt;span class="lnt">197
&lt;/span>&lt;span class="lnt">198
&lt;/span>&lt;span class="lnt">199
&lt;/span>&lt;span class="lnt">200
&lt;/span>&lt;span class="lnt">201
&lt;/span>&lt;span class="lnt">202
&lt;/span>&lt;span class="lnt">203
&lt;/span>&lt;span class="lnt">204
&lt;/span>&lt;span class="lnt">205
&lt;/span>&lt;span class="lnt">206
&lt;/span>&lt;span class="lnt">207
&lt;/span>&lt;span class="lnt">208
&lt;/span>&lt;span class="lnt">209
&lt;/span>&lt;span class="lnt">210
&lt;/span>&lt;span class="lnt">211
&lt;/span>&lt;span class="lnt">212
&lt;/span>&lt;span class="lnt">213
&lt;/span>&lt;span class="lnt">214
&lt;/span>&lt;span class="lnt">215
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">diff&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">git&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kea&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dhcp4&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kea&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dhcp4&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">index&lt;/span> &lt;span class="n">a26ae75&lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="n">e9c578a&lt;/span> &lt;span class="mi">100644&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">---&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kea&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dhcp4&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+++&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kea&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dhcp4&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">@@&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">31&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">7&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mi">31&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">7&lt;/span> &lt;span class="err">@@&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">See&lt;/span> &lt;span class="n">section&lt;/span> &lt;span class="mf">8.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">more&lt;/span> &lt;span class="n">details&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">You&lt;/span> &lt;span class="n">probably&lt;/span> &lt;span class="n">want&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="n">just&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">interface&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">g&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="s2">&amp;#34;eth0&amp;#34;&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">specific&lt;/span> &lt;span class="n">IPv4&lt;/span> &lt;span class="n">address&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">that&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">interface&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">g&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="s2">&amp;#34;eth0/192.0.2.1&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;interfaces&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;interfaces&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="s2">&amp;#34;eth1&amp;#34;&lt;/span> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">Kea&lt;/span> &lt;span class="n">DHCPv4&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">default&lt;/span> &lt;span class="n">listens&lt;/span> &lt;span class="n">using&lt;/span> &lt;span class="n">raw&lt;/span> &lt;span class="n">sockets&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">This&lt;/span> &lt;span class="n">ensures&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">all&lt;/span> &lt;span class="n">packets&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">including&lt;/span> &lt;span class="n">those&lt;/span> &lt;span class="n">sent&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">directly&lt;/span> &lt;span class="n">connected&lt;/span> &lt;span class="n">clients&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">@@&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">149&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">7&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mi">149&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">7&lt;/span> &lt;span class="err">@@&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">but&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="s1">&amp;#39;s a lot of writing, so it&amp;#39;&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="n">easier&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="n">this&lt;/span> &lt;span class="n">instead&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;domain-name-servers&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;192.0.2.1, 192.0.2.2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;119.29.29.29&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">Typically&lt;/span> &lt;span class="n">people&lt;/span> &lt;span class="n">prefer&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">refer&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">options&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">their&lt;/span> &lt;span class="n">names&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">so&lt;/span> &lt;span class="n">they&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">@@&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">159&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">7&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mi">159&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">7&lt;/span> &lt;span class="err">@@&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;domain-name&amp;#34;&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">15.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">15&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;example.org&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;gaein.cn&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">Domain&lt;/span> &lt;span class="n">search&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">also&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">popular&lt;/span> &lt;span class="n">option&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">It&lt;/span> &lt;span class="n">tells&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">client&lt;/span> &lt;span class="n">to&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">@@&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">168&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">7&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mi">168&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">7&lt;/span> &lt;span class="err">@@&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">foo&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">mydomain&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">it&lt;/span> &lt;span class="n">fails&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">then&lt;/span> &lt;span class="n">as&lt;/span> &lt;span class="n">foo&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;domain-search&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;mydomain.example.com, example.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;cn-tvs-alpine-homerouter&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="ne">String&lt;/span> &lt;span class="n">options&lt;/span> &lt;span class="n">that&lt;/span> &lt;span class="n">have&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">comma&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">their&lt;/span> &lt;span class="n">values&lt;/span> &lt;span class="n">need&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">have&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">@@&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">217&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">31&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mi">217&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span> &lt;span class="err">@@&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">Based&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="n">information&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">can&lt;/span> &lt;span class="n">then&lt;/span> &lt;span class="n">allow&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">reject&lt;/span> &lt;span class="n">clients&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">use&lt;/span> &lt;span class="n">certain&lt;/span> &lt;span class="n">subnets&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="n">special&lt;/span> &lt;span class="n">options&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">them&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">change&lt;/span> &lt;span class="n">values&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">some&lt;/span> &lt;span class="n">fixed&lt;/span> &lt;span class="n">fields&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;client-classes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="n">This&lt;/span> &lt;span class="n">specifies&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">this&lt;/span> &lt;span class="k">class&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">It&lt;/span>&lt;span class="s1">&amp;#39;s useful if you need to&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="n">reference&lt;/span> &lt;span class="n">this&lt;/span> &lt;span class="k">class&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;voip&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="n">This&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">test&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">It&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">an&lt;/span> &lt;span class="n">expression&lt;/span> &lt;span class="n">that&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">being&lt;/span> &lt;span class="n">evaluated&lt;/span> &lt;span class="n">on&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="n">each&lt;/span> &lt;span class="n">incoming&lt;/span> &lt;span class="n">packet&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">It&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">supposed&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">evaluate&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">either&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="bp">true&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">If&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="s1">&amp;#39;s true, the packet is added to specified&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="k">class&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">See&lt;/span> &lt;span class="n">Section&lt;/span> &lt;span class="mi">12&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">list&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">available&lt;/span> &lt;span class="n">expressions&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">There&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">several&lt;/span> &lt;span class="n">dozens&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Section&lt;/span> &lt;span class="mf">8.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">14&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">more&lt;/span> &lt;span class="n">details&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">DHCPv4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="n">classification&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">Section&lt;/span> &lt;span class="mf">9.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">19&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">DHCPv6&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;test&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;substring(option[60].hex,0,6) == &amp;#39;Aastra&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="n">If&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">client&lt;/span> &lt;span class="n">belongs&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">this&lt;/span> &lt;span class="k">class&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">can&lt;/span> &lt;span class="n">define&lt;/span> &lt;span class="n">extra&lt;/span> &lt;span class="n">behavior&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="n">For&lt;/span> &lt;span class="n">example&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">certain&lt;/span> &lt;span class="n">fields&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">DHCPv4&lt;/span> &lt;span class="n">packet&lt;/span> &lt;span class="n">will&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="n">set&lt;/span> &lt;span class="n">to&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="n">certain&lt;/span> &lt;span class="n">values&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;next-server&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;192.0.2.254&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;server-hostname&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;hal9000&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;boot-file-name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;/dev/null&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="n">You&lt;/span> &lt;span class="n">can&lt;/span> &lt;span class="n">also&lt;/span> &lt;span class="n">define&lt;/span> &lt;span class="n">option&lt;/span> &lt;span class="n">values&lt;/span> &lt;span class="n">here&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">want&lt;/span> &lt;span class="n">devices&lt;/span> &lt;span class="n">from&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="n">this&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">receive&lt;/span> &lt;span class="n">special&lt;/span> &lt;span class="n">options&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">Another&lt;/span> &lt;span class="n">thing&lt;/span> &lt;span class="n">possible&lt;/span> &lt;span class="n">here&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">hooks&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Kea&lt;/span> &lt;span class="n">supports&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">powerful&lt;/span> &lt;span class="n">mechanism&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">that&lt;/span> &lt;span class="n">allows&lt;/span> &lt;span class="n">loading&lt;/span> &lt;span class="n">external&lt;/span> &lt;span class="n">libraries&lt;/span> &lt;span class="n">that&lt;/span> &lt;span class="n">can&lt;/span> &lt;span class="n">extract&lt;/span> &lt;span class="n">information&lt;/span> &lt;span class="ow">and&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">@@&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">294&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">14&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mi">269&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">14&lt;/span> &lt;span class="err">@@&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">This&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">mandatory&lt;/span> &lt;span class="n">parameter&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">each&lt;/span> &lt;span class="n">subnet&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;subnet&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;192.0.2.0/24&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;subnet&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;172.26.66.0/23&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">Pools&lt;/span> &lt;span class="n">define&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">actual&lt;/span> &lt;span class="n">part&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">subnet&lt;/span> &lt;span class="n">that&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">governed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">Kea&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Technically&lt;/span> &lt;span class="n">this&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">optional&lt;/span> &lt;span class="n">parameter&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">but&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="s1">&amp;#39;s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">almost&lt;/span> &lt;span class="n">always&lt;/span> &lt;span class="n">needed&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">DHCP&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="n">its&lt;/span> &lt;span class="n">job&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">If&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">omit&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">clients&lt;/span> &lt;span class="n">won&lt;/span>&lt;span class="s1">&amp;#39;t be able to get addresses, unless there are&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">host&lt;/span> &lt;span class="n">reservations&lt;/span> &lt;span class="n">defined&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">them&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;pools&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="s2">&amp;#34;pool&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;192.0.2.1 - 192.0.2.200&amp;#34;&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;pools&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="s2">&amp;#34;pool&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;172.26.67.2 - 172.26.67.100&amp;#34;&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">These&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">options&lt;/span> &lt;span class="n">that&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">subnet&lt;/span> &lt;span class="n">specific&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">In&lt;/span> &lt;span class="n">most&lt;/span> &lt;span class="n">cases&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">need&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">define&lt;/span> &lt;span class="n">at&lt;/span> &lt;span class="n">least&lt;/span> &lt;span class="n">routers&lt;/span> &lt;span class="n">option&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">as&lt;/span> &lt;span class="n">without&lt;/span> &lt;span class="n">this&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">@@&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">312&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">7&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mi">287&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">7&lt;/span> &lt;span class="err">@@&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">For&lt;/span> &lt;span class="n">each&lt;/span> &lt;span class="n">IPv4&lt;/span> &lt;span class="n">subnet&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">most&lt;/span> &lt;span class="n">likely&lt;/span> &lt;span class="n">need&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">specify&lt;/span> &lt;span class="n">at&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">least&lt;/span> &lt;span class="n">one&lt;/span> &lt;span class="n">router&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;routers&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;192.0.2.1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;172.26.66.1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">@@&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">335&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">31&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mi">310&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">32&lt;/span> &lt;span class="err">@@&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">It&lt;/span>&lt;span class="s1">&amp;#39;s a rather simple reservation: just an address and nothing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="k">else&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;hw-address&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;1a:1b:1c:1d:1e:1f&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;ip-address&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;192.0.2.201&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;hw-address&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;DC:65:55:8A:F6:27&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;ip-address&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;172.26.67.1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;hostname&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;h3c-ap&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">This&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">reservation&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">specific&lt;/span> &lt;span class="n">client&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">It&lt;/span> &lt;span class="n">also&lt;/span> &lt;span class="n">shows&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">this&lt;/span> &lt;span class="n">client&lt;/span> &lt;span class="n">will&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">reserved&lt;/span> &lt;span class="n">hostname&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">A&lt;/span> &lt;span class="n">hostname&lt;/span> &lt;span class="n">can&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="n">defined&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">any&lt;/span> &lt;span class="n">identifier&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">just&lt;/span> &lt;span class="n">client&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;client-id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;01:11:22:33:44:55:66&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;ip-address&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;192.0.2.202&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;hostname&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;special-snowflake&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;client-id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;01:11:22:33:44:55:66&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;ip-address&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;192.0.2.202&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;hostname&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;special-snowflake&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">The&lt;/span> &lt;span class="n">third&lt;/span> &lt;span class="n">reservation&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">based&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">DUID&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">This&lt;/span> &lt;span class="n">reservation&lt;/span> &lt;span class="n">defines&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">special&lt;/span> &lt;span class="n">option&lt;/span> &lt;span class="n">values&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">this&lt;/span> &lt;span class="n">particular&lt;/span> &lt;span class="n">client&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">If&lt;/span> &lt;span class="n">the&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">domain&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">servers&lt;/span> &lt;span class="n">option&lt;/span> &lt;span class="n">would&lt;/span> &lt;span class="n">have&lt;/span> &lt;span class="n">been&lt;/span> &lt;span class="n">defined&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">global&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">subnet&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="n">level&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">host&lt;/span> &lt;span class="n">specific&lt;/span> &lt;span class="n">values&lt;/span> &lt;span class="n">take&lt;/span> &lt;span class="n">preference&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;duid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;01:02:03:04:05&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;ip-address&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;192.0.2.203&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;option-data&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;domain-name-servers&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;10.1.1.202, 10.1.1.203&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;duid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;01:02:03:04:05&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;ip-address&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;192.0.2.203&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;option-data&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;domain-name-servers&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;10.1.1.202, 10.1.1.203&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">The&lt;/span> &lt;span class="n">fourth&lt;/span> &lt;span class="n">reservation&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">based&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">circuit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">This&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">an&lt;/span> &lt;span class="n">option&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">inserted&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">relay&lt;/span> &lt;span class="n">agent&lt;/span> &lt;span class="n">that&lt;/span> &lt;span class="n">forwards&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">packet&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">client&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">@@&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">370&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">31&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mi">346&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">31&lt;/span> &lt;span class="err">@@&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">reservations&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">global&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">reservations&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="ow">in&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">subnet&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">reservations&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pool&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">subnet&lt;/span> &lt;span class="n">specific&lt;/span> &lt;span class="n">parameters&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">host&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">reservation&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">identifiers&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">global&lt;/span> &lt;span class="n">parameter&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;client-id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;01:12:23:34:45:56:67&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;ip-address&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;192.0.2.204&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;option-data&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;vivso-suboptions&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;4491&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;tftp-servers&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;space&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;vendor-4491&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;10.1.1.202, 10.1.1.203&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;client-id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;01:12:23:34:45:56:67&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;ip-address&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;192.0.2.204&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;option-data&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;vivso-suboptions&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;4491&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;tftp-servers&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;space&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;vendor-4491&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;10.1.1.202, 10.1.1.203&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">This&lt;/span> &lt;span class="n">reservation&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">client&lt;/span> &lt;span class="n">that&lt;/span> &lt;span class="n">needs&lt;/span> &lt;span class="n">specific&lt;/span> &lt;span class="n">DHCPv4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">fields&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="n">set&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Three&lt;/span> &lt;span class="n">supported&lt;/span> &lt;span class="n">fields&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">next&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">server&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hostname&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">boot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;client-id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;01:0a:0b:0c:0d:0e:0f&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;ip-address&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;192.0.2.205&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;next-server&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;192.0.2.1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;server-hostname&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;hal9000&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;boot-file-name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;/dev/null&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;client-id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;01:0a:0b:0c:0d:0e:0f&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;ip-address&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;192.0.2.205&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;next-server&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;192.0.2.1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;server-hostname&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;hal9000&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;boot-file-name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;/dev/null&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">This&lt;/span> &lt;span class="n">reservation&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">using&lt;/span> &lt;span class="n">flexible&lt;/span> &lt;span class="n">identifier&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Instead&lt;/span> &lt;span class="n">of&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">relying&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">specific&lt;/span> &lt;span class="n">field&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sysadmin&lt;/span> &lt;span class="n">can&lt;/span> &lt;span class="n">define&lt;/span> &lt;span class="n">an&lt;/span> &lt;span class="n">expression&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">similar&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">what&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">used&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">client&lt;/span> &lt;span class="n">classification&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">@@&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">405&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mi">381&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="err">@@&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">Note&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">flexible&lt;/span> &lt;span class="n">identifier&lt;/span> &lt;span class="n">requires&lt;/span> &lt;span class="n">flex_id&lt;/span> &lt;span class="n">hook&lt;/span> &lt;span class="n">library&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">be&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">loaded&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">work&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;flex-id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#39;s0mEVaLue&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="s2">&amp;#34;ip-address&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;192.0.2.206&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;flex-id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#39;s0mEVaLue&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="s2">&amp;#34;ip-address&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;192.0.2.206&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">+&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">You&lt;/span> &lt;span class="n">can&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="n">more&lt;/span> &lt;span class="n">reservations&lt;/span> &lt;span class="n">here&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">You&lt;/span> &lt;span class="n">can&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="n">more&lt;/span> &lt;span class="n">subnets&lt;/span> &lt;span class="n">there&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="dns">DNS
&lt;/h4>&lt;p>待补充&lt;/p>
&lt;h3 id="wan-侧配置">WAN 侧配置
&lt;/h3>&lt;h4 id="ip-地址以及上网方式">IP 地址以及上网方式
&lt;/h4>&lt;h5 id="使用-dhcp">使用 DHCP
&lt;/h5>&lt;p>编辑 &lt;code>/etc/network/interfaces&lt;/code>，加入如下内容（以 wan 口为 &lt;code>eth0&lt;/code> 为例）：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">auto eth0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface eth0 inet dhcp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="使用-pppoe">使用 PPPoE
&lt;/h5>&lt;p>使用 &lt;code>apk add ppp-pppoe&lt;/code> 安装包。&lt;/p>
&lt;p>编辑 &lt;code>/etc/ppp/peers/isp&lt;/code>，写入如下内容：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">noipdefault
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">defaultroute
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replacedefaultroute
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hide-password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#lcp-echo-interval 30
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#lcp-echo-failure 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">noauth
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persist
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#mtu 1492
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#maxfail 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#holdoff 20
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">plugin pppoe.so eth0 # WAN 侧网卡
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">user &amp;#34;ip1**********&amp;#34; # PPPoE 用户名
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#usepeerdns # 使用运营商 DNS
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>编辑 &lt;code>/etc/ppp/chap-secrets&lt;/code>，写入以下内容：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># &amp;lt;PPPoE 用户名&amp;gt; &amp;lt;服务器&amp;gt; &amp;lt;PPPoE 密码&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;ip1**********&amp;#34; * &amp;#34;********&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>编辑完后可使用 &lt;code>pon isp&lt;/code> 和 &lt;code>poff&lt;/code> 来连接和断开 PPPoE。&lt;/p>
&lt;p>如果需要自动建立连接，使用 &lt;code>apk add ifupdown-ng-ppp&lt;/code> 添加包，并编写 &lt;code>/etc/network/interfaces&lt;/code> 后加入如下内容：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">auto ppp0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface ppp0 inet ppp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> provider isp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>本小节中 &lt;code>isp&lt;/code> 为 &lt;code>/etc/ppp/peers/&lt;/code> 下的文件名，可以自行更改。&lt;/p>
&lt;p>&lt;strong>注意：&lt;/strong> 由于 PPPoE 是将 PPP 协议 “抬旗” 到了 “二层之上、三层之下” 的位置，因此，原本 1500 Mtu 的 Ethernet 内又塞了 PPP，其协议占据了 8 字节，因此对于三层协议来说，Mtu 由 1500 降低到了 1492（典型情况）。此时，由 lan 传入的（Mtu 1500）的超过 PPPoE 网卡的 Mtu 包将无法正常发送，造成 “能 ping 通、能解析却不能打开部分网页” 的现象。**具体解决方案参考防火墙配置中的 PPPoE 小节。**顺便一提，这一做法在 openwrt 的界面中对应的是 “MSS 钳制”。&lt;/p>
&lt;h3 id="nat防护墙等中间处理配置">NAT、防护墙等中间处理配置
&lt;/h3>&lt;h4 id="sysctl">sysctl
&lt;/h4>&lt;p>开启内核相关参数&lt;/p>
&lt;h5 id="bbr">BBR
&lt;/h5>&lt;p>输入 &lt;code>modprobe tcp_bbr&lt;/code> ，该命令无输出&lt;/p>
&lt;p>编辑 &lt;code>/etc/sysctl.d/90-tcp-bbr.conf&lt;/code>，写入如下内容：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">net.core.default_qdisc=fq_codel
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_congestion_control=bbr
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="ip-forward">IP Forward
&lt;/h5>&lt;p>编辑 &lt;code>/etc/sysctl.d/90-IPv4-forwarding.conf&lt;/code>，写入如下内容：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">net.ipv4.ip_forward=1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>完成后使用 &lt;code>sysctl -p&lt;/code> 生效。&lt;/p>
&lt;h4 id="防火墙nat">防火墙&amp;amp;NAT
&lt;/h4>&lt;p>使用 &lt;code>apk add nftables&lt;/code> 安装防火墙。&lt;/p>
&lt;p>编辑 &lt;code>/etc/nftables.d/90-nat.nft&lt;/code>，写入如下内容：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#!/usr/sbin/nft -f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">table inet nat {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> chain prerouting {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type nat hook prerouting priority dstnat; policy accept;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> chain postrouting {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type nat hook postrouting priority srcnat; policy accept;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> oifname &amp;#34;ppp0&amp;#34; masquerade
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>编辑 &lt;code>/etc/nftables.d/90-filter.nft&lt;/code>，写入如下内容：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#!/usr/sbin/nft -f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">table inet filter {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> chain input {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> iifname &amp;#34;eth1&amp;#34; accept
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> chain forward {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type filter hook forward priority filter; policy accept;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tcp flags syn tcp option maxseg size set rt mtu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> chain output {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type filter hook output priority filter; policy accept;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其他的如 ICMP 等内容在 &lt;code>/etc/nftables.nft&lt;/code> 中已经默认配好，如果喜欢可以移至此文件方便管理。&lt;/p>
&lt;h5 id="pppoe-或两侧-mtu-不同">PPPoE 或两侧 Mtu 不同
&lt;/h5>&lt;p>编辑 &lt;code>/etc/nftables.d/90-filter.nft&lt;/code>，在 &lt;code>chain forward&lt;/code> 中加入如下内容：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">tcp flags syn tcp option maxseg size set rt mtu
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>当然，你可能发现了，这一条是对 tcp 协议设置的，不仅需要解协议而且不对其他协议生效。可以将两个网卡的 MTU 设置为相同值，只会在内网损失少量的利用率。&lt;/p>
&lt;h4 id="全锥形-nat">全锥形 NAT
&lt;/h4>&lt;p>参考：&lt;a class="link" href="https://github.com/Chion82/netfilter-full-cone-nat" target="_blank" rel="noopener"
>Chion82/netfilter-full-cone-nat: A kernel module to turn MASQUERADE into full cone SNAT&lt;/a>&lt;/p>
&lt;h4 id="其它软件">其它软件
&lt;/h4>&lt;p>这里使用：daeuniverse/dae&lt;/p>
&lt;h5 id="系统要求">系统要求
&lt;/h5>&lt;p>&lt;code>uname -r&lt;/code> 确保大于 &lt;code>5.8&lt;/code>&lt;/p>
&lt;p>执行：&lt;code>(zcat /proc/config.gz || cat /boot/config-virt) | grep -E 'CONFIG_(DEBUG_INFO|DEBUG_INFO_BTF|KPROBES|KPROBE_EVENTS|BPF|BPF_SYSCALL|BPF_JIT|BPF_STREAM_PARSER|NET_CLS_ACT|NET_SCH_INGRESS|NET_INGRESS|NET_EGRESS|NET_CLS_BPF|BPF_EVENTS|CGROUPS)=|# CONFIG_DEBUG_INFO_REDUCED is not set'&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">CONFIG_BPF=y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CONFIG_BPF_SYSCALL=y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CONFIG_BPF_JIT=y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CONFIG_CGROUPS=y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CONFIG_KPROBES=y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CONFIG_NET_INGRESS=y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CONFIG_NET_EGRESS=y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CONFIG_NET_SCH_INGRESS=m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CONFIG_NET_CLS_BPF=m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CONFIG_NET_CLS_ACT=y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CONFIG_BPF_STREAM_PARSER=y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CONFIG_DEBUG_INFO=y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># CONFIG_DEBUG_INFO_REDUCED is not set
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CONFIG_DEBUG_INFO_BTF=y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CONFIG_KPROBE_EVENTS=y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CONFIG_BPF_EVENTS=y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我使用的 alpine-3.19 满足&lt;/p>
&lt;p>参考：&lt;a class="link" href="https://github.com/daeuniverse/dae/blob/main/docs/en/tutorials/run-on-alpine.md" target="_blank" rel="noopener"
>Run on Alpine Linux&lt;/a>&lt;/p>
&lt;p>&lt;code>/etc/rc.conf&lt;/code> &lt;code>rc_cgroup_mode=&amp;quot;unified&amp;quot;&lt;/code>&lt;/p>
&lt;p>&lt;code>rc-update add cgroups boot&lt;/code>&lt;/p>
&lt;p>&lt;code>/etc/init.d/sysfs #mount_misc&lt;/code>&lt;/p>
&lt;h5 id="安装">安装
&lt;/h5>&lt;p>&lt;code>wget https://github.com/daeuniverse/dae-installer/raw/main/installer.sh&lt;/code>&lt;/p>
&lt;p>&lt;code>chmod +x installer.sh&lt;/code>&lt;/p>
&lt;p>&lt;code>mkdir /etc/dae&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># load all dae files placed in ./config.d/
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">include&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="cm">/*.dae
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">global {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> ##### Software options.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # tproxy port to listen on. It is NOT a HTTP/SOCKS port, and is just used by eBPF program.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # In normal case, you do not need to use it.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> tproxy_port: 12345
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # Set it true to protect tproxy port from unsolicited traffic. Set it false to allow users to use self-managed
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # iptables tproxy rules.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> tproxy_port_protect: true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # Set non-zero value to enable pprof.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> pprof_port: 0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # If not zero, traffic sent from dae will be set SO_MARK. It is useful to avoid traffic loop with iptables tproxy
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # rules.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> so_mark_from_dae: 0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # Log level: error, warn, info, debug, trace.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> log_level: info
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # Disable waiting for network before pulling subscriptions.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> disable_waiting_network: false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # Enable fast redirect for local TCP connections. There is a known kernel issue that breaks certain clients/proxies, such as nadoo/glider. Users may enable this experimental option at their own risks.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> enable_local_tcp_fast_redirect: false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> ##### Interface and kernel options.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # The LAN interface to bind. Use it if you want to proxy LAN.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # Multiple interfaces split by &amp;#34;,&amp;#34;.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> lan_interface: eth1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # The WAN interface to bind. Use it if you want to proxy localhost.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # Multiple interfaces split by &amp;#34;,&amp;#34;. Use &amp;#34;auto&amp;#34; to auto detect.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> wan_interface: auto
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # Automatically configure Linux kernel parameters like ip_forward and send_redirects. Check out
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # https://github.com/daeuniverse/dae/blob/main/docs/en/user-guide/kernel-parameters.md to see what will dae do.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> auto_config_kernel_parameter: true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> ##### Node connectivity check.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # Host of URL should have both IPv4 and IPv6 if you have double stack in local.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # First is URL, others are IP addresses if given.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # Considering traffic consumption, it is recommended to choose a site with anycast IP and less response.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> #tcp_check_url: &amp;#39;http://cp.cloudflare.com&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> tcp_check_url: &amp;#39;http://cp.cloudflare.com,1.1.1.1,2606:4700:4700::1111&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # The HTTP request method to `tcp_check_url`. Use &amp;#39;HEAD&amp;#39; by default because some server implementations bypass
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # accounting for this kind of traffic.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> tcp_check_http_method: HEAD
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # This DNS will be used to check UDP connectivity of nodes. And if dns_upstream below contains tcp, it also be used to check
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # TCP DNS connectivity of nodes.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # First is URL, others are IP addresses if given.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # This DNS should have both IPv4 and IPv6 if you have double stack in local.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> #udp_check_dns: &amp;#39;dns.google.com:53&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> udp_check_dns: &amp;#39;dns.google.com:53,8.8.8.8,2001:4860:4860::8888&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> check_interval: 120s
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # G/oup will switch node only when new_latency &amp;lt;= old_latency - tolerance.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> check_tolerance: 50ms
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> ##### Connecting options.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # Optional values of dial_mode are:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # 1. &amp;#34;ip&amp;#34;. Dial proxy using the IP from DNS directly. This allows your ipv4, ipv6 to choose the optimal path
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # respectively, and makes the IP version requested by the application meet expectations. For example, if you
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # use curl -4 ip.sb, you will request IPv4 via proxy and get a IPv4 echo. And curl -6 ip.sb will request IPv6.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # This may solve some wierd full-cone problem if your are be your node support that. Sniffing will be disabled
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # in this mode.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # 2. &amp;#34;domain&amp;#34;. Dial proxy using the domain from sniffing. This will relieve DNS pollution problem to a great extent
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # if have impure DNS environment. Generally, this mode brings faster proxy response time because proxy will
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # re-resolve the domain in remote, thus get better IP result to connect. This policy does not impact routing.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # That is to say, domain rewrite will be after traffic split of routing and dae will not re-route it.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # 3. &amp;#34;domain+&amp;#34;. Based on domain mode but do not check the reality of sniffed domain. It is useful for users whose
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # DNS requests do not go through dae but want faster proxy response time. Notice that, if DNS requests do not
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # go through dae, dae cannot split traffic by domain.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # 4. &amp;#34;domain++&amp;#34;. Based on domain+ mode but force to re-route traffic using sniffed domain to partially recover
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # domain based traffic split ability. It doesn&amp;#39;t work for direct traffic and consumes more CPU resources.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> dial_mode: domain+
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # Timeout to waiting for first data sending for sniffing. It is always 0 if dial_mode is ip. Set it higher is useful
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # in high latency LAN network.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> sniffing_timeout: 100ms
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # TLS implementation. tls is to use Go&amp;#39;s crypto/tls. utls is to use uTLS, which can imitate browser&amp;#39;s Client Hello.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> tls_implementation: tls
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # The Client Hello ID for uTLS to imitate. This takes effect only if tls_implementation is utls.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> # See more: https://github.com/daeuniverse/dae/blob/331fa23c16/component/outbound/transport/tls/utls.go#L17
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> utls_imitate: chrome_auto
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"># dns sniff see: /etc/dae/config.d/dns.dae
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"># node and group: see /etc/dae/config.d/nodes.dae
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"># routing: see /etc/dae/config.d/route.dae
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>将 Certbot/ACME.sh 自动化申请的证书自动部署到阿里云 CDN</title><link>https://blog.gaein.cn/passages/auto-deploy-cert-to-alicdn/</link><pubDate>Tue, 02 Jul 2024 19:54:27 +0800</pubDate><guid>https://blog.gaein.cn/passages/auto-deploy-cert-to-alicdn/</guid><description>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Auto-Deploy-Cert-to-AliCdn/banner.webp" alt="Featured image of post 将 Certbot/ACME.sh 自动化申请的证书自动部署到阿里云 CDN" />&lt;h2 id="功能">功能
&lt;/h2>&lt;p>定期检查阿里云CDN所使用的SSL证书是否临近到期，如果临近到期则使用本地的签发的证书进行更新。&lt;/p>
&lt;p>证书的签发仍由 certbot 或 acme.sh 等工具完成，这里只涉及到将本地的证书文件部署到 阿里云CDN。&lt;/p>
&lt;p>项目地址：&lt;a class="link" href="https://github.com/nidbCN/AliCdnSSLWorker" target="_blank" rel="noopener"
>nidbCN/AliCdnSSLWorker: 自动读取证书文件并上传到阿里云CDN&lt;/a>&lt;/p>
&lt;h2 id="使用场景">使用场景
&lt;/h2>&lt;p>没错，阿里云ECS、阿里云DNS、阿里云CDN，但是问题来了——签不起阿里云的证书了。&lt;/p>
&lt;p>之前阿里云的免费证书随便签，再后来改成一年20个，这都没啥，毕竟在阿里云的控制台里面手动签一个也没啥麻烦，但是从今年开始，证书的有效期变成了仨月，加之这么多证书签发的时间也不尽相同，这就让我不得不经常性的去签发、更新证书。&lt;/p>
&lt;p>在懒得换证书导致网站宕了一阵时间后，准备把证书换到 Let&amp;rsquo;s Encrypt 签发的 SSL 证书了。签发之类的自然有脚本，也可以用阿里云DNS进行验证。我使用的是 &lt;a class="link" href="https://nginxproxymanager.com/" target="_blank" rel="noopener"
>Nginx Proxy Manager&lt;/a> 里面内建的 ACME，由于我不想破坏这个程序的环境，不愿意再里面再去植入签发完成后去调用我的程序上传等，因此我决定使用挂载证书目录，定期检查实际部署证书的有效期实际再扫描内部证书文件并上传的方法。&lt;/p>
&lt;p>当然，也预留了 HTTP 接口，可以在证书签发完成后通过 curl 等命令调用去更新所有受管理的证书。&lt;/p>
&lt;h2 id="使用方法">使用方法
&lt;/h2>&lt;h3 id="安装">安装
&lt;/h3>&lt;h4 id="使用二进制">使用二进制
&lt;/h4>&lt;p>Github 上没有提供预编译的二进制 &lt;del>因为我懒&lt;/del> &lt;del>有空传好吧&lt;/del> 因此需要使用 .NET SDK8 进行编译。&lt;/p>
&lt;p>进入项目目录后使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">dotnet publish -c Release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>即可编译并创建发布，当然如果临时调试等使用可以使用 &lt;code>dotnet run&lt;/code> 运行。&lt;/p>
&lt;h4 id="使用-docker">使用 docker
&lt;/h4>&lt;p>使用 &lt;code>docker build -t &amp;lt;tag&amp;gt; .&lt;/code> 即可编译容器。&lt;/p>
&lt;p>或使用 &lt;code>docker pull registry.cn-beijing.aliyuncs.com/nidb-cr/alicdn-ssl-worker:git&lt;/code> 拉取编译好的镜像。&lt;/p>
&lt;p>按照 “配置” 章节的内容配置好选项。&lt;/p>
&lt;p>拉取完成后使用 &lt;code>docker run&lt;/code> 运行即可。参数自行编写，如果不会推荐使用下面的 docker compose。&lt;/p>
&lt;h4 id="使用-docker-compose">使用 docker compose
&lt;/h4>&lt;p>以下为示例 docker compose 文件，将其内容写入到 &lt;code>docker-compose.yaml&lt;/code>。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ssl_data&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">driver&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">local&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">driver_opts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">none&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">o&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">bind&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">device&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;/data/example/letsencrypt&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">configs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">alicdn-ssl.conf&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">file&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;./alicdn-ssl/appsettings.json&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">cdn-ssl&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;registry.cn-beijing.aliyuncs.com/nidb-cr/alicdn-ssl-worker:git&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">TZ&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;Asia/Shanghai&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">5057&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">5057&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">depends_on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">nginx&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">ssl_data:/data/ssl&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">configs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">source&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">alicdn-ssl.conf&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">target&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;/app/appsettings.json&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>需要修改的地方为 &lt;code>volumes.ssl_data.driver_opts.device&lt;/code> ，将 &lt;code>/data/example/letsencrypt&lt;/code> 改为存放你 acme.sh 签发证书的目录，该目录下通常有 &lt;code>keys&lt;/code> 和 &lt;code>lives&lt;/code> 等子目录。&lt;/p>
&lt;p>按照 “配置” 章节的内容配置好选项。&lt;/p>
&lt;p>使用 &lt;code>docker compose up -d .&lt;/code> 启动服务。&lt;/p>
&lt;h3 id="配置">配置
&lt;/h3>&lt;p>配置使用标准的 .NET IConfiguration 框架，配置文件由命令行参数、环境变量、.NET secret以及配置文件等提供，详细内容可见微软文档：&lt;a class="link" href="https://learn.microsoft.com/zh-cn/dotnet/core/extensions/configuration" target="_blank" rel="noopener"
>配置 - .NET | Microsoft Learn&lt;/a>。&lt;/p>
&lt;p>推荐使用命令行参数、环境变量和配置文件 &lt;code>appsettings.json&lt;/code>。其中命令行参数比较多用于临时调试等。多种方式可以组合使用且配置节点名称（即 key-value 中的 key）一致。当某个参数被重复配置时，优先级为 “命令行参数 &amp;gt; 环境变量 &amp;gt; 配置文件”。&lt;/p>
&lt;p>以下为配置文件 &lt;code>appsettings.json&lt;/code> 的样例和说明：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Logging&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;LogLevel&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Default&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Information&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Microsoft.Hosting.Lifetime&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Information&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="c1">// Logging 参考 https://learn.microsoft.com/zh-cn/dotnet/core/extensions/logging?tabs=command-line#configure-logging-without-code
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;CertConfig&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;CertFileName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;fullchain.pem&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 证书公钥文件
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;PrivateKeyFileName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;privkey.pem&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 证书私钥文件
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;CertSerchPath&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;/data/ssl/live&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 证书文件的目录（挂载在docker里面的目录），程序会扫描该目录所有子目录中的文件，查找在以上两个选项中配置的证书文件名
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;IntervalHour&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;12&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 每次检查的间隔，每隔{IntervalHour}执行一次检查，若当前HTTPS证书在{IntervalHour}内过期则会更新（小时）
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;CacheTimeoutMin&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;30&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 文件缓存间隔，若上次读取证书文件超过{CacheTimeoutMin}则重新读取（分钟）
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;DomainList&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="c1">// 交给程序管理的域名列表
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="s2">&amp;#34;blog.gaein.cn&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;img.cdn.gaein.cn&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;static.cdn.gaein.cn&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;AliCdnConfig&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;AccessKeyId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;LTA*********************&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 阿里云 AK ID
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;AccessKeySecret&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;*****************************&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 阿里云 AK Secret
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;Endpoint&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;cdn.aliyuncs.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;ApiConfig&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;IpAddress&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;0.0.0.0&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// HTTP API 监听地址
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;Port&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5057&lt;/span> &lt;span class="c1">// HTTP API 监听端口
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上所有配置节点均可通过命令行和环境变量复写，如不改变配置文件将 HTTP 端口更改为 &lt;code>8001&lt;/code>：&lt;/p>
&lt;ul>
&lt;li>环境变量：&lt;code>export ApiConfig_Port=8001&lt;/code> (bash)&lt;/li>
&lt;li>命令行参数：&lt;code>./AliCdnSSLWorker --ApiConfig:Port 8001&lt;/code> 或 &lt;code>ApiConfig:Port=8001&lt;/code>、 &lt;code>/ApiConfig:Port 8001&lt;/code>。使用 &lt;code>dotnet run&lt;/code> 启动同样也可以使用命令行参数。&lt;/li>
&lt;/ul>
&lt;p>详见：&lt;a class="link" href="https://learn.microsoft.com/zh-cn/dotnet/core/extensions/configuration-providers" target="_blank" rel="noopener"
>配置提供程序 - .NET | Microsoft Learn&lt;/a>&lt;/p>
&lt;h3 id="使用">使用
&lt;/h3>&lt;p>其实不用干什么哒！让它跑着就行了。&lt;/p>
&lt;h4 id="web-api">Web API
&lt;/h4>&lt;p>为了方便控制，该项目启动了一个 HTTP 服务器并暴露了 WebAPI&lt;/p>
&lt;h5 id="强制上传所有证书">强制上传所有证书
&lt;/h5>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">HTTP GET &amp;lt;IpAddress&amp;gt;:&amp;lt;Port&amp;gt;/force_refresh/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>你可以使用你喜欢的 HTTP 客户端发送请求，如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">curl http://&amp;lt;ipaddress&amp;gt;:&amp;lt;port&amp;gt;/force_refresh/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>或使用命令行参数 &lt;code>--refresh&lt;/code> 或 &lt;code>-r&lt;/code> 启动二进制发送更新指令，如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo docker &lt;span class="nb">exec&lt;/span> alicdn-ssl dotnet AliCdnSSLWorker.dll -r
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>该命令会从之前的配置中读取 HTTP API 监听的 IP 地址和端口，并向该端口发送请求。&lt;/p>
&lt;p>如刷新成功你将会获得一个 &lt;code>HTTP 200 OK&lt;/code> 的响应。&lt;/p>
&lt;p>export Ali_Key=&amp;quot;&lt;key>&amp;quot;
export Ali_Secret=&amp;quot;&lt;secret>&amp;quot;&lt;/p>
&lt;p>./acme.sh &amp;ndash;issue &amp;ndash;dns dns_ali -d gaein.cn -d &lt;a class="link" href="https://www.gaein.cn" target="_blank" rel="noopener"
>www.gaein.cn&lt;/a> -d v4-cn-bjs3.gaein.cn -d api.gaein.cn -d img.cdn.gaein.cn -d static.cdn.gaein.cn&lt;/p>
&lt;p>./acme.sh&lt;/p></description></item><item><title>2023 日本大阪游记 道顿堀/日本桥/魔法未来</title><link>https://blog.gaein.cn/passages/travel-of-osaka/</link><pubDate>Wed, 06 Sep 2023 17:29:22 +0800</pubDate><guid>https://blog.gaein.cn/passages/travel-of-osaka/</guid><description>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/river-of-dotonnbori.webp" alt="Featured image of post 2023 日本大阪游记 道顿堀/日本桥/魔法未来" />&lt;h2 id="提要">提要
&lt;/h2>&lt;p>本篇博客为2023暑假日本大阪旅游的流水账。有关魔法未来攻略请见 &lt;a class="link" href="https://blog.gaein.cn/passages/Magical-Mirai-2023-osa/" target="_blank" rel="noopener"
>初音ミク「マジカルミライ」魔法未来2023大阪之行&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>注意：多图警告！&lt;/p>&lt;/blockquote>
&lt;h2 id="日程">日程
&lt;/h2>&lt;h3 id="89-day--1太原">8.9 Day -1　太原
&lt;/h3>&lt;p>虽说才刚刚结束暴走一天的古交之行，但是东西总不能不收拾的嘛。&lt;/p>
&lt;p>——于是我找了一天没找着我的单反充电器。&lt;/p>
&lt;p>干脆破罐子破摔了，到日本买个原装充电器算了，时间也不早了。&lt;/p>
&lt;p>因为是第一次出行，多少有点紧张，因此时间上留的很充足。按照计划来说，是坐 8.10 早起的 T8 次列车前往北京，不过由于学校折腾到车站怎么着也得1小时，所以和朋友约定前一天晚上去他家里住。&lt;/p>
&lt;p>把背包装到行李箱里面，再三确认了各种证件之后，出发！&lt;/p>
&lt;p>熟悉的公交车一个小时，然后又转车又换地铁的坐了好长时间，和朋友碰面去他家。&lt;/p>
&lt;p>晚上狠狠的旋了一顿他家楼下的山西菜，之后躺在床上就开始睡不着了，非常希望抓紧能睡着好一睁眼就开始旅程，可又异常兴奋。&lt;/p>
&lt;h3 id="810-day-0-太原-北京西站-明城墙-大兴机场">8.10 Day 0 太原-北京西站-明城墙-大兴机场
&lt;/h3>&lt;p>机票是厦门航空早起 7:30 的，对于北京人来说也许是起个大早，但是对于我来说则是前一天去机场睡大觉！&lt;/p>
&lt;p>如果是自己的话我可能会更特种兵一点，坐傍晚的车，凌晨到京赶去机场。不过考虑到和朋友一起，就把时间留的充足一些，去找个大饭店旋一顿。&lt;/p>
&lt;p>当然，目的还有一个，就是去明城墙拍车，反正一整天也没事做嘛！机场还有一晚上逛呢。原想着去拍国列 K27，但是朝鲜方面的原因这车只跑到丹东，车底也是刷绿25G，想想算了，随便蹲蹲得了。&lt;/p>
&lt;p>朋友的母上也是很赶早的人，8点多发车的天府之星 T8 次 5 点多就送我们去太原站了。说来有趣，朋友虽是太原人却没怎么来过太原站，进了站还是我带他过去检票排队。&lt;/p>
&lt;p>我倒是个很少坐高铁的人，一是票价高我不差时间，二是家里和学校都离高铁站太远了，路上折腾的时间都能把普速车的时间填回来。另外总感觉气氛有些压抑，小时候坐惯了东北进京的车，倒是感觉一车人聊天扯淡嗑瓜子更有烟火气。&lt;/p>
&lt;p>到了检票时间，拿着身份证跑去人工检票口，最后一个屁股离座第一个过闸机就是爽。&lt;/p>
&lt;p>下了月台，便是 天府之星 T8/7 次列车，车底 25k。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/01.webp"
loading="lazy"
alt="T8/7次水牌"
>&lt;/p>
&lt;blockquote>
&lt;p>T8/7 次水牌。&lt;/p>&lt;/blockquote>
&lt;p>说实话，因为 25k 车底太旧，乘坐体验并不好，乘务也不管收垃圾，让我们自己扔QAQ&lt;/p>
&lt;p>一路有说有笑，进了北京西。路过园博园时候还在感慨，上次从这里过见风景旖旎，没想到一场台风给霍霍的乱七八糟的。&lt;/p>
&lt;p>到了北京西朋友就开始懵圈了，记得12年时候和爷爷奶奶去广州，我爷爷还说这地方是“马蜂窝”。作为枢纽车站连通性高的同时自然复杂，不过现在看来也就还好，标志也算清晰。&lt;/p>
&lt;p>由北京西坐七号线再转五号线到崇文门就到了——新侨饭店！由于暑假时候体验过了前门饭店，不贵好吃又高端，所以决定继续旋点好吃的。以前去同仁医院经常在崇文门这边走，倒是还没发现新侨饭店在这，只知道地铁站旁边的崇文门饭店。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/02.webp"
loading="lazy"
alt="北京新侨饭店"
>&lt;/p>
&lt;blockquote>
&lt;p>北京新侨饭店正门。&lt;/p>&lt;/blockquote>
&lt;p>到了新侨饭店后已然不是饭点，不过人一点也不少，大概是老爷们用下午茶的时间。新侨饭店的西点非常好，但是价格属实劝退，权衡半天只敢点一个烧鹅和咕噜肉，算下来200，一人100也就勉强接受了。谁叫咱囊中羞涩捏QAQ。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/03.webp"
loading="lazy"
alt="贵死了烧鹅"
>&lt;/p>
&lt;blockquote>
&lt;p>贵死了的烧鹅，但是好吃。&lt;/p>&lt;/blockquote>
&lt;p>&lt;del>不行不行下次还是前门饭店吧&lt;/del>&lt;/p>
&lt;p>吃完饭便骗着朋友去了明城墙遗址，其实是来拍车的（x&lt;/p>
&lt;p>转了一大圈，买票，上城楼，感觉这个机位也就还好，东便门似乎效果更好一些。&lt;/p>
&lt;p>上面还有一小孩在拍车，看起来也许是小学或者初中，见我上来便跟我嚷嚷着说错过了“好货”——DF11G和好几节原色，俺寻思俺像他那年纪还没刷绿这回事呢。&lt;/p>
&lt;p>蹲了一下午，其实是消磨时间，这个机位说实话不是特别特别好，看火车倒还算好地方，拍照的话接触网太多了，角度也不好。挺好，正好符合我消磨时间的需求了。&lt;/p>
&lt;p>一下午也没看到什么稀奇东西，熬到晚上就算正式“启程”了。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/04.webp"
loading="lazy"
alt="FXSY-0001"
>&lt;/p>
&lt;blockquote>
&lt;p>复兴双源 1 号车，2 号在牵引 T5687 时候坐过一次。&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/05.webp"
loading="lazy"
alt="DF4C-5012"
>&lt;/p>
&lt;blockquote>
&lt;p>DF4C-5012 青年文明号牵引客车入站。&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/06.webp"
loading="lazy"
alt="SS9-0146"
>&lt;/p>
&lt;blockquote>
&lt;p>SS9-0146 牵引客车入站。2016 年去 MIKU EXPO BEIJING 时候我坐的客车 K340 次的本务还是韶山9，如今大部分已经换成和谐电了。&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/07.webp"
loading="lazy"
alt="25G"
>&lt;/p>
&lt;blockquote>
&lt;p>曾经满街都是的25G的靓丽红色，现在已经难得一见了。&lt;/p>&lt;/blockquote>
&lt;p>什么，你问我一下午就照仨？都说了是来消磨时间的啦，另外看一下午的 HXD1D 了。&lt;/p>
&lt;p>混到晚上了，启程前往北京西坐高铁上大兴国际机场！&lt;/p>
&lt;p>大兴机场是我高中语文上的常客了，那时候刚修，现在也运营才没几年，一定程度上代表了我国的基建顶尖水平。上次坐飞机还是12年从广东揭阳飞北京首都，而且这次是第一次自己坐飞机，APP上值机还有些问题，其实还挺紧张的。&lt;/p>
&lt;p>车应该是 CR400 系的，非常高级的复兴号，什么叫复兴号啊（战术后仰&lt;/p>
&lt;p>乘坐舒适，就是在市区一直跑不起来，我都替大车憋屈。&lt;/p>
&lt;p>然后，恭喜我，买错票了。我直接搜的“大兴”，买的站是“北京大兴”，是大兴区内的一个高铁站，而北京大兴国际机场在下一站“大兴机场”。&lt;/p>
&lt;p>过了北京大兴站我还在纳闷，都到手机上的时间了怎么还在中间站？恍然大悟发现买错票了，朋友慌的不行问我要不要下车，我只好找车长去补票。妈的高铁还是贵啊，这么短的距离花了我俩一人40，索性最终胜利到达大兴机场。&lt;/p>
&lt;p>到了大兴机场就是乡下人进城，刘姥姥进大观园了！&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/08.webp"
loading="lazy"
alt="厦门航空/南方航空值机柜台"
>&lt;/p>
&lt;blockquote>
&lt;p>厦门航空/南航值机柜台。&lt;/p>&lt;/blockquote>
&lt;p>因为一直在担心随身行李额度的问题（因为单反+电脑超过了厦门航空规定的 5kg），所以值机去 -1 层值机柜台询问工作人员，好在晚上这个时间的人并不多，所以有人有时间回答我的问题，答案是随身的其实你拿的动多少都无所谓，别背两吨铁块就行（x&lt;/p>
&lt;p>顺便问了下托运的问题还有值机以及海关手续，便溜开逛机场了，反正时间还有的是嘛！&lt;/p>
&lt;p>大兴机场首先是大！-1层的大厅已经和很多小的国际机场差不多大小了，而上了地上后，仅仅是值机的大厅就超乎想象。加之开放式的设计，更显得宽阔。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/09.webp"
loading="lazy"
alt="大兴机场大厅"
>&lt;/p>
&lt;blockquote>
&lt;p>笑死根本不会构图。&lt;/p>&lt;/blockquote>
&lt;p>之后挨个楼层逛了逛，大兴机场里面的店铺繁多，而且大兴机场打出口号“同城、同质、同价”，使得东西一点都不贵，比起其他机场来说，极具性价比。&lt;/p>
&lt;p>最后，收拾好东西，因为去程东西不多，不准备托运，就把相机电脑放在箱子里，随身带上飞机，可以免去等行李的苦衷。&lt;/p>
&lt;p>看了看表，晚上 11 点，直接开卷！明天 7:30 的飞机大部分人会 6 点多到吧，咱直接半夜值机！&lt;/p>
&lt;p>由于是联航的国内段，还需要到国内出发层值机，到了柜台有工作人员在值班，而且也没有人排队（笑死，谁大半夜值机啊），递交护照，便给了我登机牌。问了下 APP 上值机的问题，我 APP 一直处于薛定谔的值机，你点开看之前他显示未值机，点进去想值机又显示已值机，柜台的答案是没值上，顺便帮我把明天厦门高崎飞大阪关西的机值了，不过还需要我去领登机牌。&lt;/p>
&lt;p>登不登机牌排不排队无所谓，咱就是怕和朋友分开了。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/10.webp"
loading="lazy"
alt="大兴机场大厅"
>&lt;/p>
&lt;blockquote>
&lt;p>厦门航空/中国南方航空在大兴机场的登机牌。&lt;/p>&lt;/blockquote>
&lt;p>然后到了安检，电脑、相机、剃须刀乱七八糟一堆东西全要拿出来单独检查，主打一个白收拾了&amp;hellip;&lt;/p>
&lt;p>过了安检进了值机到了候机厅，有 A-D 四个区，其中 B 区有休息区，也不管什么登机口了，反正大屏和登机牌上都没有，便直接冲着 B 去了。&lt;/p>
&lt;p>A、B、C 三个登机口是三个不同方向的巨大连廊，可能有数公里长，不过好在终于走到了休息区，给手机充了下电。&lt;/p>
&lt;p>由于这次旅行没告诉父母，为了人身安全考虑我将详细行程告诉了我表弟，并约定定时上报行程及位置。&lt;/p>
&lt;p>毕竟是第一次出远门&amp;amp;出国&amp;amp;自己坐飞机&amp;hellip;很多第一次，心里是慌的，甚至还买了保险，寻思寄了就爆点金币。&lt;/p>
&lt;p>手机充好电一回头，休息区没位置了&amp;hellip;朋友决定坐椅子上睡，我在蹲躺椅，蹲了半天总算是有了。拉着行李跑过去，往上一躺——然后发现根本睡不着。&lt;/p>
&lt;p>大兴好多基础设施都非常棒，唯独这个躺椅，他非常的反人类。首先是硬的，算是易于清理可以理解。但是它反人体工学：椅子是斜的，而头部的凸起很高，导致我躺在上面时候头会滑下来（因为是硬塑料所以没什么摩擦力），然后会拧着脖子，又只能冲天躺着对着房顶的射灯。&lt;/p>
&lt;p>睡了两分钟，根本没办法睡，还没睡着脖子就不舒服了，这么躺一宿脖子不断了也得落枕，一起之下提着箱子溜回朋友身边，想当年咱也是张家口睡过公园长椅的人！然后大兴的椅子——不能睡。可能是疫情时候装的，每个座位之间都是隔开的，看了看脚底下的地毯，软软的也不冷，那就这了！我直接躺平（物理）。&lt;/p>
&lt;p>身上的衣服是专门为了这两天旅行不能洗澡穿的用来摁造的速干衣，直接开躺，然后从箱子里掏出毛巾，往脸上一盖，我再往椅子底下一钻，耳朵一捂，上了个6点半的闹钟，直接呼呼大睡。&lt;/p>
&lt;h3 id="811-day-1-北京-厦门-大阪">8.11 Day 1 北京-厦门-大阪
&lt;/h3>&lt;p>睡睡醒醒，醒了三次之后终于到了早上5点半，一睁眼发现不对了，&lt;del>我眼前的大白腿呢？？&lt;/del>&lt;/p>
&lt;p>起来一看，朋友不在座位上了，俺寻思别是让人贩子拐了去，抓紧问问他，索性只是去厕所洗漱了。&lt;/p>
&lt;p>朋友睡意全无，我一折腾也不困了，干脆起床候机呗。跑过去一看大屏，屏幕转了三页，还是没有咱的航班。估计是候机口还没定，只能先收拾东西咯。
这时候就看出来大兴机场的大了。两个登机口差了有好几里路，走了好长时间才过去，然后一看——没人。&lt;/p>
&lt;p>果然还是太卷了吗？&lt;/p>
&lt;p>旁边庆丰包子吃了顿，虽然同城同价了，但是感觉不同质，皮黏了吧唧的不好吃，因为这趟航班没有餐食，勉强算是先吃饱了。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/11.webp"
loading="lazy"
alt="大兴机场庆丰"
>&lt;/p>
&lt;blockquote>
&lt;p>上面的好吃，下面的黏了吧唧。&lt;/p>&lt;/blockquote>
&lt;p>第一次坐飞机难免还是有些紧张的，毕竟这么大一块铁在天上飞。不过，看了一车的空中浩劫，哪个空难不是一堆必然的巧合堆积在一起才发生的？我选择相信机组的专业素养，也就安心多了。&lt;/p>
&lt;p>吃完饭终于差不多了，登机！&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/12.webp"
loading="lazy"
alt="737-800经济舱"
>&lt;/p>
&lt;blockquote>
&lt;p>厦门航空 B737-800 经济舱。&lt;/p>&lt;/blockquote>
&lt;p>怀着激动的心情走上了廊桥，顺便给空乘递上了我的 flight log。&lt;/p>
&lt;p>经济舱的座位比我记忆里的更窄、更硬一些，不过倒也能接受，&lt;del>只要便宜我咋都行&lt;/del>。&lt;/p>
&lt;p>我还认真的翻看了逃生的指南，安全面罩等东西的那张单子。&lt;/p>
&lt;p>飞机达到巡航高度，发了小点心，大学生嘛，主打一个吃吃睡睡，开旋！&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/13.webp"
loading="lazy"
alt="厦门航空的餐食"
>&lt;/p>
&lt;p>其实没想睡，&lt;del>实在是忍不住&lt;/del>，毕竟奔波了好几天了。&lt;/p>
&lt;p>一觉醒来空乘把 flight log 放在我小桌板上了。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/14.webp"
loading="lazy"
alt="大兴-高崎段的flight log"
>&lt;/p>
&lt;blockquote>
&lt;p>北京大兴-厦门高崎段的 flight log。&lt;/p>&lt;/blockquote>
&lt;p>中午落地厦门高崎机场，有了之前和大兴的对比感觉小了好多。看了下海关的开关时间还有一阵子，决定去吃顿肯德基。&lt;/p>
&lt;p>这时候才发现大兴的好，厦门机场的K记就很贵了，反正勉强吃了下。&lt;/p>
&lt;p>吃完时间也就差不多了，准备出发！&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/15.webp"
loading="lazy"
alt="高崎机场"
>&lt;/p>
&lt;blockquote>
&lt;p>厦门高崎 国际/港澳台出发&lt;/p>&lt;/blockquote>
&lt;p>真的要出国了！好兴奋！&lt;/p>
&lt;p>先是安检，然后边检和海关一般也会放你走的，自助通道那边一开就很快了。边检小姐姐盖章我还以为是扫码，手指垫在机票下面，她戳的好疼QAQ。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/16.webp"
loading="lazy"
alt="登机牌边检章"
>&lt;/p>
&lt;blockquote>
&lt;p>盖着边检章的登机牌&lt;/p>&lt;/blockquote>
&lt;p>之后是漫长的候机，航班延误了一个多小时，简直是急死人了。中间还换了一个登机口，不过一开始谁都没广播，只是听说要去那边候机，到处找人也没找到，最后才问到的。&lt;/p>
&lt;p>飞机起飞，沿着中国的海岸线飞，从杭州附近向东北方向飞离陆地。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/17.webp"
loading="lazy"
alt="起飞"
>&lt;/p>
&lt;blockquote>
&lt;p>海岸线。&lt;/p>&lt;/blockquote>
&lt;p>漫长的飞行并不无聊，机上的显示屏放了部电影，有关香港律师打案子想办法救无辜的，降落时正好放完。&lt;/p>
&lt;p>中间发了一张入境的申报卡，个人感觉在这个纸上写比日本政府搞那个网站方便多了。卡是中日英三语，不过都是汉字，看日语也没问题&amp;hellip;&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/18.webp"
loading="lazy"
alt="入境申报卡"
>&lt;/p>
&lt;blockquote>
&lt;p>日本的入境申报卡。&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/19.webp"
loading="lazy"
alt="俯瞰日本"
>&lt;/p>
&lt;blockquote>
&lt;p>再见到陆地时候，已经是在日本境内了。&lt;/p>&lt;/blockquote>
&lt;p>眼看着都快落地了，过了巡航阶段了， flight log 也没给我，寻思着可能是机长没空填了，准备作罢了。不过在降落前空乘奇迹般的交给了我，好耶！&lt;/p>
&lt;p>机长还附上了舱单。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/fl2.webp"
loading="lazy"
alt="厦门高崎-大阪关西段的 flight log"
>&lt;/p>
&lt;blockquote>
&lt;p>厦门高崎-大阪关西段的 flight log。&lt;/p>&lt;/blockquote>
&lt;p>可能是因为关西机场航班较多，飞机盘旋了一会才顺利降落，落地时候已经黄昏了。短短的几个小时航程却令我十分焦灼。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/20.webp"
loading="lazy"
alt="黄昏的大阪湾"
>&lt;/p>
&lt;p>关西机场的摆渡车还挺好玩的，是一辆有轮子的车，但是侧边卡在轨道里面，当轨道车用。&lt;/p>
&lt;p>下了摆渡车之后就是边检啦！&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/21.webp"
loading="lazy"
alt="日本边检"
>&lt;/p>
&lt;blockquote>
&lt;p>禁止拍照的日本边检。&lt;/p>&lt;/blockquote>
&lt;p>我知道边检不能拍照，但是我没想到出来就是边检了&amp;hellip;&lt;/p>
&lt;p>日本这边拍照的默认值是禁止，在景区等地方大街上拍照其实还好，如果到一些店铺里没有写又想拍照的话最好问一下啦。&lt;/p>
&lt;p>走到“外国人入境”的地方排队，然后摘眼镜拍照按指纹。&lt;/p>
&lt;p>后面的日本老爷爷一直在跟我比划什么，想说又没说出来，直到排在我后面的朋友看到了喊了声眼镜，老爷爷才想起来眼镜的中文怎么说，也跟着喊了一句。&lt;/p>
&lt;p>进去之后把护照递给里面的工作人员，他翻了半天才找到签证页，然后在旁边的页上贴上一个“上陆许可”的小纸片。&lt;/p>
&lt;blockquote>
&lt;p>别看了，懒得拍照。&lt;/p>&lt;/blockquote>
&lt;p>之后还是排队，过海关，其实只要那个二维码或者飞机上发的小卡片就行了，结果前面有个不知道哪的人反正不是亚洲的，人家前面一直说要填纸片，到处也贴着多国语言的牌子，结果他啥也没弄就过去了，家人们谁懂啊，太下头了。堵在那里一直不走，磨叽了半天拿了个纸条又堵回去了，导致我们这一队比旁边慢了半个小时&amp;hellip;&lt;/p>
&lt;p>终于终于出来了，我到那就给他看了俩二维码。&lt;/p>
&lt;p>之后就到了机场的大厅，因为关西机场是填海造陆成本较高，所以也很小，感觉比中国好多机场都要小。之后我们找关西游客中心想着兑一下之前买的大阪地铁两日券。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/international-arrivals.webp"
loading="lazy"
alt="国际航班到达"
>&lt;/p>
&lt;blockquote>
&lt;p>大厅里面的国际航班到达牌子。&lt;/p>&lt;/blockquote>
&lt;p>然后转了一圈发现，下班了&amp;hellip;&lt;/p>
&lt;p>不是你们不能安排点人24h值班吗？&lt;/p>
&lt;p>之后就直接出了机场，出了之后是二楼，下去是巴士，往前走是电车/地铁站。&lt;/p>
&lt;p>从机场回去坐的是南海特急（谷歌地图的结果是这个），我俩研究了半天才看明白咋买票，到机器那里塞了张 10000 日元。&lt;/p>
&lt;p>实际上南海特急要比南海本线贵好多，也没见快到哪里去。南海本线从关西机场到天下茶屋（中转站）的价格是 970JPY，而南海特急是 1490JPY，时间只差了8分钟。纯纯大怨种了。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/23.webp"
loading="lazy"
alt="线路指示牌"
>&lt;/p>
&lt;blockquote>
&lt;p>南海特急上面的指示牌&lt;/p>&lt;/blockquote>
&lt;p>不同等级的车走同一条线路，停站不同。&lt;/p>
&lt;p>坐了非常非常漫长的一个多小时，终于到达了换乘站　天下茶屋（てんがちゃや）。&lt;/p>
&lt;p>天下茶屋是大阪南部的交通枢纽，位于治安去较差的西成区，之前早就听说过西成区这个地方，定民宿时候还绕开了这里，后来才知道天下茶屋在西成区的。&lt;/p>
&lt;p>下了地铁找了家 seven-eleven ，抓紧去兑演唱会的票，已经忍不住了！&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/24.webp"
loading="lazy"
alt="天下茶屋站台"
>&lt;/p>
&lt;blockquote>
&lt;p>天下茶屋站台&lt;/p>&lt;/blockquote>
&lt;p>出车站就是一家 7-11，用邮件顺利拿到票。&lt;/p>
&lt;p>可惜是座位比较靠后，和 16 年去 EXPO 时候的座位几乎一致，今年海外区的座位都很偏，我这还算偏的里面靠中间的了。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/25.webp"
loading="lazy"
alt="魔法未来2023门票"
>&lt;/p>
&lt;blockquote>
&lt;p>SS票，23列26番是23排26列的意思。&lt;/p>&lt;/blockquote>
&lt;p>看地图 7-11 好像很远（如果是中国地图绝对就是走一个路口那么远）没想到就是出站口里面。&lt;/p>
&lt;p>之后从站前穿过一个停车场，沿着大路走去在四桥线上的岸里站。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/26.webp"
loading="lazy"
alt="街边挂着控告日本政府的牌子"
>&lt;/p>
&lt;blockquote>
&lt;p>街边挂着控告日本政府的牌子。&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/27.webp"
loading="lazy"
alt="路线图"
>&lt;/p>
&lt;blockquote>
&lt;p>从天下茶屋出了站直接往西走，再往南去地铁站，并没有走谷歌地图给出的路线。&lt;/p>&lt;/blockquote>
&lt;p>终于在坐了一站后到达了北加賀屋（きたかがや），本来原计划是到了之后吃个晚饭，再去附近转转的。由于航班晚点再加上在海关堵了一段时间，已经不早了，而且两天的奔波已经疲惫不堪。并且之前在西成区的路上走了一条街，发现这个点大部分商店已经关门休息了，所以直接准备回去躺。&lt;/p>
&lt;p>到了民宿 check-in，这才发现老板（娘）是欧美人，之前还以为是日本本地人开的店。之后问了我名字，要求我扫码登记信息，她说扫码说的是让我打开 camera 对着二维码 &amp;ldquo;take a photo&amp;rdquo;，她相机是带扫码功能的。我打开微信准备扫码，朋友却觉得是拍照。我问她是不是让我 &amp;ldquo;scan QR-code&amp;rdquo;，她也没回我，给我拿手机演示了一下，这下双方才明白了。&lt;/p>
&lt;p>不过她那个网站寄了，提交不了，最后干脆给她护照拍了张照，就算入住了。给了我一张小卡片，是密码锁。&lt;/p>
&lt;p>房子是日本的一户建，非常小的木质房屋，处处需要低头，楼梯也很窄，而且因为是木头做的，脚踩在地板上能够感觉陷下去，我俩小心翼翼的上了楼，找到了自己的房间。&lt;/p>
&lt;p>定的是三人间，因为有一个朋友不来了所以只有我们两个人住，还算宽敞。厕所和浴室等是公用的。&lt;/p>
&lt;p>房间里面也是踩一下陷下去一下，搞得我俩怂的只敢先坐下再慢慢躺下，不敢直接蹦跶。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/28.webp"
loading="lazy"
alt="小木屋"
>&lt;/p>
&lt;p>已经累得不行了，定个闹钟洗澡也不想洗了，直接开躺！收拾了一下也没搞明白榻榻米怎么铺，干脆乱铺了。被褥还是有些脏的。空调倒是很带劲。&lt;/p>
&lt;p>累得不行了，本来还想弄下照片，不过想着明天还要逛好多地方，所以只能早睡了。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/29.webp"
loading="lazy"
alt="12日行程表"
>&lt;/p>
&lt;p>原定于明天的行程如上所示，不过由于没取到地铁卡，所以明天还得去趟难波站的的关西游客中心。&lt;/p>
&lt;h3 id="812-day2-梅田本町心斋桥难波道顿堀日本桥通天阁">8.12 Day2 梅田/本町/心斋桥/难波/道顿堀/日本桥/通天阁
&lt;/h3>&lt;p>写完标题就笑了，什么速通。&lt;/p>
&lt;p>早起起床后去洗了个澡，然后哥们手机卡进水用不了了（恼&lt;/p>
&lt;p>之前在国内洗澡也会把手机放浴室，怎么就没有被水汽进了卡槽不能用的事情呢？&lt;/p>
&lt;p>洗完澡准备出门，背着相机主打一个健身（x&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/kitakagaya-road.webp"
loading="lazy"
alt="北加贺屋附近的街道"
>&lt;/p>
&lt;blockquote>
&lt;p>北加贺屋附近的街道&lt;/p>&lt;/blockquote>
&lt;p>日本居民区大部分也都是这种小路，倒是自行车比起汽车更多一些。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/sukiya-breakfast.webp"
loading="lazy"
alt="食其家的早饭"
>&lt;/p>
&lt;blockquote>
&lt;p>食其家的牛肉饭&lt;/p>&lt;/blockquote>
&lt;p>早就物色好了车站附近的 すき家（すきや），过去吃早饭。朋友点了一个早餐的套餐，我想了想点了通常午饭吃的牛肉饭。&lt;/p>
&lt;p>我点的是大份，大概 800JPY，小份的会便宜一些。&lt;/p>
&lt;p>大学生嘛，吃吃吃怎么了？&lt;/p>
&lt;p>酒足饭饱之后坐地铁先去难波站拿一下大阪地铁卡，从北加贺屋坐四桥线到了难波站，下了车人就傻了，难波站也太大了，但是也不是中国车站那种面积大，而是岔路多、出口多。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/map-of-namba.webp"
loading="lazy"
alt="难波站地图"
>&lt;/p>
&lt;blockquote>
&lt;p>深色的部分，是巨大的难波站。&lt;/p>&lt;/blockquote>
&lt;p>难波游客中心在南海CITY里面，是个巨大的电车站+商场，而谷歌地图导航又没有具体走路的路线图，而且还不知道在商场几层&amp;hellip;&lt;/p>
&lt;p>之后转啊转啊，找了几乎一个小时才在二楼商场里面找到了难波游客中心，结果一看——门口排了几十米的长队。&lt;/p>
&lt;p>放弃了，不差这一天两天的（虽然原定行程才3天）。&lt;/p>
&lt;p>之后想了想，大阪城是没时间去了，最近初音未来 16th 有一个主题店，大阪的在梅田，干脆过去看看好了。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/miku-16th.webp"
loading="lazy"
alt="16生日纪念店"
>&lt;/p>
&lt;p>坐地铁到了梅田，到了 hep five 之后却找不到上去的路，电梯只能坐到 1 层，楼梯那边门也锁着，就很让人摸不到头脑。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/jr-beside-shop.webp"
loading="lazy"
alt="hep five商场"
>&lt;/p>
&lt;blockquote>
&lt;p>hep five 旁边由梅田站驶出的 JR 西日本。不过图片是后来照的。&lt;/p>&lt;/blockquote>
&lt;p>兜兜转转上上下下跑了好几圈，才发现，原来人家 11 点才开门啊！&lt;/p>
&lt;p>多少有够懒狗的&amp;hellip;&lt;/p>
&lt;p>无奈，只能去旁边随便转转咯。周围是阪急的商店街，不过有很多店铺也没有开业。大路上则是梅田的高楼大厦。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/shop-street.webp"
loading="lazy"
alt="早上的阪急商店街"
>&lt;/p>
&lt;blockquote>
&lt;p>早上的阪急商店街。&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/umeda-buildings.webp"
loading="lazy"
alt="梅田的高楼"
>&lt;/p>
&lt;blockquote>
&lt;p>梅田的高楼。&lt;/p>&lt;/blockquote>
&lt;p>回来时候有好多人在门口等，还有好多jk，终于蹲到了11点开门，从 -1 楼卷上电梯直上 6 楼，冲进联动的店。门口的牌子上写着吧唧卖空了，但是实际上还是有的。&lt;/p>
&lt;p>然后发现，好多想买的还没发售，不过摆出来的东西也——统统想要！&lt;/p>
&lt;p>谷子真的好贵，买了一个吧唧一个亚克力立牌就收手了，顺手薅了一张魔法未来的海报。&lt;/p>
&lt;p>店铺里面是有抽奖机器的，不过好像是够 10000 日元起，显然我俩没那财力。（哭哭&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/miku-16th-goods.webp"
loading="lazy"
alt="店铺"
>&lt;/p>
&lt;blockquote>
&lt;p>买到的谷子，开心！&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/miku-16th-tile.webp"
loading="lazy"
alt="梅田的高楼"
>&lt;/p>
&lt;blockquote>
&lt;p>亚克力立牌。&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/miku-16th-menu.webp"
loading="lazy"
alt="牌子"
>&lt;/p>
&lt;blockquote>
&lt;p>门口的牌子，上面写着“完贩”。&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/miku-16th-shop.webp"
loading="lazy"
alt="店铺"
>&lt;/p>
&lt;blockquote>
&lt;p>联动的店铺，朋友笑得超级开心，可惜只能化作马赛克。&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/miku-16th-poster.webp"
loading="lazy"
alt="超大海报"
>&lt;/p>
&lt;blockquote>
&lt;p>店门口的超大海报！&lt;/p>&lt;/blockquote>
&lt;p>逛完了之后，想着来都来了，我看攻略 HEP FIVE 商场是顶上有个摩天轮的，寻思着也没到饭店呢正好俯瞰下大阪的风景，结果七拐八拐上了楼，发现摩天轮在维护没有开，无奈只能作罢，但是来都来了，一层一层逛呗。&lt;/p>
&lt;p>最上面有一层貌似是什么活动，我俩过去了被服务员小姐姐拦下来问我们两个需要什么，我想说我就瞎逛逛，最后我俩英语日语谁也没说清楚，只能开了翻译软件，好尴尬啊！&lt;/p>
&lt;p>再往楼下走走，有一家 jk 制服的店，在门口转了114514圈还是觉得进去太怪了，就没去看。&lt;/p>
&lt;p>楼下有一家万代的店，本来说想去看看的，结果咕咕了。（为什么咕咕了我也忘了）&lt;/p>
&lt;p>转了一圈突然想起来答应给别人带的一件 POLO。想着这么大的商场应该有，搜了一下在隔壁的一栋 HEP 里，然后就开启了尴尬的买衣服之行。&lt;/p>
&lt;p>顺着导航跑到了 POLO 的专卖店，给店员看照片问衣服的样式有没有，结果店员一个劲的问我是不是 XS 尺码的（因为图片上是 XS），微信问对方又不回我了，搞得我俩整个一个尴尬。&lt;/p>
&lt;p>问了半天终于回复了，和店员又沟通了半天，最后才明白，他家只有 M/L/XL，而 X/XS 在他家的楼下有卖。&lt;/p>
&lt;p>另外，有趣的一点是，日本管 S 叫 small 的，而不是像中国一样直接读字母，同理 XS 是 very small，沟通中的困难也有一部分是因为这里。&lt;/p>
&lt;p>跑到了楼下，开始问店员衣服，索性我也恼了，直接微信视频呼过去，然后左挑挑右捡捡，混合上我的答辩英语和朋友的社恐日语，在闹了一车误会后终于成功买到了想要的衣服，然后去楼下退税时候还遇到了中国的店员，刚刚被折磨了一通后，能说两句汉语太舒服了。&lt;/p>
&lt;p>然后就想好了，一毛钱没挣折腾半天，再也不给别人带东西了QAQ。&lt;/p>
&lt;p>出来时候时间已经过了 12 点了，今天的计划本是吃鳗鱼饭，不过因为不去大阪城了，想着要不要换一家近点的？然后谷歌地图一搜还是同一家店，真是缘分到了。&lt;/p>
&lt;blockquote>
&lt;p>p.s. 缘分太到位了，到位过头了。&lt;/p>&lt;/blockquote>
&lt;p>鳗鱼饭之前总是看柯南里面元太吃，而且一尺就是好多好多碗。我本人是不太喜欢吃水产的，不过想象中的鳗鱼饭应该是香香软软浇汁的，来都来了不尝一下太可惜了。&lt;/p>
&lt;p>看了几家攻略后，选择了连锁店 宇奈とと，“宇奈”在日语中与“鳗”同音。这家店价格不贵，而且质量也有保障，人还不算太多的。而且离得近（x&lt;/p>
&lt;p>坐上地铁，到本町下车，心疼死我了，9块钱啊可是。要不是那个该死的堵海关的人，我早就拿到两日券了，可恶。&lt;/p>
&lt;p>到了之后点单，套餐 50 块，可比国内一些奇怪日料便宜。而且量很足，够吃，尝了一口，偶以西！&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/unadonn.webp"
loading="lazy"
alt="鳗鱼饭"
>&lt;/p>
&lt;blockquote>
&lt;p>我的鳗鱼饭套餐。&lt;/p>&lt;/blockquote>
&lt;p>味噌汤看着奇奇怪怪的，里面的东西像软软的，感觉是海里的或者内脏。不管了，喝完再说！味道还可以。&lt;/p>
&lt;p>摆出来谷子拍了张照（见上上上&amp;hellip;图），吃饱喝足收拾走人！这顿饭吃的我俩都非常满意。&lt;/p>
&lt;p>看了眼地图，其实梅田、本町、难波、心斋桥、道顿堀、日本桥、通天阁（新世界）本来就是在南北一条线上，所以决定直接逛街啦。&lt;/p>
&lt;p>从本町站往南走一个大街便是心斋桥啦，这里可能是绝大多数人打卡大阪的地方，也会有很多人在这里买药妆、买衣服，不过我嘛&amp;hellip;没钱！&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/shinnsaibashi.webp"
loading="lazy"
alt="走近心斋桥"
>&lt;/p>
&lt;blockquote>
&lt;p>远远的发现前面就是心斋桥了。&lt;/p>&lt;/blockquote>
&lt;p>不得不感慨日本人好浪费，空调对着大街吹也不做密封，各个店铺开着门，把整条路都吹的凉快了些，正好拯救下被晒得不行的我们。&lt;/p>
&lt;p>左看右看，大阪的建筑真的好日式啊！（划）大部分街道都很窄，上面挂着乱七八糟的电线和各种招牌。在心斋桥的中间一条街上照了张相片，看起来和动漫中一样一样的。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/shinnsaibashi-side.webp"
loading="lazy"
alt="心斋桥一侧"
>&lt;/p>
&lt;blockquote>
&lt;p>心斋桥一侧的小路。&lt;/p>&lt;/blockquote>
&lt;p>走近写着心斋桥的牌子，过了这条大马路就心斋桥商店街了。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/shinnsaibashi-out.webp"
loading="lazy"
alt="心斋桥前"
>&lt;/p>
&lt;blockquote>
&lt;p>心斋桥前马路侧面。&lt;/p>&lt;/blockquote>
&lt;p>之后在心斋桥看到了一家POLP，本来是想着在这里给带衣服的，不过已经历尽千辛万苦买好了。所以就继续转啦。&lt;/p>
&lt;p>心斋桥中国人多的很，路边的药妆店中也有很多中文的照片，有些店甚至只做了中文和英语的牌子。&lt;/p>
&lt;p>朋友在路边看到了一家卖二手漫画/DVD和电器之类的店，我也顺便进去问了下有没有我单反的charger，不过答复是没有。&lt;/p>
&lt;p>然后朋友就在二手书店里发现了宝贝，我俩在一堆书之间一本挨着一本的看，很多在国内找不到的、或者很贵的漫画和设定集之类这里都有。&lt;/p>
&lt;p>我朋友基本上是快高兴疯了，跟到了天堂一样，黏在书架上不想动，最后终于劝着给拽走了，毕竟日本桥还有很多嘛！&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/books-in-shinnsaibashi.webp"
loading="lazy"
alt="心斋桥小商店里面的书"
>&lt;/p>
&lt;blockquote>
&lt;p>来自朋友的照片，他真的好开心啊。&lt;/p>&lt;/blockquote>
&lt;p>转着转着上面的盖子突然没了，出了商店街豁然开朗，原来这里就到了道顿堀了，眼前则是地标性的广告牌。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/shinnsaibashi-end.webp"
loading="lazy"
alt="出心斋桥"
>&lt;/p>
&lt;blockquote>
&lt;p>　心斋桥与道顿堀的路口。&lt;/p>&lt;/blockquote>
&lt;p>走上了桥对着侧面，蓝天、不高的高楼、蓝水，太美丽了家人们。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/river-of-dotonnbori.webp"
loading="lazy"
alt="河"
>&lt;/p>
&lt;blockquote>
&lt;p>道顿堀河。&lt;/p>&lt;/blockquote>
&lt;p>左侧的楼上有个圆弧四方的摩天轮，下面的船之前看可以坐，凭两日券还能打折来着，不过看了看也没准备坐。&lt;/p>
&lt;p>之后沿着道顿堀那条河往左走了一个街区，再往南走一点就是日本桥啦。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/nihonnbashi.webp"
loading="lazy"
alt="日本桥本桥"
>&lt;/p>
&lt;blockquote>
&lt;p>日本桥本桥。&lt;/p>&lt;/blockquote>
&lt;p>挨着日本桥，马路边的是近铁/大阪地铁的日本桥站。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/nihonnbashi-site.webp"
loading="lazy"
alt="日本桥站"
>&lt;/p>
&lt;blockquote>
&lt;p>日本桥站。&lt;/p>&lt;/blockquote>
&lt;p>再往南过一个小路口，就算是日本桥啦。&lt;/p>
&lt;p>也是在这里找到了一家卖摄影器材的店铺（毕竟曾经也是电器街嘛）买到了我的充电器。&lt;/p>
&lt;p>店铺里还挺多人购物的，一个不大的小店，老板收二手卖二手，也卖全新的单反。店铺不大但是各种品牌和大部分型号都有。因为有人排在我们前面，所以不得已等了好一会时间。&lt;/p>
&lt;p>终于排到我啦，三脚猫英语还是能凑合用用的，付款，拿到了我的充电器。&lt;/p>
&lt;p>不出意料的是 MADE IN CHINA。不过总算是拿到了，不至于后面几天单反完全变成负载了。&lt;/p>
&lt;p>往南走的途中，左手边就是黑门市场，号称大阪最大的美食市场，据说物美价廉。&lt;/p>
&lt;p>我俩在黑门市场略微看了一下，因为两个人都不喜欢吃海鲜，所以在旁边上了个公共厕所，找个背阴凉快了一下就继续走啦。&lt;/p>
&lt;p>再走过一条大路，就是满大街的二次元店。第一家店就是一家手办店，门口柜子里面摆着价格不菲的高达，里面则是各种各样的手办。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/misaka-model.webp"
loading="lazy"
alt="炮姐"
>&lt;/p>
&lt;blockquote>
&lt;p>炮姐的手办。&lt;/p>&lt;/blockquote>
&lt;p>这个炮姐之前在太原钟楼街也见到过一次。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/miku-model.webp"
loading="lazy"
alt="葱葱的手办"
>&lt;/p>
&lt;blockquote>
&lt;p>葱葱的手办。&lt;/p>&lt;/blockquote>
&lt;p>还是朋友眼睛好用，一眼就看到一堆初音的手办。中间这个秋季为主题的手办脸捏的实在太可爱了！&lt;/p>
&lt;p>不过 5980 JPY 的价格有点劝退，上淘宝搜了搜才70，但是淘宝那个图看着好奇怪，不像同一个，就很难过。&lt;/p>
&lt;p>盯着看了半天最后放弃治疗，继续逛！&lt;/p>
&lt;p>然后就发现了一只可爱的小岛风，一脸很屑的表情。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/shimakaze-model.webp"
loading="lazy"
alt="屑岛风"
>&lt;/p>
&lt;p>水到群里，果然群友也觉得非常可爱，问了下价格让我帮忙带一下，虽然要垫付一下，不过咱也买啦，只要我拍照了就是我的（x。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/shimakaze-model2.webp"
loading="lazy"
alt="结账时候的屑岛风"
>&lt;/p>
&lt;blockquote>
&lt;p>结账时候的屑岛风。&lt;/p>&lt;/blockquote>
&lt;p>结账时候才发现店员是中国留学生，那问起来就方便了——既然我都买东西了把那个可可爱爱的初音拿出来给我拍张照不过分罢！&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/miku-model2.webp"
loading="lazy"
alt="又拍了一张葱葱的手办"
>&lt;/p>
&lt;blockquote>
&lt;p>又拍了一张葱葱的手办，价牌拿下来了。&lt;/p>&lt;/blockquote>
&lt;p>喜欢这个手办主要是脸捏的很生动，肉乎乎的，不过头发的发梢渐变感觉有些不自然。&lt;/p>
&lt;p>出了手办店，旁边是一家涩涩的店，临街放着招牌，上面是各个厂牌的当红女优和代表作等。&lt;/p>
&lt;p>之后挨家挨户去转了，有一个“日本最高级的模型店”，不过对高达不感兴趣。帮朋友看了看也超出他经济承受范围了，之后没走两家店就是一个 &lt;code>K-BOOK&lt;/code>。在国内并没有见过这么大的二次元店，总之朋友都快笑疯了。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/friend-in-kbook.webp"
loading="lazy"
alt="朋友在挑吧唧"
>&lt;/p>
&lt;blockquote>
&lt;p>吧唧挂了一面墙属实壮观又令人难以抉择，蹲下一个一个看。&lt;/p>&lt;/blockquote>
&lt;p>途中还有一家 cospa 的服装店以及一些其它店铺，都转了一转。&lt;/p>
&lt;p>天气实在是太热了，大阪三十七八度的天，我俩背着大书包，我还装了单反，整个后背完全就是泡在汗里的。&lt;/p>
&lt;p>&lt;del>所以一直往店里钻&lt;/del>&lt;/p>
&lt;p>找家店买应援棒（日本叫 pen light），结果打开地图来了个台风警告，真是怕啥来啥，之前还专门查了下地图应该不会有台风。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/alert.webp"
loading="lazy"
alt="巨大的A店"
>&lt;/p>
&lt;blockquote>
&lt;p>谷歌地图的台风预警，正从我头顶路过。&lt;/p>&lt;/blockquote>
&lt;p>这下可是烦恼了，不知道航班能不能正常起飞，不知道会不会影响到 live，第三天的行程感觉是泡汤了&amp;hellip;&lt;/p>
&lt;p>主要在国内刚刚经历过台风，从南方都能刮得北京发水，作为北方孩子没实地经历过台风，还是怕的不行的。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/animate.webp"
loading="lazy"
alt="巨大的A店"
>&lt;/p>
&lt;blockquote>
&lt;p>巨大的A店巨大的招牌巨大的广告。&lt;/p>&lt;/blockquote>
&lt;p>来 A 店的目的其实是买应援棒，朋友并没有带棒子来，场贩的又不太喜欢而且怕抢不到。所以决定来 A 店看一看。&lt;/p>
&lt;p>animate 足足有 5 层，第一层是一个小电梯上去，门口还放了一个波奇酱的小吧唧，超级可爱，本来想着给朋友带一个，但是六七十的价格太劝退了。&lt;/p>
&lt;p>门口贴着禁止摄影的牌子，我怕被误会，就去问我背着相机进去有没有问题，然后小姐姐理解错了，把他上级拉过来，和我说“camera OK, NG NO”，意思是可以拍照不让录像。&lt;/p>
&lt;p>结果我就成了整个 animate 里面唯一可以照相的人了（不是&lt;/p>
&lt;p>不过嘛，咱也没拍什么（已经快透支了）&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/onimai-in-nihonnbashi.webp"
loading="lazy"
alt="真寻的书"
>&lt;/p>
&lt;blockquote>
&lt;p>小寻子的全套书，不过应该不是 animate里面的&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/animate-akatsuki.webp"
loading="lazy"
alt="小学生的手办"
>&lt;/p>
&lt;blockquote>
&lt;p>舰队COLLECTION中的晓&lt;/p>&lt;/blockquote>
&lt;p>朋友买了应援棒，当时时间已经5点多了，肚子也开始叫了，没办法，先吃饭咯，再不吃是真挺不住了。&lt;/p>
&lt;p>至于晚饭记不清是食其家还是吉野家了，惠美须町地铁站附近都有。吃了份最大份，吃完大概也饱了。&lt;/p>
&lt;p>走过惠美须町地铁站便是通天阁&amp;amp;新世界了。通天阁算是新世界娱乐区的象征，也算是稍微老一些的大阪城区了。&lt;/p>
&lt;p>站在路口就可以远远的望见通天阁，通天阁现在看来并不高，不过放在建造的那个年代，还算是“通天”的。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/shinnseikai-out.webp"
loading="lazy"
alt="远望通天阁"
>&lt;/p>
&lt;blockquote>
&lt;p>在路口就可以看到通天阁，可惜中间有根路灯。&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/shinnseikai.webp"
loading="lazy"
alt="眺望通天阁"
>&lt;/p>
&lt;blockquote>
&lt;p>在新世界商业街看通天阁。&lt;/p>&lt;/blockquote>
&lt;p>其实新世界的核心区域在通天阁的南面，这里到处都是娱乐设施，还有很多“射的”以及各种各样的小吃。&lt;/p>
&lt;p>不过我俩刚刚吃饱，又没有多少精力，所以就无缘啦。&lt;/p>
&lt;p>下次旅行不能安排这么紧张了。&lt;/p>
&lt;p>到了通天阁下，得知上去需要排队40分钟，于是两个懒狗就放弃治疗了，也算是草草参观了一次了。&lt;/p>
&lt;p>然后远远的让朋友给我拍了张合影，然后完美的眼镜反光挡住了眼睛。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/shinnseikai-south.webp"
loading="lazy"
alt="从通天阁南处拍摄"
>&lt;/p>
&lt;blockquote>
&lt;p>走到新世界的南头，有一座楼的台阶可以上到高一些的地方，拍照很合适。只可惜通天阁没有开灯，所以照的不是很清楚。&lt;/p>&lt;/blockquote>
&lt;p>好啦，今天行程算是结束了。看了下地图，发现最近的能直接回去的车在花园町，&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/shinnseikai-map.webp"
loading="lazy"
alt="谷歌地图推荐的走大国町的路线"
>&lt;/p>
&lt;blockquote>
&lt;p>谷歌地图推荐的路线，在大国町坐车会近一点。&lt;/p>&lt;/blockquote>
&lt;p>当时想着，都走到通天阁南边了，去下一站花园町也不会太远吧？&lt;/p>
&lt;p>于是看了眼大概方位，反正日本的道路挺多的，很多小路，也不差那个路口的。&lt;/p>
&lt;p>不过远离了喧嚣的新世界，看到的确实另一幅场景。地铁站门口有闹事的醉鬼，路边也睡着一些流浪汉。整条街上要么是矮小的居酒屋门店，要么是什么都没有。大街上除了偶尔路过的摇摇晃晃的醉鬼，也没什么人。&lt;/p>
&lt;p>俺寻思日本好歹也算发达国家，大阪也是日本第二大的城市，怎么晚上还不如太原呢（x&lt;/p>
&lt;p>走了一趟街，小路是没法走，太害怕了，转到了一条大街上情况好了很多。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/nishinari.webp"
loading="lazy"
alt="晚上的西成区"
>&lt;/p>
&lt;blockquote>
&lt;p>晚上西成区的小路。&lt;/p>&lt;/blockquote>
&lt;p>之前有在网上看到过说大阪的西成区，平民窟之类的，据说治安很乱。劝人不要去或者白天结伴去。我定旅馆时候也避开了西成区，没想到竟然两次半夜路过，刚到时候在天下茶屋也是西成区的，我说怎么晚上这么荒凉呢。&lt;/p>
&lt;p>在好长时段时间内我都不知道走过了西成区，后来在b站刷视频看到了一个up讲大阪民宿的杀人案件，日本女生被分尸，然后头颅被犯人藏在了花园北一町目的民宿。我一听，花园北？因为花园町这个词我专门问过朋友读音，所以印象还比较深，加之本身也比较记路，就发现是坐车的地方。&lt;/p>
&lt;p>看了看地图似乎就在我们走过的路附近。&lt;/p>
&lt;p>好家伙我说怎么看视频到处眼熟呢。&lt;/p>
&lt;p>好在没有发生什么危险。西成区也没有想象中和描述中那么可怕，另外这个地方真的交通方便，从两次坐车就能看出来。&lt;/p>
&lt;p>当然还是建议非必要不要来，西成区相比其它地方还是要乱的，来的话也千万不要走上图中的小路，大道要好很多。&lt;/p>
&lt;p>人都快累死了，终于到了花园町，坐上了回亲爱的北加贺屋的地铁。&lt;/p>
&lt;p>到了民宿，往地板上一趟，坚持着导了一下相片，人就倒了。看了下衣服，后面全是一圈一圈的盐渍，汗浸透了又干，浸透了又干，书包上也是一样。&lt;/p>
&lt;p>刚躺，就和朋友说台风的事情，又看了下新更新的通知，飞机起飞时正好在台风中间，于是肯定得延误，我俩计划是在机场睡一觉，然后买个延误险先，这个时间还来得及，结果我发现——&lt;/p>
&lt;p>衣服呢？！我 POLO 买的衣服呢？！手上没有，包里也没有，这不坏了，小1k呢！&lt;/p>
&lt;p>于是我俩又蹦起来开始找衣服，确认了没有带回来，印象里是他在商场给了我，我拿着装了包里，但是包里并没有，又开始想放在哪了&amp;hellip;&lt;/p>
&lt;p>第二天有 live，又不能误了 live 去找衣服，最后都想陪人家一件了。&lt;/p>
&lt;p>不过，随着我俩复盘一天的行程（我翻包的次数不是很多）最终确认了衣服很可能是落在了中午吃饭的鳗鱼饭，想着第二天过去找，突然想起来可以打电话问啊！&lt;/p>
&lt;p>看了一眼时间，还在营业的时间，不算太打扰，做好了准备拨打了店里的电话。&lt;/p>
&lt;p>好在接电话的还是当时的店员，对我们两个外国人也有印象，并且告诉我们衣服还在他们那里放着。&lt;/p>
&lt;p>这我就谢天谢地了，毕竟接近上千的东西真被人拿走了也有很大可能。我俩想了想，给店铺写了张感谢信，他写日语我写中文。原句是他写，ChatGPT 润色，朋友检查好再给我翻译，我再润色中文。还好要写 fligh log 带了笔，从之前打印的住宿单（没用到）中撕下了空白页。&lt;/p>
&lt;p>写好了就已经过了12点了，延误险算是没戏了（得提前3天订）。所以作罢，准备好我的痛衣、应援棒和电池，明天，出发魔法未来！&lt;/p>
&lt;h3 id="813-day3-マジカルミライいえと">8.13 Day3 マジカルミライいえと
&lt;/h3>&lt;p>这天起了个大晚，这几天的行程实在是太赶了，好不容易爬起来洗漱又耽搁了一会，看了看 Google Maps 的估计，希望能赶上车在早排开始的时候赶到会场。&lt;/p>
&lt;p>实在实在是想早起，但是实在是爬不起来。6点出头就醒了，洗漱完抓紧穿好衣服跑去地铁站门口的全家买个饭团吃。&lt;/p>
&lt;p>然后大概花了人民币接近 15 元这样买了个夹了火腿肠片和鸡蛋的三明治，大概是能一口炫完的样子。于是我俩开始怀念唐久超市低廉的物价&amp;hellip;&lt;/p>
&lt;p>到了地铁站，从四桥线坐一站到终点——住之江公园，再坐南港新城县就能到会场附近啦。&lt;/p>
&lt;p>进了地铁站，看地图是到住之江公園再转车南港新城线做到中阜头，所以只买了到中间车站的票，以为会和之前坐的地铁一样出站再买票进一次（这时候还完全没有搞明白 OSAKA METRO 的逻辑）。&lt;/p>
&lt;p>日本有些地铁是需要出站再进站，这时候我也没弄清楚（其实就南海电车到大阪地铁两个系统出站再买票了，不过这时候还没坐过两次地铁，以为线路不一样就得这样呢，实际上两条线都是大阪地铁的）。&lt;/p>
&lt;p>&lt;strong>所以不需要出站换乘！&lt;/strong>&lt;/p>
&lt;p>南港新城发车间隔比较大，应该是10分钟左右一趟，因此赶得上这趟车就是能赶上整队，赶不上就是赶不上整队，赶不上整队的话就会排在后很多的位置。&lt;/p>
&lt;p>结果到了住之江公园，一顿换乘，发现没走出站闸机，但是我们票买的是一站（到住之江公园）的啊，这就很难受了。&lt;/p>
&lt;p>小跑着上了车，等待发车时候又有些纠结。我的想法是到了地方去找站里的工作人员，和他们说这事然后补一张。俺寻思俺一个外国人也河里罢。&lt;/p>
&lt;p>然后在等待发车的时候开始炫那个小饭团，打开包装啃了一口，感觉地铁上吃东西是不是不太素质？转念一想，开都开了，又没地方放，况且这东西味道不大。吃吧，不行就当我是没素质的韩国人好了。&lt;/p>
&lt;p>不过朋友比较社恐（毕竟解释还要他来），终究还是放心不下车票的问题，结果发车前我俩还是决定下车再出一次站，结果本来赶上的车、或者说我们上车前就出一次闸机也能赶上，被耽误了。&lt;/p>
&lt;p>&lt;del>都怪机场那哥们，堵了半天，不然我们拿到地铁两日券肯定不会出这事&lt;/del>&lt;/p>
&lt;p>车上很多是去岛上工作的员工，我俩是罕见的二次元(x&lt;/p>
&lt;p>虽然是“大阪地铁”，不过也是高架的电车，旁边是建筑和大阪湾。&lt;/p>
&lt;p>出了地铁站，按着背好的地图（x&lt;/p>
&lt;p>出站，右转，走！沿着他们那的通学路走到场馆门口，右手边映入眼帘的是 INTEX 大阪标志性的圆顶棚。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/INTEX-gate.webp"
loading="lazy"
alt="INTEX大阪门口"
>&lt;/p>
&lt;blockquote>
&lt;p>清晨的 INTEX 大阪，在谷歌街景中来过无数次的地方。&lt;/p>&lt;/blockquote>
&lt;p>之后抓紧跟到队尾。好在来的不算太晚，排到了场馆里面。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/INTEX-Osaka.webp"
loading="lazy"
alt="INTEX大阪排队"
>&lt;/p>
&lt;blockquote>
&lt;p>在 INTEX 大阪排队入场馆等待开始。&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/INTEX-live-ad.webp"
loading="lazy"
alt="INTEX公演广告"
>&lt;/p>
&lt;blockquote>
&lt;p>在队伍侧面放着魔法未来 2023 演出的广告牌。&lt;/p>&lt;/blockquote>
&lt;p>然后就坐下玩手机啦，毕竟 9 点才会开始入场。&lt;/p>
&lt;p>还和群友互拍了照片找他在哪，不过没找到就是了（x&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/INTEX-waiting.webp"
loading="lazy"
alt="INTEX等待入场"
>&lt;/p>
&lt;blockquote>
&lt;p>大家穿着自己喜欢的衣服或痛衣席地而坐，都很开心。&lt;/p>&lt;/blockquote>
&lt;p>等待的时间在水群之中不快也不慢，终于到了入场时间了！&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/ticket-in-hall.webp"
loading="lazy"
alt="拿着票准备入场"
>&lt;/p>
&lt;blockquote>
&lt;p>拿好票准备入场。&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/check-ticket.webp"
loading="lazy"
alt="检票处"
>&lt;/p>
&lt;blockquote>
&lt;p>检票处，staff 小姐姐给了我特典，细心的帮我把副券整整齐齐的撕开。&lt;/p>&lt;/blockquote>
&lt;p>跟着队走，检票，进！就和做梦一样进入了在网上见到过无数次的地方。&lt;/p>
&lt;p>顾不上逛，撒腿先往场贩区跑，然后就开始漫长的排队。&lt;/p>
&lt;p>队伍拐了个弯出了门，有 staff 发无料（一个纸折的主视觉同款小喇叭），另外一个 staff 发一根笔和场贩商品的单子，可以在上面勾选，买的时候递过去。&lt;/p>
&lt;p>今年的主视觉图真的不怎么喜欢，因此之前在网上看的时候购买欲望不高，到了现场又想着不买以后八成后悔（笑）&lt;/p>
&lt;p>应援棒就算了，手里有 17 棒纸的 lumica 棒子。&lt;/p>
&lt;p>毛巾先勾上，这个挺好看的而且算便宜的；还有小旗子和挂扣，挂扣真的很不错，好看又有意义。&lt;/p>
&lt;p>当然还有法批！16年没有批法批看live有点小遗憾，因此看好了miku的单人批，比主视觉好看一些。&lt;/p>
&lt;p>之后呢发现相比网站上，今年拿出了2022(10th)的专辑再贩，纠结了一下勾选了一个。10th的专辑歌很多，除了当年live的之外，还有10曲主题曲，专辑也很大个，算是比较值。&lt;/p>
&lt;p>说个好笑的，当时后面有两个日本人觉得我俩韩国的，在后面讨论，我朋友能听懂，所以在大声念发的无料上的日语（告诉他们老子听懂了）。之后后面两个日本人羞愧的跑掉了。&lt;/p>
&lt;p>要我说既然他们觉得我是韩国人那我就插队了嘛，又不丢中国人的脸（x&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/waiting-for-shopping.webp"
loading="lazy"
alt="排队买场贩"
>&lt;/p>
&lt;blockquote>
&lt;p>排队买场贩的大家。&lt;/p>&lt;/blockquote>
&lt;p>终于，排队又回到了场子里，终于还差两三排就能买到了！&lt;/p>
&lt;p>左侧一个巨大的桌子放着所有出售的场贩商品。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/happi.webp"
loading="lazy"
alt="展示的法批"
>&lt;/p>
&lt;blockquote>
&lt;p>展示的桌子旁边挂着角色法批。&lt;/p>&lt;/blockquote>
&lt;p>然后这时候，初音的单人批切了！其它单人批也相继卖光。我纠结了好一番，因为上次 live 没有法批遗憾过（虽然当时也不知道那是啥），最终决定入他妈的，反正亏不了！&lt;/p>
&lt;p>看着前面的人一个接一个进去买了，终于轮到我了，走到了最左面的柜台，递给小姐姐我的纸，然后发现桌子上贴着 10th 专辑也卖光了，还挺遗憾的。&lt;/p>
&lt;p>不过等她拿过来时候很惊喜，居然有 10th 的专，怕不是我买的最后一个（笑）&lt;/p>
&lt;p>朋友买的倒是少一些，他要了一个购物袋一个，还有一个T恤（他说这东西算是有用的，不过后来也没见他敢公开穿出去过几次（逃））&lt;/p>
&lt;p>因为在最边上，干脆我就在空桌上整理了下东西，正好等朋友出来。我TM直接穿上法批！&lt;/p>
&lt;p>之后从出口处出来，后面便是各年的大旗子摆在一次，准备照一张，无奈可能是因为挡路了被 STAFF 驱离了，因此只留下了这一张图。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/magical-mirai-flags.webp"
loading="lazy"
alt="小旗子"
>&lt;/p>
&lt;p>旁边则是 DIGITAL STAR 的 STAGE，11:00-11:30是有活动的，不过之前记得 DIGITAL STAR 是要买票的，这里看他也没围起来，岂不是能在外面蹭？（x&lt;/p>
&lt;p>走了两步之后旁边的雅马哈的展示台，顺便在这里面基了群友——一位浑身散发着金钱光芒的帅气老哥。&lt;/p>
&lt;p>&lt;del>哎为什么我又穷又肥宅呢，哭哭。&lt;/del>&lt;/p>
&lt;p>之后雅马哈的展台除了嫖无料的传单之外就只剩下羡慕，毕竟乐器咱是真买不起啊，联名就是贵上加贵了。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/esp-shop.webp"
loading="lazy"
alt="ESP的小东西"
>&lt;/p>
&lt;p>ESP 倒是有一些吧唧和立牌之类的，不过当时实在是没舍得买，而且排队人好多啊QAQ&lt;/p>
&lt;p>当然啦，这附近也都是音乐相关的，除了雅马哈外还有 ESP。&lt;/p>
&lt;p>&lt;del>都没有钱就是了。&lt;/del>&lt;/p>
&lt;p>&lt;del>后面的顺序就混着的，也记不清那里是那里了&lt;/del>&lt;/p>
&lt;p>旁边还有一个是一个屋子的小模型，可以带着自己的可爱手办放里面拍照，我像个憨憨一样看个半天才明白要带自己手办过来QAQ，白排队x1。&lt;/p>
&lt;p>走了走附近还有一个卖挂画、卖吧唧的，非常非常多，不过看了一眼排队的人，还是饱饱眼福算了吧。&lt;/p>
&lt;p>左面则是一个现场画的巨大画，不过还没有完工，旁边的小牌子提示拍照不要拍到画师。&lt;/p>
&lt;p>转过去之后是画画的地方！之前经常在活动的各种页面上看到的涂鸦墙。STAFF 给我们一人发了一个蜡笔，就可以开始涂鸦啦！&lt;/p>
&lt;p>墙上满是大佬的作品，只可惜俺不会画画，想写一些什么也是语无伦次了。&lt;/p>
&lt;p>朋友倒是照着手机上的图画了一幅不错的出来。好羡慕会画画的人啊呜呜。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/miku-draw.webp"
loading="lazy"
alt="化作马赛克的好朋友在画画"
>&lt;/p>
&lt;blockquote>
&lt;p>化作马赛克的好朋友在画画&lt;/p>&lt;/blockquote>
&lt;p>当然啦，作品有点丑就不贴了（x&lt;/p>
&lt;p>画完画之后附近是贴贴纸的地方，可以给巨幅初音贴上不同颜色的贴纸，我抽到了一根有点紫的贴到了マジカルミライ这几个字上。&lt;/p>
&lt;p>旁边是一个很有意思的照相墙，上面写着 FLASH。只要启动闪光灯拍照的时候就可以照到V家全家福。不过当时心里顾虑着台风并没有什么心情玩，就错过了。&lt;/p>
&lt;p>走到最前面是 16th 的展台，还有各种周边。不过 fufu 和其它一些东西都在预定中，16th 其实在东京场（9.1）才算是鼎盛。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/mm-miku-16th-title.webp"
loading="lazy"
alt="16th标题"
>&lt;/p>
&lt;blockquote>
&lt;p>16周年主题的摊位&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/mm-miku-16th-main-pic.webp"
loading="lazy"
alt="16th主图"
>&lt;/p>
&lt;blockquote>
&lt;p>16周年主图的原画&lt;/p>&lt;/blockquote>
&lt;p>看到了几个很可爱的手办，有个拿着小笼包的。还有本次活动的fufu和16th的fufu，不过我没注意到，很是可惜。&lt;/p>
&lt;p>中心区域就是关于本次魔法未来和主办方的东西啦！中间照例放着等身的巨大手办。上次见这么大的还是在 EXPO 2016 上。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/miku-main-model.webp"
loading="lazy"
alt="魔法未来2023主视觉手办"
>&lt;/p>
&lt;blockquote>
&lt;p>主视图大手办&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>&lt;del>&lt;strong>企划展内容待补充&lt;/strong>&lt;/del> 必须继续写了，咕了快半年，再不写就要忘了。- 24/3/26&lt;/p>&lt;/blockquote>
&lt;p>边上有角色的介绍、各种活动的介绍，还有一面墙是中国的未来有你系列。&lt;/p>
&lt;p>还有一面巨大的地图墙，可以领取贴纸贴一下从哪里来，&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/mm-location-map.webp"
loading="lazy"
alt="大地图"
>&lt;/p>
&lt;blockquote>
&lt;p>指示你从哪里来的地图，可以看到台湾、韩国、上海的密度很高，其次算是北京，我俩在山西摁了俩小绿/黄点。&lt;/p>&lt;/blockquote>
&lt;p>走过来有一面 SONOCA
的墙壁。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/mm-sonicwire.webp"
loading="lazy"
alt="SONOCA"
>&lt;/p>
&lt;blockquote>
&lt;p>&lt;del>虽然我也不知道 SONOCA 是什么就是了&lt;/del>&lt;/p>&lt;/blockquote>
&lt;p>边上是个可爱的小MP3相框，用来拍照片的，给朋友拍了一张qwq&lt;/p>
&lt;p>另一边有面墙是画师现场作画的大图，旁边的牌子提示不要把画师拍进去。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/mm-big-picture.webp"
loading="lazy"
alt="画师现场作画的大图"
>&lt;/p>
&lt;blockquote>
&lt;p>画师现场作画的大图&lt;/p>&lt;/blockquote>
&lt;p>隔壁的小场馆是卖P主签售的，大阪今天比较有名气的P主大概就匹老板，然后场馆内90%的人都是排匹老板的专辑，大概转了一圈，好多P主愁眉苦脸，看起来像是emo了，&lt;del>感觉他们这和大学坐场差不多了。&lt;/del>&lt;/p>
&lt;p>匹老板的签售我哥们是真想要，不过再三纠结，因为中午还要回市中心本町那快拿忘在那的衣服，就回去了。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/INTEX-noon.webp"
loading="lazy"
alt="中午的INTEX大阪"
>&lt;/p>
&lt;blockquote>
&lt;p>中午的 INTEX 大阪&lt;/p>&lt;/blockquote>
&lt;p>回去是从岛北面的车站坐的电车，中间还走错了一次路，大阪中央线。时间大概也是20分钟到30分钟，可以说这个岛、我住的地方和市中心是个等边三角形。&lt;/p>
&lt;p>然后哥们穿着法批像个nt一样上了电车一直坐到人家餐厅，感谢过后拿到了丢在那里的衣服，然后店员又追出来冲着我们鞠躬然后阿里嘎多，我是真担心俩人能在这对鞠一下午，再次谢过后就跑路了。&lt;/p>
&lt;p>路上就困得不行了，本来出展子的时候还想着回去再逛逛展子，万一匹老板那边人少了还能排一排，结果一上闹钟直接犹豫了，一觉昏睡到下午4点，爬起来头疼的不行，不过马上就要去看live辣！还是起床罢！&lt;/p>
&lt;p>中午还有一点担心，明天台风就到了，总不会因为台风演一半取消或者出什么事吧，不过看情况好像问题也不算大。确认在三票没有丢掉，还在朋友手里，就出发了。&lt;/p>
&lt;p>这次不能再买错车票了，直接买够了票，坐电车到岛上，然后沿着熟悉的路走进去，顺便在路边的贩卖机买了瓶柠檬水，&lt;del>免得等会喊渴了&lt;/del>。&lt;/p>
&lt;p>到了 INTEX 大阪基本已经开始进场了，激动的排队，然后就是进场了！&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/mm-before-live.webp"
loading="lazy"
alt="场馆内部"
>&lt;/p>
&lt;blockquote>
&lt;p>演唱会场内部&lt;/p>&lt;/blockquote>
&lt;p>场馆其实说小也不算小，但是也不大。很令人失望的是我这个排数基本已经在中间的位置了，再往后一些就是S席的座位。到了座位之后，因为岛上比较潮湿，看前面甚至还有一些朦胧的雾气。&lt;/p>
&lt;p>很快人就多了起来，左面是两个妹子，后面一个，旁边还有个哥们，在那扯着一圈都是群友。渐渐的开始有人拿着应援棒喊着玩，跟着热场曲，喊着喊着灯就关了，热场曲的声音调大，大家便跟着热场曲打call，居然在我还没做好准备的时候不知不觉开场了！&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/mm-before-live-open.webp"
loading="lazy"
alt="开场前几分钟"
>&lt;/p>
&lt;blockquote>
&lt;p>开场前几分钟&lt;/p>&lt;/blockquote>
&lt;p>今年的主题是 &lt;del>黑咯&lt;/del> HERO，所以不像是 10th 那种温馨的动画，而是&lt;del>日本人认为&lt;/del>很帅的动画，之后第一首歌是《 カルチャ》，今年的 OFFICAL ALBUM 中也有收录。我还顺便仔细盯了下模型，是C社新出的模，比之前那个&lt;del>很尖的下巴模&lt;/del>好多了，之前的模还有个问题是大锯齿，不过作为中间排观众也看不出来就是了。&lt;/p>
&lt;p>需要很努力的盯才能看出来做的动作，真的很谢，我就该让欧皇朋友开票的好吧！&lt;/p>
&lt;p>第二首《像神一样》，之前听了半嘴说的是什么还以为是《神のまにまに》，我说这个曲子不太可能上mm的样子。&lt;/p>
&lt;p>第三首就炸裂了，有听过日场的群友沙哑着和我说（他嗓子喊哑了），和我说下一曲很炸裂，然后笑了笑不说是什么。&lt;/p>
&lt;p>然后是——《初音未来的消失》，几乎是入坑曲，在16年的 EXPO 还曾经期待过来着，虽然很多很多年没听过了，一听到熟悉的旋律响起，就想起七八年前的一个下午，在我奶奶家，那会我还没有智能手机，只能靠着我奶奶的红米2和10块钱300M的套餐下载歌听，也没有耳机，就把手机和头捂在被窝里，这样循环一个下午。&lt;/p>
&lt;p>然后我朋友在歌前奏起来的一片哇哦中喊了个“卧槽”。&lt;/p>
&lt;p>之后就是开场，不过嘛，我只听得懂“大家晚上好”和“マジカルミライ２０２３”，之后的歌曲就是双子的，&lt;del>我就摸了一半&lt;/del>，至少坐下稍微休息一下，毕竟2小时真连着蹦跶恐怕撑不住。不过倒是没有像边上大哥一样直接玩手机，人家推另外五位的也在给葱打call，我多少也晃晃就是了，整的跟要分家似的搞的那么饭圈干嘛。&lt;/p>
&lt;p>不过对C社也有点不满的，一是葱的独唱曲太少了，今年大概只有一半左右，往年能到15/22首左右；二就是海外的位置越来越烂，17年是给到一个正中间的，后来就是一个不好不坏的位置，结果今年直接给扔到角落里，我的座位还是最靠中间的。&lt;/p>
&lt;p>中间时候加上了老哥，&lt;del>因为我成了群友的话这一圈就全是群友了&lt;/del>，中间《ヘッジホッグ》我还是印象挺深的，喊了半天~~“痛い、痛い”和“思い、思い”~~&lt;/p>
&lt;p>再上初女士的歌的时候几乎过了半场，中间还是扣了会手机的，曲子是今年的优胜曲《king妃jack躍》，也很嗨！后来朋友的解释是，扑克牌里面的字和什么欢喜雀跃意思的同音，所以起了这个名字。&lt;/p>
&lt;p>看了下 BD，声音差很大，在台下听到的应援声几乎和舞台上一样大。&lt;/p>
&lt;p>之后的曲子是《ツギハギスタッカート》，也就是拼凑的断音，因为经常听mm17的关系，这首歌也算很熟悉，不过很明显能听出来重新调和编曲过，和17不太一样。&lt;/p>
&lt;p>然后就是大姐和大哥的时间，平心而论还挺好听的，不过大哥的必杀技有点让我绷不住，但是伞村的歌是真的好棒啊！&lt;/p>
&lt;p>然后大哥上场的时候，旁边的妹子直接防空警报启动，干穿耳膜直达灵魂。两位还拿手机录了一些，然后被后面小姐姐出警了，我一想，那我就站起来挡挡视线呗，两位真喜欢就拍吧，虽然确实不合规。然后我往那一站，后面出警的小姐姐就被我挡住了，看不见那两位的动作了。&lt;/p>
&lt;p>之后的几曲都是合唱，然后就是，乐队介绍——&lt;/p>
&lt;p>果然之前看 EXPO 时候说吉他手自带鬼畜是真的，这次拿了个电钻来弹吉他，超级搞笑。&lt;/p>
&lt;p>乐队介绍之后的歌曲大部分都是魔法未来的主题曲，说实话我感觉每年的主题曲质量都很不错。&lt;/p>
&lt;p>第一曲是 《ネクストネスト》 (Next Nest)，当然，我个人的话如果日替是《39みゅーじっく！》会更满意，毕竟真的很能调动气氛，当然，Next Nest 也很嗨！&lt;/p>
&lt;p>第二曲是《ブレス・ユア・ブレス》，这首歌应该是19年的主题曲，中间的 &amp;ldquo;hello, hello, hello!&amp;rdquo; 对应的是砂之惑星中的 &amp;ldquo;bye, bye, bye&amp;rdquo;，当时下面大家跟着一起喊 &amp;ldquo;hello, hello, hello&amp;rdquo;，非常震撼。不过我个人更喜欢的日替是20年的《愛されなくても君がいる》。&lt;/p>
&lt;p>第三曲是《グリーンライツ・セレナーデ》，绿光小夜曲。虽然之前看 live 的时候觉得这个声音有些尖锐，当然也有风评说 omoi “炸厕所”。我个人认为这首歌调动气氛的能力相当强。可能是疫情憋了几年的原因，里面的很多歌词都有应援，比如“きいと、いつか” ，总之是嗨到了极点。&lt;/p>
&lt;p>这歌还是18年的主题曲，一晃竟然都过去了6年。绿光小夜曲5周年时候，omoi 作了一曲旋律一样，歌词不一样的歌曲叫《トゥー・ユー・グリーンライツ》（献给你的绿光），收录在专辑《初音ミク「マジカルミライ」10th Anniversary メモリアルソングCD》中，感觉调教的要比绿光小夜曲好，这么多年P主也收获了很多。&lt;/p>
&lt;p>大家在台下一起的挥舞着应援棒，结尾大家一起喊出震耳欲聋的 “マジカルミライへと”。&lt;/p>
&lt;p>之后的曲子是&lt;del>难忘今宵&lt;/del>《Hand in hand》，这曲子比起前面几首更加熟悉，个人也很喜欢，kz的歌向来格局很大，比起39music来说，这首歌能感动全世界的葱粉。&lt;/p>
&lt;p>然后我在台下落泪了，不知道为什么，就是有些想哭，气氛到了，&lt;del>也有可能是就这首能听懂歌词&lt;/del>。朋友倒是在我边上从头哭到尾。&lt;/p>
&lt;p>本来就在后排，泪水又模糊了眼睛，更看不清台上了。虽然舞蹈闭上眼也能脑补出来。我又总是按到切光的键，又时不时低下头去切回绿光。&lt;/p>
&lt;p>总之气氛比起绿光小夜曲不同的是，在嗨之中还加载着快乐。本来《Hand in hand》也是很快乐的旋律。&lt;/p>
&lt;p>之后又是一段“致辞”，无奈我听不太懂。&lt;/p>
&lt;p>下一首歌是完全没听过的，我还不知道这是 16th 请 DECO 的新曲，建模非常精细，&lt;del>发量终于回来了&lt;/del>，DECO 一贯的高质量。这首歌大家的应援也很多，包括中间的&amp;quot;woah~&amp;quot;。&lt;/p>
&lt;p>总之这么壮观的应援BD是感觉不太出来的，可以听最后音乐落下那个&amp;quot;woah&amp;quot;在场内的回音。&lt;/p>
&lt;p>之后就是安可了！我没想到会这么快，因为我基本上从下半场才开始嗨，感觉就像刚嗨上来就要结束。&lt;/p>
&lt;p>安可的第一曲是米奇头作的，合唱的 《Brithday Song for ミク》，结束后又将初女士请出来，啊这个笑容真的可爱。&lt;/p>
&lt;p>之后又是一段话，然后就是最后一首歌，准备好了嘛！&lt;/p>
&lt;p>本次活动的主题歌——《HERO》。最后一次嗨，全场回荡着“H-E-R-O”&lt;del>in japanese english&lt;/del>。&lt;/p>
&lt;p>这个真的挺帅的！&lt;/p>
&lt;p>结束后是在SEE YOU AGAIN，乐队的鞠躬和退场，之后大家又意犹未尽地跟着音乐应援了很长一段时间。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/mm-live-over.webp"
loading="lazy"
alt="LIVE结束"
>&lt;/p>
&lt;blockquote>
&lt;p>LIVE结束的时候&lt;/p>&lt;/blockquote>
&lt;p>人走了小一半才依依不舍的离去。门口的STAFF给我们每个人都发了一份 BD 的传单。&lt;/p>
&lt;p>我当时还和朋友说一定一定要买，不过后来也没买，太贵了而且没设备放。&lt;/p>
&lt;p>&lt;del>日本人还是不会，如果是我就当场预售，保证能卖一大半。&lt;/del>&lt;/p>
&lt;p>休息了一下，顺便买了饮料喝。&lt;/p>
&lt;p>之后看到群里说要合影，就蹭过去了，有人一起玩一起疯的感觉太棒了！&lt;/p>
&lt;p>顺便有群友送给我了一条彩带，当然，上是没有「マジカルミライ２０２３」的字样的，&lt;del>不然估计就要打起来了&lt;/del>&lt;/p>
&lt;p>至于群友，他们还要聚餐，我俩看着时间不早，就回去了。&lt;/p>
&lt;p>人还沉浸在 live 中，应援棒都不想关。不过到了电车上朋友提醒我还是关了。&lt;del>因为好像确实有点迷惑&lt;/del>&lt;/p>
&lt;p>晚上吃饭了吗？忘了，如果吃了应该就是车站附近的すき家。&lt;/p>
&lt;p>晚上干了什么呢？其实忘掉了。这天应该是回去循环了 &amp;ldquo;hello hello hello&amp;rdquo;，有在期待 BD 出了可以回顾，也有在遗憾快乐的时光转瞬即逝，也在担心台风天怎么回去？是早早跑机场看台风，然后看取消了住机场（我天真的以为第二天可以飞）还是说续住的地方？如果不能飞的话票钱怎么办，这会已经开始毫无头绪了。&lt;/p>
&lt;p>之后，航空公司的短信来了，航班由于天气原因取消，和我说重新定一班航班，我主要是怕他直接退款我买不到便宜的票，或者买不到回去的票。然后电话的客服一直是排队或者没人接，我和朋友就在排在线客服的队，取消的航班肯定不止这一班，所以人还是很多的。&lt;/p>
&lt;p>然后排了退出去他还会重来，太蠢了！&lt;/p>
&lt;p>排了应该是有一个小时，终于问到了，答案是可以换一天的同样航班的机票。台风影响到直到18号才有飞机回来，所以，现在是被迫多玩了！&lt;/p>
&lt;h3 id="814-day4-再逛日本桥">8.14 Day4 再逛日本桥
&lt;/h3>&lt;p>一觉睡醒终于休息过来一些了，按照原定计划来说，这天应该去奈良的，无奈明天台风登陆，看着地图上一点点接近的圈圈还是挺害怕的。在住处摆烂到了小中午，看着外面大太阳也不像台风快来了啊？&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/814-morning.webp"
loading="lazy"
alt="814的早起"
>&lt;/p>
&lt;blockquote>
&lt;p>早起的天气&lt;/p>&lt;/blockquote>
&lt;p>干脆再去趟日本桥好了，顺便买我的手办！&lt;/p>
&lt;p>没错，就是之前脸捏的超级可爱那个，想着还是拿下来吧，不然回去没准就是个遗憾。&lt;/p>
&lt;p>&lt;del>其实咱真没买过什么手办&lt;/del>&lt;/p>
&lt;p>坐之前同样的地铁到难波站，巨大难波站原本熙熙攘攘的商店好多都关着门，有些店铺贴着告示是因为台风歇业。&lt;/p>
&lt;p>这地方有点像&lt;a class="link" href="https://kenvix.com/" target="_blank" rel="noopener"
>学姐&lt;/a>家那边的情况，地下一个莫名其妙的“CITY WALK”，然后外面是地下通道外面是一圈商铺。不过他这个是和地铁连着的，看谷歌地图甚至能够从难波站都到近铁日本桥！&lt;/p>
&lt;p>出了日本桥，就一路往南过了一片银行的街，到了那家卖手办的店，一看没开门，以为关了。&lt;/p>
&lt;p>想着估计是拿不到手办了，应该是台风天关门了，有些失望，不过来都来了，当然是继续再逛一遍！&lt;/p>
&lt;p>之前我们看的是中间一条街，西面和东面还个有一条街，那边应该还是没有去过的。&lt;/p>
&lt;p>西面那条街最大的店当属——animate！&lt;/p>
&lt;p>电梯在门口，一楼进门就是很大的波奇酱吧唧和立牌，本来想给朋友买，不过将近100的价格确实不低了，&lt;del>买葱的时候怎么没觉得贵&lt;/del>&lt;/p>
&lt;p>一楼里面有二手CD区，本来我们想买一个超电磁炮的CD，来了个国人二次元老哥劝我们说CD带不进去，&lt;del>还分享了他带本子的经历&lt;/del>，= =&lt;/p>
&lt;p>不过这么一说确实就不太想带了，真带不进去太亏钱了，虽然二手CD不贵但是也有两顿饭了啊。&lt;/p>
&lt;p>当然这里还有很多很多很多的漫画！&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/animate-tenshi.webp"
loading="lazy"
alt="天使降临到我身边"
>&lt;/p>
&lt;blockquote>
&lt;p>天使降临到我身边的漫画&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/animate-onimai.webp"
loading="lazy"
alt="天使降临到我身边"
>&lt;/p>
&lt;blockquote>
&lt;p>别当哥哥了的漫画&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/animate-hsf.webp"
loading="lazy"
alt="HSF"
>&lt;/p>
&lt;blockquote>
&lt;p>高校舰队的全套BD&lt;/p>&lt;/blockquote>
&lt;p>然后在旁边的贩卖机里面搞了瓶生可乐，那阵子这东西很火，头一天还找了一次没找着。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/seikora.webp"
loading="lazy"
alt="生可乐"
>&lt;/p>
&lt;blockquote>
&lt;p>生可乐&lt;/p>&lt;/blockquote>
&lt;p>至于生可乐的味道嘛&amp;hellip;我也说不太上来，当时就说不清，何况现在快忘了，好像是比普通的可乐要“棉”很多？&lt;/p>
&lt;p>这边真的好多扭蛋机啊~&lt;/p>
&lt;p>朋友买了一摞书，我买了本真寻和HSF的小册子。然后他结账了，我觉得超10000日元可以退税，又推着他去问了。然后店员给我们办了退款，又重新扫码购买了一遍，省了很多税！&lt;/p>
&lt;p>在另一家店看到了碧蓝的柜子，准备买些东西送给可爱群友，不过AZ不知道他喜欢那个，买了张随机的色纸。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/nihonnbashi-azurlane.webp"
loading="lazy"
alt="碧蓝航线"
>&lt;/p>
&lt;blockquote>
&lt;p>碧蓝航线的柜子&lt;/p>&lt;/blockquote>
&lt;p>然后又发现了很多葱的吧唧，纠结了好长时间买了一个。&lt;/p>
&lt;p>还有一个是盲盒吧唧，不过难不倒我，他那个就是一个不透明的袋子，里面隔了一层纸，我直接捏着给摸形状摸出来了想要的款式。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/nihonnbashi-miku-badge.webp"
loading="lazy"
alt="战果满满"
>&lt;/p>
&lt;blockquote>
&lt;p>吧唧和盲盒！&lt;/p>&lt;/blockquote>
&lt;p>出来时候天就开始阴蒙蒙了，淅淅沥沥下起了小雨，他再不下我都开始怀疑这台风是假的了。&lt;/p>
&lt;p>&lt;del>然后我俩在大街上骂杂鱼台风，突然意识到路人的眼神有些不对。&lt;/del>&lt;/p>
&lt;p>然后我俩就直接往回赶了，4点多回到住处我好好看了看手办和战利品&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/miku-model-mine.webp"
loading="lazy"
alt="我的可爱手办"
>&lt;/p>
&lt;blockquote>
&lt;p>可爱吧？我的！&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/my-goods.webp"
loading="lazy"
alt="谷子合影"
>&lt;/p>
&lt;blockquote>
&lt;p>给谷子拍了张合影&lt;/p>&lt;/blockquote>
&lt;p>晚上去附近的すき家吃了饭，顺便走了两步。已经下起了淅淅沥沥的小雨。作为北方人我其实是没经历过啥台风的，感觉比电视上看的南方的台风小很多，也有可能是日本的评级不一样？&lt;/p>
&lt;p>在 booking 上看了一家道顿堀的酒店，虽然是比目前这个小木屋贵，但是有独立的洗澡间，我俩终于可以好好洗洗澡了！&lt;/p>
&lt;p>晚上干了啥？不知道，反正是很担心台风的，也非常担心明天受台风影响地铁会停运，甚至已经做好了破费打车过去的准备（悲&lt;/p>
&lt;blockquote>
&lt;p>我真的忘了好多啊&lt;/p>&lt;/blockquote>
&lt;h3 id="815-day5-台风天搬家">8.15 Day5 台风天搬家
&lt;/h3>&lt;p>凌晨4点多醒了一次，外面大风呼啸，房子也有一些颤，不过看起来倒问题不大。&lt;/p>
&lt;p>还是起不来，睡到了大概九点、十点这样，看了看外面天气其实比凌晨时候要好得多，雨的程度放在国内其实是小到中雨，感觉自己白担心了&amp;hellip;&lt;/p>
&lt;p>杂鱼台风！&lt;/p>
&lt;p>拉上行李，和老板告别，打着伞开始往地铁站走。不过担心时间问题所以早饭还是没吃就跑了。&lt;/p>
&lt;p>好在地铁都在，我看这雨才这么大也没多担心，之前还害怕搁车里被水灌了，现在看来问题不大。&lt;/p>
&lt;p>到了难波站，原本很热闹的地下商业街店铺也都关门了，人也少了很多。&lt;/p>
&lt;p>好像还给台湾人换了钱&lt;/p>
&lt;p>到了日本桥站之后按着导航继续走，中间还路过了大阪市剧院还是什么玩意来着。然后有趣的来了，后来才发现这边好像是华人片区，路边各种店都是中国食品，路上见了什么网红烤毛肚啊，大连烧烤啊&lt;/p>
&lt;p>到了之后在旅馆门口等着，他那没有前台，全网上的处理。我就问客服能不能提早入住，在下面蹲着搓手机。&lt;/p>
&lt;p>中间还碰着一个新加坡人，我还以为是中国人。&lt;/p>
&lt;p>正巧碰上了大连的大妈来打扫，发现她打扫的就是我们那个屋子，我俩就直接把东西放进去了，去吃一个午饭+早饭。&lt;/p>
&lt;p>一路走过去，还走错了沿着河走人家后门去了，又绕回来从daodunku的正街走。这边门口就是一家大阪熟食城，卖延边特色、哈尔滨红肠，然后隔壁是卖煎饼油条手抓饼烤冷面的早餐店，不过价格确实吓人。过了马路有叫了只炸鸡、有周黑鸭有西安泡馍&amp;hellip;我俩都想着在这租个房子开蜜雪冰城算了。&lt;/p>
&lt;p>人特多，好在还算有位置吧，然后吃&lt;/p>
&lt;p>下午累得不行，回去洗澡，终于有独立的洗澡间了，内饰也是和中国酒店差不多，只不过很小&lt;/p>
&lt;p>哎还是中国人懂中国人&lt;/p>
&lt;h3 id="816-day6-大阪城">8.16 Day6 大阪城
&lt;/h3>&lt;p>台风终于走啦！开启大阪城之旅！&lt;/p>
&lt;h3 id="817-day7-到处找-gigo-店与-fufu">8.17 Day7 到处找 GIGO 店与 fufu
&lt;/h3>&lt;p>自从晚上瞎逛发现 GIGO 店居然有 fufu 后，决定到处找 fufu！&lt;/p>
&lt;p>晚上去唱了日本的 KTV（他们叫卡拉OK），结果没有原唱，然后两个人瞎唱一通。&lt;/p>
&lt;h3 id="818-day8-大阪-杭州-北京">8.18 Day8 大阪-杭州-北京
&lt;/h3>&lt;p>回家了&lt;/p>
&lt;h3 id="819-day9-北京经典买错车票">8.19 Day9 北京经典买错车票
&lt;/h3>&lt;p>欸哟喂，地道！&lt;/p>
&lt;h3 id="820-day10-回太原">8.20 Day10 回太原
&lt;/h3>&lt;p>开躺&lt;/p></description></item><item><title>直播推流常见协议及网页端实现 RTMP/STR/FLV/HLS/WebRTC</title><link>https://blog.gaein.cn/passages/live-streaming-protocols/</link><pubDate>Tue, 11 Jul 2023 19:05:15 +0800</pubDate><guid>https://blog.gaein.cn/passages/live-streaming-protocols/</guid><description>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Live-streaming-protocols/cover.webp" alt="Featured image of post 直播推流常见协议及网页端实现 RTMP/STR/FLV/HLS/WebRTC" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>最近一个月在叔叔那直播动画，但是被封了。寻思自己随便找个服务器播着玩，搭了个开源的又对延迟什么的不满意，于是走上了折腾这一车直播协议的&lt;del>不归路。&lt;/del>&lt;/p>
&lt;h2 id="前置编码编码器格式与容器">前置：编码、编码器、格式与容器？
&lt;/h2>&lt;blockquote>
&lt;p>心里不是特别有底，可能有部分地方有疏漏或错误之处，还请谅解。&lt;/p>&lt;/blockquote>
&lt;h3 id="编码encode解码decode">编码(encode)/解码(decode)
&lt;/h3>&lt;p>我们说到多媒体时候，经常说什么 &lt;code>mp4&lt;/code> 辣，&lt;code>avi&lt;/code> 辣，同时又经常听到什么 &lt;code>H.265&lt;/code>、&lt;code>H.264&lt;/code> 这种“奇怪”的词。&lt;/p>
&lt;p>编码代表了如何去将视频变成二进制，解码代表了将编码出来的二进制在变成视频。&lt;/p>
&lt;p>为什么要编码呢？以一个 YUV 4:2:2 像素格式的 1080p 60FPS 视频为例，每秒的大小为 &lt;code>1920*1080*2*60=237Mb&lt;/code> ，一个俩小时的电影就是小俩TB&amp;hellip; 这显然是不可接受的。编码在方便视频存储的同时根据相邻的帧相似的地方等进行压缩。&lt;/p>
&lt;p>&lt;del>什么？你说怎么实现？他很厉害，他不是一个有形的。所以你读《心经》，《心经》里面讲什么&amp;hellip;&lt;/del>&lt;/p>
&lt;h3 id="编encoder解decoder码器codec">编(encoder)解(decoder)码器(codec)
&lt;/h3>&lt;p>此前说的编码是一种规范或者说算法，比如说 &lt;code>H.264&lt;/code> 编码，要先这样再那样再那样，诶就好了。&lt;/p>
&lt;p>编解码器(codec)就是具体干这个的。&lt;/p>
&lt;p>比如 &lt;code>H.264&lt;/code> 编码常见的编解码器有 &lt;code>libx264&lt;/code>、&lt;code>nvenc&lt;/code> 等等。&lt;/p>
&lt;p>如果你使用 &lt;code>ffmpeg&lt;/code> 的话，不妨输入 &lt;code>ffmpeg -codecs&lt;/code> 来看看 &lt;code>ffmpeg&lt;/code> 支持的那些编解码和器。&lt;/p>
&lt;h3 id="格式format">格式(format)
&lt;/h3>&lt;p>现在编码器已经可以根据编码把视频变成一大堆二进制了，如何存储他们？&lt;/p>
&lt;p>显然，直接将这一坨二进制写入磁盘不太合理，这样的话谁知道他用的什么编码，该如何解码？另外一个多媒体文件还可能会有音频，怎么区分开这一坨二进制里面的视频和音频？字幕怎么办？分章节的怎么办？&lt;/p>
&lt;p>显然，问题太多了，所以才有了格式，以比较简单的 avi 为例：&lt;/p>
&lt;p>avi 嘛，全称是音频视频交错格式，这玩意就是一截音频，一截视频，一截音频，一截视频&amp;hellip;&lt;/p>
&lt;p>而 flv 是一个 header（标识有下面的内容有多少个字节之类），然后是一个tag，一个二进制，一个tag，一个二进制&amp;hellip;这种能够读一点、放一点的格式就很利好直播（毕竟有些格式二进制堆在一起，你放个电影得全下完才能播）&lt;/p>
&lt;blockquote>
&lt;p>注意，以上举例经过简化，实际格式比起文章内缩写复杂。这样写方便大家理解，如果需要了解这些格式的细节请自行查阅资料。&lt;/p>&lt;/blockquote>
&lt;h3 id="容器container">容器(container)
&lt;/h3>&lt;p>很多时候“容器”与“格式”用的一个名字，比如 &lt;code>flv&lt;/code>、&lt;code>mp4&lt;/code> 等，容器便是你能看到的文件。容器可能会支持多种格式，比如著名的 &lt;code>Matroska&lt;/code> ，支持几乎所有常见的格式。容器内除了多媒体内容外，还有一些 metadata（章节信息、标题等）。&lt;/p>
&lt;h2 id="都有那些直播用协议">都有那些直播用协议？
&lt;/h2>&lt;h3 id="经典推拉流协议rtmprtsp">经典推拉流协议：RTMP/RTSP
&lt;/h3>&lt;p>对于如何做直播流这件事，最简单也是最好办的方法就是——&lt;/p>
&lt;h4 id="rtmp">RTMP
&lt;/h4>&lt;p>RTMP 全名为 &lt;code>Real Time Messaging Protocol&lt;/code>，开发后被 Adobe 收购。&lt;/p>
&lt;p>目前在各种领域应用广泛，几乎所有的直播平台都支持 RTMP 协议推流。&lt;/p>
&lt;p>RTMP 采用 TCP 连接，优点是稳定、延迟低。&lt;/p>
&lt;p>RTMP 采用经典广泛的 H.264 和 AAC，格式为 flv。&lt;/p>
&lt;p>缺点也很简单：现代浏览器不能使用 RTMP 拉流。也就是说浏览器不能直接播放 RTMP 直播流。&lt;/p>
&lt;p>目前通常只使用 RTMP 推流，各种直播客户端&amp;amp;APP可以使用 RTMP 拉流播放。&lt;/p>
&lt;h4 id="rtsp">RTSP
&lt;/h4>&lt;p>RTSP 虽然名字和 RTMP 很像，但并不是一家的。RTSP 的特点是：使用 TCP 发送控制请求、使用 UDP 传输媒体数据。其使用 RTP 协议分视频块传输。&lt;/p>
&lt;p>有点是嘎嘎低延迟，但是在 Android 和 iOS 上似乎没有开箱即用的库。&lt;/p>
&lt;p>广泛应用于监控领域。&lt;/p>
&lt;h3 id="基于http的拉流协议http-flvhlsmpeg-dash">基于HTTP的拉流协议：HTTP-Flv/HLS/MPEG-DASH
&lt;/h3>&lt;p>由于现代浏览器并没有直接办法发起 TCP 请求等（以前 RTMP 使用类似于 Java 浏览器插件等方式工作，但是由于安全原因现代浏览器并不支持这么干），所以需要将 RTMP 直播流进行简单的处理，将其变成浏览器能拿到的。&lt;/p>
&lt;h4 id="http-flv">HTTP-Flv
&lt;/h4>&lt;p>前文介绍过 Flv，它文件体内除了头，存储媒体信息的是一小段、一小段的，也就是说你不需要下载整个文件，就可以解码出其中的、你已经获取到的音视频。这种特性使得 flv 非常适合做直播。&lt;/p>
&lt;p>并且，由于以前 flash 插件的高流行度，使得使用 HTTP 获取 flv 文件边获取边播放的方式更加流行了。&lt;/p>
&lt;p>HTTP-Flv 相比较与其它方法来说延迟不高，但是缺点是——&lt;strong>现代浏览器不支持 flash player 辣！&lt;/strong>&lt;/p>
&lt;p>噔噔咚，然后你就不能放 &lt;code>flv&lt;/code> 了。HTML5 原生支持的只有 &lt;code>webm&lt;/code> 和 &lt;code>mp4&lt;/code> 等。&lt;/p>
&lt;p>解决办法总是有的嘛，还记得在 flash player 停止支持前 bilibili 的 &lt;code>HTML5 播放器&lt;/code> 吗？没错，叔叔给他开源出来了，而且协议是 Apache-2.0。&lt;/p>
&lt;h5 id="叔叔怎么解-flv-的">叔叔怎么解 flv 的？
&lt;/h5>&lt;p>既然浏览器不支持 flv，那么叔叔怎么做的 &lt;code>flv.js&lt;/code> 呢？难道是摁写 &lt;code>js&lt;/code> 或者用 &lt;code>wasm&lt;/code> 解析 flv 然后解码然后在浏览器上画？&lt;/p>
&lt;p>当然不是。有一个神奇的东西叫做 &lt;code>MSE&lt;/code> ，&lt;code>video&lt;/code> 标签不是只支持 &lt;code>mp4&lt;/code> 吗？那我把 &lt;code>flv&lt;/code> 变成小 &lt;code>mp4&lt;/code> 总行了吧！Media Source Extension 支持在代码中构建 &lt;code>MediaSource&lt;/code> 对象并将其作为 &lt;code>src&lt;/code> 传递给 &lt;code>video&lt;/code> 标签。&lt;/p>
&lt;p>简而言之，你只需要把东西变成 &lt;code>mp4&lt;/code> 格式，不需要自己解码，然后交给浏览器就好了！&lt;/p>
&lt;p>当然，对于 &lt;code>h.265/HEVC&lt;/code> 这种浏览器不支持的，叔叔那真就拿 &lt;code>wasm&lt;/code> 开了一堆线程搁用户浏览器上软解，前阵子骂的沸沸扬扬的。&lt;/p>
&lt;p>flv.js 项目对于该实现的原文：&lt;/p>
&lt;blockquote>
&lt;p>flv.js works by transmuxing FLV file stream into ISO BMFF (Fragmented MP4) segments, followed by feeding mp4 segments into an HTML5 &lt;video> element through Media Source Extensions API.&lt;/p>&lt;/blockquote>
&lt;p>于是，有了叔叔的帮助，我们就可以在浏览器播放 flv 了，当然也可以看直播了。&lt;/p>
&lt;p>另外，注意 flv.js 项目首页上写道的：&lt;/p>
&lt;blockquote>
&lt;p>For FLV live stream playback, please consider mpegts.js which is under active development.&lt;/p>
&lt;p>This project will become rarely maintained.&lt;/p>&lt;/blockquote>
&lt;p>推荐我们使用 &lt;code>mpegts.js&lt;/code> 来播放直播流，该项目开发者也是 &lt;code>flv.js&lt;/code> 开发者之一，其对直播进行了优化。&lt;/p>
&lt;h4 id="hls">HLS
&lt;/h4>&lt;p>HLS 全程是 &lt;code>HTTP Live Stream&lt;/code> ，是水果公司整的。&lt;/p>
&lt;p>其具体工作原理是先获取一个列表文件，然后挨个请求里面的 &lt;code>ts&lt;/code> 文件挨个播放。&lt;/p>
&lt;p>目前来说 HLS 支持在 IOS、Safari 及安卓上最新版本的浏览器/Chrome 浏览器。通过 js 也可以在其它现代浏览器上播放。&lt;/p>
&lt;p>目前可以播放 HLS 的 JS 播放器有：&lt;/p>
&lt;ol>
&lt;li>&lt;a class="link" href="https://github.com/video-dev/hls.js" target="_blank" rel="noopener"
>hls.js&lt;/a>&lt;/li>
&lt;/ol>
&lt;h4 id="mpeg-dash">MPEG-DASH
&lt;/h4>&lt;p>DASH 的意思是 “基于 HTTP 的动态自适应流”，DASH 技术很新，设计的很棒，其原理也是 XHR 请求视频数据块，再添加入 &lt;code>video&lt;/code> 标签。&lt;/p>
&lt;p>不过据 SRS Github issue 说，DASH 的设计很棒有点“想得很美”的意思，似乎协议写的不是特别清除，实现的有些迷糊。&lt;/p>
&lt;p>目前可以播放 MPEG-DASH 的播放器有：&lt;/p>
&lt;ol>
&lt;li>&lt;a class="link" href="https://github.com/Dash-Industry-Forum/dash.js" target="_blank" rel="noopener"
>dash.js&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/shaka-project/shaka-player" target="_blank" rel="noopener"
>shaka-player&lt;/a>&lt;/li>
&lt;/ol>
&lt;h3 id="新技术webrtc与srt">新技术：WebRTC与SRT
&lt;/h3>&lt;p>除了以上几种经典方案外，近年来出现了 WebRTC 和 SRT 协议。&lt;/p>
&lt;h4 id="webrtc">WebRTC
&lt;/h4>&lt;p>WebRTC 是一项实时通讯技术，建立点对点连接并实现任意数据传输。适用于浏览器的摄像头直播会议等场景。&lt;/p>
&lt;p>WebRTC 算是一种较新的技术。目前看来其前景广阔。但是经过测试不知道是 SRS 问题抑或是 WebRTC 问题，推流直播效果不够好。&lt;/p>
&lt;h4 id="srt">SRT
&lt;/h4>&lt;p>SRT 为了解决 RTMP 的问题（旧、延迟高等），开发出了基于UDT（UDP的传输协议）的新协议。&lt;/p>
&lt;p>特点是快速连接以及按照时间发送音视频数据等。&lt;/p>
&lt;p>小缺点是 URL 不太容易看懂，另外就是其拥塞控制有些简单。&lt;/p>
&lt;h2 id="使用-srs-接收-rtmpsrt-推流">使用 SRS 接收 RTMP/SRT 推流
&lt;/h2>&lt;h3 id="推流工具">推流工具
&lt;/h3>&lt;p>在b站直播，我们可以使用b站直播只因等工具。当然，大家也注意到了，有很多up主或者其它平台在使用 OBS Studio 这款软件。&lt;/p>
&lt;h4 id="obs-studio">OBS Studio
&lt;/h4>&lt;p>&lt;a class="link" href="https://obsproject.com/" target="_blank" rel="noopener"
>Open Broadcaster Software | OBS&lt;/a>&lt;/p>
&lt;p>OBS Studio 更合适一般在电脑上的直播（比如各种游戏直播），可以实时看到反馈，使用方便。&lt;/p>
&lt;h4 id="ffmpeg">ffmpeg
&lt;/h4>&lt;p>在无GUI环境下，更适合用 ffmpeg 进行推流。&lt;/p>
&lt;p>ffmpeg 适合无人值守直播（比如7x24的动画片之类），易于编程和调用，性能要求低。&lt;/p>
&lt;h2 id="浏览器端实现拉流播放-http-flvhlsdash">浏览器端实现拉流播放 HTTP-FLV/HLS/DASH
&lt;/h2>&lt;h3 id="dplayer">DPlayer
&lt;/h3>&lt;p>Dplayer 是 DIYGOD 开发的播放器。支持多种媒体，且可以通过自定义 type 来支持其它 MSE 播放器来实现各种协议的视频播放。为了风格统一，使用了该播放器来做直播播放。&lt;/p>
&lt;h3 id="编码实现">编码实现
&lt;/h3>&lt;p>首先先在 vue 上初始化 Dplayer 播放器：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-vue" data-lang="vue">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">template&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">ref&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;playerContainer&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">template&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">setup&lt;/span> &lt;span class="na">lang&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;ts&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="nx">computed&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">onMounted&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">onUpdated&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ref&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;vue&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="nx">createVideo&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;@/utils/videoEngine&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="nx">DPlayer&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="nx">DPlayerDanmaku&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;dplayer&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="nx">options&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;@/utils/request&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">props&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">defineProps&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">streamName&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">player&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">ref&lt;/span>&lt;span class="p">({}&lt;/span> &lt;span class="nx">as&lt;/span> &lt;span class="nx">DPlayer&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">srsAddress&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">ref&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">options&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">serverAddress&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">playerContainer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">ref&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">videoItem&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">computed&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">createVideo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">liveType&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">liveType&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">flvJs&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">srsAddress&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">props&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">streamName&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">onMounted&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">DPlayer&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">container&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">playerContainer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span> &lt;span class="nx">as&lt;/span> &lt;span class="nx">HTMLElement&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">live&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">autoplay&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">theme&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;#F19EC2&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">video&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">videoItem&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">play&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 当源地址值更新时，切换视频。
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">onUpdated&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">pause&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">switchVideo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">videoItem&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{}&lt;/span> &lt;span class="nx">as&lt;/span> &lt;span class="nx">DPlayerDanmaku&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">play&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其中，&lt;code>createVideo&lt;/code> 方法是自己编写的工具方法，用于生成含有对应 &lt;code>customType&lt;/code> 的 &lt;code>video&lt;/code> 对象。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ts" data-lang="ts">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="nx">mpegts&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s2">&amp;#34;mpegts.js&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="nx">Mpegts&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s2">&amp;#34;mpegts.js&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="nx">FlvJs&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s2">&amp;#34;flv.js&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="nx">flvjs&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s2">&amp;#34;flv.js&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="nx">Hls&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s2">&amp;#34;hls.js&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="nx">dashjs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="nx">MediaPlayerClass&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s2">&amp;#34;dashjs&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">enum&lt;/span> &lt;span class="nx">MesPlayerName&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">HttpFlvByMpegTsJs&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;mpegTsJs&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">HttpFlvByFlvJs&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;flvJs&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">HLSByHlsJs&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;hlsJs&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">DASHByDashJs&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;dashJs&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">DASHByShaka&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;dashShaka&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">interface&lt;/span> &lt;span class="nx">IMsePlayerInfo&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>: &lt;span class="kt">MesPlayerName&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">player&lt;/span>: &lt;span class="kt">any&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">extension&lt;/span>: &lt;span class="kt">string&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>: &lt;span class="kt">string&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 创建播放器
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">createPlayer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">video&lt;/span>: &lt;span class="kt">HTMLVideoElement&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="k">void&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 加载直播流
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">loadPlayer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">video&lt;/span>: &lt;span class="kt">HTMLVideoElement&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="k">void&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hasStream&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kr">boolean&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 卸载直播流
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">unloadPlayer&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="k">void&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">_mesPlayerList&lt;/span>: &lt;span class="kt">Array&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">IMsePlayerInfo&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>: &lt;span class="kt">MesPlayerName.HttpFlvByMpegTsJs&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">player&lt;/span>: &lt;span class="kt">null&lt;/span> &lt;span class="kr">as&lt;/span> &lt;span class="nx">Mpegts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Player&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">extension&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;flv&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;HTTP-FLV(mpegts.js)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">createPlayer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">video&lt;/span>: &lt;span class="kt">HTMLVideoElement&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">streamUrl&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">video&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mpegts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createPlayer&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">type&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;flv&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">isLive&lt;/span>: &lt;span class="kt">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">url&lt;/span>: &lt;span class="kt">streamUrl&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">loadPlayer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">video&lt;/span>: &lt;span class="kt">HTMLVideoElement&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`[videoEngine,flvJs,unloadPlayer]detach and unload mpegts.js player.`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">attachMediaElement&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">video&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">load&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">mpegts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Events&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">LOADING_COMPLETE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">play&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">unloadPlayer() {&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`[videoEngine,flvJs,unloadPlayer]detach and unload mpegts.js player.`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">detachMediaElement&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">unload&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="nx">hasStream() {&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isPlaying&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>: &lt;span class="kt">MesPlayerName.HttpFlvByFlvJs&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">player&lt;/span>: &lt;span class="kt">null&lt;/span> &lt;span class="kr">as&lt;/span> &lt;span class="nx">FlvJs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Player&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">extension&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;flv&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;HTTP-FLV(flv.js)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">createPlayer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">video&lt;/span>: &lt;span class="kt">HTMLVideoElement&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">streamUrl&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">video&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">flvjs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createPlayer&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">type&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;flv&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">isLive&lt;/span>: &lt;span class="kt">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">url&lt;/span>: &lt;span class="kt">streamUrl&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">loadPlayer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">video&lt;/span>: &lt;span class="kt">HTMLVideoElement&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`[videoEngine,flvJs,unloadPlayer]detach and unload flv.js player.`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">attachMediaElement&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">video&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">load&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">unloadPlayer() {&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`[videoEngine,flvJs,unloadPlayer]detach and unload flv.js player.`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">detachMediaElement&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">unload&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="nx">hasStream() {&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isPlaying&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>: &lt;span class="kt">MesPlayerName.HLSByHlsJs&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">player&lt;/span>: &lt;span class="kt">null&lt;/span> &lt;span class="kr">as&lt;/span> &lt;span class="nx">Hls&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">extension&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;m3u8&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;HLS(hls.js)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">createPlayer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">video&lt;/span>: &lt;span class="kt">HTMLVideoElement&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kt">any&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Hls&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">loadPlayer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">video&lt;/span>: &lt;span class="kt">HTMLVideoElement&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">streamLink&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">video&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">src&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">loadSource&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">streamLink&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">attachMedia&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">video&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">unloadPlayer() {&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`[videoEngine,hlsJs,unloadPlayer]nothing todo with hls.js player.`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hasStream() {&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isLevelLoaded&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>: &lt;span class="kt">MesPlayerName.DASHByDashJs&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">player&lt;/span>: &lt;span class="kt">null&lt;/span> &lt;span class="kr">as&lt;/span> &lt;span class="nx">MediaPlayerClass&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">extension&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;mpd&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;MPEG DASH(dash.js)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">createPlayer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">video&lt;/span>: &lt;span class="kt">HTMLVideoElement&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kt">any&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">dashjs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">MediaPlayer&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">create&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">loadPlayer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">video&lt;/span>: &lt;span class="kt">HTMLVideoElement&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">streamLink&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">video&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">src&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">initialize&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">video&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">streamLink&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">updateSettings&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="nx">streaming&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="nx">delay&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="nx">liveDelay&lt;/span>: &lt;span class="kt">10&lt;/span>&lt;span class="p">}}});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">unloadPlayer() {&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">reset&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`[videoEngine,hlsJs,unloadPlayer]nothing todo with hls.js player.`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hasStream() {&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">getPlayerInfo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">playerName&lt;/span>: &lt;span class="kt">MesPlayerName&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">IMsePlayerInfo&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="kc">undefined&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">playerInfo&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">_mesPlayerList&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">player&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="nx">playerName&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="nx">playerInfo&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`[videoEngine,getPlayerInfo]can not find player named &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">playerName&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">.`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">playerInfo&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">createVideo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">playerName&lt;/span>: &lt;span class="kt">MesPlayerName&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">srsAddress&lt;/span>: &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">streamName&lt;/span>: &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">playerInfo&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">_mesPlayerList&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">find&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">player&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="nx">playerName&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="nx">playerInfo&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`[videoEngine,createVideo]can not find player&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">playerName&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">.`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">streamUrl&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sb">`//&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">srsAddress&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">:8080/live/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">streamName&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">.&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">playerInfo&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">extension&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">url&lt;/span>: &lt;span class="kt">streamUrl&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">type&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;streamPlayer&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">pic&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;./PM5644.webp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">customType&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">streamPlayer&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">video&lt;/span>: &lt;span class="kt">HTMLVideoElement&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="nx">playerInfo&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">player&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">playerInfo&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createPlayer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">video&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">playerInfo&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hasStream&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">playerInfo&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">unloadPlayer&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">playerInfo&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">loadPlayer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">video&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>完整实现见：&lt;a class="link" href="https://github.com/nidbCN/live_room" target="_blank" rel="noopener"
>live_room&lt;/a>&lt;/p>
&lt;h2 id="参考">参考
&lt;/h2>&lt;ol>
&lt;li>&lt;a class="link" href="https://dplayer.diygod.dev/zh/guide.html#mse-%E6%94%AF%E6%8C%81" target="_blank" rel="noopener"
>指南 | DPlayer&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/Audio_and_video_delivery/Live_streaming_web_audio_and_video" target="_blank" rel="noopener"
>实时传输 Web 音频与视频 - Web 开发者指南 | MDN&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/video-dev/hls.js" target="_blank" rel="noopener"
>video-dev/hls.js: HLS.js is a JavaScript library that plays HLS in browsers with support for MSE.&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/Dash-Industry-Forum/dash.js" target="_blank" rel="noopener"
>Dash-Industry-Forum/dash.js: A reference client implementation for the playback of MPEG DASH via Javascript and compliant browsers.&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/shaka-project/shaka-player" target="_blank" rel="noopener"
>shaka-project/shaka-player: JavaScript player library / DASH &amp;amp; HLS client / MSE-EME player&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/xqq/mpegts.js" target="_blank" rel="noopener"
>xqq/mpegts.js: HTML5 MPEG2-TS / FLV Stream Player&lt;/a>&lt;/li>
&lt;/ol></description></item><item><title>初音ミク「マジカルミライ」魔法未来2023 大阪攻略</title><link>https://blog.gaein.cn/passages/magical-mirai-2023-osa/</link><pubDate>Tue, 30 May 2023 20:27:11 +0800</pubDate><guid>https://blog.gaein.cn/passages/magical-mirai-2023-osa/</guid><description>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Travel-of-OSAKA/magical-mirai-flags.webp" alt="Featured image of post 初音ミク「マジカルミライ」魔法未来2023 大阪攻略" />&lt;h2 id="初音ミクマジカルミライ2023魔法未来2023-大阪攻略">初音ミク「マジカルミライ2023」魔法未来2023 大阪攻略
&lt;/h2>&lt;h3 id="契机">契机
&lt;/h3>&lt;p>2023年，疫情就这么悄无声息的结束了。从上初中开始就一直有去日本看魔法未来的愿景，自己也一直在看魔法未来的蓝光 BD。舞台效果确实也比初三时候看的 MIKU EXPO 要好。&lt;/p>
&lt;p>&lt;del>最近翻了一下 17 和 18 的未来有你，发现糟心事真的多，虽然当时就有耳闻没想到这么离谱，还是咱看的 EXPO 巴适。&lt;/del>&lt;/p>
&lt;p>问题在于出国这件事情有亿点麻烦，而且早就听说魔法未来的票需要抽选，一直以为票就要花上几千大几，感觉要花个好几万才能去一次，就想着大学去——然后我的大学就在宿舍和家的床上度过了。&lt;/p>
&lt;p>3月时候和朋友闲聊聊到这件事，他也很想去，干脆我们就点进&lt;a class="link" href="https://magicalmirai.com/" target="_blank" rel="noopener"
>魔法未来的官网&lt;/a>然后票价是——9700JPY（约合人民币500）！这还是SS的价格，相比于国内的未来有你或EXPO来说价格非常便宜了，我俩干脆就直接开整！&lt;/p>
&lt;p>不过说实话今年的主视觉图不太符合我自己的审美，不过抽票先辣！&lt;/p>
&lt;h3 id="票务">票务
&lt;/h3>&lt;p>在我想去魔法未来的时候正好是日本本土抽票一轮开始的日子，因此我参加了正好两轮抽票。&lt;/p>
&lt;p>魔法未来的抽票活动在 PIA 上进行。&lt;/p>
&lt;p>抽票需要一张 VISA 卡组织或者万事达的卡。&lt;/p>
&lt;p>关于抽票难度，往常是 日场难度&amp;gt;夜场，SS&amp;gt;S&amp;gt;A，千秋乐（最后一天）&amp;gt;其它，东京&amp;gt;大阪。魔法未来 2024 新增了福冈，并且将大阪调到东京的后面，大阪的千秋乐成了真千秋乐，有可能会更难抽。&lt;/p>
&lt;h4 id="第一轮-本土票">第一轮-本土票
&lt;/h4>&lt;p>抽票结果与提交时间无关，只要在抽票时间内提交即可。&lt;/p>
&lt;p>本土票只有在日文的网页上才会有链接，其它语言的网页只有海外票的链接。&lt;/p>
&lt;p>PIA 的网页是全日文的，&lt;del>还好朋友是大罕见&lt;/del>，所以看起来没什么问题。&lt;/p>
&lt;p>从官网点击进入抽票页面，就是各种注意、须知之类的。&lt;/p>
&lt;p>其中有一条的意思是：“抽票需要注册 PIA 账号，抽票使用的手机号必须和 PIA 上面注册的一致，&lt;del>不然抽中了也没法给你&lt;/del>”&lt;/p>
&lt;p>想要抽选日本本土票需要一个日本手机号，因为注册PIA需要语音验证，所以手机号必须还是能打电话那种，各种接码平台自然就不能用了。&lt;/p>
&lt;p>然后也尝试了各种虚拟号码，用不了。最终是找在日本留学的朋友接了一下才成功注册好。&lt;/p>
&lt;p>注册完成自然是抽票，抽票的话每次抽选可以选择一场的不同座位（有 A/S/SS ，A是听个响、S是看个影、只有SS才有可能看清楚（悲）），可以抽选不同日期的不同场次，有可能会中多场。&lt;/p>
&lt;p>意思是每个手机号可能会中不同场次的票，但是不会重复中同一场同座位席别的票。&lt;/p>
&lt;p>另外，日本本土票的 SS 是很难抽的，大阪相对来说还好一点，东京更难。&lt;/p>
&lt;p>我这种非酋自然也是——全空。&lt;/p>
&lt;p>如果需要找卖日本手机号或者什么代抽票的话要尽早，在开抽时候就完全没有了。&lt;/p>
&lt;h5 id="取票">取票
&lt;/h5>&lt;p>可以在 PIA 的 CLOK 平台上选择取票方式，有电子票和纸制两种。纸制票可以去7-11便利店取。&lt;/p>
&lt;p>取票的日期在演唱会开始前一两周。&lt;/p>
&lt;h4 id="抽票结果">抽票结果
&lt;/h4>&lt;p>插在二轮之前说一下抽票结果。&lt;/p>
&lt;p>抽票结果时间在日本时间 18:00（也就是东八区的下午5点）。不过这个时候是公布结果，使用信用卡的话，扣款工作其实已经完成了。扣款是从前一天的下午（大概）开始的，如果你发现信用卡被扣款了，那么恭喜你中了！如果一直到出票当天的下午也没扣，那八成是寄了。&lt;/p>
&lt;p>当然要以最终公布的结果为准辣~&lt;/p>
&lt;p>据群友们说，有重复扣款再退款的。比如说你申请了很多场的SS，然后扣款了2wJPY，不一定是中了两张SS哦，有可能是中了一张扣了两次然后在退回去。&lt;del>这也太笨蛋了吧！&lt;/del>&lt;/p>
&lt;p>然后在等第二轮抽票开始之前这段时间里我把我珍藏的两根 魔法未来2017 的应援棒丢了，出去玩的时候带过去了，然后回来时候忘了（悲&lt;/p>
&lt;p>结果愣是找不到了，店家也说没看见过，估计是被谁家小孩捡走或者拿去卖破烂了。（因为我翻了好几个小时的垃圾堆，把他们那的垃圾堆翻了个底朝天也没看见）&lt;/p>
&lt;p>两根棒子花了我大概800块钱，最难受的是自己心爱的东西被别人当成垃圾了。&lt;del>比较官方棒子的做工看起来就值30块钱的样子&lt;/del>&lt;/p>
&lt;p>最后没办法，权当献祭了来安慰自己了。表弟来山西找我玩顺便拉着去五台山拜了拜五爷庙。&lt;/p>
&lt;h4 id="第二轮-本土海外票">第二轮-本土/海外票
&lt;/h4>&lt;p>抽票结果与提交时间无关，只要在抽票时间内提交即可。&lt;/p>
&lt;p>海外票的链接显示在非日文的网页上（比如简体中文），本土票依旧是只有日文网页才有链接。&lt;/p>
&lt;p>海外票可以用任意手机号，相对日本本土票来说更方便（日本手机号太难搞了呜呜）&lt;/p>
&lt;p>PIA 海外票是英文页面，本土票依旧是日文页面。按照上面的提示来就可以了。&lt;/p>
&lt;p>然后我海外票单抽了最后一天的夜场SS两张。结果中了，&lt;del>看来还是要献祭的。&lt;/del>&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Magical-Mirai-2023-OSA/01.webp"
loading="lazy"
alt="票务"
>&lt;/p>
&lt;p>关于海外票的座位，群友说的是一般“不好也不坏但是可能偏好一点”，集中在不前也不后的位置，中间稍微偏一点的地方。&lt;/p>
&lt;p>所以海外票就别想着第一排辣~&lt;/p>
&lt;h5 id="取票-1">取票
&lt;/h5>&lt;p>本土票依旧是可以在 PIA 的 CLOK 平台上选择取票方式，有电子票和纸制两种。纸制票可以去7-11便利店取。&lt;/p>
&lt;p>海外票只支持到7-11便利店领取，需要打印（hard copy）中票的电子邮件。&lt;/p>
&lt;p>取票的日期在演唱会开始前一两周。&lt;/p>
&lt;h4 id="宿泊">宿泊
&lt;/h4>&lt;p>宿泊就是官方卖的酒店+票的服务，然后还有一些特典。&lt;/p>
&lt;p>宿泊非常贵、而且一些好的场次会直接抢空。可能适合一些富佬专门蹲好的场次&amp;amp;特典罢。&lt;/p>
&lt;p>咱因为过于贫穷没有参加。&lt;/p>
&lt;h4 id="第三轮-本土">第三轮-本土
&lt;/h4>&lt;p>二轮结束的时候，官网多出来了一个“チケットぴあ　特別先行”。看样子是又抽了一轮？&lt;/p>
&lt;p>这次可以选择单线下票、单展子票等。&lt;/p>
&lt;h5 id="取票-2">取票
&lt;/h5>&lt;p>仅支持在7-11便利店取纸制票。&lt;/p>
&lt;p>取票的日期在演唱会开始前一两周。&lt;/p>
&lt;h3 id="护照签证">护照&amp;amp;签证
&lt;/h3>&lt;p>首先说一下这两个东西：&lt;/p>
&lt;p>护照是国籍国发给公民的、在外面证明身份用的东西。也就是中国外交部发给你这个本本，告诉外国人，这位是合法的中国公民。&lt;/p>
&lt;p>官网的介绍是：中华人民共和国护照是中华人民共和国公民出入国境和在国外证明国籍和身份的证件。&lt;/p>
&lt;p>而签证（大概）是外国允许你进入、短暂/长期停留的凭证。&lt;/p>
&lt;h4 id="护照办理">护照办理
&lt;/h4>&lt;p>本过程可以参考 &lt;a class="link" href="https://s.nia.gov.cn/mps/bszy/gmcrg/slpthz/201903/t20190313_1011.html" target="_blank" rel="noopener"
>国家移民管理局政务服务平台-普通护照签发服务指南&lt;/a>&lt;/p>
&lt;p>护照属于个人身份证件。普通护照一般都给办理的。（除疫情期间）&lt;/p>
&lt;p>我查询了下出入境管理机构，呼了个电话过去问了问东西，他说就带身份证和活人就可以。&lt;/p>
&lt;p>&lt;a class="link" href="https://s.nia.gov.cn/mps/views/query/query-address.html" target="_blank" rel="noopener"
>办事机构查询&lt;/a>&lt;/p>
&lt;p>政务服务平台的APP&amp;amp;小程序似乎可以在线办理，不过我学校附近的出入境管理那边说人不多让我直接过去就OK。&lt;/p>
&lt;p>然后过去、拍照、排队、填单子然后交钱，回去静等护照发过来就行了。&lt;/p>
&lt;p>护照有邮递、自取两种，我选择了邮递，然后EMS从杏花岭区邮到尖草坪区用了两天还要了我20&amp;hellip;&lt;/p>
&lt;h5 id="关于异地办理">关于异地办理
&lt;/h5>&lt;p>护照现在不需要在户籍所在地办理，我的护照就是在山西办理的。不过民警会询问为什么异地办理，我的理由是在太原上学，然后向我索要了学生证，我提供了学校的学生卡也没有问题。&lt;/p>
&lt;blockquote>
&lt;p>所以如果是异地办理除了身份证最好还带上其他证件罢，比如居住证或者是学生证等。&lt;/p>&lt;/blockquote>
&lt;h4 id="签证办理">签证办理
&lt;/h4>&lt;p>日本大使馆不受理个人赴日个人旅游签，签证由指定的旅行社代办。全国分为多个领事馆区，据说南方（广州、上海）等拒签率更低一些，但是异地办理似乎需要氪金。&lt;/p>
&lt;p>具体地区对应的使馆见：&lt;a class="link" href="https://www.cn.emb-japan.go.jp/itpr_zh/aboutus.html#kankatsu" target="_blank" rel="noopener"
>关于使馆 | 日本国驻华大使馆&lt;/a>&lt;/p>
&lt;p>指定的代办旅行社查询：&lt;a class="link" href="https://www.cn.emb-japan.go.jp/itpr_zh/visa_dantai_daili.html" target="_blank" rel="noopener"
>赴日观光旅游业务指定旅行社 | 日本国驻华大使馆&lt;/a>&lt;/p>
&lt;p>然后你只需要一个电话呼过去问他就行了。&lt;/p>
&lt;p>然后我3月、4月、5月得到的答复都是——不太好办、六月再问问。&lt;/p>
&lt;h5 id="资料准备">资料准备
&lt;/h5>&lt;p>需要准备的资料见官网：&lt;a class="link" href="https://www.cn.emb-japan.go.jp/files/100411249.pdf" target="_blank" rel="noopener"
>所需材料&lt;/a>&lt;/p>
&lt;p>作为带学牲、申请个人旅游单次签证，需要的材料有：&lt;/p>
&lt;ol>
&lt;li>护照&lt;/li>
&lt;li>签证申请表&lt;/li>
&lt;li>个人信息处理同意书&lt;/li>
&lt;li>户口本等，能确认本人居住地的资料&lt;/li>
&lt;li>大学出具的在学证明书或毕业证书&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>注：大学生指：中国国内的高校，中国教育部公布的名单中所列的所有普通本科高校的在校本科生、研究生（博士及硕士在读）或者毕业于该校三年以内的毕业生。&lt;/p>&lt;/blockquote>
&lt;p>不是带学牲的话需要准备“能确认经济能力的资料”&lt;/p>
&lt;p>申请表之类的旅行社似乎会帮你准备哦。&lt;/p>
&lt;p>&lt;del>现在刚刚到6月，明天准备呼旅行社去，看看怎么样吧QAQ&lt;/del>&lt;/p>
&lt;p>问了下大使馆指定的旅行社（太原）结果要求我提供父母双方各自的10万年收入流水、20万存款证明，我直接呃呃。&lt;/p>
&lt;p>在淘宝上找了几家旅行社，有加钱送上海的、有不能送的、有原价送北京的&amp;hellip;.&lt;/p>
&lt;p>奇怪是有些旅行社并不算大使馆指定的代办旅行社，也能办而且也不贵。&lt;/p>
&lt;p>最后我选择了一家北京的非大使馆指定的旅行社，价格为 390 元，需要准备并邮寄以下材料：&lt;/p>
&lt;ol>
&lt;li>护照原件；&lt;/li>
&lt;li>户口本首页、户主页、个人页复印件；&lt;/li>
&lt;li>学信网的教育部学籍在线验证报告；&lt;/li>
&lt;li>近三月白底证件照（深色衣服）；&lt;/li>
&lt;/ol>
&lt;h5 id="送签">送签
&lt;/h5>&lt;p>按照旅行社说的递交他们需要的材料，旅行社会帮你审查、准备更多申请材料。寄过去后旅行社送到领区大使馆，然后大使馆再去处理签证。&lt;/p>
&lt;p>出签时间为 10 个工作日内，实际上我的第 6 个工作日就出了。&lt;/p>
&lt;blockquote>
&lt;p>6月19日后日本开放电子签证，具体情况请关注官网或咨询旅行社。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>最近签证政策有些紧缩，不太容易过。&lt;/p>&lt;/blockquote>
&lt;h5 id="出签">出签
&lt;/h5>&lt;p>拿到签证！日本的单次签通常是一张小卡片，随便粘在护照的某一页。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Magical-Mirai-2023-OSA/02.webp"
loading="lazy"
alt="签证"
>&lt;/p>
&lt;h3 id="机票">机票
&lt;/h3>&lt;p>目前看了下，飞大阪有大概以下几种：&lt;/p>
&lt;p>北京(BJS)-大阪(OSA)：优点是在北方、离得近，而且北京相对来说熟悉一些。
上海(SHA)-大阪(OSA)：优点是部分直飞比较便宜。&lt;/p>
&lt;p>我是比较倾向于北京飞大阪的，因为 70 块钱能润去北京而不能去上海（悲）&lt;/p>
&lt;h4 id="北京bjs-大阪osa">北京(BJS)-大阪(OSA)
&lt;/h4>&lt;p>以下方案约在 3200 左右（往返）&lt;/p>
&lt;ol>
&lt;li>国泰北京转香港飞大阪：优点是便宜，缺点是国泰态度据说恶心、还有转机。&lt;/li>
&lt;li>海航北京直飞大阪：优点是便宜，缺点是不算超级便宜。&lt;/li>
&lt;li>南航北京转大连飞大阪：优点是可以去大连蹭饭，缺点是不算超级便宜。&lt;/li>
&lt;/ol>
&lt;h4 id="上海sha-大阪osa">上海(SHA)-大阪(OSA)
&lt;/h4>&lt;ol>
&lt;li>春秋上海直飞大阪：优点是大概会便宜。&lt;/li>
&lt;/ol>
&lt;p>办完签证后立刻开始看机票，正好厦门航空往返 2300 的机票，剩余两个座位，于是就和朋友直接买了。&lt;/p>
&lt;p>因为实在不知道机票什么时候便宜，就直接冲了。&lt;/p>
&lt;h3 id="住宿出行通讯">住宿&amp;amp;出行&amp;amp;通讯
&lt;/h3>&lt;h4 id="住宿">住宿
&lt;/h4>&lt;p>因为大阪的演唱会在 INTEX 大阪 举办，在一个稍微有点小偏的人造岛上，因此我在 booking 上预定了大阪空气旅社（在住之江区）。&lt;/p>
&lt;p>这家旅社是双人间、价格还算便宜，正好我和朋友两个人住。&lt;/p>
&lt;p>住完补充：旅社、INTEX 大阪、大阪市区正好在一个三角形，旅社到 INTEX 大阪只需要坐四桥线一站到终点，然后坐电车直达那个岛。岛上也可坐中央线直达市里。&lt;/p>
&lt;p>这家旅社的具体环境不算太好，日式的榻榻米，木质的小房子我俩都不敢蹦跶，正好赶上台风房子还在晃。浴室、厕所等都是公用的。&lt;/p>
&lt;p>订旅社一定要留意周围的车站以及怎么过去，要不要转车等。离能够直达的车站近才是真的近。&lt;/p>
&lt;h4 id="出行">出行
&lt;/h4>&lt;p>日本的地图非常有迷惑性，看上去感觉很远的地方实际上也没有超级远。大阪空气旅社看起来离那个岛就像隔了某城市的一个区，一眼看也有几十公里，但是地图一量不到半个小时的电车就能过去了。&lt;/p>
&lt;p>&lt;del>据说有卡，什么大阪一日卡之类的，可以免乘车费。&lt;/del>&lt;/p>
&lt;h5 id="卡券">卡券
&lt;/h5>&lt;p>主要的是大阪地下铁一日/两日券，由 OSAKA METRO 发行，大阪市地下铁的价格基本坐就是十几块，这个卡可以无限坐还是非常值的。当然，有一些线路不能免费还需要注意。&lt;/p>
&lt;p>另外这个券不同于大阪周游卡，在难波站的 27 出口附近取而不是在难波旅客中心。&lt;/p>
&lt;p>如果逛的经典比较多的话，大阪周游卡/关西周游卡也是很不错的选择。具体来说看你的出行安排。&lt;/p>
&lt;h4 id="通讯">通讯
&lt;/h4>&lt;p>&lt;del>手机卡？还不知道怎么办。据说能办香港的然后漫游？&lt;/del>&lt;/p>
&lt;p>我个人来说办了两张 IIJ 和香港 JOYTEL 的 SIM 卡。淘宝价格差不多 50 元 / 10 G。&lt;/p>
&lt;p>体验上 IIJ 的并不如香港的 JOYTEL，我的淘宝写着 IIJ 的还需要手动设置 APN 等，实际信号、速度也不行。&lt;/p>
&lt;p>至于使用方法，下飞机插上卡就行了，更详细的卖家会告诉你的。&lt;/p>
&lt;h4 id="带什么东西">带什么东西？
&lt;/h4>&lt;h5 id="生活用品">生活用品
&lt;/h5>&lt;p>日本很多民宿或青年旅社和国内不一样，可能不会提供免费的毛巾或一次性牙刷等。&lt;/p>
&lt;p>除此之外也可以考虑带上卫生纸，日本那边的纸很薄，多少有些不能适应。&lt;del>你也不希望漏了罢！&lt;/del>&lt;/p>
&lt;p>另外日本街上是没有公共垃圾桶的，大部分地方的垃圾桶你也不能扔，垃圾只能带回自己居住的地方处理，所以带上几个垃圾袋或者塑料袋是很好的选择。&lt;/p>
&lt;h5 id="供电">供电
&lt;/h5>&lt;p>日本的市电是 100v 不同于中国的 220v，不过我的神奇新华三充电器（没错，新华三的氮化镓充电器，办活动送的纪念品）支持100v-240v输入，对于我这种 typec 可以充大部分设备的人来说应该也够用了。&lt;/p>
&lt;p>另外日本的电网频率有 50Hz 和 60Hz 两种，具体历史渊源希望了解的可以自己查。检查下自己的设备需要支持这个。&lt;/p>
&lt;p>单反的电池充电看了一眼也是 100v-240v 宽幅输入。所以我没带任何电源转换设备。&lt;/p>
&lt;p>当然，如果不放心的话带一个旅行的电源转换器也不错，大概就在100元左右。&lt;/p>
&lt;p>哦对了，我还需要为我们俩的应援棒备上 114514 节电池。&lt;/p>
&lt;h5 id="小马扎x">小马扎（x
&lt;/h5>&lt;p>排队必备！企划展要从7点排到9点，虽然有点怪，但是可以考虑带一个。&lt;/p>
&lt;h5 id="不能带的东西">不能带的东西
&lt;/h5>&lt;p>除了枪支弹药毒品之类的，限制主要在机场、航空公司的要求和两国的海关。&lt;/p>
&lt;p>不能带上飞机的东西：液体，超过100wh的（大概3w+ mAh）以及你觉得不能带的（x&lt;/p>
&lt;blockquote>
&lt;p>不确定的上网查或者打电话呼过去问问&lt;/p>&lt;/blockquote>
&lt;p>不能出中国海关的东西：除了常见的不能出的之外，没啥特别注意的。&lt;/p>
&lt;p>不能入日本海关的东西：动植物制品、种子、盗版东西。所以各种食物需要注意一下了，那种带包装的点心或者糖果应该没问题。&lt;/p>
&lt;p>不能出日本海关的东西：没啥特别注意的。&lt;/p>
&lt;p>不能入中国海关的东西：色色不行，书籍10本及以下免税，CD重复的不超过两张，烟两条及以下免税。&lt;/p>
&lt;p>带本子只能提醒大家别侥幸，被海关抽查到多少有点丢人的。&lt;/p>
&lt;h3 id="企划展">企划展
&lt;/h3>&lt;p>企划展在 7:00 开始整队，在此之前的排队无效。整队后会带入空会场等待开场（今年为了防止中暑特地将候场更换到了有空调的3号馆）&lt;/p>
&lt;p>9:00 准时检票入场，入场后可以跑去排官方场贩，我因为坐错电车（悲）7:13才到，当时已经排了很多人，到场之后单人的法批基本全部卖光，好在主视觉的法批还有。10th 专辑也很快卖光了。&lt;/p>
&lt;p>如果有你非常想要的，或者主视觉图非常好看的，请一定要记得提前到！&lt;/p>
&lt;p>之后便是快乐的逛展子，当然有很多好看的周边也需要排队QAQ。STAGE 区域还有一些演出，这个看当年的官网即可。&lt;/p>
&lt;p>企划展中间可以出去，会发给你再入场的手环。我的计划是中午出去吃了个饭，顺便回住处放了下东西，休息了下才来看 LIVE。&lt;/p>
&lt;h3 id="演唱会">演唱会
&lt;/h3>&lt;p>LIVE 的入场非常快，所以大家不需要担心排不上，差不多提前半小时来就肯定没问题！&lt;/p>
&lt;blockquote>
&lt;p>截止 魔法未来2023 大阪场，没有人会查验票上的名字。&lt;/p>&lt;/blockquote>
&lt;p>入场后找到自己的位置。&lt;code>a列b番&lt;/code> 的意思为 &lt;code>a排b列&lt;/code>，之后尽情享受演出罢！&lt;/p>
&lt;p>如果你和我一样是高强度蹦跶用户，全蹦跶下来可能不太行，建议健身或者适当休息。&lt;/p>
&lt;p>演唱会结束后已经黑了，可以坐电车回市里吃。&lt;/p>
&lt;h4 id="关于拍照">关于拍照
&lt;/h4>&lt;p>整场禁止拍照，请自觉。被 STAFF 出警可能会被请出去。&lt;/p></description></item><item><title>玉田公交线路图</title><link>https://blog.gaein.cn/passages/yutian-bus-map/</link><pubDate>Sat, 11 Feb 2023 15:10:18 +0800</pubDate><guid>https://blog.gaein.cn/passages/yutian-bus-map/</guid><description>&lt;h2 id="玉田公交线路图">玉田公交线路图
&lt;/h2>&lt;h3 id="概览">概览
&lt;/h3>&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Yutian-bus-map/1.webp"
loading="lazy"
alt="公交线路图"
>&lt;/p>
&lt;blockquote>
&lt;p>点击图片可查看大图，更多缩放功能使用下文的查看器或独立页面的查看器&lt;/p>&lt;/blockquote>
&lt;h3 id="查看器">查看器
&lt;/h3>&lt;p>{% raw %}&lt;/p>
&lt;iframe title="页内查看器" width="100%" height="480" src="https://static.cdn.gaein.cn/yutian-bus-map-viewer/">&lt;/iframe>
&lt;p>{% endraw %}&lt;/p>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://static.cdn.gaein.cn/yutian-bus-map-viewer/" target="_blank" rel="noopener"
>独立页面的查看器&lt;/a>&lt;/p>&lt;/blockquote>
&lt;h3 id="数据来源">数据来源
&lt;/h3>&lt;ul>
&lt;li>玉田生活&lt;/li>
&lt;li>腾讯出行服务&lt;/li>
&lt;/ul>
&lt;h3 id="附">附
&lt;/h3>&lt;p>使用 railmapgen.github.io 绘制，转载请附上本文链接。&lt;/p></description></item><item><title>在 Windows 下舒适的使用命令行</title><link>https://blog.gaein.cn/passages/use-cli-in-windows/</link><pubDate>Wed, 09 Nov 2022 10:26:22 +0800</pubDate><guid>https://blog.gaein.cn/passages/use-cli-in-windows/</guid><description>&lt;h2 id="前言">前言
&lt;/h2>&lt;p>自从大一坐到 &lt;a class="link" href="https://aimerneige.com/" target="_blank" rel="noopener"
>AimerNeige&lt;/a> 身边以来，就见到他的双系统 Linux。后来自己也装了一个 ubuntu server + i3wm 日常用（虽然后来因为臭打游戏的原因回 windows 了），不得不说 Linux 的命令行以及各种命令行工具用起来非常的爽啊，相比较而言，用 windows 几乎很少用到命令行，cmd 和 powershell 都很丑，而且默认字体对眼睛很不友好 :D。以及各种工具并不多导致我不怎么用。&lt;/p>
&lt;h2 id="美化">美化
&lt;/h2>&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/Windows-Terminal-Usage/" target="_blank" rel="noopener"
>个性化你的Windows Terminal终端与PowerShell&lt;/a> 其实以前写过一篇文章来记录如何安装配置 Windows Terminal 和 Powershell 7（后改名 Powershell Core，现名 Powershell）（谢谢微软改名部）&lt;/p>
&lt;p>至于字体方面选择了 Cascadia Code。&lt;/p>
&lt;blockquote>
&lt;p>注意，oh-my-posh 需要使用 &lt;a class="link" href="https://www.nerdfonts.com/" target="_blank" rel="noopener"
>Nerd Font&lt;/a> 字体，否则不能正常显示各种图标。&lt;/p>&lt;/blockquote>
&lt;h2 id="包管理">包管理
&lt;/h2>&lt;p>Linux 各种发行版通常有着一个包管理，pacman 也好、apt 也好、傻逼 snap 也好，总之有一个。Windows 这边没有一个中心化的包管理器，不管是微软的 win-get 还是第三方的 choco 和 scoop，都是直接从软件发行商那边进行下载的。不过我比较喜欢 scoop 的 portable 的思想，所以使用了 scoop 作为我的包管理器，配置各种环境非常舒适。&lt;/p>
&lt;p>至于 scoop 的安装，参考其&lt;a class="link" href="https://scoop.sh/" target="_blank" rel="noopener"
>官网&lt;/a>即可。顺带一提，scoop 的“软件源”在 Github 上，你可能需要某些技术来解决连接性问题。&lt;/p>
&lt;p>当然，对于某些 scoop 内没有的软件包，可以使用 win-get 来安装。&lt;/p>
&lt;h3 id="scoop-常用指令">scoop 常用指令
&lt;/h3>&lt;p>&lt;code>scoop help&lt;/code> 查看帮助
&lt;code>scoop update&lt;/code> 更新软件源
&lt;code>scoop update *&lt;/code> 安装所有包的更新
&lt;code>scoop search &amp;lt;keyword&amp;gt;&lt;/code> 搜索包
&lt;code>scoop info &amp;lt;package name&amp;gt;&lt;/code> 查看包的详细信息
&lt;code>scoop cleanup *&lt;/code> 清理软件包&lt;/p>
&lt;p>更多命令：自己看吧。&lt;/p>
&lt;h3 id="使用-scoop-配置环境">使用 scoop 配置环境
&lt;/h3>&lt;p>平时会用到各种语言的环境（虽然我是远程编译人但是本地还是有环境罢）&lt;/p>
&lt;p>哦其实好像根本不用怎么配，你只需要：&lt;/p>
&lt;p>&lt;code>scoop install gcc&lt;/code>
&lt;code>scoop install nodejs&lt;/code>
&lt;code>scoop install python&lt;/code>&lt;/p>
&lt;p>&amp;hellip;&lt;/p>
&lt;p>之类的。&lt;/p>
&lt;p>怎么样，是不是非常爽？终于不用找到官网然后点 download 然后疯狂 next 了。&lt;/p>
&lt;h2 id="cli-工具">CLI 工具
&lt;/h2>&lt;h3 id="命令行美化">命令行美化
&lt;/h3>&lt;p>&lt;code>oh-my-posh&lt;/code> —— prompt 美化
&lt;code>lsd&lt;/code> —— 列出文件&lt;/p>
&lt;h3 id="网络工具">网络工具
&lt;/h3>&lt;p>&lt;code>nmap&lt;/code> —— 扫描
&lt;code>tcping&lt;/code> —— 测试端口连接性
&lt;code>clash&lt;/code> —— 代理分流
&lt;code>wireshark&lt;/code> —— 抓包
&lt;code>nexttrace&lt;/code> —— 路由追踪&lt;/p>
&lt;h3 id="系统管理">系统管理
&lt;/h3>&lt;p>&lt;code>btop&lt;/code> —— 资源任务管理
&lt;code>neofetch&lt;/code> —— 让我看看（系统信息）&lt;/p>
&lt;p>当然，还有很多例如 &lt;code>ffmpeg&lt;/code> 这种多媒体处理、&lt;code>7z&lt;/code>、 &lt;code>tar&lt;/code> 这种压缩解压以及各种其它工具。&lt;/p>
&lt;h2 id="自定义脚本">自定义脚本
&lt;/h2>&lt;p>bash 使用 &lt;code>.bashrc&lt;/code> 作为用户启动 shell 时执行的脚本，而 powershell 则会执行一个 &lt;code>.ps1&lt;/code> 脚本，这个脚本的位置可以保存在 Powershell 中名为 &lt;code>$PROFILE&lt;/code> 的变量。&lt;/p>
&lt;p>可以使用 &lt;code>Write-Host $PROFILE&lt;/code> 来查看路径。&lt;/p>
&lt;p>这个脚本在我那篇 Window Terminal 也提过。不过在那个玩意的基础上，我最近又添加了一些自己用的实用函数：&lt;/p>
&lt;p>比如先对于“在 Windows Terminal 中打开” 的 “在文件资源管理器中打开”：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">Get-Exploere&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">param&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="no">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="nv">$Path&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nv">$PWD&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">explorer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">exe&lt;/span> &lt;span class="nv">$Path&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">Set-Alias&lt;/span> &lt;span class="n">-Name&lt;/span> &lt;span class="n">open&lt;/span> &lt;span class="n">-Value&lt;/span> &lt;span class="nb">Get-Exploere&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>用于测试命令是否存在：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">Test-Command&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">param&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="no">string&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="nv">$CommandName&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="vm">$null&lt;/span> &lt;span class="o">-ne&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">Get-Command&lt;/span> &lt;span class="nv">$CommandName&lt;/span> &lt;span class="n">-ErrorAction&lt;/span> &lt;span class="n">SilentlyContinue&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>当然还有很多别名，比如将 &lt;code>ls&lt;/code> 改为使用 &lt;code>lsd&lt;/code>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">Get-Item-Line&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lsd&lt;/span> &lt;span class="n">-lh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">Test-Command&lt;/span> &lt;span class="n">lsd&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">Set-Alias&lt;/span> &lt;span class="n">-Name&lt;/span> &lt;span class="nb">ls &lt;/span>&lt;span class="n">-Value&lt;/span> &lt;span class="n">lsd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">Set-Alias&lt;/span> &lt;span class="n">-Name&lt;/span> &lt;span class="n">ll&lt;/span> &lt;span class="n">-Value&lt;/span> &lt;span class="nb">Get-Item&lt;/span>&lt;span class="n">-Line&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>除此之外，为 ffmpeg 的常见操作也写了一些函数：&lt;/p>
&lt;p>比如如下代码可以将图片转为 &lt;code>webp&lt;/code> 格式并且调整大小。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">Get-Webp&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">param&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="no">string&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="nv">$FileName&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="no">int&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="nv">$Width&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mf">-1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="no">int&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="nv">$Height&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mf">-1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$file&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">Get-Item&lt;/span> &lt;span class="nv">$FileName&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="nv">$Width&lt;/span> &lt;span class="o">-ne&lt;/span> &lt;span class="mf">-1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-and&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="nv">$Height&lt;/span> &lt;span class="o">-ne&lt;/span> &lt;span class="mf">-1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ffmpeg&lt;/span> &lt;span class="n">-i&lt;/span> &lt;span class="nv">$file&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">FullName&lt;/span> &lt;span class="nv">$file&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">Name&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$file&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Extension&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;.webp&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ffmpeg&lt;/span> &lt;span class="n">-i&lt;/span> &lt;span class="nv">$file&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">FullName&lt;/span> &lt;span class="n">-vf&lt;/span> &lt;span class="n">scale&lt;/span>&lt;span class="p">=${&lt;/span>&lt;span class="n">Width&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="err">:&lt;/span>&lt;span class="p">${&lt;/span>&lt;span class="n">Height&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="nv">$file&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">Name&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$file&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Extension&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;.webp&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>另外，powershell 中 &lt;code>mv&lt;/code>、&lt;code>ls&lt;/code> 等命令的用法和 Linux 下的 shell 极为相似，上手也很快。&lt;/p></description></item><item><title>使用 Grafana 监控你的 PromoxVE 集群</title><link>https://blog.gaein.cn/passages/pve-with-grafana/</link><pubDate>Mon, 03 Oct 2022 19:11:23 +0800</pubDate><guid>https://blog.gaein.cn/passages/pve-with-grafana/</guid><description>&lt;p>原来的虚拟机是一台实验用的设备，因为过度耦合，所以准备迁移到一台新开的专门提供服务的虚拟机，系统为 &lt;code>Ubuntu server 22.04 LTS&lt;/code>。&lt;/p>
&lt;p>本博客实际上是由旧的服务器向新的服务器迁移并且重新部署的过程中写的，因此 InfluxDB 没有使用最新的 &lt;code>2.4&lt;/code> 版本而是使用了 &lt;code>1.8.10&lt;/code>。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/PVE-with-grafana/01.webp"
loading="lazy"
alt="概览"
>&lt;/p>
&lt;p>非常的帅气&lt;/p>
&lt;h2 id="influxdb">InfluxDB
&lt;/h2>&lt;h3 id="安装-influxdb">安装 InfluxDB
&lt;/h3>&lt;p>参考 &lt;a class="link" href="https://mirrors.tuna.tsinghua.edu.cn/help/influxdata/" target="_blank" rel="noopener"
>influxdata | 清华大学开源软件镜像站&lt;/a>&lt;/p>
&lt;p>TUNA 这里并没有适用于 Ubuntu 22.04 LTS 的选项，不过问题不大。&lt;/p>
&lt;p>向 &lt;code>/etc/apt/sources.list.d/influxdb.list&lt;/code> 写入：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">deb https://mirrors.tuna.tsinghua.edu.cn/influxdata/ubuntu/ jammy stable
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>添加公钥：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">wget -qO https://repos.influxdata.com/influxdb.key &lt;span class="p">|&lt;/span> sudo tee /etc/apt/trusted.gpg.d/influxdb.asc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>为什么不用 &lt;code>apt-key&lt;/code> ？因为已经废弃辣，详见 &lt;code>man apt-key&lt;/code>&lt;/p>&lt;/blockquote>
&lt;p>之后使用 &lt;code>apt install influxdb&lt;/code> 安装即可。&lt;/p>
&lt;h3 id="配置-influxdb">配置 InfluxDB
&lt;/h3>&lt;p>主要目的就是两个：开放 &lt;code>udp&lt;/code> 和 &lt;code>http&lt;/code> 连接。&lt;/p>
&lt;p>Promox VE 使用 udp 连接，Grafana 使用 http。&lt;/p>
&lt;p>修改 &lt;code>/etc/influxdb/influxdb.conf&lt;/code>&lt;/p>
&lt;p>&lt;code>[http]&lt;/code> 部分修改如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[http]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Determines whether HTTP endpoint is enabled.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> enabled = true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Determines whether the Flux query endpoint is enabled.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # flux-enabled = false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Determines whether the Flux query logging is enabled.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # flux-log-enabled = false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # The bind address used by the HTTP service.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bind-address = &amp;#34;:8086&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>取消 &lt;code>enabled&lt;/code> 和 &lt;code>bind-address&lt;/code> 的注释即可。&lt;/p>
&lt;p>&lt;code>udp&lt;/code> 部分修改如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[[udp]]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> enabled = true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bind-address = &amp;#34;:8089&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> database = &amp;#34;proxmox&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # retention-policy = &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>也是取消两个注释，然后将 &lt;code>database&lt;/code> 节点设置为 &lt;code>proxmox&lt;/code> 。&lt;/p>
&lt;p>还需要创建用户，因为我是从以前的迁移过来的，所以不需要再创建。&lt;/p>
&lt;h3 id="启用-influxdb">启用 InfluxDB
&lt;/h3>&lt;p>使用命令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">systemctl start influxdb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>即可。&lt;/p>
&lt;p>如果报错类似于以下的&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-zed" data-lang="zed">&lt;span class="line">&lt;span class="cl">&lt;span class="n">run&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">open&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">open&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tsdb&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">store&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mkdir&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nn">var/lib/influxdb/data/_internal/&lt;/span>&lt;span class="n">_series&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">permission&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">denied&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可能是因为使用过 &lt;code>root&lt;/code> 用户运行 &lt;code>influxd&lt;/code>。&lt;/p>
&lt;p>执行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo chmod -R influxdb:influxdb /var/lib/influxdb/*
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>即可。&lt;/p>
&lt;h2 id="proxmox-ve">Proxmox VE
&lt;/h2>&lt;p>点击 &lt;code>DataCenter&lt;/code>，再点击 &lt;code>Metric Server&lt;/code>。&lt;/p>
&lt;p>依次点击 &lt;code>Add&lt;/code>，&lt;code>InfluxDB&lt;/code>，在 &lt;code>server&lt;/code> 处指定提供 InfluxDB 的虚拟机的 IP。&lt;/p>
&lt;h2 id="grafana">Grafana
&lt;/h2>&lt;h3 id="安装-grafana">安装 Grafana
&lt;/h3>&lt;p>依旧是参考 &lt;a class="link" href="https://mirrors.tuna.tsinghua.edu.cn/help/grafana/" target="_blank" rel="noopener"
>grafana | 清华大学开源软件镜像站&lt;/a> 。&lt;/p>
&lt;p>首先使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">wget -qO- https://packages.grafana.com/gpg.key &lt;span class="p">|&lt;/span> sudo tee /etc/apt/trusted.gpg.d/grafana.asc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">deb https://mirrors.tuna.tsinghua.edu.cn/grafana/apt/ stable main
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>写入 &lt;code>/etc/apt/sources.list.d/grafana.list&lt;/code>。&lt;/p>
&lt;p>然后执行：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo apt update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install grafana
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="配置-grafana">配置 Grafana
&lt;/h3>&lt;p>大部分配置都是从原服务器上恢复（因为实在不想重新设置面板了）&lt;/p>
&lt;ul>
&lt;li>/var/lib/grafana/grafana.db # 数据库文件&lt;/li>
&lt;li>/etc/grafana/grafana.ini # grafana配置文件&lt;/li>
&lt;li>/var/lib/grafana/plugins # 插件目录&lt;/li>
&lt;/ul>
&lt;h4 id="设置匿名访问">设置匿名访问
&lt;/h4>&lt;p>编辑配置文件，找到&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="k">[auth.anonymous]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># enable anonymous access&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">enabled&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>取消注释并改为 &lt;code>true&lt;/code>。&lt;/p>
&lt;h2 id="nginx">Nginx
&lt;/h2>&lt;p>grafana 默认监听在 3000 端口，这样用起来非常的 low，这里使用 nginx 把 &lt;code>localhost:3000&lt;/code> 反向代理到 &lt;code>http://grafana-server/monitor/&lt;/code> 。&lt;/p>
&lt;p>修改配置文件 &lt;code>/etc/nginx/sites-enabled/default&lt;/code> ，在 &lt;code>server&lt;/code> 块内添加：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># Grafana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">location /monitor/ {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Host $host;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Real-IP $remote_addr;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_pass http://localhost:3000;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>J1900软路由+小米AC2100 / OpenWRT —— 我的家庭网络方案</title><link>https://blog.gaein.cn/passages/home-network/</link><pubDate>Sun, 14 Aug 2022 00:23:38 +0800</pubDate><guid>https://blog.gaein.cn/passages/home-network/</guid><description>&lt;blockquote>
&lt;p>一定要勤备份配置&lt;/p>&lt;/blockquote>
&lt;h2 id="前言">前言
&lt;/h2>&lt;p>&lt;del>我似乎好久好久没写过博客了&lt;/del>&lt;/p>
&lt;p>&lt;del>怎么感觉一不小心写成流水日记了&lt;/del>&lt;/p>
&lt;h3 id="树莓派-server-时代">树莓派 server 时代
&lt;/h3>&lt;p>上学期疫情在家整整呆了半年，越看家里网络越不顺眼。以前是电信的光猫+华为路由器，不能用zt连学校资源，也不怎么好挂pt，也没有代理服务器（clash 跑在本机有些太费电）。于是着手弄我朋友送我的一个树莓派，刷单臂软路由，无奈 DHCP 一直配不好&amp;hellip;结果就鸽子了，跑个 ubuntu server 当内网服务器用了&amp;hellip;&lt;/p>
&lt;h3 id="折腾-openwrt-与-小米ac2100">折腾 OpenWRT 与 小米AC2100
&lt;/h3>&lt;p>后来在 TJUPT 内部群唠嗑90收了一个小米AC2100，我家的旧华为路由器海鲜市场卖了110，还挺神奇的。&lt;/p>
&lt;p>于是，小米AC2100开始刷 OpenWRT，最开始在恩山上面找了许多包，不过都有些小问题（WLAN 得手动开的、配置防火墙卡死的&amp;hellip;）直到用了我同学推荐的 &lt;a class="link" href="https://supes.top/" target="_blank" rel="noopener"
>OpenWRT固件下载与在线定制编译&lt;/a>，一个大佬适配的固件，貌似是用 GithubAction 在线编译。虽然一些功能需要赞助才能开（自定义主机名之类的）不过也就无所谓了。光猫桥接、开 ipv6、拨号上网一气呵成，舒服多了。&lt;/p>
&lt;h3 id="公网ip-与-3965u-软路由">公网IP 与 3965U 软路由
&lt;/h3>&lt;p>之后我家的网络大抵稳定了一段时间，直到看见同学找电信客服（或许是安徽电信）要了个公网IP，想了一想似乎也挺方便，我也去问问。不过河北的在线客服不能直接办，要留你的联系方式等着当地的维修师傅打电话。当时已经傍晚了，没想到过了一个小时师傅来了电话，和我谈妥了。他说明天上午保电信局审批，到时候告诉我，我重新拨号试试。我一觉呼呼大睡起来就有了。&lt;/p>
&lt;p>关于公网 IP ，似乎电信要起来更方便一些。至于端口是 REJECT 了 &lt;code>80&lt;/code>、 &lt;code>443&lt;/code>、&lt;code>8080&lt;/code> ，应该是工信部的要求。&lt;/p>
&lt;p>寻思着都这样了，不如再搞个软路由挂 PT？正好很久以前拖欠的黑工工钱到了，就去海鲜市场买了个 3965U 软路由，4t HGST 的机械硬盘，一台 H3C 铁壳千兆交换机（问就是“企业级”）、AMP 的网线、mPCIE 千兆网卡&amp;hellip;&lt;/p>
&lt;p>外壳切了，把 mPCIE 网卡的 RJ45 口引出来。&lt;/p>
&lt;p>mSATA 的硬盘没法插电脑，传统的镜像写入软件写不了硬盘，最后弄了个 WTG 在软路由本机刷机。&lt;/p>
&lt;p>后来因为手贱更新之类又炸了两次，终于一切弄好装进弱电柜——电源炸了，连带主板一起开不开了。拔下电源万用表测输出 AC 12V，可能是整流器坏了&amp;hellip;？&lt;/p>
&lt;h3 id="j1900-软路由一体化供电">J1900 软路由，一体化供电
&lt;/h3>&lt;p>弄都弄了，干脆又买了一台 J1900 （因为实在买不到那么便宜的 3965U 了），刷系统、小米 AC2100 刷系统做 ap&amp;hellip;&lt;/p>
&lt;p>另外有一点非常神奇的是，我所有的设备全是 12v 直流供电，因此直接买了一个 12v 直流电源（100W 的大概二三十）。服务器电源改 比较便宜但是弱电柜放不下，看了半天尺寸只好买了一个明纬的二手电源。&lt;/p>
&lt;p>顺便 3.5 寸的 SATA 硬盘也需要一个 12v 供电，改了一个上去，5v 和 GND 依旧用软路由自带的供电。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Home-Network/01.webp"
loading="lazy"
alt="供电"
>&lt;/p>
&lt;p>看上去好危险啊（小声）&lt;/p>
&lt;h2 id="软路由-openwrt-安装">软路由 OpenWRT 安装
&lt;/h2>&lt;p>为了更方便的刷写 mSATA 硬盘，我买了一个 mSATA 转 SATA 的硬盘盒，再接一个 SATA 转 USB 的&amp;hellip;&lt;/p>
&lt;p>使用 &lt;a class="link" href="https://www.balena.io/etcher/" target="_blank" rel="noopener"
>balenaEtcher&lt;/a> 可以刷写硬盘而不仅仅是 U 盘，当然，使用 Linux 系统的 &lt;code>dd&lt;/code> 命令、或者在 WinPE 下使用 &lt;code>physdiskwrite.exe&lt;/code> 来写入：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">physdiskwrite.exe -u openwrt-21.02.0-x86-64-generic-ext4-combined.img.gz -d &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装完后直接进入系统即可，我在这遇到了一点小问题：我的机器无法进入 UEFI 固件设置，没办法改启动项，所以只好在 EFI 分区中编写 &lt;code>startup.nsh&lt;/code> 脚本。&lt;/p>
&lt;p>内容如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">fs0:\efi\boot\bootx64.efi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="配置软路由-openwrt">配置软路由 OpenWRT
&lt;/h2>&lt;p>安装完系统后连接到软路由（网线、无线皆可）&lt;/p>
&lt;h3 id="拨号上网">拨号上网
&lt;/h3>&lt;p>更改 WAN 口为 “PPPOE”，输入宽带账号密码即可。IPv6将会自动分配。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Home-Network/02.webp"
loading="lazy"
alt="WAN口"
>&lt;/p>
&lt;blockquote>
&lt;p>如图，WAN 口显示的 IP 地址中，如果在 &lt;code>192.168.0.0/16&lt;/code>、&lt;code>172.16.0.0/12&lt;/code> 或 &lt;code>10.0.0.0/8&lt;/code> 中的话，则是“私有地址”，即你运营商的大内网，除此之外分配给你的地址基本都会是“公网IP”。&lt;/p>&lt;/blockquote>
&lt;h3 id="连接到光猫设置页面">连接到光猫设置页面
&lt;/h3>&lt;p>因为需要用路由器拨号，所以将光猫改为成“桥接模式”，光猫的 IP 地址为 &lt;code>192.168.9.1&lt;/code>，因此我无法直接访问光猫的设置界面。&lt;/p>
&lt;p>解决方案是在 WAN 口的设备上新增加一个 IP 在 &lt;code>192.168.9.0/24&lt;/code> 子网的接口，通过该接口访问 &lt;code>192.168.9.1&lt;/code>。&lt;/p>
&lt;p>新建接口，命名为 “lan_wan” ，协议为“静态IP”，地址为 &lt;code>192.168.9.2&lt;/code> （子网内的任意 IP 地址均可）。设备处选择“以太网适配器eth0”。&lt;/p>
&lt;blockquote>
&lt;p>设备名可能会不同，留意一下 wan 口的连接设备即可。IP 地址仅作示范，具体还需要根据网络情况设置。&lt;/p>&lt;/blockquote>
&lt;p>添加完成后在“高级设置”中，找到“使用网关跃点”项，填写为 &lt;code>64&lt;/code> （或者任意一个较大的数字）。这样可以避免默认流量从非上网用的接口走。&lt;/p>
&lt;blockquote>
&lt;p>网关跃点可以解释为类似于“优先级”的东西，跃点数越大代表“从这个网络走的代价越大”，即效果是优先级低。&lt;/p>&lt;/blockquote>
&lt;p>配置完后路由器的路由表中将多出 &lt;code>192.168.9.0/24 via 192.168.9.2&lt;/code> 这样类似的条目。以后再使用 192.168.9.1 访问光猫配置页面时候就会从这个口走了。&lt;/p>
&lt;h3 id="argon-主题设置">Argon 主题设置
&lt;/h3>&lt;p>没想到吧接下来居然要说这个。&lt;/p>
&lt;p>OpenWRT 官方的主题并谈不上好看，Edge 这个主题我又不是很喜欢。之前用过 &lt;a class="link" href="https://www.right.com.cn/forum/thread-4003173-1-1.html" target="_blank" rel="noopener"
>Infinity Freedom&lt;/a> 这个主题，不过不是特别兼容我的系统，所以只好选择了经典的 &lt;code>Argon&lt;/code> 来用。&lt;/p>
&lt;p>在“软件包”中安装插件 &lt;code>luci-app-argon-config&lt;/code> ，可以在 luci 中添加一个设置主题的界面。&lt;/p>
&lt;p>然后来到设置界面中上传自己喜欢的壁纸，和更改自己喜欢的主题色。&lt;/p>
&lt;p>我设置了 &lt;code>#F19EC2&lt;/code> 作为我的主题色，不会有人不喜欢樱花粉吧？&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Home-Network/03.webp"
loading="lazy"
alt="HEX预览"
>&lt;/p>
&lt;p>首页效果：&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Home-Network/04.webp"
loading="lazy"
alt="效果图"
>&lt;/p>
&lt;h3 id="对网段进行限速">对网段进行限速
&lt;/h3>&lt;p>有些莫名奇妙的需求，因为我家里所有设备全分配了静态 IP 地址：&lt;/p>
&lt;ol>
&lt;li>网络设备（路由器等） &lt;code>192.168.8.1&lt;/code> - &lt;code>192.168.8.31&lt;/code>；&lt;/li>
&lt;li>Windows 设备（台式笔记本等） &lt;code>192.168.8.32&lt;/code> - &lt;code>192.168.8.47&lt;/code>；&lt;/li>
&lt;li>移动设备（手机） &lt;code>192.168.8.48&lt;/code> - &lt;code>192.168.8.63&lt;/code>；&lt;/li>
&lt;li>DHCP地址 &lt;code>192.168.8.64&lt;/code> - &lt;code>192.168.8.127&lt;/code>；&lt;/li>
&lt;/ol>
&lt;p>所以在 &lt;code>192.168.8.64&lt;/code> - &lt;code>192.168.8.127&lt;/code> 段的设备基本都是客人之类的——总之不是家里的固定设备，所以想要进行限速。使用的插件如下：&lt;/p>
&lt;ol>
&lt;li>luci-app-eqos&lt;/li>
&lt;/ol>
&lt;p>在插件后台启用，然后填写 &lt;code>IP段&lt;/code> 进行限速就可以了。比如我需要限制的是 &lt;code>192.168.8.64/26&lt;/code>&lt;/p>
&lt;h2 id="配置-ap-openwrt">配置 AP OpenWRT
&lt;/h2>&lt;p>前前后后不知道配置了多少次&amp;hellip;主要问题还是如果弄错了很可能就直接连不上后台了:D&lt;/p>
&lt;p>主要的办法就是把 &lt;code>WAN&lt;/code> 和 &lt;code>LAN&lt;/code> 全接在一个接口上，&lt;code>WLAN&lt;/code> 也接上去就行了，没有像厂家固件那样方便的改一个什么 “有线中继” 那么方便。作为 AP 的话真的很推荐使用原厂固件（但是 MiWiFi 一直在那请求 &lt;code>api.miwifi.com&lt;/code> 在后台看 log 看的我实在心烦）&lt;/p>
&lt;h3 id="nat模式">NAT模式
&lt;/h3>&lt;p>能上网也是最省心的模式，构建的时候设置好一个不同于上面的 LAN IP 即可（比如 &lt;code>192.168.7.1&lt;/code>），WAN 口设置 DHCP地址。&lt;/p>
&lt;p>太不优雅啦（大声&lt;/p>
&lt;h3 id="ap模式">AP模式
&lt;/h3>&lt;p>参阅：&lt;/p>
&lt;ol>
&lt;li>&lt;a class="link" href="https://openwrt.org/docs/guide-user/network/wifi/dumbap" target="_blank" rel="noopener"
>[OpenWrt Wiki] Wireless Access Point / Dumb Access Point&lt;/a>&lt;/li>
&lt;/ol>
&lt;p>网络 &amp;gt; 接口 &amp;gt; 设备中选择 &lt;code>br-lan&lt;/code> 的 “配置”，将接口中加入 &lt;code>wan&lt;/code> 口。&lt;/p>
&lt;p>关闭 &lt;code>LAN&lt;/code> 口的 DHCP 服务器（我是根本没安装 Dnsmasq ）&lt;/p>
&lt;p>将 &lt;code>WAN&lt;/code> 口协议改为 “DHCP客户端” 或 “静态地址”&lt;/p>
&lt;ul>
&lt;li>如果你的上级路由（比如软路由）配置好了静态地址给这台 AP，就可以用 “DHCP客户端”，管理起来也更方便；&lt;/li>
&lt;li>如果静态地址没配好，那就选择“静态地址”并且填写一个同网段的地址（比如 &lt;code>192.168.8.2&lt;/code>）；&lt;/li>
&lt;/ul>
&lt;p>将 &lt;code>WAN&lt;/code> 口的防火墙区域改为 &lt;code>lan&lt;/code>&lt;/p>
&lt;p>将无线设置中接口由 &lt;code>lan&lt;/code> 改到 &lt;code>wan&lt;/code>&lt;/p>
&lt;p>禁用防火墙&lt;/p>
&lt;p>保存确认设置无误后删除 &lt;code>lan&lt;/code> 接口（留着也可以，以备万一）&lt;/p>
&lt;h2 id="硬件改造">硬件改造
&lt;/h2>&lt;p>其实很多精力还花费在对弱电柜内部的改造上&lt;/p>
&lt;h3 id="改35硬盘供电">改3.5硬盘供电
&lt;/h3>&lt;p>绝大多数工控小主机的 SATA 供电是为2.5寸硬盘设计的，2.5寸硬盘供电和3.5寸硬盘供电的主要区别就是2.5的少了一对 +12v 。所以我们只需要一个 12v 的直流电源，并且接到供电口就可以。&lt;/p>
&lt;p>至于带有 12v 的 SATA 供电口，我手里有一个以前 ITX 用的，实在没有也可以考虑从旧的台式机 ATX 电源上面剪下来一个。&lt;/p>
&lt;p>至于引脚定义详见下图：&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Home-Network/05.webp"
loading="lazy"
alt="SATA供电口"
>&lt;/p>
&lt;p>正好接到我前言中说的 12v 开关电源上。&lt;/p>
&lt;p>至于 SATA 线，我依旧是用锉刀挫开了一个槽，把线走了出去，千万注意不要太勉强，不然盖子把线压坏然后短路——后果不堪设想。&lt;/p>
&lt;h3 id="弱电柜里的铁架子">弱电柜里的铁架子
&lt;/h3>&lt;p>角钢真的是一种非常好的东西，便宜、而且非常容易 DIY，之前我的宿舍床上也是用这种角铁打了一个框架。至于价格的话，淘宝找那种卖二手角铁做货架的定制一下，我记得也就几十块钱。&lt;/p>
&lt;p>只需要量好尺寸，想好放什么，比如我：&lt;/p>
&lt;ul>
&lt;li>第一层：H3C 交换机&lt;/li>
&lt;li>第二层：软路由&lt;/li>
&lt;li>第三层：光猫&lt;/li>
&lt;/ul>
&lt;p>而且上面密密麻麻的孔洞非常适合绑扎带和走线&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Home-Network/06.webp"
loading="lazy"
alt="弱电柜"
>&lt;/p>
&lt;blockquote>
&lt;p>虽然这还不是完全走好了之后的图，不过这么绑起来也很舒服&lt;/p>&lt;/blockquote>
&lt;p>具体的各种配置有很多，前前后后也折腾了十天半个月，一些复杂一点的配置我就分开写博客再说（）&lt;/p></description></item><item><title>lua语言编程基础 - lua笔记</title><link>https://blog.gaein.cn/passages/lua-note1-basic/</link><pubDate>Tue, 26 Jul 2022 12:25:44 +0800</pubDate><guid>https://blog.gaein.cn/passages/lua-note1-basic/</guid><description>&lt;h2 id="前言">前言
&lt;/h2>&lt;blockquote>
&lt;p>最近实在太摸辣！
前景提要：收了个 小米AC2100 刷了 OpenWrt 系统，那个固件带了一个微信推送，但是我觉得不是特别好用，准备自己弄一个 基于 &lt;code>linux netlink&lt;/code>、&lt;code>ASP.NET Core&lt;/code> 做后端，使用 &lt;code>MQTT&lt;/code> 或者 &lt;code>Google FCM&lt;/code> &lt;code>Mi Push&lt;/code> 做推送。&lt;code>Luci&lt;/code> 用 &lt;code>lua&lt;/code> 脚本编写插件，反正也没什么事就来看看 &lt;code>lua&lt;/code> 吧！
&lt;del>为什么叫lua不叫rua&lt;/del>&lt;/p>&lt;/blockquote>
&lt;h2 id="关于-lua">关于 lua
&lt;/h2>&lt;p>Lua 是一种轻量小巧的脚本语言，用标准C语言编写并以源代码形式开放， 其设计目的是为了嵌入应用程序中，从而为应用程序提供灵活的扩展和定制功能。&lt;/p>
&lt;p>lua 很轻量、与 C/C++ 交互方便、支持 面向过程 or 函数式 编程。&lt;/p>
&lt;h2 id="环境安装">环境安装
&lt;/h2>&lt;p>直接摁包管理器！&lt;/p>
&lt;p>Scoop: &lt;code>scoop install lua&lt;/code>&lt;/p>
&lt;p>如果包管理器没有就解压扔环境变量呗&lt;/p>
&lt;h2 id="运行方式">运行方式
&lt;/h2>&lt;h3 id="脚本运行">脚本运行
&lt;/h3>&lt;p>lua 脚本是文本文件&lt;/p>
&lt;p>script:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/usr/local/bin/lua&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Hello world&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>script.lua:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;hello world&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>还可以在命令行中输入 &lt;code>lua -i&lt;/code> 来使用 lua REPL&lt;/p>
&lt;h3 id="数据类型">数据类型
&lt;/h3>&lt;p>lua 语言有如下几种数据类型&lt;/p>
&lt;ul>
&lt;li>nil: null，未定义的变量为 &lt;code>nil&lt;/code>，同样，可以给变量赋值 &lt;code>nil&lt;/code> 来“销毁” 它&lt;/li>
&lt;li>boolean: true / false，条件表达式中只有 &lt;code>nil&lt;/code> 和 &lt;code>false&lt;/code> 为否，其余（包括数字 &lt;code>0&lt;/code> 皆为是&lt;/li>
&lt;li>number: 数字类型，双精度浮点实数，所有的数字都是 &lt;code>number&lt;/code> 类型&lt;/li>
&lt;li>string: 字符串，使用 &lt;code>&amp;quot;&lt;/code> 或 &lt;code>'&lt;/code> 包裹，&lt;code>..&lt;/code> 连接。多行字符串可以使用 &lt;code>[[&lt;/code> 和 &lt;code>]]&lt;/code> 包裹&lt;/li>
&lt;li>function: C 或 lua 函数（可以类似于委托来使用）&lt;/li>
&lt;li>userdata: 用户类型&lt;/li>
&lt;li>thread: 用于协程&lt;/li>
&lt;li>table: 表，类似于 PHP 中的 “数组”，可以存储数组或键值对之类的&lt;/li>
&lt;/ul>
&lt;h4 id="获取类型">获取类型
&lt;/h4>&lt;p>在 lua 中，可以使用 &lt;code>type()&lt;/code> 函数来获取类型，比如&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;str&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">-- string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">114514&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">-- number&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">unknow&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">-- nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">-- boolean&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在上述案例中，&lt;code>unknow&lt;/code> 未定义，所以输出为 &lt;code>nil&lt;/code>&lt;/p>
&lt;p>注意，判断 &lt;code>nil&lt;/code> 时候应该加上引号，因为 &lt;code>typeof&lt;/code> 的结果是字符串类型：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">if&lt;/span> &lt;span class="n">typeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;nil&amp;#34;&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;x is null!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="string-类型">string 类型
&lt;/h4>&lt;p>string 就是字符串，很正常的一个字符串。转义字符也都一样。&lt;/p>
&lt;h5 id="string-初始化">string 初始化
&lt;/h5>&lt;p>前面说过了，可以用双引号也可以用单引号：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">str&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;hello&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">str&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;hello&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">str&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">[[
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">{
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;#34;message&amp;#34;: &amp;#34;hello&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">}]]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>当然，用 &lt;code>[[&lt;/code> 和 &lt;code>]]&lt;/code> 包裹显示 “多行字符串” 或者 “原字符串”，类似于 C# 中的 &lt;code>@&amp;quot;&amp;quot;&lt;/code> 或者 python 中的 &lt;code>r&amp;quot;&amp;quot;&lt;/code>。&lt;/p>
&lt;h5 id="string-相关函数使用">string 相关函数使用
&lt;/h5>&lt;ol>
&lt;li>字符串连接：&lt;code>..&lt;/code>；&lt;/li>
&lt;li>大小写转换：&lt;code>string.upper(str)&lt;/code> 和 &lt;code>string.lower(arg)&lt;/code>；&lt;/li>
&lt;li>替换：&lt;code>string.gsub(str, search, replace, [times])&lt;/code>，次数省略为不限次数；&lt;/li>
&lt;li>查找：&lt;code>string.find(str, search, [init, [regxp]])&lt;/code>，返回两个值：起始位置和结束位置；&lt;/li>
&lt;li>反转：&lt;code>string.reverse(str)&lt;/code>；&lt;/li>
&lt;li>格式化：&lt;code>string.format(...)&lt;/code>，格式化规则类似于 &lt;code>printf&lt;/code>；&lt;/li>
&lt;li>字符与 ASCII 代转换：&lt;code>string.char(nums)&lt;/code> 字符串中的字符转 ASCII 码返回，&lt;code>string.byte(str, [index])&lt;/code>；&lt;/li>
&lt;li>计算长度：&lt;code>string.len(str)&lt;/code> 或 &lt;code>#&lt;/code>，例如 &lt;code>#str&lt;/code>；&lt;/li>
&lt;li>重复字符串：&lt;code>string.rep(str, times)&lt;/code>，重复 &lt;code>times&lt;/code> 次字符串 &lt;code>str&lt;/code>；&lt;/li>
&lt;li>正则字符串：&lt;code>string.match(str, pregxp, init)&lt;/code> 只寻找源字串str中的第一个配对并返回结果，找不到时返回 &lt;code>nil&lt;/code>；&lt;/li>
&lt;/ol>
&lt;p>你说 number 转 string? 使用数字运算符的时候会自动尝试将 string 转为 number，所以可以写类似于&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;3&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="c1">-- 8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;5&amp;#34;&lt;/span> &lt;span class="c1">-- 8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;3&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;5&amp;#34;&lt;/span> &lt;span class="c1">-- 8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;test&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="c1">-- stdin:1: attempt to add a &amp;#39;string&amp;#39; with a &amp;#39;number&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>当然，单纯需要转换的话可以使用 &lt;code>tostring()&lt;/code> 和 &lt;code>tonumber()&lt;/code> 函数。&lt;/p>
&lt;p>更多字符串操作参考 &lt;a class="link" href="https://www.lua.org/manual/5.4/manual.html#6.4" target="_blank" rel="noopener"
>Lua 5.4 官方文档&lt;/a>&lt;/p>
&lt;h4 id="table-类型">table 类型
&lt;/h4>&lt;p>这个 &lt;code>table&lt;/code> 很神奇，反正类比一下 PHP 的 “数组”，这玩意也是一个 “什么都能塞” 的角&lt;/p>
&lt;h5 id="table-的初始化">table 的初始化
&lt;/h5>&lt;p>table 使用初始化器 &lt;code>{}&lt;/code> 来初始化，如下代码初始化了一个 table:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">t&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在初始化时候，如果需要指定索引的键，则可以使用 &lt;code>[]&lt;/code> 索引器，说起来有点抽象，看看代码：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">t&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{[&lt;/span>&lt;span class="s2">&amp;#34;k&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;arr&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;k&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="c1">-- &amp;#34;value&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>没错，&lt;code>[]&lt;/code>不仅在索引时候用，在创建的时候还可以用来表示键，虽然我不知道这时候他叫什么。不过，为了方便起见，索引 key 为字符串的时候，可以省略掉 &lt;code>[]&lt;/code> 而使用 &lt;code>.&lt;/code>，比如&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t.k&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>创建的时候也可以省略 &lt;code>[]&lt;/code>，比如&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">t&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">k&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">arr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>哦对了，还有一个很生草的事情，在 &lt;code>lua&lt;/code> 中，索引是从 &lt;code>1&lt;/code> 开始的，这一点也不反人类但是反程序员。&lt;/p>
&lt;p>其他类型不再赘述&lt;/p>
&lt;h5 id="table-相关函数使用">table 相关函数使用
&lt;/h5>&lt;ol>
&lt;li>连接各元素：&lt;code>table.concat(table, [sep , [start ,[end]]])&lt;/code>，实际上有些像 &lt;code>string.Join&lt;/code> 的功能，将各元素连接起来；&lt;/li>
&lt;li>插入元素：&lt;code>table.insert(table, [pos] ,value)&lt;/code>，在 &lt;code>pos&lt;/code> 位置插入 &lt;code>value&lt;/code>，省略默认为尾部插入；&lt;/li>
&lt;li>删除元素：&lt;code>table.remove (table, [pos])&lt;/code> 删除 &lt;code>pos&lt;/code> 位置的值，并返回，省略默认为尾部删除；&lt;/li>
&lt;li>排序：&lt;code>table.sort (table, [comp])&lt;/code> 默认为升序排序；&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>或许大概没准是由于 table 存的东西奇奇怪怪，Lua 并没有提供计算长度的函数，用 &lt;code>#&lt;/code> 运算符也会有问题，那就手搓遍历罢（悲&lt;/p>&lt;/blockquote>
&lt;h4 id="function-类型">function 类型
&lt;/h4>&lt;p>函数作为一个基础类型出现在这里，可以类比委托或者类似于 js 的 function 那样，既可以调用也可以作为一个变量/参数传递。&lt;/p>
&lt;p>首先是函数定义：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">writeLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">arg&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">arg&lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>需要局部函数可以在 &lt;code>function&lt;/code> 前面加修饰符 &lt;code>local&lt;/code>，返回值可以有多个。&lt;/p>
&lt;p>可变参数 function：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">printf&lt;/span>&lt;span class="p">(...)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">arg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{...}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">if&lt;/span> &lt;span class="o">#&lt;/span>&lt;span class="n">arg&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="kr">then&lt;/span> &lt;span class="c1">-- 或用 select(&amp;#34;#&amp;#34;,...) 获取参数数量&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">arg&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">string.format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">arg&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将函数赋值给变量：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">func&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">114514&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>基础用法大概差不多这样，其它类型留到以后再说或者不再赘述。&lt;/p>
&lt;h3 id="运算符">运算符
&lt;/h3>&lt;h4 id="算术运算符">算术运算符
&lt;/h4>&lt;p>除了常规的 &lt;code>+&lt;/code> &lt;code>-&lt;/code> &lt;code>*&lt;/code> &lt;code>/&lt;/code> &lt;code>%&lt;/code> 之外，还有 &lt;code>^&lt;/code>（幂）和 &lt;code>//&lt;/code>（整除）&lt;/p>
&lt;h4 id="关系运算符">关系运算符
&lt;/h4>&lt;p>常规的 &lt;code>==&lt;/code> &lt;code>&amp;lt;=&lt;/code> &lt;code>&amp;gt;=&lt;/code> &lt;code>&amp;lt;&lt;/code> &lt;code>&amp;gt;&lt;/code> 之外，不等于用 &lt;code>~=&lt;/code>&lt;/p>
&lt;h4 id="逻辑运算符">逻辑运算符
&lt;/h4>&lt;p>不是 &lt;code>||&lt;/code> 这些符号，而是类似于 &lt;code>python&lt;/code>，用 &lt;code>and&lt;/code> &lt;code>or&lt;/code> &lt;code>not&lt;/code>&lt;/p>
&lt;h4 id="其他运算符">其他运算符
&lt;/h4>&lt;p>一个是计算长度用的 &lt;code>#&lt;/code>，一个是连接字符串的 &lt;code>..&lt;/code>（其实这大概也算是算术运算符？）&lt;/p>
&lt;h3 id="流程控制">流程控制
&lt;/h3>&lt;p>流程控制嘛其实说白了就是 if-else，具体使用代码如下所示：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">if&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;nil&amp;#34;&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;x is null&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;x not null&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>有些类似于 SQL 中的判断嘛&lt;/p>
&lt;p>Lua 的 if-else 可以嵌套使用 &lt;del>废话&lt;/del>&lt;/p>
&lt;h3 id="循环">循环
&lt;/h3>&lt;h4 id="while-循环">while 循环
&lt;/h4>&lt;p>如下所示&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">while&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">refresh&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="for-循环">for 循环
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">for&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="kr">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>说说这个 &lt;code>for&lt;/code> 吧，&lt;code>for&lt;/code> 后面是 &lt;code>var=exp1,exp2,exp3&lt;/code> 其中表达式1是初始值，表达式2是终止值，表达式3为步长，比如我要输出 100 以内 可以被 3 整除的数，可以这么写：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">for&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="kr">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>另外很重要一个用途就是遍历 table 之类的，这玩意叫“泛型 for 循环”，实际上很类似于 &lt;code>foreach&lt;/code>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">studentList&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;Wang&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Li&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Zhang&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">for&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="kr">in&lt;/span> &lt;span class="n">ipairs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">studentList&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>至于这个 &lt;code>ipairs()&lt;/code> 函数，是 Lua 的一个迭代器，后续细说怎么个回事。&lt;/p>
&lt;h4 id="repeatuntil类似-do-while-循环">repeat&amp;hellip;until（类似 do-while 循环）
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">repeat&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">refersh&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">until&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stop&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>很类似 do-while 的一个玩意&lt;/p>
&lt;blockquote>
&lt;p>果然各种语言里面最花的都是 &lt;code>for&lt;/code> 嘛
pythone: 喵喵喵？？&lt;/p>&lt;/blockquote>
&lt;h3 id="变量">变量
&lt;/h3>&lt;p>标识符的规则和关键字不再赘述了，各家都大同小异的&lt;/p>
&lt;p>另外就是 Lua 有全局变量和局部变量，默认的变量是全局变量，用 &lt;code>local&lt;/code> 关键字修饰后才是局部变量，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">homo&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">var1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">114514&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">var2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1919810&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">test&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">var1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">9&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">var2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">homo&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">var1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">var2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">test&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>写的有点乱反正就是这么回事（摆烂&lt;/p></description></item><item><title>归档</title><link>https://blog.gaein.cn/archives/</link><pubDate>Sun, 06 Mar 2022 00:00:00 +0800</pubDate><guid>https://blog.gaein.cn/archives/</guid><description/></item><item><title>以类Unix的方法管理Windows的Path环境变量</title><link>https://blog.gaein.cn/passages/manage-windows-path-in-unix-way/</link><pubDate>Tue, 01 Feb 2022 23:21:28 +0800</pubDate><guid>https://blog.gaein.cn/passages/manage-windows-path-in-unix-way/</guid><description>&lt;p>首先恭祝大家新春快乐！&lt;/p>
&lt;h2 id="前言">前言
&lt;/h2>&lt;p>事情的起因是这样的，我 surface 上装了一张 TF 卡作为存储盘，年头重装家里系统的时候莫名其妙格式化了 TF 卡（&lt;del>选错了盘的屑&lt;/del>）。想到很多环境都在 TF 卡里，surface 这个系统也用了一年半了，索性就重装然后再配环境。&lt;/p>
&lt;p>有很多类似于 &lt;code>git&lt;/code> 这种命令行软件，需要在环境变量的 &lt;code>PATH&lt;/code> 中加入它的目录（比如 &lt;code>D:\Tools\Git\cmd\&lt;/code>）才能方便的执行。如果每个软件都这样的话，&lt;code>PATH&lt;/code> 中势必会有一大坨，很混乱也难于管理。&lt;/p>
&lt;p>类 Unix 系统中部分软件的做法是，把这些文件软链接到 &lt;code>/usr/bin/&lt;/code> 目录下。那么我们是否可以在 Windows 系统中采取类似的方法，创建一个目录并添加到 &lt;code>PATH&lt;/code> 中，然后将原本需要加入 &lt;code>PATH&lt;/code> 的可执行文件软链接到该目录。&lt;/p>
&lt;p>另外，这样做以后再加入别的文件时，只需要创建软链接，不需要更改环境变量也不需要重启 Terminal 了。&lt;/p>
&lt;h2 id="cmd-不可行">.cmd 不可行
&lt;/h2>&lt;p>一开始我尝试使用类似于 &lt;code>git.cmd&lt;/code> 然后里面写入 &lt;code>D:\Tools\Git\cmd\git.exe&lt;/code> 这种方法，但是显然，我无法传递未知数量的参数给真正的 &lt;code>git.exe&lt;/code> （我没有深入研究传递参数的相关知识，显然这不是一个优雅的方法）。&lt;/p>
&lt;h2 id="mklink-创建软链接">mklink 创建软链接
&lt;/h2>&lt;blockquote>
&lt;p>Powershell 中没有提供 &lt;code>mklink&lt;/code> 对应的 Cmdlet 别名，也就是说当你无法在 Powershell 中使用 &lt;code>mklink&lt;/code> 命令。你需要使用 cmd.exe 来执行这个命令。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>关于 Powershell 创建软链接，请参考下文的 &lt;code>New-Item&lt;/code> 。&lt;/p>&lt;/blockquote>
&lt;p>参阅 &lt;a class="link" href="https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/mklink" target="_blank" rel="noopener"
>mklink | Microsoft Docs&lt;/a>&lt;/p>
&lt;h3 id="创建文件的软链接">创建文件的软链接
&lt;/h3>&lt;p>使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cmd" data-lang="cmd">&lt;span class="line">&lt;span class="cl">&lt;span class="k">mklink&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>link&lt;span class="p">&amp;gt;&lt;/span> &amp;lt;target&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其中，&lt;code>link&lt;/code> 是创建的链接，&lt;code>target&lt;/code> 是被创建链接的文件，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cmd" data-lang="cmd">&lt;span class="line">&lt;span class="cl">&lt;span class="k">mklink&lt;/span> git.exe D:\Tools\Git\cmd\git.exe
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在当前目录下创建了一个 &lt;code>git.exe&lt;/code> 指向了在 &lt;code>D&lt;/code> 盘的 &lt;code>git.exe&lt;/code> 文件。&lt;/p>
&lt;h3 id="创建目录的软链接">创建目录的软链接
&lt;/h3>&lt;p>不同于 Linux 操作系统，Windows 操作系统创建指向目录的软链接需要额外添加参数，使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-winbatch" data-lang="winbatch">&lt;span class="line">&lt;span class="cl">&lt;span class="k">mklink&lt;/span> /d &lt;span class="p">&amp;lt;&lt;/span>link&lt;span class="p">&amp;gt;&lt;/span> &amp;lt;target&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="new-tem-创建软链接">New-tem 创建软链接
&lt;/h2>&lt;p>既然有新的，更加好用的 Powershell ，那么当然要用 Powershell 啦。&lt;/p>
&lt;p>如上文所说，Powershell 并没有设置别名为 mklink 的命令，创建软链接这一行为被 Powershell 视为&lt;strong>创建一个类型为 &lt;code>SymbolicLink&lt;/code> 的值为 目标文件路径 的新文件&lt;/strong>&lt;/p>
&lt;p>因此，我们只需要使用 &lt;code>New-Item&lt;/code> 即可，使用方法如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">New-Item&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">link&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">-ItemType&lt;/span> &lt;span class="n">SymbolicLink&lt;/span> &lt;span class="n">-Value&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用 &lt;code>New-Item&lt;/code> 创建目录无需添加额外的参数。&lt;/p>
&lt;p>参阅 &lt;a class="link" href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/new-item?view=powershell-7.2#example-7--create-a-symbolic-link-to-a-file-or-folder" target="_blank" rel="noopener"
>New-Item (Microsoft.PowerShell.Management) - PowerShell | Microsoft Docs&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>注意：Windows 无法在 TF 卡上创建软链接文件，但是你可以将文件链接到 TF 卡上的文件。&lt;/p>&lt;/blockquote></description></item><item><title>配置 ZeroTier 私人节点</title><link>https://blog.gaein.cn/passages/configure-zerotier-moon/</link><pubDate>Thu, 07 Oct 2021 17:07:35 +0800</pubDate><guid>https://blog.gaein.cn/passages/configure-zerotier-moon/</guid><description>&lt;h2 id="准备工作">准备工作
&lt;/h2>&lt;p>一台有 &lt;strong>静态公网 IP&lt;/strong> 的服务器，装有 Ubuntu 20.04 LTS 以及 ZeroTier-one 。&lt;/p>
&lt;blockquote>
&lt;p>Ubuntu 安装 ZeroTier-one 详见 &lt;a class="link" href="https://www.zerotier.com/download/#downloadLinux" target="_blank" rel="noopener"
>Download - ZeroTier&lt;/a>&lt;/p>&lt;/blockquote>
&lt;h2 id="创建网络">创建网络
&lt;/h2>&lt;p>在 &lt;a class="link" href="https://my.zerotier.com/network" target="_blank" rel="noopener"
>ZeroTier Central&lt;/a> 中创建一个网路并设置为 private。&lt;/p>
&lt;h2 id="配置服务器">配置服务器
&lt;/h2>&lt;blockquote>
&lt;p>参考 &lt;a class="link" href="https://docs.zerotier.com/zerotier/moons" target="_blank" rel="noopener"
>Private Root Servers | ZeroTier Documentation&lt;/a>&lt;/p>&lt;/blockquote>
&lt;h3 id="创建-world-定义">创建 world 定义
&lt;/h3>&lt;p>转到目录 &lt;code>/var/lib/zerotier-one&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /var/lib/zerotier-one
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>生成 &lt;code>moon.json&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">zerotier-idtool initmoon identity.public &amp;gt;&amp;gt;moon.json
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>此文件包含机密信息，请妥善保管&lt;/strong>&lt;/p>
&lt;p>修改 &lt;code>moon.json&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">vim moon.json
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在 &lt;code>roots&lt;/code> 中的第一个子节点的 &lt;code>stableEndpoints&lt;/code> 节点中填入 &lt;code>&amp;lt;你的服务器IP&amp;gt;/&amp;lt;ZeroTier端口&amp;gt;&lt;/code> 如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;stableEndpoints&amp;#34;&lt;/span>: &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;1.2.3.4/9993&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="签发-moon">签发 moon
&lt;/h3>&lt;p>签发 &lt;code>000000deadbeef00.moon&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">zerotier-idtool genmoon moon.json
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>此文件不包含机密信息，但是它从包含有机密信息的 &lt;code>moon.json&lt;/code> 签发而来。&lt;/p>&lt;/blockquote>
&lt;h3 id="启用端口">启用端口
&lt;/h3>&lt;p>开启 Ubuntu 防火墙的 &lt;code>9993&lt;/code> 端口：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">ufw allow &lt;span class="m">9993&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>服务商控制面板如有防火墙请放行 &lt;code>9993&lt;/code> 端口。&lt;/p>
&lt;h2 id="配置客户端">配置客户端
&lt;/h2>&lt;p>转到 &lt;code>ZeroTier&lt;/code> 目录&lt;/p>
&lt;ul>
&lt;li>Windows: &lt;code>C:\ProgramData\ZeroTier\One&lt;/code>&lt;/li>
&lt;li>Macintosh: &lt;code>/Library/Application Support/ZeroTier/One&lt;/code>&lt;/li>
&lt;li>Linux: &lt;code>/var/lib/zerotier-one&lt;/code>&lt;/li>
&lt;li>FreeBSD/OpenBSD: &lt;code>/var/db/zerotier-one&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>在 &lt;code>ZeroTier&lt;/code> 目录下创建文件夹 &lt;code>moons.d&lt;/code>&lt;/p>
&lt;p>将服务端生成的 &lt;code>.moon&lt;/code> 文件复制到 &lt;code>moons.d&lt;/code> 文件夹中并重启 ZeroTier&lt;/p></description></item><item><title>【弃坑】在红米4X上安装LineageOS</title><link>https://blog.gaein.cn/passages/lineageos-on-redmi-4x/</link><pubDate>Mon, 04 Oct 2021 18:43:15 +0800</pubDate><guid>https://blog.gaein.cn/passages/lineageos-on-redmi-4x/</guid><description>&lt;blockquote>
&lt;p>本来就想顺便玩玩结果用了4部手机了.jpg&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>设备：红米4X(santoni)&lt;br>
系统：MIUI开发版 9.10.11
架构：ARM64&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>咕咕咕中，问题真的好多啊&lt;/p>&lt;/blockquote>
&lt;h2 id="准备工作">准备工作
&lt;/h2>&lt;blockquote>
&lt;p>另请参阅：&lt;a class="link" href="https://wiki.lineageos.org/devices/santoni/install" target="_blank" rel="noopener"
>Install LineageOS on santoni | LineageOS Wiki&lt;/a>&lt;/p>&lt;/blockquote>
&lt;h3 id="安装adb和fastboot">安装ADB和FastBoot
&lt;/h3>&lt;ol>
&lt;li>从 &lt;a class="link" href="https://dl.google.com/android/repository/platform-tools-latest-windows.zip" target="_blank" rel="noopener"
>Google&lt;/a> 下载Windows版的压缩包；&lt;/li>
&lt;li>解压缩下载的压缩包到你习惯的文件夹（比如 &lt;code>C:\Users\YourName\Tools\PlatformTools\&lt;/code>）；&lt;/li>
&lt;li>将解压缩的文件夹添加到系统 &lt;code>Path&lt;/code> 环境变量。&lt;/li>
&lt;/ol>
&lt;h3 id="解锁-bootloader">解锁 bootloader
&lt;/h3>&lt;ol>
&lt;li>在 &lt;code>设置&amp;gt;我的设备&amp;gt;全部参数&lt;/code> 中点击3次MIUI版本，再点击3次MIUI版本，开启开发者模式；&lt;/li>
&lt;li>下载 &lt;a class="link" href="https://www.miui.com/unlock/index.html" target="_blank" rel="noopener"
>小米解锁工具&lt;/a>，确保账号有权限解锁；&lt;/li>
&lt;li>在 &lt;code>设置&amp;gt;更多设置&amp;gt;开发者选项&amp;gt;设备解锁状态&lt;/code> 中，插入SIM卡并绑定账号。具体步骤可以参考&lt;a class="link" href="https://www.xiaomi.cn/post/4378807" target="_blank" rel="noopener"
>小米社区&lt;/a>；&lt;/li>
&lt;li>在 &lt;code>设置&amp;gt;更多设置&amp;gt;开发者选项&amp;gt;USB调试&lt;/code> 中启用USB调试。&lt;/li>
&lt;li>下载 &lt;a class="link" href="http://www.miui.com/shuaji-393.html" target="_blank" rel="noopener"
>小米刷机工具&lt;/a> ，不用下载任何包，在 &lt;code>fastboot&lt;/code> 下解压运行后按提示安装驱动，然后这玩意就没用了；
&lt;blockquote>
&lt;p>似乎只有在 &lt;code>fastboot&lt;/code> 模式下用小米来装驱动才行，此前不知道怎么回事一直没驱动。&lt;/p>&lt;/blockquote>
&lt;/li>
&lt;li>在电脑终端内输入 &lt;code>adb shell reboot -p&lt;/code> ，手机弹窗允许调试点击“确定”，手机关机；&lt;/li>
&lt;li>关机状态下，按住 &lt;code>音量-&lt;/code> 再按 &lt;code>电源键&lt;/code> ，开机进入 fastboot；&lt;/li>
&lt;li>运行小米解锁工具，登录账户并确认解锁。&lt;/li>
&lt;/ol>
&lt;h2 id="刷入第三方-recovery">刷入第三方 Recovery
&lt;/h2>&lt;p>这里选择使用 &lt;a class="link" href="https://pitchblackrecovery.com/" target="_blank" rel="noopener"
>PitchBlack Recovery&lt;/a> &lt;del>因为好看&lt;/del>&lt;/p>
&lt;blockquote>
&lt;p>另请参阅：&lt;a class="link" href="https://pitchblackrecovery.com/docs/how-to-install/" target="_blank" rel="noopener"
>How to Install - PitchBlack Recovery Project&lt;/a>&lt;/p>&lt;/blockquote>
&lt;h3 id="准备">准备
&lt;/h3>&lt;ol>
&lt;li>确保你的设备已经解锁；&lt;/li>
&lt;li>确保PC端有 &lt;code>adb&lt;/code> 和 &lt;code>fastboot&lt;/code>；&lt;/li>
&lt;li>从 &lt;a class="link" href="https://pitchblackrecovery.com/santoni/" target="_blank" rel="noopener"
>PitchBlack Recovery&lt;/a> 下载适用于红米4X的 Recovery；&lt;/li>
&lt;li>从 &lt;a class="link" href="https://twrp.me/xiaomi/xiaomiredmi4x.html" target="_blank" rel="noopener"
>TeamWin Recovery&lt;/a> 翻到“Download Links:” 处，下载适用于红米4X的 Recovery。（我这边是欧洲的镜像比较快，自行选择）&lt;/li>
&lt;/ol>
&lt;h3 id="从twrp刷入pbrp">从TWRP刷入PBRP
&lt;/h3>&lt;p>因为以前是小米的 Recovery ，直接安装 PitchBlack 没有搞太明白，所以先刷入 TWRP。&lt;/p>
&lt;ol>
&lt;li>到下载TWEP的目录，在PC终端执行 &lt;code>fastboot boot twrp-&amp;lt;version&amp;gt;-santoni.img&lt;/code> ，从TWRP中启动；&lt;/li>
&lt;li>在手机进入TWRP后，点击 &lt;code>Wipe&amp;gt;Format Data&lt;/code> 并输入 &lt;code>yes&lt;/code> 后执行；&lt;/li>
&lt;li>点击 &lt;code>Back&lt;/code> 返回到主界面，点击 &lt;code>Advanced&amp;gt;ADB Sideload&lt;/code> 启动 ADB 旁加载；&lt;/li>
&lt;li>到下载PBRP的目录，从PC终端执行 &lt;code>adb sideload .\PBRP-santoni-&amp;lt;version&amp;gt;-OFFICIAL.zip &lt;/code>；&lt;/li>
&lt;li>手机终端出现 &lt;code>---Installation finished!---&lt;/code> 字样即为刷入完成；&lt;/li>
&lt;li>按下 &lt;code>音量-&lt;/code> 重启至 PitchBlack Recovery。&lt;/li>
&lt;/ol>
&lt;h2 id="编译-lineageos">编译 LineageOS
&lt;/h2>&lt;blockquote>
&lt;p>另请参阅：&lt;a class="link" href="https://wiki.lineageos.org/devices/santoni/build" target="_blank" rel="noopener"
>Build for santoni | LineageOS Wiki&lt;/a>&lt;/p>&lt;/blockquote>
&lt;h3 id="准备工作-1">准备工作
&lt;/h3>&lt;p>准备一台装有 64位的 &lt;strong>Ubuntu&lt;/strong> 20.04 （或Ubuntu Server 20.04）的电脑，可以考虑使用虚拟机或云服务器，为了避免麻烦，建议使用Ubuntu Server完成。编译的时间取决于性能。LineageOS官方的要求是200G存储空间，并且内存越小编译越慢。&lt;/p>
&lt;p>为了速度我就直接拿服务器编译了。&lt;/p>
&lt;blockquote>
&lt;p>DELL PowerEdge R620&lt;br>
Intel® Xeon® Processor E5-2670 v2 X2&lt;br>
MT DDR3 REG-ECC PC8500R 16GB X4&lt;br>
HGST 600GB 15K SAS X3 (Raid5)&lt;br>
Ubuntu server 20.04.02&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>Ubuntu 发行版的光盘可以从 &lt;a class="link" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-cdimage/" target="_blank" rel="noopener"
>清华大学开源软件镜像站&lt;/a> 下载。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>安装服务器过程略过，由于我在tty下使用所以语言选择了英语。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>建议在安装时候配置国内源，比如清华源（&lt;code>https://mirrors.tuna.tsinghua.edu.cn/ubuntu/&lt;/code>）。&lt;/p>&lt;/blockquote>
&lt;h3 id="环境配置">环境配置
&lt;/h3>&lt;p>通过SSH连接上服务器之后就可以进一步进行环境的配置了（当然你在tty内配置也不是不行）。&lt;/p>
&lt;h4 id="安装platform-tools">安装platform Tools
&lt;/h4>&lt;ol>
&lt;li>【可能需要代理】使用 wget 下载 Linux 版的 platform Tools: &lt;code>wget https://dl.google.com/android/repository/platform-tools-latest-linux.zip&lt;/code>；&lt;/li>
&lt;li>使用 apt 安装 zip: &lt;code>apt install zip&lt;/code>；&lt;/li>
&lt;li>解压缩 platform Tools :&lt;code>unzip platform-tools_&amp;lt;version&amp;gt;-linux.zip&lt;/code>；&lt;/li>
&lt;li>编辑 &lt;code>~/.profile&lt;/code>，添加:
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># add Android SDK platform tools to path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="s2">&amp;#34;$HOME/platform-tools&amp;#34;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="n">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;$HOME/platform-tools:$PATH&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>添加完成后运行 &lt;code>source ~/.profile&lt;/code> 更新环境。&lt;/li>
&lt;/ol>
&lt;h4 id="安装依赖">安装依赖
&lt;/h4>&lt;ol>
&lt;li>使用 apt 安装依赖: &lt;code>apt install zip bc bison build-essential ccache curl flex g++-multilib gcc-multilib git gnupg gperf imagemagick lib32ncurses5-dev lib32readline-dev lib32z1-dev liblz4-tool libncurses5 libncurses5-dev libsdl1.2-dev libssl-dev libxml2 libxml2-utils lzop pngcrush rsync schedtool squashfs-tools xsltproc zip zlib1g-dev&lt;/code>；
&lt;blockquote>
&lt;p>对于 Ubuntu 20.04 以前的操作系统来说，还需要安装 libwxgtk3.0-dev: &lt;code>apt install libwxgtk3.0-dev&lt;/code>&lt;/p>&lt;/blockquote>
&lt;/li>
&lt;li>如果希望构建 lineageOS 15，则需要安装OpenJDK8: &lt;code>apt install openjdk-8-jdk&lt;/code>&lt;/li>
&lt;/ol>
&lt;h4 id="创建目录">创建目录
&lt;/h4>&lt;ol>
&lt;li>&lt;code>mkdir -p ~/bin&lt;/code>；&lt;/li>
&lt;li>&lt;code>mkdir -p ~/android/lineage&lt;/code>。&lt;/li>
&lt;/ol>
&lt;h4 id="安装repo命令">安装repo命令
&lt;/h4>&lt;ol>
&lt;li>下载repo: &lt;code>curl https://storage.googleapis.com/git-repo-downloads/repo &amp;gt; ~/bin/repo&lt;/code>；&lt;/li>
&lt;li>更改权限: &lt;code>chmod a+x ~/bin/repo&lt;/code>；&lt;/li>
&lt;li>将 &lt;code>~/bin&lt;/code> 添加到环境变量，在 &lt;code>~/.profile&lt;/code> 中添加:
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># set PATH so it includes user&amp;#39;s private bin if it exists
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">if [ -d &amp;#34;$HOME/bin&amp;#34; ] ; then
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> PATH=&amp;#34;$HOME/bin:$PATH&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>运行 &lt;code>source ~/.profile&lt;/code> 更新环境。&lt;/li>
&lt;/ol>
&lt;h4 id="配置git">配置Git
&lt;/h4>&lt;ol>
&lt;li>使用 &lt;code>apt install git&lt;/code> 安装 Git；&lt;/li>
&lt;li>配置你的邮箱和用户名：
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">git config --global user.email &amp;#34;you@example.com&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git config --global user.name &amp;#34;Your Name&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h4 id="开启缓存">开启缓存
&lt;/h4>&lt;blockquote>
&lt;p>开启缓存可以加快构建&lt;/p>&lt;/blockquote>
&lt;ol>
&lt;li>设置环境变量
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">USE_CCACHE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">CCACHE_EXEC&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ccache&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>设置ccache，编辑&lt;code>~/.profile&lt;/code>，加入:
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ccache -M 32G
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>使用&lt;code>source ~/.profile&lt;/code> 使配置生效&lt;/li>
&lt;/ol>
&lt;h4 id="配置lineageos仓库">配置LineageOS仓库
&lt;/h4>&lt;p>红米4X可以选择如下两个分支：&lt;/p>
&lt;ul>
&lt;li>lineage-15.1(需要OpenJDK-8)&lt;/li>
&lt;li>lineage-16.0&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>进入目录: &lt;code>cd ~/android/lineage&lt;/code>；&lt;/li>
&lt;li>安装python（由于Ubuntu自带python，安装 &lt;code>python-is-python3&lt;/code>）即可；&lt;/li>
&lt;li>【可能需要代理】初始化项目: &lt;code>repo init -u https://github.com/LineageOS/android.git -b lineage-&amp;lt;version&amp;gt;&lt;/code>
&lt;blockquote>
&lt;p>如果无法下载可以考虑添加环境变量 &lt;code>REPO_URL=https://github.com/GerritCodeReview/git-repo&lt;/code>；&lt;/p>&lt;/blockquote>
&lt;/li>
&lt;li>【可能需要代理】使用 &lt;code>repo sync&lt;/code> 下载源代码；
&lt;blockquote>
&lt;p>这步好艰难&amp;hellip;要下很长时间&lt;/p>&lt;/blockquote>
&lt;/li>
&lt;/ol>
&lt;h4 id="配置设备相关">配置设备相关
&lt;/h4>&lt;p>输入&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">source build/envsetup.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">breakfast santoni
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>下载红米4X(santoni)的配置文件和内核。&lt;/p>
&lt;blockquote>
&lt;p>部分机型需要一个vendor目录。如果你收到了一个关于vendor的错误，到 &lt;a class="link" href="https://gitlab.com/the-muppets/proprietary_vendor_xiaomi/-/tree/lineage-16.0/santoni" target="_blank" rel="noopener"
>GitLab&lt;/a> 下载。放入 &lt;code>~/android/lineageos/vendor/xiaomi&lt;/code> 后，再次执行 &lt;code>breakfast santoni&lt;/code> 即可。
经尝试上述方法在后来引起了错误，所以参考官方文档，从LineageOS的包里导出该文件，首先下载 &lt;a class="link" href="https://lineageosroms.com/santoni/" target="_blank" rel="noopener"
>LineageOS 16.0 for santoni&lt;/a> （这个包的来历我也不知道，应该是以前镜像的官方build），使用 &lt;code>unzip path/to/lineage-*.zip system/*&lt;/code> 解压，并将 &lt;code>system&lt;/code> 目录移动到 &lt;code>~/android/system_dump/&lt;/code>，到 &lt;code>~/android/lineage/device/xiaomi/santoni&lt;/code> 目录执行 &lt;code>./extract-files.sh ~/android/system_dump/&lt;/code> 导出。&lt;/p>&lt;/blockquote>
&lt;h4 id="编译lineageos">编译LineageOS
&lt;/h4>&lt;p>执行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">croot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">brunch santoni
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>报错&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ninja: error: &amp;#39;/home/nidb/android/lineageos/out/target/common/obj/JAVA_LIBRARIES/WfdCommon_intermediates/javalib.jar&amp;#39;, needed by &amp;#39;/home/nidb/android/lineageos/out/target/product/santoni/dex_bootjars/system/framework/boot.prof&amp;#39;, missing and no known rule to make it
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>很是绝望。参考 &lt;a class="link" href="https://stackoverflow.com/questions/54946271" target="_blank" rel="noopener"
>StackOverflow&lt;/a> 发现或许是缺了 Wfd，在Github找到&lt;a class="link" href="https://github.com/bionicBUG/android_device_xiaomi_santoni/tree/los16" target="_blank" rel="noopener"
>这个仓库&lt;/a> ，克隆该项目替换，没有作用。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>考虑使用 &lt;code>make&lt;/code> 直接编译，因为脚本中含有 python2，所以卸载 &lt;code>python-is-python3&lt;/code> ，然后 &lt;code>apt install python2&lt;/code>；&lt;br>
尝试使用 &lt;code>lunch&lt;/code> ,&lt;code>make -j10&lt;/code> 。&lt;br>
报错 &lt;code>ninja: error: 'prebuilts/lineage-sdk/api/9.txt'&lt;/code>，参考 &lt;a class="link" href="https://forum.xda-developers.com/t/help-by-building-lineageos-16.3887273/" target="_blank" rel="noopener"
>XDA&lt;/a> 克隆 &lt;code>https://github.com/LineageOS/android_prebuilts_lineage-sdk&lt;/code> 到 &lt;code>prebuilts&lt;/code> 解决。&lt;br>
编译到一大半报错 &lt;code>ninja: build stopped: subcommand failed.&lt;/code> 原因是被Linux系统限制，使用 &lt;code>ulimit -c unlimited&lt;/code> 解除。&lt;/p>&lt;/blockquote></description></item><item><title>太平洋大西洋水流问题-力扣417 深都优先搜索</title><link>https://blog.gaein.cn/passages/leetcode-417-pacificatlanticwaterflow/</link><pubDate>Fri, 17 Sep 2021 20:47:22 +0800</pubDate><guid>https://blog.gaein.cn/passages/leetcode-417-pacificatlanticwaterflow/</guid><description>&lt;h2 id="题干">题干
&lt;/h2>&lt;p>&lt;a class="link" href="https://leetcode-cn.com/problems/pacific-atlantic-water-flow/" target="_blank" rel="noopener"
>力扣-太平洋大西洋水流问题&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>给定一个 &lt;code>m x n&lt;/code> 的非负整数矩阵来表示一片大陆上各个单元格的高度。“太平洋”处于大陆的左边界和上边界，而“大西洋”处于大陆的右边界和下边界。&lt;/p>
&lt;p>规定水流只能按照上、下、左、右四个方向流动，且只能从高到低或者在同等高度上流动。&lt;/p>
&lt;p>请找出那些水流既可以流动到“太平洋”，又能流动到“大西洋”的陆地单元的坐标。&lt;/p>
&lt;p>&lt;strong>提示：&lt;/strong>&lt;/p>
&lt;p>输出坐标的顺序不重要&lt;/p>
&lt;p>m 和 n 都小于150&lt;/p>
&lt;p>&lt;strong>示例：&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">给定下面的 5x5 矩阵:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 太平洋 ~ ~ ~ ~ ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ~ 1 2 2 3 (5) *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ~ 3 2 3 (4) (4) *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ~ 2 4 (5) 3 1 *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ~ (6) (7) 1 4 5 *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ~ (5) 1 1 2 4 *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * * * * * 大西洋
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">返回:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[[0, 4], [1, 3], [1, 4], [2, 2], [3, 0], [3, 1], [4, 0]] (上图中带括号的单元).
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/blockquote>
&lt;h2 id="深度优先搜索">深度优先搜索
&lt;/h2>&lt;h4 id="思路">思路
&lt;/h4>&lt;p>找出太平洋和大西洋都能抵达的点即可。&lt;/p>
&lt;h4 id="代码">代码
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-csharp" data-lang="csharp">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="n">IList&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">IList&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">PacificAtlantic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">[][]&lt;/span> &lt;span class="n">heights&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">res&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">IList&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">&amp;gt;&amp;gt;();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">m&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">heights&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Length&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">heights&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">Length&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 记录坐标地是否到达太平洋、大西洋&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">canReachP&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="kt">bool&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">canReachX&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="kt">bool&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 上下左右出发，深度优先搜索&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">++)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">DepthFirstSearch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">heights&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">canReachP&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">DepthFirstSearch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">heights&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">canReachX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">++)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">DepthFirstSearch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">heights&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">canReachP&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">DepthFirstSearch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">heights&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">canReachX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">m&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 遍历记录，如果都可到达即可加入结果&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">++)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">++)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">canReachP&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">canReachX&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">DepthFirstSearch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">[][]&lt;/span> &lt;span class="n">heights&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">bool&lt;/span>&lt;span class="p">[,]&lt;/span> &lt;span class="n">canReach&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 如果已经扫描过可达就不用扫描&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">canReach&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 扫描过即说明可达，这也是逆流的优点&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">canReach&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 上下左右深度搜索，越界就不搜索&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="p">&amp;gt;=&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="p">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">heights&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">&amp;gt;=&lt;/span> &lt;span class="n">heights&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">DepthFirstSearch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">heights&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">canReach&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="p">&amp;gt;=&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="p">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">heights&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">&amp;gt;=&lt;/span> &lt;span class="n">heights&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">DepthFirstSearch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">heights&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">canReach&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">heights&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Length&lt;/span> &lt;span class="p">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">heights&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">&amp;gt;=&lt;/span> &lt;span class="n">heights&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">DepthFirstSearch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">heights&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">canReach&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">heights&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">Length&lt;/span> &lt;span class="p">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">heights&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">&amp;gt;=&lt;/span> &lt;span class="n">heights&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">DepthFirstSearch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">heights&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">canReach&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>二叉树的中序遍历-力扣94 中序遍历</title><link>https://blog.gaein.cn/passages/leetcode-221-maximalsquare/</link><pubDate>Fri, 17 Sep 2021 18:50:22 +0800</pubDate><guid>https://blog.gaein.cn/passages/leetcode-221-maximalsquare/</guid><description>&lt;h2 id="题干">题干
&lt;/h2>&lt;p>&lt;a class="link" href="https://leetcode-cn.com/problems/maximal-square/" target="_blank" rel="noopener"
>力扣-最大正方形&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>题干详见 LeetCode ，图片过多不在此赘述。&lt;/p>&lt;/blockquote>
&lt;h2 id="暴力">暴力
&lt;/h2>&lt;h4 id="思路">思路
&lt;/h4>&lt;p>暴力算嘛，计算每一个最大的正方形的边长并存储，遍历一轮。&lt;/p>
&lt;h4 id="代码">代码
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-csharp" data-lang="csharp">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">MaximalSquare&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">char&lt;/span>&lt;span class="p">[][]&lt;/span> &lt;span class="n">matrix&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">maxSide&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 判空&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">matrix&lt;/span> &lt;span class="k">is&lt;/span> &lt;span class="kc">null&lt;/span> &lt;span class="p">||&lt;/span> &lt;span class="n">matrix&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Length&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="p">||&lt;/span> &lt;span class="n">matrix&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">Length&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">rows&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">matrix&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Length&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">columns&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">matrix&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">Length&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">rows&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">++)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">columns&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">++)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">matrix&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="sc">&amp;#39;1&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 遇到一个 1 作为正方形的左上角&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">maxSide&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">maxSide&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="p">?&lt;/span> &lt;span class="n">maxSide&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 计算可能的最大正方形边长&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">currentMaxSide&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">rows&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">columns&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="p">?&lt;/span> &lt;span class="n">columns&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">rows&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">k&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">k&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">currentMaxSide&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">++)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 判断新增的一行一列是否均为 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">flag&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">matrix&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="sc">&amp;#39;0&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">m&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">m&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">++)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">matrix&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="sc">&amp;#39;0&amp;#39;&lt;/span> &lt;span class="p">||&lt;/span> &lt;span class="n">matrix&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="sc">&amp;#39;0&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">flag&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">flag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">maxSide&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">maxSide&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">k&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="p">?&lt;/span> &lt;span class="n">maxSide&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">k&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">maxSide&lt;/span> &lt;span class="p">*&lt;/span> &lt;span class="n">maxSide&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>罗马数字转整数-力扣13 遍历吧</title><link>https://blog.gaein.cn/passages/leetcode-13-romantointeger/</link><pubDate>Thu, 16 Sep 2021 13:52:23 +0800</pubDate><guid>https://blog.gaein.cn/passages/leetcode-13-romantointeger/</guid><description>&lt;blockquote>
&lt;p>把罗马数字转成 &lt;code>int&lt;/code> ，遍历字符串进行计算即可。&lt;/p>&lt;/blockquote>
&lt;h2 id="题干">题干
&lt;/h2>&lt;p>[&lt;a class="link" href="https://leetcode-cn.com/problems/roman-to-integer/" target="_blank" rel="noopener"
>罗马数字转整数&lt;/a>]&lt;/p>
&lt;blockquote>
&lt;p>罗马数字包含以下七种字符: &lt;code>I&lt;/code>，&lt;code>V&lt;/code>，&lt;code>X&lt;/code>，&lt;code>L&lt;/code>，&lt;code>C&lt;/code>，&lt;code>D&lt;/code> 和 &lt;code>M&lt;/code>。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">字符 数值
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">V 5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">X 10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">L 50
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">C 100
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">D 500
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M 1000
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>例如， 罗马数字 2 写做 II ，即为两个并列的 1。12 写做 XII ，即为 X + II 。 27 写做  XXVII, 即为 XX + V + II 。&lt;/p>
&lt;p>通常情况下，罗马数字中小的数字在大的数字的右边。但也存在特例，例如 4 不写做 IIII，而是 IV。数字 1 在数字 5 的左边，所表示的数等于大数 5 减小数 1 得到的数值 4 。同样地，数字 9 表示为 IX。这个特殊的规则只适用于以下六种情况：&lt;/p>
&lt;ul>
&lt;li>I 可以放在 V (5) 和 X (10) 的左边，来表示 4 和 9。&lt;/li>
&lt;li>X 可以放在 L (50) 和 C (100) 的左边，来表示 40 和 90。 &lt;/li>
&lt;li>C 可以放在 D (500) 和 M (1000) 的左边，来表示 400 和 900。&lt;/li>
&lt;/ul>
&lt;p>给定一个罗马数字，将其转换成整数。输入确保在 1 到 3999 的范围内。&lt;/p>
&lt;p>&lt;strong>示例 1:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">输入: &amp;#34;III&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">输出: 3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>示例 2:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">输入: &amp;#34;IV&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">输出: 4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>示例 3:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">输入: &amp;#34;IX&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">输出: 9
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>示例 4:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">输入: &amp;#34;LVIII&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">输出: 58
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">解释: L = 50, V= 5, III = 3.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>示例 5:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">输入: &amp;#34;MCMXCIV&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">输出: 1994
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">解释: M = 1000, CM = 900, XC = 90, IV = 4.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>提示：&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;code>1 &amp;lt;= s.length &amp;lt;= 15&lt;/code>&lt;/li>
&lt;li>&lt;code>s&lt;/code> 仅含字符 &lt;code>('I', 'V', 'X', 'L', 'C', 'D', 'M')&lt;/code>&lt;/li>
&lt;li>题目数据保证 &lt;code>s&lt;/code> 是一个有效的罗马数字，且表示整数在范围 &lt;code>[1, 3999]&lt;/code> 内&lt;/li>
&lt;li>题目所给测试用例皆符合罗马数字书写规则，不会出现跨位等情况。&lt;/li>
&lt;li>IL 和 IM 这样的例子并不符合题目要求，49 应该写作 XLIX，999 应该写作 CMXCIX 。&lt;/li>
&lt;li>关于罗马数字的详尽书写规则，可以参考 &lt;a class="link" href="https://b2b.partcommunity.com/community/knowledge/zh_CN/detail/10753/" target="_blank" rel="noopener"
>罗马数字 - Mathematics&lt;/a> 。&lt;/li>
&lt;/ul>&lt;/blockquote>
&lt;h2 id="自己想的慢速解法">自己想的慢速解法
&lt;/h2>&lt;h4 id="思路">思路
&lt;/h4>&lt;p>罗马数字每个数字由一到两个字符构成：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;I&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;V&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;X&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;L&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">50&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;C&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">100&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;D&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">500&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;M&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1000&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;IV&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;IX&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;XL&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">40&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;XC&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">90&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;CD&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">400&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;CM&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">900&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>首先遍历读取字符串的每个字符，遇到 &lt;code>I&lt;/code>, &lt;code>X&lt;/code>, &lt;code>C&lt;/code> 即为有可能和下一个字符组成一个罗马数字。&lt;/p>
&lt;p>维护一个字典，存储所有的单个罗马数字 ( &lt;code>IX&lt;/code>, &lt;code>C&lt;/code> 这种) ，对字符串进行遍历，遇到可能有下一个字母组成罗马数字的就检查下一个是否越界，如果没有越界就查询字典，字典有就加上相应的数值并且 &lt;code>i += 2&lt;/code> ，没有就查询当前字符，获取数值并加到 &lt;code>result&lt;/code> 里，然后 &lt;code>i++&lt;/code>。&lt;/p>
&lt;h4 id="代码">代码
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-csharp" data-lang="csharp">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">Solution&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="n">MayHasNext&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">char&lt;/span> &lt;span class="n">ch&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">ch&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">switch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sc">&amp;#39;I&amp;#39;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sc">&amp;#39;X&amp;#39;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sc">&amp;#39;C&amp;#39;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="n">TryParse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">char&lt;/span> &lt;span class="n">ch&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">out&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">num&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">TryParse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ch&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToString&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="k">out&lt;/span> &lt;span class="n">num&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="n">TryParse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">char&lt;/span> &lt;span class="n">ch1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">char&lt;/span> &lt;span class="n">ch2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">out&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">num&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">TryParse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;{ch1}{ch2}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">out&lt;/span> &lt;span class="n">num&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="n">TryParse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">out&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">num&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">num&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="k">switch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;I&amp;#34;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;V&amp;#34;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;X&amp;#34;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;L&amp;#34;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">50&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;C&amp;#34;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">100&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;D&amp;#34;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">500&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;M&amp;#34;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">1000&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;IV&amp;#34;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">4&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;IX&amp;#34;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">9&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;XL&amp;#34;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">40&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;XC&amp;#34;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">90&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;CD&amp;#34;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">400&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;CM&amp;#34;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">900&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span> &lt;span class="p">!=&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">RomanToInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="k">is&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArgumentNullException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nameof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Empty&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Length&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">ch&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">MayHasNext&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ch&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Length&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">TryParse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ch&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="k">out&lt;/span> &lt;span class="kt">var&lt;/span> &lt;span class="n">numOfTwo&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span> &lt;span class="p">+=&lt;/span> &lt;span class="n">numOfTwo&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i&lt;/span> &lt;span class="p">+=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">TryParse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ch&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">out&lt;/span> &lt;span class="kt">var&lt;/span> &lt;span class="n">num&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span> &lt;span class="p">+=&lt;/span> &lt;span class="n">num&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i&lt;/span>&lt;span class="p">++;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">result&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="大佬的高速解法">大佬的高速解法
&lt;/h2>&lt;h4 id="思路-1">思路
&lt;/h4>&lt;p>罗马数字的规则，用一句话来说就是：“把一个小值放在大值的左边，就是做减法，否则为加法”。也就是我们可以维护一个变量来存储上一个数字，然后比大小进行加减法。&lt;/p>
&lt;h4 id="代码-1">代码
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-csharp" data-lang="csharp">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">RomanToInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">strSpan&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AsSpan&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">lastNum&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">GetRomanCharValue&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">strSpan&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">foreach&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">ch&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="n">strSpan&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">1.&lt;/span>&lt;span class="p">.])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">GetRomanCharValue&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ch&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">lastNum&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">num&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span> &lt;span class="p">-=&lt;/span> &lt;span class="n">lastNum&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span> &lt;span class="p">+=&lt;/span> &lt;span class="n">lastNum&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lastNum&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">num&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="n">lastNum&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">private&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">GetRomanCharValue&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">char&lt;/span> &lt;span class="n">ch&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">ch&lt;/span> &lt;span class="k">switch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sc">&amp;#39;I&amp;#39;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sc">&amp;#39;V&amp;#39;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sc">&amp;#39;X&amp;#39;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sc">&amp;#39;L&amp;#39;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">50&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sc">&amp;#39;C&amp;#39;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">100&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sc">&amp;#39;D&amp;#39;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">500&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sc">&amp;#39;M&amp;#39;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">1000&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArgumentException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;Unknow roman char {ch}&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>二叉树的中序遍历-力扣94 中序遍历</title><link>https://blog.gaein.cn/passages/leetcode-94-binarytreeinordertraversal/</link><pubDate>Wed, 15 Sep 2021 22:22:13 +0800</pubDate><guid>https://blog.gaein.cn/passages/leetcode-94-binarytreeinordertraversal/</guid><description>&lt;h2 id="题干">题干
&lt;/h2>&lt;p>[&lt;a class="link" href="https://leetcode-cn.com/problems/binary-tree-inorder-traversal/" target="_blank" rel="noopener"
>力扣-二叉树的中序遍历&lt;/a>]&lt;/p>
&lt;blockquote>
&lt;p>题干详见 LeetCode ，图片过多不在此赘述。&lt;/p>&lt;/blockquote>
&lt;h2 id="递归">递归
&lt;/h2>&lt;h4 id="思路">思路
&lt;/h4>&lt;p>首先分析题干，迷惑了我半天的示例原来是这个类：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-csharp" data-lang="csharp">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">TreeNode&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">TreeNode&lt;/span> &lt;span class="n">left&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">TreeNode&lt;/span> &lt;span class="n">right&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">TreeNode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">val&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">TreeNode&lt;/span> &lt;span class="n">left&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">TreeNode&lt;/span> &lt;span class="n">right&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">val&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">left&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">left&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">right&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">right&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>不得不说这代码弄得我是&amp;hellip;血压升高又没得办法&lt;/p>&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-csharp" data-lang="csharp">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">Val&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="n">TreeNode&lt;/span> &lt;span class="n">Left&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="n">TreeNode&lt;/span> &lt;span class="n">Right&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="n">TreeNode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">val&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">TreeNode&lt;/span> &lt;span class="n">left&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">TreeNode&lt;/span> &lt;span class="n">right&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Val&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Left&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">left&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Right&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">right&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>另外这种构造函数似乎没有必要写，因为可以使用类似于：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-csharp" data-lang="csharp">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">node&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">TreeNode&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Val&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Left&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">chileLeft&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这种代码来完成。一般情况下用构造函数是属性不可为空的情况下。&lt;/p>
&lt;blockquote>
&lt;p>跑题了（）&lt;/p>&lt;/blockquote>
&lt;p>首先啥是二叉树，这玩意离散数学应该讲过，&lt;del>但是我没听（x）&lt;/del> 二叉树是一个树形结构，每个节点有两个子节点。中序遍历就是先遍历左面的，再来他本身然后是右面的。递归的话不深究他的细节，写就完了。&lt;/p>
&lt;p>首先来个判空避免 &lt;code>NullReferenceException&lt;/code> ，对于递归来说我们只需要负责好其中的环节就好了，至于细节千万不要深究，比较脑瓜子没几层栈，想了没两下就 StackOverflow 了。&lt;/p>
&lt;p>那么在这个方法中，先添加左，再添加他本身，然后右节点，返回即可。&lt;/p>
&lt;h4 id="代码">代码
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-csharp" data-lang="csharp">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="n">IList&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">InorderTraversal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">TreeNode&lt;/span> &lt;span class="n">root&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">root&lt;/span> &lt;span class="k">is&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">&amp;gt;();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">&amp;gt;();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 实际上不需要判空&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 递归左&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddRange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">InorderTraversal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">left&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 递归右&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddRange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">InorderTraversal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">right&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">result&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>爬楼梯-力扣70 动态规划</title><link>https://blog.gaein.cn/passages/leetcode-70-climbingstairs/</link><pubDate>Tue, 14 Sep 2021 21:24:43 +0800</pubDate><guid>https://blog.gaein.cn/passages/leetcode-70-climbingstairs/</guid><description>&lt;blockquote>
&lt;p>嗯是爬楼梯，刚看题没有什么思路，举几个栗子来看看规律，找到规律后使用规律来阶梯。&lt;/p>&lt;/blockquote>
&lt;h2 id="题干">题干
&lt;/h2>&lt;p>[&lt;a class="link" href="https://leetcode-cn.com/problems/climbing-stairs/" target="_blank" rel="noopener"
>力扣-爬楼梯&lt;/a>]&lt;/p>
&lt;blockquote>
&lt;p>假设你正在爬楼梯。需要 n 阶你才能到达楼顶。&lt;br>
每次你可以爬 1 或 2 个台阶。你有多少种不同的方法可以爬到楼顶呢？&lt;br>
&lt;strong>注意：&lt;/strong> 给定 n 是一个正整数。&lt;br>
示例 1：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">输入： 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">输出： 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">解释： 有两种方法可以爬到楼顶。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. 1 阶 + 1 阶
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2. 2 阶
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>示例 2：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">输入： 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">输出： 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">解释： 有三种方法可以爬到楼顶。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. 1 阶 + 1 阶 + 1 阶
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2. 1 阶 + 2 阶
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3. 2 阶 + 1 阶
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/blockquote>
&lt;h2 id="动态规划">动态规划
&lt;/h2>&lt;h4 id="思路">思路
&lt;/h4>&lt;p>观察结果：&lt;/p>
&lt;p>&lt;code>n=1&lt;/code> 时，&lt;code>1&lt;/code> 种；
&lt;code>n=2&lt;/code> 时，&lt;code>2&lt;/code> 种；
&lt;code>n=3&lt;/code> 时，&lt;code>3&lt;/code> 种；
&lt;code>n=4&lt;/code> 时，&lt;code>5&lt;/code> 种；
&amp;hellip;&lt;/p>
&lt;p>不难发现，第 &lt;code>n&lt;/code> 次的结果是 &lt;code>n-1&lt;/code> 次与 &lt;code>n-2&lt;/code> 次之和。&lt;/p>
&lt;p>当然你写递归也行，但是那样总是有很多重复计算，不如来动态规划，存储之前算过的：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-csharp" data-lang="csharp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Solution&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">ClimbStairs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">table&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="c1">// 创建表&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="p">&amp;lt;=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// i &amp;lt;= 3时，返回相应结果即可&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 初始化表&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">table&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">table&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 计算前两次的值并存储&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">++)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">table&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">table&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="n">table&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">table&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="n">table&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="排列组合脑瘫算法">排列组合脑瘫算法
&lt;/h2>&lt;h4 id="思路-1">思路
&lt;/h4>&lt;p>来举例子吧：&lt;/p>
&lt;p>&lt;code>n=1&lt;/code> 时，&lt;code>1&lt;/code> 种：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>n=2&lt;/code> 时，&lt;code>1+1&lt;/code> 种：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1 1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>n=3&lt;/code> 时，&lt;code>2+1&lt;/code> 种：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">2 1 // C(2,1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1 1 1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>n=4&lt;/code> 时，&lt;code>1+3+1&lt;/code> 种：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">2 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2 1 1 // C(3,1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1 1 1 1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>n=5&lt;/code> 时，`` 种：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">2 2 1 // C(3,2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2 1 1 1 // C(4,1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1 1 1 1 1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>好，找到规律了：&lt;/p>
&lt;ol>
&lt;li>判断奇数还是偶数，是奇数 result + 1，是偶数 result + 2；&lt;/li>
&lt;li>y = (x - 1) / 2；&lt;/li>
&lt;li>i 循环 y 次，result + C(x - i, i)， i++&lt;/li>
&lt;/ol>
&lt;p>超时，然后优化计算组合数部分，使用 &lt;code>HashSet&amp;lt;T&amp;gt;&lt;/code> 来存储分子然后相消。&lt;/p>
&lt;p>总之想这个挺有趣的呢。&lt;/p>
&lt;p>最终代码：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-csharp" data-lang="csharp">&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">Solution&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">Main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">t&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Solution&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ClimbStairs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">44&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">ClimbStairs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">IsEven&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">?&lt;/span> &lt;span class="m">2&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 奇数偶数预先加值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">cnt&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">&amp;gt;&amp;gt;&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 循环组合次数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">&amp;lt;=&lt;/span> &lt;span class="n">cnt&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">++)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span> &lt;span class="p">+=&lt;/span> &lt;span class="n">Combine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 计算组合值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">result&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;summary&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// 是否为奇数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;/summary&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;param name=&amp;#34;num&amp;#34;&amp;gt;数字&amp;lt;/param&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;returns&amp;gt;是否为奇数&amp;lt;/returns&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="n">IsEven&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">num&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">num&lt;/span> &lt;span class="p">&amp;amp;&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;summary&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// 是否为奇数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;/summary&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;param name=&amp;#34;num&amp;#34;&amp;gt;数字&amp;lt;/param&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;returns&amp;gt;是否为奇数&amp;lt;/returns&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="n">IsEven&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">long&lt;/span> &lt;span class="n">num&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">num&lt;/span> &lt;span class="p">&amp;amp;&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;summary&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// 计算阶乘&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;/summary&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;param name=&amp;#34;x&amp;#34;&amp;gt;阶数&amp;lt;/param&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;returns&amp;gt;x!&amp;lt;/returns&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="kt">long&lt;/span> &lt;span class="n">Factorial&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">long&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="p">&amp;lt;=&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="p">?&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="p">*&lt;/span> &lt;span class="n">Factorial&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;summary&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// 组合&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;/summary&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;param name=&amp;#34;m&amp;#34;&amp;gt;取出元素的个数&amp;lt;/param&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;param name=&amp;#34;n&amp;#34;&amp;gt;元素总个数&amp;lt;/param&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;returns&amp;gt;&amp;lt;/returns&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">Combine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 分子值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">long&lt;/span> &lt;span class="n">moleculeValue&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">long&lt;/span> &lt;span class="n">denominatorValue&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 分子的集合&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">moleculesList&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">HashSet&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">&amp;gt;();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">&amp;lt;=&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">++)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">moleculesList&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 分母的集合&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">denominatorsList&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">LinkedList&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">&amp;gt;();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 选取较少的一项进行计算&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">denominatorCnt&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">o&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 分母值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">denominatorValue&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Factorial&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">denominatorCnt&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">denominatorValue&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Factorial&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">denominatorCnt&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 进行分子分母相消&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">&amp;lt;=&lt;/span> &lt;span class="n">denominatorCnt&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">++)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">moleculesList&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Contains&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">moleculesList&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Remove&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">denominatorsList&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddLast&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 计算分母值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">foreach&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">val&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="n">denominatorsList&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">denominatorValue&lt;/span> &lt;span class="p">*=&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 计算分子值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">foreach&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">val&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="n">moleculesList&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">IsEven&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">IsEven&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">denominatorValue&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">denominatorValue&lt;/span> &lt;span class="p">&amp;gt;&amp;gt;=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">moleculeValue&lt;/span> &lt;span class="p">*=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">val&lt;/span> &lt;span class="p">&amp;gt;&amp;gt;&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">moleculeValue&lt;/span> &lt;span class="p">*=&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="n">moleculeValue&lt;/span> &lt;span class="p">/&lt;/span> &lt;span class="n">denominatorValue&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>C#解析命令行参数</title><link>https://blog.gaein.cn/passages/command-line-parser/</link><pubDate>Mon, 02 Aug 2021 22:24:35 +0800</pubDate><guid>https://blog.gaein.cn/passages/command-line-parser/</guid><description>&lt;h2 id="版权声明">版权声明
&lt;/h2>&lt;blockquote>
&lt;p>&amp;ldquo;&lt;a class="link" href="https://codingblog.carterdan.net/2019/04/12/command-line-parser/" target="_blank" rel="noopener"
>Command Line Parser for C# | DC Coding&lt;/a>&amp;rdquo; by &lt;a class="link" href="https://codingblog.carterdan.net/About/" target="_blank" rel="noopener"
>Dan Carter&lt;/a>, ‎translate from original.&lt;/p>
&lt;p>本文翻译自 &lt;a class="link" href="https://codingblog.carterdan.net/About/" target="_blank" rel="noopener"
>Dan Carter&lt;/a> 的 &amp;ldquo;&lt;a class="link" href="https://codingblog.carterdan.net/2019/04/12/command-line-parser/" target="_blank" rel="noopener"
>Command Line Parser for C# | DC Coding&lt;/a>&amp;quot;。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>Anther&amp;rsquo;s permission:
原作者许可：
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Command-line-Parser/1.webp"
loading="lazy"
alt="permission"
>&lt;/p>&lt;/blockquote>
&lt;hr>
&lt;p>我最近正在折腾 Command Line Parser。这是一个处理、解析命令行参数和选项的样板代码 C# 库（可以用 NuGet 来安装）&lt;/p>
&lt;p>它使用常见的约定来确定选项的处理方式（类似于 C 的 &lt;code>getopt&lt;/code> 函数）。&lt;/p>
&lt;p>它的 GitHub page 上有很完善的文档，但是我仍然决定在这里分享一下怎么用。&lt;/p>
&lt;h2 id="简单选项">简单选项
&lt;/h2>&lt;p>假设我们现在正在创建一个用户获取文件属性（大小、文件类型等）的程序，希望支持以下命令行选项：&lt;/p>
&lt;ul>
&lt;li>&lt;code>&amp;lt;文件路径&amp;gt;&lt;/code> (必须)&lt;/li>
&lt;li>&lt;code>-d&lt;/code> 或 &lt;code>--detailed&lt;/code> （如果存在这个参数则输出所有能获取到的文件属性，否则则输出最常用的信息）&lt;/li>
&lt;li>&lt;code>-o &amp;lt;文件路径&amp;gt;&lt;/code> 或 &lt;code>--output &amp;lt;文件路径&amp;gt;&lt;/code> （指定文件属性输出的位置）&lt;/li>
&lt;/ul>
&lt;p>然后我们可以创建一个包括可能的命令行选项的属性类 &lt;code>Options&lt;/code> ，使用特性来修饰期望的具体的用法：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-csharp" data-lang="csharp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Options&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [Value(0)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">FilePath&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [Option(&amp;#39;d&amp;#39;, &amp;#34;detailed&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="n">Detailed&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [Option(&amp;#39;o&amp;#39;, &amp;#34;output&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">Output&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>Value&lt;/code> 特性定义了按位置识别的参数，&lt;code>Option&lt;/code> 特性定义了按名字识别的参数。&lt;/p>
&lt;p>然后在主函数中轻轻松松的像下面这样写：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-csharp" data-lang="csharp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Program&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">static&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">Main&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">CommandLine&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Parser&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Default&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ParseArguments&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Options&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">WithParsed&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Options&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 解析成功，继续运行app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">WithNotParsed&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Options&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="n">e&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 解析错误，处理错误&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>Options&lt;/code> 类的实例 &lt;code>o&lt;/code> 将会被用解析的选项填充，你可以使用它来控制你应用程序的行为。&lt;/p>
&lt;h2 id="动词">动词
&lt;/h2>&lt;p>这个库也支持类似于“动词”的玩意，比如 Git（一种版本控制软件）有很多你可以执行的特殊的动作（&lt;code>git clone&lt;/code>，&lt;code>git commit&lt;/code>，&lt;code>git pull&lt;/code> 等），分别有它们自己的选项&lt;/p>
&lt;p>在 Command Line Parser 中，你可以为每个动词创建选项类:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-csharp" data-lang="csharp">&lt;span class="line">&lt;span class="cl">&lt;span class="na">[Verb(&amp;#34;clone&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">CloneOptions&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">[Verb(&amp;#34;commit&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">CommitOptions&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">[Verb(&amp;#34;pull&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">PullOptions&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后在你的主函数中定义你要对每个动词干什么以及如何处理错误：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-csharp" data-lang="csharp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Program&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">static&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">Main&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">CommandLine&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Parser&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Default&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ParseArguments&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">AddOptions&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">CommitOptions&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">CloneOptions&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">MapResult&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="n">CloneOptions&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// clone&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="n">CommitOptions&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// commit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="n">PullOptions&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// pull&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">e&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="自定义">自定义
&lt;/h2>&lt;p>上面给出 例子使用了 &lt;code>CommandLine.Parser.Default&lt;/code> （默认解析方案），但实际上有很多方法来自定义解析。例如，你可以设置要解析的参数的区域性，或者设置解析时是否区分大小写。&lt;/p>
&lt;h2 id="帮助文本">帮助文本
&lt;/h2>&lt;p>Command Line Parser 中一个很棒的功能是它可以为你的应用程序生成帮助文本。你需要做的只有在特性中添加 &lt;code>HelpText&lt;/code> 属性，然后传递 &lt;code>--help&lt;/code> 参数的某人就会获取到帮助文本。&lt;/p>
&lt;p>例如，之前我们的 &lt;code>Options&lt;/code> 类可以更改为：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-csharp" data-lang="csharp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Options&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [Value(0, HelpText = &amp;#34;The file to display information for.&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">FilePath&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [Option(&amp;#39;d&amp;#39;, &amp;#34;detailed&amp;#34;, HelpText = &amp;#34;Whether to output detailed information about the file.&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="n">Detailed&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [Option(&amp;#39;o&amp;#39;, &amp;#34;output&amp;#34;, HelpText = &amp;#34;If specified, a file to output the results to.&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">Output&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后使用 &lt;code>--help&lt;/code> 参数运行应用程序，将会有以下输出：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">-d, --detailed Whether to output detailed information about the file.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-o, --output If specified, a file to output the results to.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--help Display this help screen.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--version Display version information.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">value pos. 0 The file to display information for.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这个文本会在解析参数失败的时候自动输出。&lt;/p>
&lt;p>你也可以给你的应用程序添加一个总结，包括一些使用的例子。这些玩意会被添加到帮助文本中。&lt;/p>
&lt;h2 id="结论">结论
&lt;/h2>&lt;p>Command Line Parser 带走了解析命令行选项相关的样板代码。我可以清楚的感觉到，这个库从有几个选项的小程序到巨大的复杂应用程序都很有用。&lt;/p>
&lt;p>我现在在一个未来博客（指&lt;a class="link" href="https://codingblog.carterdan.net/" target="_blank" rel="noopener"
>原作者的博客&lt;/a>）可能提到的足球比赛模拟器用到了这个库&amp;hellip;&lt;/p></description></item><item><title>中北大学七院宿舍情况</title><link>https://blog.gaein.cn/passages/dormitory-of-nuc/</link><pubDate>Mon, 26 Jul 2021 13:44:29 +0800</pubDate><guid>https://blog.gaein.cn/passages/dormitory-of-nuc/</guid><description>&lt;h2 id="宿舍概况">宿舍概况
&lt;/h2>&lt;p>七院的宿舍楼包括：&lt;/p>
&lt;ol>
&lt;li>男宿：文瀛五（六层）、文瀛六（三层）、文瀛九（三层，公主坟）、文瀛十三（三层）、文瀛十七（六层，回字楼）；&lt;/li>
&lt;li>女宿：文瀛十（六层，公主楼）、文瀛十七（六层，回字楼）。&lt;/li>
&lt;/ol>
&lt;p>其中，文瀛五、十为同一类型建筑，内部设施相似，条件优良。文瀛六、九、十三为同一类型，较老，条件很差。文瀛十七为“回”字形楼宇，条件优良。&lt;/p>
&lt;blockquote>
&lt;p>目前文瀛九和文瀛十三两栋条件较差的宿舍已经被19、20级学长住满，&lt;strong>新生应该不会分配到这两栋楼&lt;/strong>。&lt;/p>&lt;/blockquote>
&lt;p>宿舍以班为单位随机分配，不够时可能出现不同班级混宿甚至不同专业混宿的状况。&lt;strong>大二专业分流时会重新分班，宿舍也会重新分配。&lt;/strong>&lt;/p>
&lt;h4 id="地理位置">地理位置
&lt;/h4>&lt;p>七院宿舍所在的文瀛苑位于学校西区，主操场西侧，柏林园东侧。位于第四食堂、食味坊、唐久超市、百特快餐、雅贤阁、民族食堂等地较近，就餐方便。距离主操场、主楼、图书馆等场地距离也不算远。&lt;/p>
&lt;h4 id="门禁供电">门禁&amp;amp;供电
&lt;/h4>&lt;ol>
&lt;li>工作日：晚上11点停止供电并锁门；&lt;/li>
&lt;li>周末：晚上11点30停止供电并锁门；&lt;/li>
&lt;li>除周末外的节假日：晚上11点30锁门，通宵供电。&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>部分特殊时期（比如毕业生毕业）可能会通宵供电。&lt;/p>&lt;/blockquote>
&lt;p>如果回宿舍已经锁门可以敲门窗联系楼管开门，尽量不要回来太晚。&lt;/p>
&lt;h4 id="公共设施">公共设施
&lt;/h4>&lt;ol>
&lt;li>宿舍每层都有水房，可以用学校发的一卡通接热水。水房自来水免费用；&lt;/li>
&lt;li>宿舍楼内有澡堂，使用一卡通刷淋浴，不能调节水温，大部分情况下温度还算合理；&lt;/li>
&lt;li>宿舍楼内有洗衣房，洗衣机使用手机付款洗衣服；&lt;/li>
&lt;li>部分楼（如文瀛9）的部分厕所为“贯穿式”比较恶心，大部分厕所是一人一坑；&lt;/li>
&lt;li>文瀛五、文瀛十、文瀛十七等条件较好的宿舍有阳台、独立卫生间和楼顶自习室；文瀛九、文瀛十三等宿舍没有。&lt;/li>
&lt;/ol>
&lt;h4 id="寝室设施">寝室设施
&lt;/h4>&lt;p>七院寝室均为六人间（不排除可能有部分大宿舍）、上下铺，铺位大小为 190cm x 90cm，可以自备床上用品。&lt;/p>
&lt;ol>
&lt;li>&lt;strong>宿舍内均没有空调和电扇；&lt;/strong>&lt;/li>
&lt;li>宿舍内每人一个衣柜，上下两层，内有衣杆和镜子等；&lt;/li>
&lt;li>宿舍六人合用一张大桌子，桌子有抽屉，配六个凳子；&lt;/li>
&lt;li>文瀛九、文瀛十三等宿舍部分宿舍有晾衣绳，部分宿舍没有晾衣绳但是有绳子挂钩；&lt;/li>
&lt;li>文瀛十三内楼道有晾衣杆，文瀛九没有；&lt;/li>
&lt;li>文瀛九部分宿舍有地板，其余宿舍为水泥地，文瀛十三没有地板；&lt;/li>
&lt;li>宿舍内设有网线接口，宿舍总线带宽为100M，据说单人限速为20M，可以连接网线校园网访问内网（或公网）。&lt;/li>
&lt;/ol>
&lt;h2 id="具体宿舍情况">具体宿舍情况
&lt;/h2>&lt;p>文瀛苑主要分为3层和6层的楼，3层的条件较差，没有独卫阳台；6层的条件较好，有独卫阳台。&lt;/p>
&lt;h4 id="文瀛五">文瀛五
&lt;/h4>&lt;p>男宿。目前为部分20级学生在住。&lt;/p>
&lt;p>西区较好。独立卫生间和阳台（露天和不露天的都有），铁皮衣柜，瓷砖地板。&lt;/p>
&lt;p>距离柏林园北侧的篮球场较近，离第四食堂等隔一栋楼，楼下有报亭可以买零食。&lt;/p>
&lt;h4 id="文瀛六">文瀛六
&lt;/h4>&lt;p>男宿。目前为很少一部分20级学生在住。&lt;/p>
&lt;p>西区较差。没有独立厕所和阳台，铁皮衣柜，水泥地。&lt;/p>
&lt;p>位于文瀛五北边。&lt;/p>
&lt;h4 id="文瀛九">文瀛九
&lt;/h4>&lt;p>男宿。目前为一少部分19级和一部分20级学生在住。&lt;/p>
&lt;p>西区较差。没有独立厕所和阳台，铁皮衣柜，少部分宿舍有地板。&lt;/p>
&lt;p>东临第四食堂、百特快餐等就餐地点（一条路都是），附近有唐久超市和报亭。&lt;/p>
&lt;h4 id="文瀛十">文瀛十
&lt;/h4>&lt;p>女宿。目前为一部分20级学生在住。&lt;/p>
&lt;p>西区较好。独立卫生间和阳台（露天和不露天的都有），铁皮衣柜，瓷砖地板。&lt;/p>
&lt;p>位于文瀛九南边。&lt;/p>
&lt;h4 id="文瀛十三">文瀛十三
&lt;/h4>&lt;p>男宿。目前为大部分19级学生在住。&lt;/p>
&lt;p>西区最差。没有独立厕所和阳台，水泥地。&lt;/p>
&lt;p>东临麦港（主要是早餐和小吃）以及超市和理发店等，西边有报亭可以买零食。&lt;/p>
&lt;h4 id="文瀛十七">文瀛十七
&lt;/h4>&lt;p>男宿。目前为一部分18级学生在住。&lt;/p>
&lt;p>女宿。目前为一校部分20级学生在住。&lt;/p>
&lt;blockquote>
&lt;p>男女宿舍区域是分开的，只是同在一栋楼。&lt;/p>&lt;/blockquote>
&lt;p>东临主操场，西边是麦港（主要是早餐和小吃）以及超市和理发店等，南边是南环路。&lt;/p>
&lt;p>由于楼宇设计特殊，称为“回”字楼，经常有各种表白、喊楼整活。&lt;/p>
&lt;h2 id="另请参阅">另请参阅
&lt;/h2>&lt;p>&lt;a class="link" href="https://umb.ink/2021/07/26/%E9%9D%A2%E5%90%91%E5%AD%A6%E5%BC%9F%E5%AD%A6%E5%A6%B9%E7%9A%84%E6%9C%AC%E6%A0%A1%E5%AE%BF%E8%88%8D%E7%AE%80%E4%BB%8B/" target="_blank" rel="noopener"
>面向学弟学妹的本校宿舍简介 - UmbのBlog&lt;/a>&lt;/p></description></item><item><title>C#实现使用微软账户集成登录</title><link>https://blog.gaein.cn/passages/ms-account-integrated-signin-via-cssharp/</link><pubDate>Fri, 09 Jul 2021 04:49:35 +0800</pubDate><guid>https://blog.gaein.cn/passages/ms-account-integrated-signin-via-cssharp/</guid><description>&lt;h2 id="版权声明">版权声明
&lt;/h2>&lt;blockquote>
&lt;p>&amp;ldquo;&lt;a class="link" href="https://anduin.aiursoft.com/post/2020/3/18/microsoft-account-integrated-sign-in-via-c#" target="_blank" rel="noopener"
>Microsoft account integrated sign in via C#&lt;/a>&amp;rdquo; by &lt;a class="link" href="https://anduin.aiursoft.com/" target="_blank" rel="noopener"
>Anduin Xue&lt;/a>, used under &lt;a class="link" href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener"
>CC AS 4.0&lt;/a>, ‎translate from original.&lt;/p>
&lt;p>本文翻译自 &lt;a class="link" href="https://anduin.aiursoft.com/" target="_blank" rel="noopener"
>Anduin Xue&lt;/a> 的 &amp;ldquo;&lt;a class="link" href="https://anduin.aiursoft.com/post/2020/3/18/microsoft-account-integrated-sign-in-via-c#" target="_blank" rel="noopener"
>Microsoft account integrated sign in via C#&lt;/a>&amp;rdquo; ，依据 &lt;a class="link" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" target="_blank" rel="noopener"
>CC AS 4.0&lt;/a> 协议授权。&lt;/p>&lt;/blockquote>
&lt;hr>
&lt;p>下面的简单代码说明了如何构建一个支持使用 Microsoft 账户的 OAuth 身份认证。&lt;/p>
&lt;p>在开始打代码之前，我们需要在你的 Azure portal 中先创建一个App。 &lt;a class="link" href="https://portal.azure.com" target="_blank" rel="noopener"
>https://portal.azure.com&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/MS-Account-Integrated-SignIn-via-CSsharp/01.webp"
loading="lazy"
alt="azure portal"
>&lt;/p>
&lt;p>这个名字是你的App显示的名字。选中让你的应用可以访问任何组织账号和个人账号的那项。至于重定向URI，它必须是你的服务器重定向地址，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://gateway.aiursoft.com/debug
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/MS-Account-Integrated-SignIn-via-CSsharp/02.webp"
loading="lazy"
alt="创建应用"
>&lt;/p>
&lt;p>创建完应用后，在这里复制你的 application id：&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/MS-Account-Integrated-SignIn-via-CSsharp/03.webp"
loading="lazy"
alt="app id"
>&lt;/p>
&lt;p>然后创建一个 secret。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/MS-Account-Integrated-SignIn-via-CSsharp/04.webp"
loading="lazy"
alt="secret"
>&lt;/p>
&lt;p>别忘了复制那个 secret。&lt;/p>
&lt;p>运行下面说的代码需要一些像 &lt;code>AiurUrl&lt;/code> 和 &lt;code>Aiursoft.XelNaga.Services.HTTPService&lt;/code> 这样的类。运行下面这行命令来获取：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ dotnet add package Aiursoft.XelNaga
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>为了让用户登录，我们需要重定向到微软的登录门户。复制以下的代码：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-csharp" data-lang="csharp">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">GetBindRedirectLink&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">AiurUrl&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;https://login.microsoftonline.com&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">$&amp;#34;/{_tenant}/oauth2/v2.0/authorize&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">MicrosoftAuthAddressModel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ClientId&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">_clientId&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">RedirectUri&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;https://gateway.aiursoft.com/debug&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ResponseType&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Scope&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;user.read&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">State&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}).&lt;/span>&lt;span class="n">ToString&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-csharp" data-lang="csharp">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">MicrosoftAuthAddressModel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [FromQuery(Name = &amp;#34;client_id&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">ClientId&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [FromQuery(Name = &amp;#34;redirect_uri&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">RedirectUri&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [FromQuery(Name = &amp;#34;state&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">State&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [FromQuery(Name = &amp;#34;scope&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">Scope&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [FromQuery(Name = &amp;#34;response_type&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">ResponseType&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>只需要返回给浏览器一个&lt;code>redirect result&lt;/code> 和从 &lt;code>GetRedirectLink()&lt;/code> 函数获取到的重定向链接。&lt;/p>
&lt;p>用户成功的登录了他的账户的时候，将会带着一个码重定向回到你设置的 &lt;code>RedirectUri&lt;/code>。这个码正式我们需要的。&lt;/p>
&lt;p>通过这个码，你可以调用 &lt;code>GetUserDetail()&lt;/code> 方法来获取用户的信息。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">IUserDetail&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">GetUserDetail&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">code&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">token&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">GetAccessToken&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">_clientId&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">_clientSecret&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">code&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">GetUserInfo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>_clientId&lt;/code> 和 &lt;code>_clientSecret&lt;/code> 是你创建这个 app 时候复制的。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">private&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">GetAccessToken&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">clientId&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">clientSecret&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">code&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">apiAddress&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;https://login.microsoftonline.com&amp;#34;&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="s">$&amp;#34;/{_tenant}/oauth2/v2.0/token&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">url&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">AiurUrl&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">apiAddress&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">form&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">AiurUrl&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Empty&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">MicrosoftAccessTokenAddressModel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ClientId&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">clientId&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ClientSecret&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">clientSecret&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Code&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">code&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Scope&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;user.read&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">RedirectUri&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;https://gateway.aiursoft.com/debug&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">GrantType&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;authorization_code&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">json&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">_http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Post&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">form&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">response&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">JsonConvert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">DeserializeObject&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">AccessTokenResponse&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">IsNullOrWhiteSpace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AccessToken&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">AiurAPIModelException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ErrorType&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Unauthorized&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Invalid Microsoft crenditial&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AccessToken&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">catch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">WebException&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">AiurAPIModelException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ErrorType&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Unauthorized&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Invalid Microsoft API response&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">MicrosoftAccessTokenAddressModel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [FromQuery(Name = &amp;#34;client_id&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">ClientId&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [FromQuery(Name = &amp;#34;client_secret&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">ClientSecret&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [FromQuery(Name = &amp;#34;code&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">Code&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [FromQuery(Name = &amp;#34;scope&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">Scope&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [FromQuery(Name = &amp;#34;grant_type&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">GrantType&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [FromQuery(Name = &amp;#34;redirect_uri&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">RedirectUri&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>GetAccessToken()&lt;/code> 方法能够帮助你获取一个有效的能够让你下载到用户信息的 access token。&lt;/p>
&lt;p>你拿到了 access token 之后，只需要调用 &lt;code>GetUserInfo()&lt;/code> 即可。下面我们将调用 graph API 来获取当前用户的信息。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">private&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">MicrosoftUserDetail&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">GetUserInfo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">accessToken&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">apiAddress&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;https://graph.microsoft.com/v1.0/me&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">request&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">HttpRequestMessage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">HttpMethod&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Get&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">apiAddress&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Headers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Authorization&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">$&amp;#34;Bearer {accessToken}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">response&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">_client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SendAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">request&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">IsSuccessStatusCode&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">json&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Content&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ReadAsStringAsync&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">user&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">JsonConvert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">DeserializeObject&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">MicrosoftUserDetail&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">user&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">WebException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ReasonPhrase&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>返回的用户是一个 &lt;code>MicrosoftUserDetail&lt;/code> 的实例。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">MicrosoftUserDetail&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">IUserDetail&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [JsonProperty(&amp;#34;id&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">Id&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [JsonProperty(&amp;#34;displayName&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">DisplayName&lt;/span>&lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [JsonProperty(&amp;#34;userPrincipalName&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">UserPrincipalName&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [JsonProperty(&amp;#34;jobTitle&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">JobTitle&lt;/span>&lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Id 是唯一的，可以使用这个来认证你的用户。&lt;/p>
&lt;p>最后，构建一个个性化的网页，然后你的app就行力。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/MS-Account-Integrated-SignIn-via-CSsharp/05.webp"
loading="lazy"
alt="网页"
>&lt;/p>
&lt;p>源代码在这：&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/AiursoftWeb/Nexus/blob/master/Pylon/Services/Authentication/ToMicrosoftServer/MicrosoftService.cs" target="_blank" rel="noopener"
>https://github.com/AiursoftWeb/Nexus/blob/master/Pylon/Services/Authentication/ToMicrosoftServer/MicrosoftService.cs&lt;/a>&lt;/p>
&lt;p>This work is licensed under a &lt;a class="link" href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener"
>Creative Commons Attribution-ShareAlike 4.0 International License&lt;/a>&lt;/p></description></item><item><title>常见公共DNS服务&amp;Linux和Windows下修改DNS的方法</title><link>https://blog.gaein.cn/passages/use-public-dns-and-configure-dns/</link><pubDate>Sat, 12 Jun 2021 14:57:12 +0800</pubDate><guid>https://blog.gaein.cn/passages/use-public-dns-and-configure-dns/</guid><description>&lt;p>因为校园网 DNS 污染，导致我无法连接 &lt;code>githubusercontent.com&lt;/code> ，所以准备更换一个公共 DNS。以下为常见的一些公共 DNS 服务。&lt;/p>
&lt;p>DNS 全称是 Domain Name System ，可以理解为负责把域名变成 IP 的一个玩意。&lt;/p>
&lt;blockquote>
&lt;p>注：所有 IPv6 地址均无阿里云测试，因为我服务器没有 v6。目前只有这两三种网络测试，选择 DNS 时候还是自己 ping 一下看看。&lt;/p>&lt;/blockquote>
&lt;h2 id="常见公共-dns-服务">常见公共 DNS 服务
&lt;/h2>&lt;h3 id="阿里-dns">阿里 DNS
&lt;/h3>&lt;p>网址: &lt;a class="link" href="https://alidns.com/" target="_blank" rel="noopener"
>https://alidns.com/&lt;/a>&lt;/p>
&lt;h4 id="ipv6">IPv6
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>主 DNS&lt;/th>
&lt;th>辅 DNS&lt;/th>
&lt;th>太原电信&lt;/th>
&lt;th>唐山电信&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>2400:3200::1&lt;/td>
&lt;td>2400:3200:baba::1&lt;/td>
&lt;td>10ms&lt;/td>
&lt;td>19ms&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="ipv4">IPv4
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>主 DNS&lt;/th>
&lt;th>辅 DNS&lt;/th>
&lt;th>太原电信&lt;/th>
&lt;th>唐山电信&lt;/th>
&lt;th>北京阿里云&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>223.5.5.5&lt;/td>
&lt;td>223.6.6.6&lt;/td>
&lt;td>15ms&lt;/td>
&lt;td>20ms&lt;/td>
&lt;td>4ms&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="百度-dns">百度 DNS
&lt;/h3>&lt;p>网址: &lt;a class="link" href="https://dudns.baidu.com/" target="_blank" rel="noopener"
>https://dudns.baidu.com/&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>主 DNS&lt;/th>
&lt;th>辅 DNS&lt;/th>
&lt;th>太原电信&lt;/th>
&lt;th>唐山电信&lt;/th>
&lt;th>北京阿里云&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>180.76.76.76&lt;/td>
&lt;td>无&lt;/td>
&lt;td>13ms&lt;/td>
&lt;td>18ms&lt;/td>
&lt;td>5ms&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="dnspod腾讯">DNSPOD（腾讯）
&lt;/h3>&lt;p>网址: &lt;a class="link" href="https://www.dnspod.cn/products/public.dns" target="_blank" rel="noopener"
>https://www.dnspod.cn/products/public.dns&lt;/a>&lt;/p>
&lt;h4 id="免费版">免费版
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>主 DNS&lt;/th>
&lt;th>辅 DNS&lt;/th>
&lt;th>太原电信&lt;/th>
&lt;th>唐山电信&lt;/th>
&lt;th>北京阿里云&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>119.29.29.29&lt;/td>
&lt;td>无&lt;/td>
&lt;td>12ms&lt;/td>
&lt;td>21ms&lt;/td>
&lt;td>7ms&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="专业版">专业版
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>主 DNS&lt;/th>
&lt;th>辅 DNS&lt;/th>
&lt;th>太原电信&lt;/th>
&lt;th>北京阿里云&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>见控制台&lt;/td>
&lt;td>见控制台&lt;/td>
&lt;td>20ms&lt;/td>
&lt;td>未测试&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="114dns">114DNS
&lt;/h3>&lt;p>网址: &lt;a class="link" href="https://www.114dns.com/" target="_blank" rel="noopener"
>https://www.114dns.com/&lt;/a>&lt;/p>
&lt;h4 id="无劫持">无劫持
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>主 DNS&lt;/th>
&lt;th>辅 DNS&lt;/th>
&lt;th>太原电信&lt;/th>
&lt;th>唐山电信&lt;/th>
&lt;th>北京阿里云&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>114.114.114.114&lt;/td>
&lt;td>114.114.115.115&lt;/td>
&lt;td>33ms&lt;/td>
&lt;td>34ms&lt;/td>
&lt;td>29ms&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="拦截-钓鱼病毒木马网站">拦截 钓鱼病毒木马网站
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>主 DNS&lt;/th>
&lt;th>辅 DNS&lt;/th>
&lt;th>太原电信&lt;/th>
&lt;th>唐山电信&lt;/th>
&lt;th>北京阿里云&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>114.114.114.119&lt;/td>
&lt;td>114.114.115.119&lt;/td>
&lt;td>34ms&lt;/td>
&lt;td>34ms&lt;/td>
&lt;td>29ms&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="拦截-色情网站">拦截 色情网站
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>主 DNS&lt;/th>
&lt;th>辅 DNS&lt;/th>
&lt;th>太原电信&lt;/th>
&lt;th>唐山电信&lt;/th>
&lt;th>北京阿里云&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>114.114.114.110&lt;/td>
&lt;td>114.114.115.110&lt;/td>
&lt;td>47ms&lt;/td>
&lt;td>36ms&lt;/td>
&lt;td>31ms&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="google-public-dns">Google Public DNS
&lt;/h3>&lt;p>网址: &lt;a class="link" href="https://dns.google.com/" target="_blank" rel="noopener"
>https://dns.google.com/&lt;/a>&lt;/p>
&lt;h4 id="ipv6-1">IPv6
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>主 DNS&lt;/th>
&lt;th>辅 DNS&lt;/th>
&lt;th>太原电信&lt;/th>
&lt;th>唐山电信&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>2001:4860:4860::8888&lt;/td>
&lt;td>2001:4860:4860::8844&lt;/td>
&lt;td>43ms&lt;/td>
&lt;td>253ms&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="ipv4-1">IPv4
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>主 DNS&lt;/th>
&lt;th>辅 DNS&lt;/th>
&lt;th>太原电信&lt;/th>
&lt;th>唐山电信&lt;/th>
&lt;th>北京阿里云&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>8.8.8.8&lt;/td>
&lt;td>8.8.4.4&lt;/td>
&lt;td>58ms&lt;/td>
&lt;td>49ms&lt;/td>
&lt;td>54ms&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="1111">1.1.1.1
&lt;/h3>&lt;p>网址: https://1.1.1.1/dns/&lt;/p>
&lt;h4 id="ipv6-2">IPv6
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>主 DNS&lt;/th>
&lt;th>辅 DNS&lt;/th>
&lt;th>太原电信&lt;/th>
&lt;th>唐山电信&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>2606:4700:4700::1111&lt;/td>
&lt;td>2606:4700:4700::1001&lt;/td>
&lt;td>79ms&lt;/td>
&lt;td>202ms&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="ipv4-2">IPv4
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>主 DNS&lt;/th>
&lt;th>辅 DNS&lt;/th>
&lt;th>太原电信&lt;/th>
&lt;th>唐山电信&lt;/th>
&lt;th>北京阿里云&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1.1.1.1&lt;/td>
&lt;td>1.0.0.1&lt;/td>
&lt;td>188ms（辅）&lt;/td>
&lt;td>165ms&lt;/td>
&lt;td>165ms&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="配置-dns">配置 DNS
&lt;/h2>&lt;h3 id="windows-10">Windows 10
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>点击右下角网络图标，然后点击&amp;quot;Network &amp;amp; Internat settings&amp;quot;；
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Public-DNS-and-configure-DNS/01.webp"
loading="lazy"
alt="图标"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>点击正在使用的网络（比如我的是&amp;quot;Ethernet&amp;quot;，如果你在使用 WiFi 这里应该会显示&amp;quot;Wi-Fi&amp;quot;），点击&amp;quot;Properties&amp;quot;；
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Public-DNS-and-configure-DNS/02.webp"
loading="lazy"
alt="设置页面"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在 &amp;ldquo;IP Settings&amp;rdquo; 处点击 &amp;ldquo;Edit&amp;rdquo;，依次输入 &amp;ldquo;Preferred DNS&amp;rdquo; 和 &amp;ldquo;Alternate DNS&amp;rdquo;，如果有 IPv6 那么在下面的 &amp;ldquo;IPv6&amp;rdquo; 栏的对应位置输入 IPv6 DNS。
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Public-DNS-and-configure-DNS/03.webp"
loading="lazy"
alt="输入DNS"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="ubuntu">Ubuntu
&lt;/h3>&lt;p>我手里只有 Ubuntu，其它 Linux 如何配置未知。貌似更改 &lt;code>/etc/resolv.conf&lt;/code> 是通用方法。&lt;/p>
&lt;p>由于我们使用的是 Ubuntu，Ubuntu 的 DNS 是由 systemd-resolve 来管理的，因此我们不需要手动更新 &lt;code>/etc/resolv.conf&lt;/code> （事实上更新了也会被覆盖）。&lt;/p>
&lt;p>更好的方法还可以考虑使用 Netplan 来管理 DNS ， 详见 &lt;a class="link" href="https://netplan.io/examples/#using-dhcp-and-static-addressing" target="_blank" rel="noopener"
>Using DHCP and static addressing&lt;/a> 中 &lt;code>nameservers&lt;/code> 一章的配置。&lt;/p>
&lt;p>关于错误示范请见我在 18 年干的傻事：&lt;/p>
&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/Fix-Ubuntu-DNS-Error/" target="_blank" rel="noopener"
>Ubuntu 下 apt“无法解析域名”解决方案&lt;/a>&lt;/p>
&lt;ol>
&lt;li>确定使用的是 systemd 管理的解析服务：使用命令 &lt;code>systemd-resolve --status&lt;/code> 查看服务状态；&lt;/li>
&lt;li>编辑 DNS 文件：&lt;code>/etc/systemd/resolved.conf&lt;/code>&lt;br>
&lt;code>DNS&lt;/code> 为 DNS 地址，可以配置多个 DNS，用空格隔开。&lt;br>
&lt;code>FallbackDNS&lt;/code> 为备用 DNS，同理。
比如：
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[Resolve]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DNS=223.5.5.5 119.29.29.29 180.76.76.76
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">FallbackDNS=223.6.6.6
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;p>另请参阅：&lt;a class="link" href="https://fedoramagazine.org/use-dns-over-tls/" target="_blank" rel="noopener"
>Use DNS over TLS - Fedora Magazine&lt;/a>&lt;/p></description></item><item><title>C# 中集合和 LINQ 的排序</title><link>https://blog.gaein.cn/passages/csharp-orderby-customed-comparer/</link><pubDate>Fri, 11 Jun 2021 19:39:59 +0800</pubDate><guid>https://blog.gaein.cn/passages/csharp-orderby-customed-comparer/</guid><description>&lt;h2 id="集合的排序-sort-方法">集合的排序—— &lt;code>Sort&lt;/code> 方法
&lt;/h2>&lt;p>&lt;code>Array&lt;/code> 类提供了 &lt;code>Sort&lt;/code> 静态方法，使用快排算法对集合中的元素进行排序。
&lt;code>List&amp;lt;T&amp;gt;&lt;/code> 泛型类提供了 &lt;code>Sort&lt;/code> 方法，使用快排。&lt;/p>
&lt;h3 id="不使用自定义的排序">不使用自定义的排序
&lt;/h3>&lt;blockquote>
&lt;p>注意：使用无参数重载的 &lt;code>Sort&lt;/code> 方法，需要实现 &lt;code>IComparable&lt;/code> 接口。简单类型 &lt;code>System.String&lt;/code> 和 &lt;code>System.Int32&lt;/code> 等实现 &lt;code>IComparable&lt;/code> 接口，所以可以对包含这些类型的元素的数组进行排序。&lt;/p>&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System.Linq&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">array&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">7&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">9&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">list&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">array&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToList&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Array&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Sort&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">list&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Sort&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">foreach&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">item&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="n">array&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;{item} &amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sc">&amp;#39;\n&amp;#39;&lt;/span>&lt;span class="p">);.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">foreach&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">item&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="n">list&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;{item} &amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>输出&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="p">-&lt;/span>&lt;span class="m">2&lt;/span> &lt;span class="m">3&lt;/span> &lt;span class="m">5&lt;/span> &lt;span class="m">7&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">-&lt;/span>&lt;span class="m">2&lt;/span> &lt;span class="m">3&lt;/span> &lt;span class="m">5&lt;/span> &lt;span class="m">7&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="自定义规则的排序">自定义规则的排序
&lt;/h3>&lt;h4 id="传入比较器实例">传入比较器实例
&lt;/h4>&lt;p>&lt;code>Array&lt;/code> 和 &lt;code>List&amp;lt;T&amp;gt;&lt;/code> 泛型类的 &lt;code>Sort&lt;/code> 方法都有接受实现 &lt;code>IComparer&lt;/code> 接口的类的实例对象的重载。&lt;/p>
&lt;h5 id="显示定义比较器类">显示定义比较器类
&lt;/h5>&lt;p>定义类继承于 &lt;code>Comparer&amp;lt;T&amp;gt;&lt;/code> 泛型类，避免拆箱装箱的额外开销，并且保证类型安全，并且实现 &lt;code>Compare(T, T)&lt;/code> 方法：&lt;/p>
&lt;blockquote>
&lt;p>注意：也可以继承于 &lt;code>IComparer&lt;/code> 和 &lt;code>IComparer&amp;lt;T&amp;gt;&lt;/code> 接口，但是这不是Microsoft 建议的做法：&lt;br>
“建议从 Comparer&lt;T> 类派生，而不是实现 IComparer&lt;T> 接口，因为 Comparer&lt;T> 该类提供方法的显式接口实现 IComparer.Compare 和 Default 获取对象的默认比较器的属性。”&lt;/p>&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">MyComparer&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">Comparer&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">override&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">Compare&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">xPositive&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">yPositive&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">xPositive&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CompareTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">yPositive&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>返回值的规则为：&lt;/p>
&lt;ul>
&lt;li>当 &lt;code>x&lt;/code> 应该在 &lt;code>y&lt;/code> 的 &lt;strong>前面&lt;/strong> 的时候（也就是 &lt;code>x&lt;/code> &lt;strong>小于&lt;/strong> &lt;code>y&lt;/code>），返回小于0的数字（-1）&lt;/li>
&lt;li>当 &lt;code>x&lt;/code> 应该在 &lt;code>y&lt;/code> 的 &lt;strong>后面&lt;/strong> 的时候（也就是 &lt;code>x&lt;/code> &lt;strong>大于&lt;/strong> &lt;code>y&lt;/code>），返回大于0的数字（1）&lt;/li>
&lt;li>当 &lt;code>null&lt;/code> 参与比较时不应该引发异常，且为 &lt;code>null&lt;/code> 的对象应在其它对象 &lt;strong>前面&lt;/strong>（也就是说 &lt;strong>小于&lt;/strong> 任何其它对象）&lt;/li>
&lt;/ul>
&lt;h6 id="另请参阅">另请参阅：
&lt;/h6>&lt;p>&lt;a class="link" href="https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.icomparer?view=net-5.0" target="_blank" rel="noopener"
>IComparer 接口 (System.Collections) | Microsoft Docs&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.icomparer-1?view=net-5.0" target="_blank" rel="noopener"
>IComparer&lt;T> 接口 (System.Collections.Generic) | Microsoft Docs&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.comparer-1?view=net-5.0" target="_blank" rel="noopener"
>Comparer&lt;T> 类 (System.Collections.Generic) | Microsoft Docs&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.comparer-1.compare?view=net-5.0" target="_blank" rel="noopener"
>&amp;ldquo;Comparer&lt;T>.Compare(T, T) 方法 (System.Collections.Generic) | Microsoft Docs&amp;rdquo;&lt;/a>&lt;/p>
&lt;h5 id="使用-comparertcreate-方法和匿名函数创建比较器">使用 &lt;code>Comparer&amp;lt;T&amp;gt;.Create&lt;/code> 方法和匿名函数创建比较器
&lt;/h5>&lt;p>&lt;code>Create&lt;/code> 方法用指定的比较创建一个比较器。&lt;/p>
&lt;p>该方法的参数是一个 &lt;code>Comparison&amp;lt;T&amp;gt;&lt;/code> 类型的委托。可以使用 lambda 表达式直接创建一个匿名函数委托。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">array&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">7&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">9&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">comparer&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Comparer&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">&amp;gt;.&lt;/span>&lt;span class="n">Create&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">CompareTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Array&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Sort&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">comparer&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>或者直接&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">array&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">7&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">9&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Array&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Sort&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Comparer&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">&amp;gt;.&lt;/span>&lt;span class="n">Create&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">CompareTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>关于 lambda 表达式可以看我的这篇笔记：&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note6-Delegates-lambda-Expressions-and-Events/" target="_blank" rel="noopener"
>CSharp的委托、lambda 表达式和事件 - CSharp笔记 —— 博客 | Gaein nidb 的网站&lt;/a>&lt;/p>
&lt;p>箭头前的 &lt;code>x&lt;/code> &lt;code>y&lt;/code> 为两个参数，类型为自动推断的int（如果编译器不能推断可以手动加上类型来指定），只有一个参数的时候可以省略箭头前面的括号。&lt;/p>
&lt;p>箭头后为表达式体，只有一行语句的时候可以在箭头后直接书写语句，该语句的返回值将作为匿名方法返回值。如果有多行语句，使用花括号框成代码块，并且使用 &lt;code>return&lt;/code> 关键字返回值。&lt;/p>
&lt;p>变量 &lt;code>comparer&lt;/code> 为 &lt;code>Comparer&amp;lt;int&amp;gt;&lt;/code> 的实例，作为参数传入 &lt;code>Array.Sort&lt;/code> 方法即可。&lt;/p>
&lt;h6 id="另请参阅-1">另请参阅：
&lt;/h6>&lt;p>&lt;a class="link" href="https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.comparer-1?view=net-5.0" target="_blank" rel="noopener"
>Comparer&lt;T> 类 (System.Collections.Generic) | Microsoft Docs&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.comparer-1.create?view=net-5.0" target="_blank" rel="noopener"
>Comparer&lt;T>.Create(Comparison&lt;T>) 方法 (System.Collections.Generic) | Microsoft Docs&lt;/a>&lt;/p>
&lt;h4 id="传入委托的比较方法">传入委托的比较方法
&lt;/h4>&lt;p>&lt;code>Array&lt;/code> 类和 &lt;code>List&amp;lt;T&amp;gt;&lt;/code> 泛型类也都有 &lt;code>Comparison&amp;lt;T&amp;gt;&lt;/code> 类型参数的重载，所以可以直接使用 lambda 创建匿名函数传入 &lt;code>Sort&lt;/code> 方法。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">array&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">7&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">9&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">list&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">array&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToList&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Array&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Sort&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">CompareTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">list&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Sort&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">CompareTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>没错，把 &lt;code>Create&lt;/code> 方法的参数扔这里就好了（那我前面是什么废话）。&lt;/p>
&lt;h2 id="linq的排序-orderby-方法">LINQ的排序—— &lt;code>OrderBy&lt;/code> 方法
&lt;/h2>&lt;p>&lt;code>OrderBy&lt;/code> 方法用于升序排序，&lt;code>orderby&lt;/code> 子句会被编译器转换为对 OrderBy 方法的调用。&lt;/p>
&lt;h3 id="不使用自定义的排序-1">不使用自定义的排序
&lt;/h3>&lt;p>使用重载 &lt;code>OrderBy&amp;lt;TSource,TKey&amp;gt;(IEnumerable&amp;lt;TSource&amp;gt;, Func&amp;lt;TSource,TKey&amp;gt;)&lt;/code> 来使用默认的比较器进行升序排序：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System.Linq&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">arr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">7&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">9&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">arr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">OrderBy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">ToList&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">ForEach&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>输出为&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">-2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="自定义规则的排序-1">自定义规则的排序
&lt;/h3>&lt;p>LINQ 的 &lt;code>OrderBy&lt;/code> 方法没有像 &lt;code>Array&lt;/code> 和 &lt;code>List&amp;lt;T&amp;gt;&lt;/code> 一样的传入 &lt;code>Comparison&amp;lt;T&amp;gt;&lt;/code> 类型委托的重载。它只提供了重载 &lt;code>OrderBy&amp;lt;TSource,TKey&amp;gt;(IEnumerable&amp;lt;TSource&amp;gt;, Func&amp;lt;TSource,TKey&amp;gt;, IComparer&amp;lt;TKey&amp;gt;)&lt;/code> 。因此，我们不能在参数表里传入 lambda 表达式创建匿名方法来比较。只能创建类并继承于 &lt;code>Comparer&amp;lt;T&amp;gt;&lt;/code> ，或者使用 &lt;code>Comparer&amp;lt;T&amp;gt;.Create&lt;/code> 方法并传入用于比较的匿名方法。&lt;/p>
&lt;p>当需要多次进行这种比较时推荐创建自定义的类，并且实例化一个对象多次使用。或者创建一个变量来存储 &lt;code>Comparer&amp;lt;T&amp;gt;.Create&lt;/code> 创建的对象。&lt;/p>
&lt;p>比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">files&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">DirectoryInfo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Directory&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetCurrentDirectory&lt;/span>&lt;span class="p">()).&lt;/span>&lt;span class="n">GetFiles&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">ToList&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">comparer&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">MyComparer&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 使用创建的类的实例&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">listAfterSort1&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">files&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">OrderBy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">comparer&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">ToList&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 使用 Comparer&amp;lt;T&amp;gt;.Create 传参委托的匿名函数创建&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">listAfterSort2&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">files&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">OrderBy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Comparer&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">&amp;gt;.&lt;/span>&lt;span class="n">Create&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">string&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Compare&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">StringComparison&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Ordinal&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">MyComparer&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">Comparer&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">override&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">Compare&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Compare&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">StringComparison&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Ordinal&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>注意：这种情况实际上是不需要自定义比较器的，为了演示才这么写的（因为我懒得想例子）&lt;/p>&lt;/blockquote></description></item><item><title>【过期内容】Adobe Premiere 导入 mkv 格式的视频</title><link>https://blog.gaein.cn/passages/import-hevc-for-old-adobe-premiere/</link><pubDate>Wed, 12 May 2021 22:32:26 +0800</pubDate><guid>https://blog.gaein.cn/passages/import-hevc-for-old-adobe-premiere/</guid><description>&lt;blockquote>
&lt;p>注意：此内容已过期。Adobe Premiere 不能导入的本质原因的 PR 2020 前的版本不支持 HEVC/H.265 编码。旧版本使用 ffmpeg 进行转码即可正常使用，新版本没有此问题。&lt;br>
有关视频编码、容器、格式等见：&lt;a class="link" href="https://blog.gaein.cn/passages/live-streaming-protocols/" target="_blank" rel="noopener"
>直播推流常见协议及网页端实现 RTMP/STR/FLV/HLS/WebRTC&lt;/a>&lt;br>
此文章内所述较为片面。&lt;/p>&lt;/blockquote>
&lt;h2 id="mkv">mkv
&lt;/h2>&lt;p>mkv格式本身是一个“容器”，它包括了视频、音频、章节等，其实，不需要转码，只需要把需要的视频和音频“拆”出来即可。&lt;/p>
&lt;h2 id="工具">工具
&lt;/h2>&lt;h3 id="mkvtoolnix">MKVToolNix
&lt;/h3>&lt;p>该工具用于操作mkv文件（虽然我们只需要其中的解包部分）&lt;/p>
&lt;ul>
&lt;li>官网：https://mkvtoolnix.download/&lt;/li>
&lt;li>Windows下载：https://www.fosshub.com/MKVToolNix.html&lt;/li>
&lt;/ul>
&lt;h3 id="mkvextractgui2">MKVExtractGUI2
&lt;/h3>&lt;p>图形化界面的解包mkv的程序，需要放置在 MKVToolNix 的根目录下。&lt;/p>
&lt;p>目录结构如下：&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/AdobePr-import-mkv/01.webp"
loading="lazy"
alt="Dir"
>&lt;/p>
&lt;ul>
&lt;li>sourceforge：https://sourceforge.net/projects/mkvextractgui-2/&lt;/li>
&lt;/ul>
&lt;h2 id="提取音视频">提取音视频
&lt;/h2>&lt;p>可以直接双击点开 &lt;code>MKVExtractGUI2&lt;/code> ，选择 &lt;code>input&lt;/code> ，下面的框中将显示出来 Tracks，选择需要的然后导出即可。&lt;/p>
&lt;blockquote>
&lt;p>可惜我的并不能用，它什么也不显示，只能手动来一波了。&lt;/p>&lt;/blockquote>
&lt;h2 id="提取音视频命令行">提取音视频（命令行）
&lt;/h2>&lt;p>实际上 MKVExtractGUI2 也是调用的 MKVToolNix 命令行来提取的，而 MKVToolNix 的图形化又比较复杂，不会用。直接使用命令行甚至会方便一些。&lt;/p>
&lt;p>在当前目录打开 powershell 后，输入：&lt;/p>
&lt;p>&lt;code>.\mkvinfo.exe &amp;quot;&amp;lt;mkv文件路径&amp;gt;&amp;quot;&lt;/code> ，比如我这个是 &lt;code>.\mkvinfo.exe &amp;quot;C:\Users\Gaein_nidb\Videos\High School Fleet [01].mkv&amp;quot;&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/AdobePr-import-mkv/02.webp"
loading="lazy"
alt="Output"
>&lt;/p>
&lt;p>以VCB-S压制的 High School Fleet/高校舰队 为例，程序会输出一大坨mkv的信息，我们需要关注的为 &lt;code>Tracks&lt;/code> ，其中的每一个 &lt;code>Track&lt;/code> 为一条轨道，其中包括：&lt;/p>
&lt;ul>
&lt;li>&lt;code>Track number&lt;/code>：轨道ID（在mkvextract工具中轨道ID从0开始）&lt;/li>
&lt;li>&lt;code>Track type&lt;/code>：轨道的类型（视频或音频等）&lt;/li>
&lt;li>&lt;code>Codec ID&lt;/code>：编码ID&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>以上均用 &amp;ldquo;//&amp;rdquo; 做了伪注释&lt;/p>&lt;/blockquote>
&lt;p>以及一些其它重要信息&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">|+ Tracks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Track // 第一条轨道
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Track number: 1 (track ID for mkvmerge &amp;amp; mkvextract: 0) // 在mkvextract工具中轨道ID为0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Track UID: 16171542915234837125
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Track type: video // 视频
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + &amp;#34;Lacing&amp;#34; flag: 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Minimum cache: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Codec ID: V_MPEGH/ISO/HEVC // 格式为HEVC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Language: und
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Video track
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Pixel width: 1920
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Pixel height: 1080
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Display width: 1920
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Display height: 1080
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Codec&amp;#39;s private data: size 1151 (HEVC profile: Main 10 @L4.1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Default duration: 00:00:00.041708333 (23.976 frames/fields per second for a video track)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Track // 第二条轨道
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Track number: 2 (track ID for mkvmerge &amp;amp; mkvextract: 1) // ID为1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Track UID: 11899936184913956278
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Track type: audio // 音频
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Codec ID: A_FLAC // 格式为flac
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Codec&amp;#39;s private data: size 113
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Default duration: 00:00:00.085333333 (11.719 frames/fields per second for a video track)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Language: jpn
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Audio track
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Sampling frequency: 48000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Channels: 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Bit depth: 24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Track // 第三条轨道
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Track number: 3 (track ID for mkvmerge &amp;amp; mkvextract: 2) // ID为2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Track UID: 10563629169812897935
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Track type: audio // 音频
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + &amp;#34;Default track&amp;#34; flag: 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Codec ID: A_AAC // 格式为ACC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Codec&amp;#39;s private data: size 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Default duration: 00:00:00.021333333 (46.875 frames/fields per second for a video track)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Language: jpn
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Audio track
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Sampling frequency: 48000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + Channels: 2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>那么我们需要提取的有：&lt;/p>
&lt;ol>
&lt;li>HEVC视频，轨道0&lt;/li>
&lt;li>FLAC音频，轨道1&lt;/li>
&lt;/ol>
&lt;p>当然你想要ACC不要FLAC也行，咋都行，看需求而来&lt;/p>
&lt;p>使用 &lt;code>mkvextract&lt;/code> 工具来解mkv文件，输入命令：&lt;/p>
&lt;p>&lt;code>.\mkvextract.exe &amp;quot;&amp;lt;mkv文件&amp;gt;&amp;quot; tracks 0:video.hevc 1:audio.flac&lt;/code>&lt;/p>
&lt;p>其中，tracks后面的参数为 &lt;code>&amp;lt;轨道ID&amp;gt;:&amp;lt;输出文件&amp;gt;&lt;/code> ，根据你想解的轨道，输入上面看信息看到的轨道ID即可。&lt;/p>
&lt;p>然后，在这个文件夹中，我们得到了 &lt;code>video.hevc&lt;/code> 和 &lt;code>audio.flac&lt;/code> 两个文件。&lt;/p>
&lt;h2 id="导入pr">导入PR
&lt;/h2>&lt;p>尽管我们已经解开了，但是仍然不能导入，PR会说不支持的文件格式。&lt;/p>
&lt;p>&lt;del>对于视频来说，解决的方法很简单：更改后缀名为PR能识别的，比如 &lt;code>mp4&lt;/code>&lt;/del>&lt;/p>
&lt;p>&lt;del>对于flac音频来说：更改后缀名为 &lt;code>wav&lt;/code>&lt;/del>&lt;/p>
&lt;p>请使用 ffmpeg 或其他工具进行 re-mux 或 re-enc&lt;/p></description></item><item><title>C#的委托、lambda 表达式和事件 - C#笔记</title><link>https://blog.gaein.cn/passages/csharp-note6-delegates-lambda-expressions-and-events/</link><pubDate>Wed, 05 May 2021 21:23:03 +0800</pubDate><guid>https://blog.gaein.cn/passages/csharp-note6-delegates-lambda-expressions-and-events/</guid><description>&lt;h2 id="目录">目录
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note1-Basic/" target="_blank" rel="noopener"
>C#基础&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note2-OOP/" target="_blank" rel="noopener"
>C#面向对象&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note3-Generics-Type/" target="_blank" rel="noopener"
>C#泛型&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note4-Operators-and-TypeCasts/" target="_blank" rel="noopener"
>C#运算符和强制类型转换&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note5-Array/" target="_blank" rel="noopener"
>C#中数组的使用&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note6-Delegates-lambda-Expressions-and-Events/" target="_blank" rel="noopener"
>C#的委托、lambda 表达式和事件&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note7-String-and-Regular/" target="_blank" rel="noopener"
>C#字符串和正则表达式&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="委托lambda-表达式和事件">委托、lambda 表达式和事件
&lt;/h2>&lt;h3 id="8---委托lambda-表达式和事件">8 - 委托、lambda 表达式和事件
&lt;/h3>&lt;h4 id="81---引用方法">8.1 - 引用方法
&lt;/h4>&lt;p>委托是寻址方法的 &lt;code>.NET&lt;/code> 版本。在C++中，函数指针只不过是一个指向内存位置的指针，我们不知道它实际指向什么，参数和返回类型就更无从知晓了。而 &lt;code>.NET&lt;/code> 的委托是安全的，它定义了返回类型和参数的类型，它不仅包含对方法的引用，也可以包含对多个方法的引用。&lt;/p>
&lt;p>lambda 表达式与委托直接相关。当参数是委托类型的时候，就可以使用 lambda 表达式实现委托引用的方法。&lt;/p>
&lt;h4 id="82---委托">8.2 - 委托
&lt;/h4>&lt;p>当要把方法作为参数传递给方法的时候，就需要使用委托。&lt;/p>
&lt;h5 id="821---声明委托">8.2.1 - 声明委托
&lt;/h5>&lt;p>首先必须定义要使用的委托，对于委托，定义就是告诉编译器这种类型的委托表示哪种类型的方法。然后必须将委托实例化，编译器将在后台创建该委托的一个类。&lt;/p>
&lt;p>语法如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">delegate&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">IntMethodInvoker&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>声明了一个类型为 &lt;code>IntMethodInvoker&lt;/code> 的委托，交给委托的方法带有一个 &lt;code>int&lt;/code> 类型的参数，并且返回 &lt;code>void&lt;/code>。在定义委托的时候必须指定好方法的参数和返回类型，这样才安全嘛。&lt;/p>
&lt;p>委托语法类似于方法的定义，但是没有主体，而且要加上关键字 &lt;code>delegate&lt;/code> 。因为委托基本上算是定义一个新类，所以基本上来说，在能定义类的地方就能定义委托。可以在类的内部定义委托，也可以和类平级。还可以给委托加上修饰符：&lt;code>public&lt;/code> 、 &lt;code>private&lt;/code> 、 &lt;code>protected&lt;/code> 等。&lt;/p>
&lt;h5 id="822---使用委托">8.2.2 - 使用委托
&lt;/h5>&lt;p>可以使用委托的“构造函数”向内传递一个方法的名字来创建一个委托：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">private&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">GetString&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// 声明委托&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">Main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="p">=&lt;/span>&lt;span class="m">40&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">invokeMethod&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">GetString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToString&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 将方法委托给 invokeMethod&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">invokeMethod&lt;/span>&lt;span class="p">());&lt;/span> &lt;span class="c1">// 执行了 invokeMethod，invokeMethod 又执行了 x.ToString 方法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在CSharp中，委托在语法上总是接受一个参数类型的构造函数，这个参数就是委托所引用的方法。这个方法必须要匹配定义委托时候的签名。&lt;/p>
&lt;p>实际上，使用 &lt;code>invokeMethod()&lt;/code> 和 &lt;code>invokeMethod.Invoke()&lt;/code> 完全相同。&lt;/p>
&lt;p>为了减少输入量，在需要委托实例的每个位置都可以只传送方法名称，这称为委托推断：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">invokeMethod&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">GetString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToString&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">invokeMethod2&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToString&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 等价&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>注意：不要输入圆括号，仅输入方法名代表了方法的地址，而使用圆括号则是调用了方法并返回一个值。&lt;/p>&lt;/blockquote>
&lt;p>除了实例一个委托之外，还能实例委托的数组：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">GetString&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">methods&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span>&lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">x&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToString&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">y&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToString&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 返回 string 类型并且不接受参数的方法都行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="824---action-和-func">8.2.4 - Action&lt;T> 和 Func&lt;T>
&lt;/h5>&lt;p>为每个参数和返回类型都定义一个委托太麻烦了，所以可以使用 &lt;code>Action&amp;lt;T&amp;gt;&lt;/code> 和 &lt;code>Func&amp;lt;T&amp;gt;&lt;/code> 委托。&lt;/p>
&lt;p>泛型 &lt;code>Action&amp;lt;T&amp;gt;&lt;/code> 代表引用一个 &lt;code>void&lt;/code> 返回类型的委托。没有泛型参数的 &lt;code>Action&amp;lt;T&amp;gt;&lt;/code> 类可以调用没有参数的方法。&lt;code>Action&amp;lt;in T&amp;gt;&lt;/code> 调用带一个参数（类型为 &lt;code>T&lt;/code>）的方法，以此类推，&lt;code>Action&amp;lt;in T1, in T2&amp;gt;&lt;/code> 调用带两个参数的方法。最多有16个参数。&lt;/p>
&lt;p>泛型 &lt;code>Func&amp;lt;T&amp;gt;&lt;/code> 可以引用有返回类型的委托， &lt;code>Func&amp;lt;out TResult&amp;gt;&lt;/code> 委托类型可以调用带返回类型且无参数的委托。而 &lt;code>Func&amp;lt;in T, out TResult&amp;gt;&lt;/code> 委托类型可以调用带一个参数的方法，最后一个泛型是返回类型。&lt;/p>
&lt;h5 id="826---多播委托">8.2.6 - 多播委托
&lt;/h5>&lt;p>委托也可以包含多个方法，这种委托也可以包含多个方法。这种委托称为多播委托。如果调用多播委托，就可以按照顺序连续调用多个方法。所以，多播委托方法的返回类型必须为 &lt;code>void&lt;/code> ；否则，只能获取最后一个调用的委托的方法结果。&lt;/p>
&lt;p>多播委托重载了运算符 &lt;code>+&lt;/code> 以及 &lt;code>+=&lt;/code> ，可以通过 &lt;code>+&lt;/code> 来为多播委托添加一个方法。当然，也重载了 &lt;code>-&lt;/code> 和 &lt;code>-=&lt;/code> ，可以使用 &lt;code>-&lt;/code> 运算符移除一个方法。&lt;/p>
&lt;blockquote>
&lt;p>注意：对同一个委托，调用其方法链的顺序并未定义，因此，应&lt;strong>避免编写依赖于特定顺序调用的代码&lt;/strong>。&lt;/p>&lt;/blockquote>
&lt;p>多播委托包含一个逐个调用的委托集合。如果通过委托调用其中一个方法抛出了异常，整个迭代就会终止，剩余委托的方法即使是正常的也不会被调用。&lt;/p>
&lt;p>为了避免这种问题，应该自己迭代方法列表。 &lt;code>Delegate&lt;/code> 类定义了 &lt;code>GetInvocationList&lt;/code> 方法，它返回一个 &lt;code>Delegate&lt;/code> 对象数组。&lt;/p>
&lt;h5 id="827---匿名方法">8.2.7 - 匿名方法
&lt;/h5>&lt;blockquote>
&lt;p>注意：这种匿名方法的语法在CSharp2中引入。在新的程序中，并不需要这个语法，lambda 表达式明显比这个好用。&lt;/p>&lt;/blockquote>
&lt;p>语法如下，大致看看就得了：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">mid&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;, middle part,&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Func&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">annoDel&lt;/span> &lt;span class="p">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">delegate&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">param&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">param&lt;/span> &lt;span class="p">+=&lt;/span> &lt;span class="n">mid&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">param&lt;/span> &lt;span class="p">+=&lt;/span> &lt;span class="s">&amp;#34; and this was added to the string.&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">param&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 代码的第四行到第九行是匿名方法。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="83---lambda-表达式">8.3 - lambda 表达式
&lt;/h4>&lt;p>lambda 运算符 &lt;code>=&amp;gt;&lt;/code> 左边列出了需要的参数（一个参数可以省略括号），而右边定义了赋予 lambda 变量的方法的实现代码。&lt;/p>
&lt;h5 id="831---参数">8.3.1 - 参数
&lt;/h5>&lt;p>lambda 表达式有几种定义参数的方法，如果只有一个参数那就写出参数名就行了，编译器根据委托自动推断参数类型，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Func&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">oneParam&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">$&amp;#34;change uppercase {s.ToUpper()}&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>有多个参数的时候，将参数放在圆括号中，用逗号分隔。当然，为了方便起见，也可以在参数前加上类型。&lt;/p>
&lt;h5 id="832---多行代码">8.3.2 - 多行代码
&lt;/h5>&lt;p>如果 lambda 表达式只有一条语句，则不方法块内不需要花括号和 &lt;code>return&lt;/code> 语句，因为编译器会添加一条隐式的 &lt;code>return&lt;/code> 语句。但是如果 lambda 表达式的实现代码中需要多条语句，那么就要添加花括号和 &lt;code>return&lt;/code> 了。&lt;/p>
&lt;h5 id="833---闭包">8.3.3 - 闭包
&lt;/h5>&lt;p>通过 lambda 表达式可以访问表达式块外部的变量，这成为闭包。闭包是非常好用的功能，但是&lt;strong>使用不当也会造成大灾难&lt;/strong>。&lt;/p>
&lt;blockquote>
&lt;p>注意：如果给多个线程使用闭包，就可能遇到并发冲突。最好仅给闭包使用不可变的类型（readonly），这样就可以确保不改变值，也不需要同步。&lt;/p>&lt;/blockquote>
&lt;h4 id="84---事件">8.4 - 事件
&lt;/h4>&lt;p>事件基于委托，为委托提供了一种发布/订阅的机制。比如在桌面程序中：&lt;code>Button&lt;/code> 出发了 &lt;code>Click&lt;/code> 事件。这类事件就是委托。触发 &lt;code>Click&lt;/code> 事件时调用的处理程序方法需要得到定义，而其参数由委托定义。&lt;/p>
&lt;p>使用 &lt;code>event&lt;/code> 关键字来定义事件：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">namespace&lt;/span> &lt;span class="nn">Program&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 用于事件传参的参数，继承于 EventArgs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">CarInfoEventArgs&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">EventArgs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 构造函数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">CarInfoEventArgs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">car&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">Car&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">car&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">Car&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">CarDealer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 事件，需要在泛型中写出传递给它的参数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">event&lt;/span> &lt;span class="n">EventHandler&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">CarInfoEventArgs&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">NewCarInfo&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">NewCar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">car&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;new car {car}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 触发事件，第一个参数是触发者，第二个参数是传递的参数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">NewCarInfo&lt;/span>&lt;span class="p">?.&lt;/span>&lt;span class="n">Invoke&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">CarInfoEventArgs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">car&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>作为一个约定，事件通常用带两个参数的方法&lt;/p>
&lt;ol>
&lt;li>第一个参数是一个对象，包含事件的发送者。&lt;/li>
&lt;li>第二个参数提供了事件的相关信息。&lt;/li>
&lt;/ol>
&lt;p>&lt;code>EventHandler&amp;lt;TEventArgs&amp;gt;&lt;/code> 定义了一个处理程序，它返回 &lt;code>void&lt;/code> ，接受两个参数，第二个参数类型通过泛型指定，并且必须继承于 &lt;code>EventArgs&lt;/code> （上面代码中的 &lt;code>CarInfoEventArgs&lt;/code> 就是）。&lt;/p>
&lt;p>另外，事件有自动生成一个私有字段，类似于自动生成的属性访问器吧：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">event&lt;/span> &lt;span class="n">EventHandler&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">CarInfoEventArgs&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">NewCarInfo&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 简记&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">private&lt;/span> &lt;span class="n">EventHandler&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">CarInfoEventArgs&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">_newCarInfo2&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 写全&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">event&lt;/span> &lt;span class="n">EventHandler&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">CarInfoEventArgs&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">NewCarInfo2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">add&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">_newCarInfo&lt;/span> &lt;span class="p">+=&lt;/span> &lt;span class="k">value&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">remove&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">_newCarInfo&lt;/span> &lt;span class="p">-=&lt;/span> &lt;span class="k">value&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>CarDealer&lt;/code> 类通过调用委托的 &lt;code>Invoke&lt;/code> 方法来触发事件，这与多播委托一样，顺序无法保证的。&lt;/p>
&lt;h5 id="842---使劲按侦听器">8.4.2 - 使劲按侦听器
&lt;/h5>&lt;p>下面实现的 &lt;code>Consumer&lt;/code> 类用作事件的侦听器。这个类订阅了 &lt;code>CarDealer&lt;/code> 类的事件：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">Consumer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">_name&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 构造函数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">Consumer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">_name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 事件被触发时调用此方法，这个是被委托的方法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">NewCarIsHere&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">object&lt;/span> &lt;span class="n">sender&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">CarInfoEvent&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;{_name}: car {e.car} is new&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用 &lt;code>CarDealer&lt;/code> 类的 &lt;code>NewCarInfo&lt;/code> 事件（前面定义的那个 &lt;code>EventHandler&lt;/code> 类型的“变量”），通过 &lt;code>+=&lt;/code> 运算符创建一个订阅：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">dealer&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">CarDealer&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">consumer&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Consumer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dealer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">NewCarInfo&lt;/span> &lt;span class="p">+=&lt;/span> &lt;span class="n">consumer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">NewCarIsHere&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 添加订阅&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dealer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">NewCar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;B&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 这个方法会触发事件，然后执行委托&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>最后会输出：&lt;/p>
&lt;blockquote>
&lt;p>new car B&lt;/p>
&lt;p>A: car B is new&lt;/p>&lt;/blockquote></description></item><item><title>C#中数组的使用 - C#笔记</title><link>https://blog.gaein.cn/passages/csharp-note5-array/</link><pubDate>Mon, 03 May 2021 14:31:30 +0800</pubDate><guid>https://blog.gaein.cn/passages/csharp-note5-array/</guid><description>&lt;h2 id="目录">目录
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note1-Basic/" target="_blank" rel="noopener"
>C#基础&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note2-OOP/" target="_blank" rel="noopener"
>C#面向对象&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note3-Generics-Type/" target="_blank" rel="noopener"
>C#泛型&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note4-Operators-and-TypeCasts/" target="_blank" rel="noopener"
>C#运算符和强制类型转换&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note5-Array/" target="_blank" rel="noopener"
>C#中数组的使用&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note6-Delegates-lambda-Expressions-and-Events/" target="_blank" rel="noopener"
>C#的委托、lambda 表达式和事件&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note7-String-and-Regular/" target="_blank" rel="noopener"
>C#字符串和正则表达式&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="数组">数组
&lt;/h2>&lt;h3 id="7---数组">7 - 数组
&lt;/h3>&lt;h4 id="71---相同类型的多个对象">7.1 - 相同类型的多个对象
&lt;/h4>&lt;p>可以使用集合和数组，对于数量固定的可以使用数组。&lt;/p>
&lt;p>对于多个不同类型的对象可以使用类、结构或元组。&lt;/p>
&lt;h4 id="72---简单数组">7.2 - 简单数组
&lt;/h4>&lt;p>数组是一种数据结构，它可以包含同一类型的多个元素。&lt;/p>
&lt;h5 id="721---数组的声明">7.2.1 - 数组的声明
&lt;/h5>&lt;p>使用类型紧跟一对中括号来声明数组，后面跟标识符。比如，下面的代码声明了一个 &lt;code>int&lt;/code> 类型的数组：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">array&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="722---数组的初始化">7.2.2 - 数组的初始化
&lt;/h5>&lt;p>数组是引用类型，所以必须给它分配堆上的内存。应该使用 &lt;code>new&lt;/code> 运算符，指定元素的类型和数量来初始化数组的变量：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">array&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">8&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>上面的代码中 &lt;code>array&lt;/code> 引用了一个包含8个 &lt;code>int&lt;/code> 类型的元素的数组，它们位于托管堆上。&lt;/p>
&lt;blockquote>
&lt;p>注意：在指定了数组的大小后，如果不复制其中的所有元素就不能调整大小。而对于很大的数组来说复制数组是一场性能灾难，如果事先不知道包含多少个元素，应该使用集合。&lt;/p>&lt;/blockquote>
&lt;p>还可以使用数组初始化器为每个元素复制，数组初始化器只能在声明数组的时候使用，不能在声明之后使用。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">array&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">4&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">6&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">8&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果使用了初始化器（花括号那个）来初始化数组，可以不指定数组的大小，由编译器自动计算：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">daysOfMonthTable&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="m">31&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">28&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">31&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">31&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">31&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">31&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">31&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">31&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>当然，使用花括号可以同时声明和初始化数组：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">daysOfMonthTable&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="m">31&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">28&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">31&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">31&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">31&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">31&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">31&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">31&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="723-访问数组元素">7.2.3 访问数组元素
&lt;/h5>&lt;p>通过索引器传递元素编号，就可以访问数组。索引器总是从0开始，&lt;code>array[0]&lt;/code> 表示 &lt;code>array&lt;/code> 数组的第一个元素。&lt;/p>
&lt;p>如果不知道数组中元素的个数，又想遍历数组，可以在 &lt;code>for&lt;/code> 使用 &lt;code>array.Length&lt;/code> 属性：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">array&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Length&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>当然，也可以使用 &lt;code>foreach&lt;/code> 语句，但是 &lt;code>foreach&lt;/code> 不能更改其中的元素：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">foreach&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">item&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="n">array&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">item&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="724---使用引用类型">7.2.4 - 使用引用类型
&lt;/h5>&lt;p>除了能声明预定义类型的数组，还可以声明自定义类型的数组，语法同上：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Student&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">stu&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Student&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">60&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>声明完后每个元素的引用都是 &lt;code>null&lt;/code> ，因此，需要使用从0开始的索引器，可以为数组每个元素分配内存：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">stu&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Student&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Jack&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Class&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;5&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">stu&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Student&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;John&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Class&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;2&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>当然，也可以使用数组初始化器。&lt;/p>
&lt;h4 id="73---多维数组">7.3 - 多维数组
&lt;/h4>&lt;p>正如前面所见的，一维数组使用一个整数来索引，而多维数组使用多个整数来索引（比如我们可以用两个整数分别索引行和列）。&lt;/p>
&lt;p>在CSharp中声明一个二维数组可以在方括号中间加上一个逗号，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span>&lt;span class="p">[,]&lt;/span> &lt;span class="n">matrix&lt;/span> &lt;span class="p">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="m">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">6&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="m">7&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">8&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">9&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>显而易见，适用于一维数组的初始化器也能用。&lt;/p>
&lt;h4 id="74---锯齿数组">7.4 - 锯齿数组
&lt;/h4>&lt;p>锯齿数组的大小设置比较灵活，不像二维数组那样必须是“方方正正”的，锯齿数组中每一行都可以有不同的大小：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span>&lt;span class="p">[][]&lt;/span> &lt;span class="n">array&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="p">][];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">array&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">4&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">4&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">array&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="m">16&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">32&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">array&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="m">114514&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>定义时，第一个方括号里写行数，第二个留空。&lt;/p>
&lt;p>可以看作每个元素都是另外一个数组吧。&lt;/p>
&lt;h4 id="75---array-类">7.5 - Array 类
&lt;/h4>&lt;p>用方括号声明数组是CSharp中 &lt;code>Array&lt;/code> 类的表示法。在后台使用 &lt;code>CSharp&lt;/code> 语法，会创建一个派生自抽象基类 &lt;code>Array&lt;/code> 的新类。这样，就可以使用 &lt;code>Array&lt;/code> 类中的方法和属性了。&lt;/p>
&lt;h5 id="751---创建数组">7.5.1 - 创建数组
&lt;/h5>&lt;p>除了可以使用CSharp语法来创建数组实例之外，还可以使用静态方法 &lt;code>Array.CreateInstance&lt;/code> 来创建数组。如果事先不知道元素的类型，该静态方法就非常有用，因为类型可以作为 &lt;code>Type&lt;/code> 对象传递给 &lt;code>CreateInstance&lt;/code> 方法。&lt;/p>
&lt;p>还可以将用 &lt;code>CreateInstance&lt;/code> 方法创建好的数组强制转换为 &lt;code>int&lt;/code> 数组：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">array&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Array&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateInstance&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">typeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="m">6&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">arrayAfterConvert&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">[])&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="752---复制数组">7.5.2 - 复制数组
&lt;/h5>&lt;p>因为数组是引用类型，所以将数组的一个变量赋值给另外一个变量，得到是引用同一个数组的变量。使用 &lt;code>Clone&lt;/code> 方法可以复制数组：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">array1&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">array2&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">[])&lt;/span>&lt;span class="n">array1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Clone&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>Clone&lt;/code> 方法是浅复制，也就是说，如果数组的元素的引用类型，则仅复制引用而不深入复制值。&lt;/p>
&lt;p>还可以使用 &lt;code>Array.Copy&lt;/code> 方法创建浅表副本，与 &lt;code>Clone&lt;/code> 的区别是， &lt;code>Copy&lt;/code> 方法需要传递一个阶数仙童并且足够大的数组作为参数，而不是像 &lt;code>Clone&lt;/code> 创建并返回一个新数组。&lt;/p>
&lt;h5 id="753---排序">7.5.3 - 排序
&lt;/h5>&lt;p>&lt;code>Array&lt;/code> 类使用快排算法来对数组中的元素进行排序。&lt;code>Sort&lt;/code> 方法需要数组中的元素实现 &lt;code>IComparable&lt;/code> 接口。在简单类型中已经实现了该接口，所以可以直接进行排序。&lt;/p>
&lt;p>如果对数组使用自定义类，就实现 &lt;code>IComparable&lt;/code> 接口（或者它的泛型版本），这个接口定义了方法：&lt;code>Compare&lt;/code> ，该方法接受一个要被用来比较的对象作为参数：&lt;/p>
&lt;ul>
&lt;li>如果要比较的对象的相等，就返回0。&lt;/li>
&lt;li>如果该实例排在参数对象的前面，就返回小于0的值。&lt;/li>
&lt;li>如果该实例排在参数对象的后面，就返回大于0的值。&lt;/li>
&lt;/ul>
&lt;p>如果对象的排序方法与上述不同，或者不能修改数组元素中用作元素的类（即修改元素的类并添加继承自 &lt;code>IComparable&lt;/code> ），就可以考虑另外一个类（比如 &lt;code>Comparer&lt;/code> ）实现 &lt;code>IComparer&lt;/code> 接口或者其泛型版本。这两个接口定义了方法 &lt;code>Compare&lt;/code> ，这个方法接受两个参数：&lt;/p>
&lt;ul>
&lt;li>如果两个参数对象相等，就返回0。&lt;/li>
&lt;li>如果第一个参数在第二个参数前面，则返回小于0的值。&lt;/li>
&lt;li>如果第一个参数在第二个参数后面，则返回大于0的值。&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>Tips：&lt;code>Array&lt;/code> 类提供了 &lt;code>Sort&lt;/code> 方法，需要传递一个委托i作为参数，而不需要依赖 &lt;code>IComparer&lt;/code> 接口或者 &lt;code>IComparable&lt;/code> 接口。&lt;/p>&lt;/blockquote>
&lt;h4 id="76---数组作为参数">7.6 - 数组作为参数
&lt;/h4>&lt;p>要把数组传递给方法，就按着你想象的来就行了。将参数声明为数组：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">static&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">DisplayStudents&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Student&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">stu&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// code&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="77---数组协变">7.7 - 数组协变
&lt;/h4>&lt;p>数组支持协变，也就是说，可以把数组声明为基类，其它派生类的对象可以被赋予数组：&lt;/p>
&lt;blockquote>
&lt;p>注意：数组协变只能用于引用类型不能用于值类型。&lt;/p>&lt;/blockquote>
&lt;h4 id="78---枚举">7.8 - 枚举
&lt;/h4>&lt;p>在 &lt;code>foreach&lt;/code> 语句中使用枚举，可以迭代集合中的元素，且不需要知道集合中的元素个数。数组和集合实现了带 &lt;code>GetEnumerator&lt;/code> 方法的 &lt;code>IEnumerable&lt;/code> 接口。 &lt;code>GetEnumerator&lt;/code> 方法返回一个实现 &lt;code>IEnumerable&lt;/code> 接口的枚举。接着 &lt;code>foreach&lt;/code> 语句就可以使用 &lt;code>IEnumerable&lt;/code> 接口迭代集合了。&lt;/p>
&lt;h5 id="781---ienumerator-接口">7.8.1 - &lt;code>IEnumerator&lt;/code> 接口
&lt;/h5>&lt;p>&lt;code>foreach&lt;/code> 语句使用 &lt;code>IEnumerator&lt;/code> 接口的方法和属性，迭代集合中的所有元素。为此接口定义了 &lt;code>Current&lt;/code> 用来返回当前迭代的元素。&lt;/p>
&lt;p>&lt;code>MoveNext&lt;/code> 方法移动到下一个元素上，如果没有下一个元素则返回 &lt;code>false&lt;/code> ，移动成功则返回 &lt;code>true&lt;/code> 。&lt;/p>
&lt;h5 id="782---foreach-语句">7.8.2 - &lt;code>foreach&lt;/code> 语句
&lt;/h5>&lt;p>&lt;code>foreach&lt;/code> 首先调用 &lt;code>GetEnumerator&lt;/code> 方法获取一个枚举器，并且当 &lt;code>MoveNext&lt;/code> 方法返回 &lt;code>true&lt;/code> 时进行迭代。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">foreach&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">person&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="n">people&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">person&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>相当于：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">IEnumerator&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Person&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">enumerator&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">people&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetEnumerator&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">enumerator&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">MoveNext&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">person&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">enumerator&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Current&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">enumerator&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Current&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="783-yield-语句">7.8.3 &lt;code>yield&lt;/code> 语句
&lt;/h5>&lt;p>&lt;code>yield return&lt;/code> 语句返回集合的一个元素，并移动到下一个元素上。&lt;code>yield break&lt;/code> 可停止迭代。&lt;/p>
&lt;blockquote>
&lt;p>Tips：包含 &lt;code>yield&lt;/code> 语句的方法或属性也成为迭代块。迭代块必须声明为返回 &lt;code>IEnumerator&lt;/code> 或 &lt;code>IEnumerable&lt;/code> 接口，或者这写接口的泛型版本。这个块可以包含多条 &lt;code>yield return&lt;/code> 语句或 &lt;code>yield break&lt;/code> 语句，但不能包含 &lt;code>return&lt;/code> 语句。&lt;/p>&lt;/blockquote>
&lt;h6 id="1-迭代集合的不同方式">1. 迭代集合的不同方式
&lt;/h6>&lt;h6 id="2-用-yield-return-返回枚举器">2. 用 &lt;code>yield return&lt;/code> 返回枚举器
&lt;/h6>&lt;p>常见的使用方法是，用一个循环来迭代集合，然后每一次迭代来一个 &lt;code>yield return&lt;/code> 语句，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System.Collections.Generic&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">namespace&lt;/span> &lt;span class="nn">Test&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">Program&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">Main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">school&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">School&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">school&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="n">Student&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Jack&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">school&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="n">Student&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Jan&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">school&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="n">Student&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;John&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">school&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="n">Student&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Mack&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">4&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">school&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="n">Student&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Ann&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">foreach&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">student&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="n">school&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">Student&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">Student&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">uint&lt;/span> &lt;span class="n">grade&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="p">??&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArgumentNullException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nameof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Grade&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">grade&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">override&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">$&amp;#34;{Name} in {Grade}&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">Name&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">uint&lt;/span> &lt;span class="n">Grade&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">School&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">School&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">uint&lt;/span> &lt;span class="n">count&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Count&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">count&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Students&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Student&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">Count&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">_currentIndex&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">uint&lt;/span> &lt;span class="n">Count&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">Student&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">Students&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;summary&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// Add a student to school&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;/summary&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;param name=&amp;#34;stu&amp;#34;&amp;gt;Student Object&amp;lt;/param&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Student&lt;/span> &lt;span class="n">stu&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Students&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">_currentIndex&lt;/span>&lt;span class="p">++]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">stu&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">IEnumerator&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Student&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">GetEnumerator&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">Count&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">++)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">yield&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">Students&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>首先，定义了一个学生类 &lt;code>Student&lt;/code> ，其中含有学生的基础信息和一个用于实例化的构造函数以及重写的 &lt;code>ToString&lt;/code> 方法。&lt;/p>
&lt;p>然后，定义了另外一个类 &lt;code>School&lt;/code> ，在学校类中写了 &lt;code>Add&lt;/code> 方法来添加学生。另外实现了 &lt;code>GetEnumerator&lt;/code> 方法，由于在 &lt;code>foreach&lt;/code> 中的元素是 &lt;code>Student&lt;/code> 类的实例，因此类型为泛型的 &lt;code>IEnumerator&amp;lt;Student&amp;gt;&lt;/code> 。&lt;code>yield return&lt;/code> 返回每一次迭代的结果即可。&lt;/p>
&lt;h4 id="79---结构比较">7.9 - 结构比较
&lt;/h4>&lt;p>数组和元组都实现了接口 &lt;code>IStructuralEquatable&lt;/code> （用于进行内容比较是否相等）和 &lt;code>IStructuralComparable&lt;/code> （用于在排序时进行比较决定顺序）。这两个接口不仅可以比较引用，还可以比较内容。&lt;/p>
&lt;p>可以让需要的结构实现 &lt;code>IEquatable&lt;/code> 接口，这个接口定义了一个强化的 &lt;code>Equals&lt;/code> 方法。这个方法接收两个参数，第一个是 &lt;code>object&lt;/code> ，第二个是 &lt;code>IEquatableComparer&lt;/code> ：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="n">people&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">IEquatable&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">Equals&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">people2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">EqualityComparer&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Person&lt;/span>&lt;span class="p">&amp;gt;.&lt;/span>&lt;span class="n">Default&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Same&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="710---span">7.10 - Span
&lt;/h4>&lt;p>为了快速访问连续内存，可以使用 &lt;code>Span&amp;lt;T&amp;gt;&lt;/code> 结构。一个可以使用 &lt;code>Span&amp;lt;T&amp;gt;&lt;/code> 的例子是数组； &lt;code>Span&amp;lt;T&amp;gt;&lt;/code> 结构在后台保存在连续的内存中。&lt;/p>
&lt;p>使用 &lt;code>Span&amp;lt;T&amp;gt;&lt;/code> 可以直接访问数组元素。数组的元素没有复制，可以直接使用，这比复制要快（废话）。&lt;/p>
&lt;p>&lt;code>Span&lt;/code> 结构有个构造函数，把数组传参进去就行了，就能获得一个 &lt;code>Span&lt;/code>。&lt;/p>
&lt;h5 id="7101---创建切片">7.10.1 - 创建切片
&lt;/h5>&lt;p>&lt;code>Span&amp;lt;T&amp;gt;&lt;/code> 的一个强大功特性是，可以使用它创建访问数组的一部分或者是切片。使用切片时，不会复制数组元素，它们是从 &lt;code>Span&lt;/code> 直接访问的。&lt;/p>
&lt;p>调用 &lt;code>Slice&lt;/code> 方法，也可以从 &lt;code>Span&amp;lt;T&amp;gt;&lt;/code> 对象中创建一个切片。该方法接受两个参数：切片开始的索引号以及切片的长度。当然，也可以使用 &lt;code>Span&lt;/code> 的构造函数创建一个切片：第一个参数是数组，后面是切片开始的索引号和长度。&lt;/p>
&lt;p>如果以后不需要修改 &lt;code>Span&lt;/code> 引用的内容，可以使用 &lt;code>ReadOnlySpan&lt;/code> 这个类型，转换是隐式进行的。&lt;/p>
&lt;blockquote>
&lt;p>注意：&lt;code>Span&amp;lt;T&amp;gt;&lt;/code> 是安全的，不会出界破坏其它内存中的数据。如果创建的 &lt;code>Span&lt;/code> 超出了数组的长度，则会抛出 &lt;code>ArgumentOutOfRangeException&lt;/code> 异常。&lt;/p>&lt;/blockquote>
&lt;h5 id="7102---使用-span-改变值">7.10.2 - 使用 &lt;code>Span&lt;/code> 改变值
&lt;/h5>&lt;p>调用 &lt;code>Clear&lt;/code> 方法，使用 &lt;code>0&lt;/code> 填充 &lt;code>Span&amp;lt;int&amp;gt;&lt;/code> 。&lt;/p>
&lt;p>调用 &lt;code>Fill&lt;/code> 方法，使用传递的参数填充 &lt;code>Span&amp;lt;T&amp;gt;&lt;/code> 。&lt;/p>
&lt;p>调用 &lt;code>CopyTo&lt;/code> 方法，将一个 &lt;code>Span&lt;/code> 复制到另一个 &lt;code>Span&lt;/code> 中，如果目标不够大则会抛出 &lt;code>ArgumentException&lt;/code> 异常。调用 &lt;code>TryCopyTo&lt;/code> 方法来避免发生异常：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">span&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">TryCopyTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">newSpan&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;COPY SUCCESS&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="7103---只读的-span">7.10.3 - 只读的 &lt;code>Span&lt;/code>
&lt;/h5>&lt;p>如上文所说，对于不需要修改的 &lt;code>Span&lt;/code> 可以使用 &lt;code>ReadOnlySpan&amp;lt;T&amp;gt;&lt;/code> 类型，这种类型没有 &lt;code>Clear&lt;/code> 和 &lt;code>Fill&lt;/code> 等方法，但是可以调用 &lt;code>CopyTo&lt;/code> 复制到新的 &lt;code>Span&lt;/code> 。&lt;/p>
&lt;h5 id="711---数组池">7.11 - 数组池
&lt;/h5>&lt;p>如果一个应用程序创建、销毁了很多数组，那么GC酱就会很累。可以通过 &lt;code>ArrayPool&lt;/code> 类创建数组池。&lt;/p>
&lt;h6 id="7111---创建数组池">7.11.1 - 创建数组池
&lt;/h6>&lt;p>通过调用静态的 &lt;code>Create&lt;/code> 方法，就可以创建 &lt;code>ArrayPool&amp;lt;T&amp;gt;&lt;/code> 。使用 &lt;code>Create&lt;/code> 方法可以在创建之前定义最大的数组长度和数组的数量：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">arrPool&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">ArrayPool&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">&amp;gt;.&lt;/span>&lt;span class="n">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">maxArrayLength&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="m">8192&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">maxArraysPerBucket&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="m">4096&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>maxArrayLength&lt;/code> 的默认值是 1024x1024 字节，&lt;code>maxArraysPerBucket&lt;/code> 的默认值是 50 。数组池使用了多个桶，以便使用多个数组时更快。只要还没有达到数组的最大数量，大小类似的数组就尽可能保存在一个桶里。&lt;/p>
&lt;h5 id="1122---从池中租借内存">1.12.2 - 从池中租借内存
&lt;/h5>&lt;p>调用 &lt;code>Rent&lt;/code> 方法从池中租借内存。该方法接受应请求的最小数组长度。&lt;code>Rent&lt;/code> 方法返回一个数组，其中至少包含所请求的元素个数。返回的数组可能有更多的可用内存：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">arrayPool&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">ArrayPool&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">&amp;gt;.&lt;/span>&lt;span class="n">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">maxArrayLength&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="m">8192&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">maxArraysPerBucket&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="m">4096&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">array&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">arrayPool&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Rent&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">20&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Length&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// output: 32&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="1123---将内存返回给池">1.12.3 - 将内存返回给池
&lt;/h5>&lt;p>不再需要数组的时候，可以把内存返回回去。数组返回后，稍后可以使用一个 &lt;code>Rent&lt;/code> 来重用这些内存。&lt;/p>
&lt;p>调用数组池的 &lt;code>Return&lt;/code> 方法并将数组作为参数传递给它。这样返回后不会清除数组内的数据，也就是下次 &lt;code>Rent&lt;/code> 后还可以访问其中的数据。为此该方法还有一个可选参数，指定在返回池之前是否清空它。&lt;/p></description></item><item><title>C#字符串和正则表达式 - C#笔记</title><link>https://blog.gaein.cn/passages/csharp-note7-string-and-regular/</link><pubDate>Mon, 03 May 2021 14:31:30 +0800</pubDate><guid>https://blog.gaein.cn/passages/csharp-note7-string-and-regular/</guid><description>&lt;h2 id="目录">目录
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note1-Basic/" target="_blank" rel="noopener"
>C#基础&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note2-OOP/" target="_blank" rel="noopener"
>C#面向对象&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note3-Generics-Type/" target="_blank" rel="noopener"
>C#泛型&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note4-Operators-and-TypeCasts/" target="_blank" rel="noopener"
>C#运算符和强制类型转换&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note5-Array/" target="_blank" rel="noopener"
>C#中数组的使用&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note6-Delegates-lambda-Expressions-and-Events/" target="_blank" rel="noopener"
>C#的委托、lambda 表达式和事件&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note7-String-and-Regular/" target="_blank" rel="noopener"
>C#字符串和正则表达式&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="字符串和正则表达式">字符串和正则表达式
&lt;/h2>&lt;h3 id="9---字符串和正则表达式">9 - 字符串和正则表达式
&lt;/h3>&lt;h4 id="91---systemstring-类">9.1 - System.String 类
&lt;/h4>&lt;p>在CSharp中，&lt;code>string&lt;/code> 关键字的映射实际上指向 &lt;code>.NET&lt;/code> 基类 &lt;code>System.String&lt;/code> 。 &lt;code>System.String&lt;/code> 是一个功能非常强大且用途广泛的基类。&lt;/p>
&lt;p>使用运算符重载可以连接字符串：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">str&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Hello&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">str1&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;World&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">msg&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">str&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="n">str1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">msg&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// HelloWorld&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>CSharp还允许使用索引器来提取指定的字符串：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">msg&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;HelloWorld&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">msg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">4&lt;/span>&lt;span class="p">]);&lt;/span> &lt;span class="c1">// o&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>System.String&lt;/code> 类常见的方法有：&lt;/p>
&lt;ul>
&lt;li>&lt;code>Compare&lt;/code>：比较字符串的内容，考虑区域原因（比如不同区域的日期格式、货币等）。&lt;/li>
&lt;li>&lt;code>CompareOrdinal&lt;/code>：同上，不考虑区域。&lt;/li>
&lt;li>&lt;code>Concat&lt;/code>：把多个字符串实例合并为一个实例。&lt;/li>
&lt;li>&lt;code>CopyTo&lt;/code>：把从选定下标开始的特定数量的字符复制到一个新实例中。&lt;/li>
&lt;li>&lt;code>Format&lt;/code>：格式化包含各种值的字符串和如何格式化的说明符。&lt;/li>
&lt;li>&lt;code>IndexOf&lt;/code>：字符串中第一次出现某个给定子字符或字符的为止。&lt;/li>
&lt;li>&lt;code>IndexOfAny&lt;/code>：字符串中第一次出现某个字符或一组字符的位置。&lt;/li>
&lt;li>&lt;code>Insert&lt;/code>：把一个字符串实例插入到另外一个字符串实例指定的索引处。&lt;/li>
&lt;li>&lt;code>Join&lt;/code>：合并字符串数组，创建一个新的字符串。&lt;/li>
&lt;li>&lt;code>LastIndexOf&lt;/code>：与 &lt;code>IndexOf&lt;/code> 一样，从后往前查找。&lt;/li>
&lt;li>&lt;code>LastIndexOfAny&lt;/code>：与 &lt;code>IndexOfAny&lt;/code> 一样，从后往前找。&lt;/li>
&lt;li>&lt;code>PadLeft&lt;/code>：在字符串的左侧，通过添加指定的重复字符来填充字符串。&lt;/li>
&lt;li>&lt;code>PadRight&lt;/code>：同上，在字符串右侧。&lt;/li>
&lt;li>&lt;code>Replace&lt;/code>：用另一个字符或子字符串替换字符串中给定的字符或子字符串。&lt;/li>
&lt;li>&lt;code>Split&lt;/code>：用给定字符作为分隔符分隔字符串。&lt;/li>
&lt;li>&lt;code>SubString&lt;/code>：从字符串中获取指定位置的子字符串。&lt;/li>
&lt;li>&lt;code>ToLower&lt;/code>：转换成小写。&lt;/li>
&lt;li>&lt;code>ToUpper&lt;/code>：转换成大写。&lt;/li>
&lt;li>&lt;code>Trim&lt;/code>：删除首尾的空白。&lt;/li>
&lt;/ul>
&lt;h5 id="911---构建字符串">9.1.1 - 构建字符串
&lt;/h5>&lt;p>&lt;code>Spring&lt;/code> 类存在一个问题：重复修改给定的字符串，效率会很低，它实际上是一个不可变的数据类型，表面上修改字符串内容的方法和运算符实际上是创建了一个新字符串并将内容复制过去。&lt;/p>
&lt;p>&lt;code>StringBuilder&lt;/code> 类不像 &lt;code>String&lt;/code> 类那样支持非常多的方法。它仅限于替换和追加或删除字符串中的文本。但是它的工作方式非常高效。&lt;/p>
&lt;p>通常情况下，&lt;code>StringBuilder&lt;/code> 类分配的内存比它需要的多，在默认情况下就根据初始化实例时的字符串长度来确定所用内存的大小。这个类有两个主要的属性：&lt;/p>
&lt;ul>
&lt;li>&lt;code>Length&lt;/code>：字符串的实际长度；&lt;/li>
&lt;li>&lt;code>Capacity&lt;/code>：在内存中分配的最大长度；&lt;/li>
&lt;/ul>
&lt;p>对字符串的修改就在赋予 &lt;code>StringBuilder&lt;/code> 实例的内存中进行，这就大大提高了追加或替换单个字符的效率，插入和删除子字符（串）的效率依然不高，因为要移动后面的字符串。&lt;/p>
&lt;blockquote>
&lt;p>最好把容量设置为字符串可能的最大长度，确保 &lt;code>StringBuilder&lt;/code> 类不需要重新分配内存。&lt;/p>&lt;/blockquote>
&lt;p>一般而言，使用 &lt;code>StringBuilder&lt;/code> 类执行字符串的任何操作，而 &lt;code>String&lt;/code> 类用于存储字符串或显示最后结果。&lt;/p>
&lt;h5 id="912---字符串插值">9.1.2 - 字符串插值
&lt;/h5>&lt;p>使用 &lt;code>$&lt;/code> 前缀创建字符串，在花括号中可以包含占位符来引用代码，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Jack&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">msg&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">$&amp;#34;Hello { name }, Welcome!&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">msg&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// Hello Jack, Welcome!&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>注意，这只是个语法糖，编译器会创建 &lt;code>String.Format&lt;/code> 方法的调用。
&lt;code>StringFormat&lt;/code> 方法的第一个参数接受一个格式字符串，其中的占位符从0开始，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Jack&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">msg&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">String&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hello { 0 }, Welcome!&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">msg&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="formattablestring">FormattableString
&lt;/h6>&lt;p>把字符串赋予 &lt;code>FormattableString&lt;/code> ，就很容易得到翻译过来的插值字符串。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">4&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FormattableString&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">$&amp;#34;The result of { x } and { y } is { x + y }&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;Format: { s.Format } &amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">foreach&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ArgumentCount&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;Argument { i }: { s.GetArgument(i) }&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>输出为：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">Format: The result of &lt;span class="o">{&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="o">}&lt;/span> + &lt;span class="o">{&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="o">}&lt;/span> is &lt;span class="o">{&lt;/span> &lt;span class="m">2&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Argument 0: &lt;span class="m">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Argument 1: &lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Argument 2: &lt;span class="m">7&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="给字符串插值使用其他区域值">给字符串插值使用其他区域值
&lt;/h6>&lt;p>辅助方法 &lt;code>Invariant&lt;/code> 把插值字符串改为使用不变的区域值，而不是当前的区域值。将 &lt;code>CultureInfo.InvariantCulture&lt;/code> 传递给 &lt;code>IFormatProvide&lt;/code> 参数，就可以使用不变的区域值：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">FormattableString&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Invariant&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;Date: {$day:d}&amp;#34;&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>注：区域值就是对于某些特殊的字符串（比如时间、日期），在不同的区域有不同的格式。&lt;/p>&lt;/blockquote>
&lt;h6 id="转义花括号">转义花括号
&lt;/h6>&lt;p>使用两个花括号来转义插值字符串中的花括号：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;{{}}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>输出：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="922-日期时间和数字的格式">9.2.2 日期时间和数字的格式
&lt;/h5>&lt;p>在占位符中，格式字符串跟在表达式后面，用冒号隔开：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">day&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">DateTime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1949&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;{day:D}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;{day:d}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>用大写字母 &lt;code>D&lt;/code> 表示长日期格式字符串，用小写字母 &lt;code>d&lt;/code> 表示短日期字符串。&lt;/p>
&lt;p>输出：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Saturday, October 1, 1949
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10/1/1949
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>根据系统的语言设置，输出可能不同。&lt;/p>
&lt;blockquote>
&lt;p>另请参阅： &lt;a class="link" href="https://docs.microsoft.com/en-us/dotnet/standard/base-types/standard-date-and-time-format-strings" target="_blank" rel="noopener"
>Standard date and time format strings | Microsoft Docs&lt;/a>&lt;/p>&lt;/blockquote>
&lt;p>使用 &lt;code>n&lt;/code> 用分隔符（逗号）表示数字， &lt;code>e&lt;/code> 表示指数表示法， &lt;code>x&lt;/code> 表示转换为十六进制， &lt;code>c&lt;/code> 显示为货币。&lt;/p>
&lt;p>还可以使用占位符：&lt;/p>
&lt;ol>
&lt;li>数字占位符 &lt;code>#&lt;/code>：如果数字可用则显示数字，不可用则不显示；&lt;/li>
&lt;li>零占位符 &lt;code>0&lt;/code>：如果数字可用则显示数字，不可用则显示 0；&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>另请参阅：&lt;a class="link" href="https://docs.microsoft.com/en-us/dotnet/standard/base-types/standard-numeric-format-strings" target="_blank" rel="noopener"
>Standard numeric format strings | Microsoft Docs&lt;/a>&lt;/p>&lt;/blockquote>
&lt;h5 id="923-自定义字符串格式">9.2.3 自定义字符串格式
&lt;/h5>&lt;p>可以为自己的类型创建自定义格式字符串。为此，需要实现接口 &lt;code>IFormattable&lt;/code>。&lt;/p>
&lt;p>为实现自定义格式字符串，接口 &lt;code>IFormattable&lt;/code> 实现了带两个参数的 &lt;code>ToString&lt;/code> 重载：第一个参数是格式字符串，第二个参数是 &lt;code>IFormatProvider&lt;/code>。这个参数用于基于区域值进行不同显示。&lt;/p>
&lt;p>比如类 &lt;code>Student&lt;/code> ：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">Student&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">IFormattable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">Name&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">uint&lt;/span> &lt;span class="n">Code&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">string&lt;/span> &lt;span class="n">IFormattable&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">format&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">IFormatProvider&lt;/span> &lt;span class="n">formatProvider&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">format&lt;/span> &lt;span class="k">switch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;N&amp;#34;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">Name&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;C&amp;#34;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">Code&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;0000&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">FormatException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;Invalid format string {format}&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>主函数里：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">student&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Student&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;康萱琪&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Code&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">21&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;{student:N}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;{student:C}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>输出如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;gt; dotnet run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">康萱琪
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0021
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="正则表达式">正则表达式
&lt;/h4>&lt;p>这东西是特么魔法。&lt;/p>
&lt;p>正则表达式可以看作为在较大字符串中寻找子字符串的小型编程语言。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>符号&lt;/th>
&lt;th>含义&lt;/th>
&lt;th>示例&lt;/th>
&lt;th>匹配的示例&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>^&lt;/code>&lt;/td>
&lt;td>输入文本的开头&lt;/td>
&lt;td>&lt;code>^B&lt;/code>&lt;/td>
&lt;td>B，但只能是文本中的第一个字符&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>$&lt;/code>&lt;/td>
&lt;td>输入文本的结尾&lt;/td>
&lt;td>&lt;code>X$&lt;/code>&lt;/td>
&lt;td>S，但只能是文本中的最后一个字符&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>.&lt;/code>&lt;/td>
&lt;td>除了换行符意外的所有单个字符&lt;/td>
&lt;td>&lt;code>i.ation&lt;/code>&lt;/td>
&lt;td>isaction、itaction&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>*&lt;/code>&lt;/td>
&lt;td>可以重复0次或多次的前导字符&lt;/td>
&lt;td>&lt;code>ra*t&lt;/code>&lt;/td>
&lt;td>rt、rat、raat&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;blockquote>
&lt;p>他妈的我不想写了&lt;/p>&lt;/blockquote>
&lt;h4 id="94---字符串和-span">9.4 - 字符串和 Span
&lt;/h4>&lt;p>&lt;code>Span&amp;lt;T&amp;gt;&lt;/code> 类型引用数组的一个切片，而不需要复制它的内容。&lt;/p>
&lt;p>&lt;code>ReadOnlySpan&amp;lt;char&amp;gt;&lt;/code> 从 &lt;code>AsSpan&lt;/code> 拓展方法中返回。&lt;/p></description></item><item><title>C#的运算符和类型强制转换 - C#笔记</title><link>https://blog.gaein.cn/passages/csharp-note4-operators-and-typecasts/</link><pubDate>Sat, 01 May 2021 20:42:20 +0800</pubDate><guid>https://blog.gaein.cn/passages/csharp-note4-operators-and-typecasts/</guid><description>&lt;h2 id="目录">目录
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note1-Basic/" target="_blank" rel="noopener"
>C#基础&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note2-OOP/" target="_blank" rel="noopener"
>C#面向对象&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note3-Generics-Type/" target="_blank" rel="noopener"
>C#泛型&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note4-Operators-and-TypeCasts/" target="_blank" rel="noopener"
>C#运算符和强制类型转换&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note5-Array/" target="_blank" rel="noopener"
>C#中数组的使用&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note6-Delegates-lambda-Expressions-and-Events/" target="_blank" rel="noopener"
>C#的委托、lambda 表达式和事件&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note7-String-and-Regular/" target="_blank" rel="noopener"
>C#字符串和正则表达式&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="运算符和类型强制转换">运算符和类型强制转换
&lt;/h2>&lt;h3 id="6---运算符和类型强制转换">6 - 运算符和类型强制转换
&lt;/h3>&lt;h4 id="61---运算符和类型转换">6.1 - 运算符和类型转换
&lt;/h4>&lt;h4 id="62---运算符">6.2 - 运算符
&lt;/h4>&lt;p>CSharp的运算符类似于C++和Java的运算符，但有一些区别。&lt;/p>
&lt;p>除了常见的算数运算符、逻辑运算符、比较运算符和赋值运算符等，CSharp还有&lt;/p>
&lt;ul>
&lt;li>类型信息运算符 &lt;code>sizeof&lt;/code> 、 &lt;code>is&lt;/code> 、 &lt;code>typeof&lt;/code> 、 &lt;code>as&lt;/code>&lt;/li>
&lt;li>溢出异常控制运算符 &lt;code>checked&lt;/code> 、 &lt;code>unchecked&lt;/code>&lt;/li>
&lt;li>标识符的名称运算符 &lt;code>nameof()&lt;/code>&lt;/li>
&lt;li>空合并运算符 &lt;code>??&lt;/code>&lt;/li>
&lt;li>空值条件运算符 &lt;code>?.&lt;/code> 、 &lt;code>?[]&lt;/code>&lt;/li>
&lt;/ul>
&lt;h5 id="621---运算符的简化操作">6.2.1 - 运算符的简化操作
&lt;/h5>&lt;p>自增(&lt;code>++&lt;/code>)、自减(&lt;code>--&lt;/code>)以及一些合并赋值(+=)运算符。&lt;/p>
&lt;p>当自增/自减运算符用于较长的表达式内部时，把运算符放在前面(&lt;code>++x&lt;/code>)会在计算表达式之前递增 &lt;code>x&lt;/code> 。换而言之，在增加了 &lt;code>x&lt;/code> 的值后再带入表达式计算。而把运算符放在后面(&lt;code>x++&lt;/code>)则反之。&lt;/p>
&lt;p>看个例子就行：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(++&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// The output is &amp;#34;1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">x&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">++);&lt;/span> &lt;span class="c1">// The output is &amp;#34;0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// The output is &amp;#34;1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>看这三行输出。第一行是先把 &lt;code>x&lt;/code> 进行了自增，在 &lt;code>x&lt;/code> 传入 &lt;code>WriteLine&lt;/code> 方法前就是 &lt;code>1&lt;/code> 了。第二行代码是先将 &lt;code>x&lt;/code> 的值 &lt;code>0&lt;/code> 传给 &lt;code>WriteLine&lt;/code> 方法，再将 &lt;code>x&lt;/code> 的值自增为 &lt;code>1&lt;/code> 。因此第三行代码输出为 &lt;code>1&lt;/code>。&lt;/p>
&lt;h6 id="条件运算符">条件运算符
&lt;/h6>&lt;p>&lt;strong>适当&lt;/strong>的使用条件运算符可以使程序更简洁，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cs">/// &amp;lt;summary&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cs">/// 获取数字为奇数或偶数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cs">/// &amp;lt;/summary&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cs">/// &amp;lt;param name=&amp;#34;input&amp;#34;&amp;gt;数字&amp;lt;/param&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cs">/// &amp;lt;returns&amp;gt;字符串奇数或偶数&amp;lt;/returns&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">NumType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">input&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">input&lt;/span> &lt;span class="p">%&lt;/span> &lt;span class="m">2&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="p">?&lt;/span> &lt;span class="s">&amp;#34;偶数&amp;#34;&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;奇数&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 不使用条件运算符的版本&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">NumType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">input&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">input&lt;/span> &lt;span class="p">%&lt;/span> &lt;span class="m">2&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="s">&amp;#34;偶数&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s">&amp;#34;奇数&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用条件运算符明显短了很多。&lt;/p>
&lt;h6 id="checked-和-unchecked-运算符">&lt;code>checked&lt;/code> 和 &lt;code>unchecked&lt;/code> 运算符
&lt;/h6>&lt;p>如果把一个代码块标记为 &lt;code>checked&lt;/code> ，CLR就会执行溢出检查，如果发生了溢出就抛出 &lt;code>OverflowException&lt;/code> 异常。&lt;/p>
&lt;blockquote>
&lt;p>注意：unchecked 是默认行为。只有在 checked 标记的代码块里把几行不去检查的代码进行标记才使用。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>checked 有性能损耗&lt;/p>&lt;/blockquote>
&lt;h6 id="is-运算符">&lt;code>is&lt;/code> 运算符
&lt;/h6>&lt;p>&lt;code>is&lt;/code> 运算符可以检查对象是否与特定的类型兼容。短语“兼容”表示对象或者是该类型或者是派生自该类型，总之，可以安全的正常转换为该类型。&lt;/p>
&lt;p>CSharp7 扩展了具有类型匹配的 &lt;code>is&lt;/code> 运算符，可以在类型的右边声明变量。如果 &lt;code>is&lt;/code> 运算符返回 &lt;code>true&lt;/code> ，则该变量被赋值为转换后的引用。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">PeopleReg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">object&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="k">is&lt;/span> &lt;span class="n">Person&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// convert success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;Welcome {p.Name}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;You are not a human!&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="as-运算符">&lt;code>as&lt;/code> 运算符
&lt;/h6>&lt;p>&lt;code>as&lt;/code> 运算符用于执行引用类型的强制转换。如果要转换的类型与指定的类型兼容，转换就会成功，否则赋值为 &lt;code>null&lt;/code> 。&lt;/p>
&lt;p>&lt;code>as&lt;/code> 运算符允许在一步中进行安全的类型转换，不需要先使用 &lt;code>is&lt;/code> 运算符测试类型，再执行转换。&lt;/p>
&lt;h6 id="sizeof-运算符">&lt;code>sizeof&lt;/code> 运算符
&lt;/h6>&lt;p>使用 &lt;code>sizeof&lt;/code> 运算符可以确定栈中值类型需要的长度（字节）。如果结构体只包含值类型，也可以使用 &lt;code>sizeof&lt;/code> 运算符和结构。&lt;/p>
&lt;p>如果对复杂类型（而非基本类型）使用 &lt;code>sizeof&lt;/code> 运算符，就要把代码放在 &lt;code>unsafe&lt;/code> 块中。&lt;/p>
&lt;h6 id="typeof-运算符">&lt;code>typeof&lt;/code> 运算符
&lt;/h6>&lt;p>&lt;code>typeof&lt;/code> 运算符返回一个表示特定类型的 &lt;code>System.Type&lt;/code> 对象。例如 &lt;code>typeof(string)&lt;/code> 返回表示 &lt;code>System.String&lt;/code> 类的对象。&lt;/p>
&lt;blockquote>
&lt;p>Tip：在使用反射技术动态的查找对象的相关信息时，这个运算符很有用。&lt;/p>&lt;/blockquote>
&lt;h6 id="nameof-运算符">&lt;code>nameof&lt;/code> 运算符
&lt;/h6>&lt;p>接受一个符号、属性或方法，并返回其名称。比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">LikeArticle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Guid&lt;/span> &lt;span class="n">aid&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">aid&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArgumentNullException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nameof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">aid&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>还可以使用这个运算符得到属性的名称，也可以得到方法的名称。&lt;/p>
&lt;h6 id="索引运算符">索引运算符
&lt;/h6>&lt;p>类似于访问数组元素，索引运算符可以是任何类型（比如字典中使用的索引运算符）：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">title&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">dict&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="可空类型和运算符">可空类型和运算符
&lt;/h6>&lt;p>引用类型可以为空，每次都用 &lt;code>if&lt;/code> 来判断空太麻烦了，所以有了可空类型和运算符。&lt;/p>
&lt;p>可空的值类型使用 &lt;code>?&lt;/code> 来定义，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int?&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">6&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">num&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>或者&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="cs">/// &amp;lt;summary&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cs">/// 获取文章列表&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cs">/// &amp;lt;/summary&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cs">/// &amp;lt;param name=&amp;#34;limit&amp;#34;&amp;gt;限制数&amp;lt;/param&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cs">/// &amp;lt;returns&amp;gt;HTTP 200&amp;lt;/returns&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">[HttpGet]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">ActionResult&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">ICollection&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">ArticleListDto&lt;/span>&lt;span class="p">&amp;gt;&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">GetArticleList&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="n">FromQuery&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="kt">int?&lt;/span> &lt;span class="n">limit&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>注意：通常可空类型与一元或二元运算符一起使用时，如果其中一个操作数或两个操作数都是 &lt;code>null&lt;/code> 则结果也为 &lt;code>null&lt;/code> 。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>在比较可空类型时，有一个为 &lt;code>null&lt;/code> 则结果就是 &lt;code>false&lt;/code> 。&lt;/p>&lt;/blockquote>
&lt;h6 id="空合并运算符">空合并运算符
&lt;/h6>&lt;p>空合并运算符(&lt;code>??&lt;/code>)提供了一种快捷的方式：如果运算符前的表达式不为 &lt;code>null&lt;/code> 则返回前面的表达式，否则返回后面的：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">Test&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int?&lt;/span> &lt;span class="n">num&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">numInt&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="p">??&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">input&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ReadLine&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">path&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">input&lt;/span> &lt;span class="p">??&lt;/span> &lt;span class="s">&amp;#34;C:/&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="空值条件运算符">空值条件运算符
&lt;/h6>&lt;p>下面这段代码验证传递的参数 &lt;code>p&lt;/code> 是否非空。如果它为空，方法就只是返回，而不会继续执行：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">ShowPerson&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Person&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="p">==&lt;/span>&lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">firstName&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">FirstName&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>（你看它多麻烦）&lt;/p>
&lt;p>使用空值条件运算符 &lt;code>?.&lt;/code> 访问 &lt;code>FirstName&lt;/code> ，当 &lt;code>p&lt;/code> 为空的时候就只返回 &lt;code>null&lt;/code> ，而不继续执行表达式。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">ShowPerson&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Person&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">firstName&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">?.&lt;/span>&lt;span class="n">FirstName&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>还可以把空值运算符用于数组：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">arr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">val&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">arr&lt;/span>&lt;span class="p">?[&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 结合 ?? 运算符给它一个默认值：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">valWithDefault&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">arr&lt;/span>&lt;span class="p">?[&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">??&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="522---运算符的优先级和关联性">5.2.2 - 运算符的优先级和关联性
&lt;/h5>&lt;p>基本运算符 &amp;gt; 一元运算符 &amp;gt; 乘除 &amp;gt; 加减 &amp;gt; 移位运算 &amp;gt; 关系运算 &amp;gt; 比较运算 &amp;gt; AND &amp;gt; XOR &amp;gt; OR &amp;gt; 逻辑与 &amp;gt; 逻辑或 &amp;gt; 空合并 &amp;gt; 三元条件运算符 &amp;gt; 赋值与lambda&lt;/p>
&lt;p>关联性的例外是赋值运算符，它们是右关联。&lt;/p>
&lt;p>一个重要的、可能误导右关联是三元条件运算符：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">a&lt;/span> &lt;span class="p">?&lt;/span> &lt;span class="n">b&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">c&lt;/span> &lt;span class="p">?&lt;/span> &lt;span class="n">d&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 等价&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">a&lt;/span> &lt;span class="p">?&lt;/span> &lt;span class="n">b&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="p">?&lt;/span> &lt;span class="n">d&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>注意：在复杂的表达式中应避免运算符优先级来生成正确的结果。优先级一般符合正常的认知，当不利于人类理解时应该使用括号指定优先级。避免潜在的问题。&lt;/p>&lt;/blockquote>
&lt;h4 id="63---使用二进制运算符">6.3 - 使用二进制运算符
&lt;/h4>&lt;p>&lt;code>Convert.ToString&lt;/code> 提供的一个重载带有两个 &lt;code>int&lt;/code> 参数，其中第二个 &lt;code>int&lt;/code> 值是 &lt;code>toBase&lt;/code> 参数。使用这个方法可以传递值：&lt;/p>
&lt;ul>
&lt;li>2 - 二进制&lt;/li>
&lt;li>8 - 八进制&lt;/li>
&lt;li>10 - 十进制&lt;/li>
&lt;li>16 - 十六进制&lt;/li>
&lt;/ul>
&lt;p>来格式化字符串。&lt;/p>
&lt;p>默认情况下，如果二进制以 &lt;code>0&lt;/code> 开头，则这些 &lt;code>0&lt;/code> 将会被忽略，而不会被打印出来。使用 &lt;code>PadLeft&lt;/code> 方法来填充字符串中的这些 &lt;code>0&lt;/code> 值。&lt;/p>
&lt;ol>
&lt;li>
&lt;p>位与 AND：该位全是1的时候结果为1，否则为0，比如：&lt;/p>
&lt;p>A: 1001_0011_1001_1111&lt;br>
B: 1100_0101_0011_1011&lt;br>
R: 1000_0001_0001_1011&lt;/p>
&lt;/li>
&lt;li>
&lt;p>位或 OR : 该位上任意操作数为1的时候结果为1，比如：&lt;/p>
&lt;p>A: 1001_0011_1001_1111&lt;br>
B: 1100_0101_0011_1011&lt;br>
R: 1101_0111_1011_1111&lt;/p>
&lt;/li>
&lt;li>
&lt;p>位异或XOR: 该位上只有一操作数位1的时候结果为1，比如：&lt;/p>
&lt;p>A: 1001_0011_1001_1111&lt;br>
B: 1100_0101_0011_1011&lt;br>
R: 0101_0110_1010_0100&lt;/p>
&lt;/li>
&lt;li>
&lt;p>位取反NOT:按位取反，比如：&lt;/p>
&lt;p>A: 1001_0011_1001_1111&lt;br>
R: 0110_1100_0110_0000&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h5 id="631---位的移动">6.3.1 - 位的移动
&lt;/h5>&lt;p>向左移动 n 位等同于原来的数字乘以 2^n ，这比乘法运算符要快得多哦。&lt;/p>
&lt;h5 id="632---有符号数和无符号数">6.3.2 - 有符号数和无符号数
&lt;/h5>&lt;p>使用二进制时要记住的意见重要的事情是，有符号类型的数字最左边一位表示符号。&lt;/p>
&lt;h4 id="64---类型的安全性">6.4 - 类型的安全性
&lt;/h4>&lt;h5 id="641---类型转换">6.4.1 - 类型转换
&lt;/h5>&lt;h6 id="隐式转换">隐式转换
&lt;/h6>&lt;p>只要保证值不会发生任何变化，类型转换就可以自动进行。即：可以从“小范围”转到“大范围”的意思。&lt;/p>
&lt;blockquote>
&lt;p>Tips：&lt;code>BigInteger&lt;/code> 是包含任意大小的数字的结构体。可以从较小的类型中初始化它，传递一个大数字或者解析字符串。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>注意：&lt;/p>
&lt;ol>
&lt;li>只能从较小的整数类型隐式的转换为较大的整数类型，反过来不行。&lt;/li>
&lt;li>可以将整数隐式的转换为浮点数，尽管可能会丢失精度。&lt;/li>
&lt;li>可空类型不能隐式的转换为不可空类型。&lt;/li>
&lt;/ol>&lt;/blockquote>
&lt;h6 id="显示转换">显示转换
&lt;/h6>&lt;p>强制类型转换，使用 &lt;code>(type)identifer&lt;/code> 的语法来转换。强制类型转换可能是不安全的，可能会引发溢出或者异常。&lt;/p>
&lt;p>CSharp提供了 &lt;code>checked&lt;/code> 运算符，可以检查是否有算术溢出。当然它也检查了是否安全，如果不安全则会强制抛出一个异常。&lt;/p>
&lt;blockquote>
&lt;p>Tips：谨慎的使用显示的类型强制转换，就可以把简单值类型的任何实例转换为几乎任何其它类型。&lt;/p>&lt;/blockquote>
&lt;p>如果需要在数字和字符串之间转换可以使用 &lt;code>.NET&lt;/code> 类库提供的一些方法。&lt;/p>
&lt;p>数字 -&amp;gt; 字符串：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">8&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">str&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">num&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToString&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>字符串 -&amp;gt; 数字：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">str&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;8&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">TryParse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">out&lt;/span> &lt;span class="n">num&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Successfully convert string to int.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">num&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果使用了 &lt;code>Parse&lt;/code> 方法，将会返回转换后的值，但是如果不能转换该方法就会抛出一个异常。&lt;/p>
&lt;h5 id="642---装箱和拆箱">6.4.2 - 装箱和拆箱
&lt;/h5>&lt;p>前面说过了：&lt;/p>
&lt;ul>
&lt;li>装箱：值类型 -&amp;gt; 引用类型，栈 -&amp;gt; 堆&lt;/li>
&lt;li>拆箱：引用类型 -&amp;gt; 值类型，堆 -&amp;gt; 栈&lt;/li>
&lt;/ul>
&lt;p>装箱可以隐式的进行。&lt;/p>
&lt;blockquote>
&lt;p>Tips: 拆箱时必须非常小心，确保能拆&amp;hellip;否则可能会引发一个异常&lt;/p>&lt;/blockquote>
&lt;h4 id="65---比较对象的相等性">6.5 - 比较对象的相等性
&lt;/h4>&lt;h5 id="1-referenceequals-方法">1. &lt;code>ReferenceEquals&lt;/code> 方法
&lt;/h5>&lt;p>&lt;code>ReferenceEquals&lt;/code> 是一个静态方法，其测试两个引用是否指向类的同一个实例，特别是两个引用是否包括内存中相同的地址。不能重写。&lt;/p>
&lt;p>但是，它认为 &lt;code>null&lt;/code> 等于 &lt;code>null&lt;/code>。&lt;/p>
&lt;blockquote>
&lt;p>Tips：这个方法如果用于比较值类型则总返回 &lt;code>false&lt;/code> 。&lt;/p>&lt;/blockquote>
&lt;h5 id="2-equals-虚方法">2. &lt;code>Equals&lt;/code> 虚方法
&lt;/h5>&lt;p>&lt;code>Equals&lt;/code> 虚版本的也可以实现比较， &lt;code>System.Object&lt;/code> 中实现的版本是比较引用。因为这是虚方法所以可以在自己的类中重写它，使用适合自己类的方法进行比较，比如值比较。&lt;/p>
&lt;blockquote>
&lt;p>如果希望类的实例用作字典的键，就需要重写这个方法。&lt;/p>&lt;/blockquote>
&lt;h5 id="3-equals-静态方法">3. &lt;code>Equals&lt;/code> 静态方法
&lt;/h5>&lt;p>作用相同，不同的是静态方法有两个参数，它的作用是比较这两个参数（引用）的相等性。如果有一个参数为 &lt;code>null&lt;/code> 则返回 &lt;code>false&lt;/code> 。&lt;/p>
&lt;h5 id="4--比较运算符">4. &lt;code>==&lt;/code> 比较运算符
&lt;/h5>&lt;p>最好将它看作严格的值比较和严格的引用比较中间的玩意，大多数情况下，如果两边是引用类型的话是引用比较。&lt;/p>
&lt;blockquote>
&lt;p>不过字符串类型通过运算符重载实现了通过比较运算符进行值比较，更符合人的直觉。&lt;/p>&lt;/blockquote>
&lt;p>在使用上述几种方法的时候，通常来说使用 &lt;code>==&lt;/code>，需要比较引用的时候使用 &lt;code>ReferenceEquals&lt;/code> 方法。需要复杂类型的自定义比较时，重写 &lt;code>Equals&lt;/code> 方法，并且，建议使用这个方法重载运算符 &lt;code>==&lt;/code>，以便于更方便的比较。&lt;/p>
&lt;h5 id="652---比较值类型的相等性">6.5.2 - 比较值类型的相等性
&lt;/h5>&lt;p>在比较值类型的相等性时，采用与引用类型相同的规则：&lt;code>ReferenceEquals&lt;/code> 用于比较引用，&lt;code>Equals&lt;/code> 用于比较值，比较运算符可以看作一个中间项。&lt;/p>
&lt;p>如果调用 &lt;code>sA.Equals(sB)&lt;/code> ，其中 &lt;code>sA&lt;/code> 和 &lt;code>sB&lt;/code> 是某个结构的实例，则根据它俩是否存在所有的字段并且包含相同的值返回 &lt;code>true&lt;/code> 或者 &lt;code>false&lt;/code>。&lt;/p>
&lt;p>另一方面，在默认情况下，使用 &lt;code>==&lt;/code> 比较结构会无法编译，除非自己重载了比较运算符。&lt;/p>
&lt;p>尽管 &lt;code>System.ValueType&lt;/code> 提供的 &lt;code>Equals&lt;/code> 默认重写版本肯定足以应付大部分自定义的结构，但是仍然可以重写方法以适用于自己的结构、提高性能。另外，如果值类型包含作为字段的引用类型，就需要重写 &lt;code>Equals&lt;/code> 方法，默认的版本仅比较它们的地址。&lt;/p>
&lt;h4 id="66---运算符重载">6.6 - 运算符重载
&lt;/h4>&lt;p>假如有个 &lt;code>Matrix&lt;/code> 类，实现了矩阵相加、相乘的一些方法。但是直接调用看着太不舒服了，使用更利于理解的运算符才是该干的。&lt;/p>
&lt;p>通过运算符重载可以告诉编译器，&lt;code>+&lt;/code> 和 &lt;code>*&lt;/code> 分别对 &lt;code>Matrix&lt;/code> 对象执行什么操作，以便编写类似于上面的代码。&lt;/p>
&lt;p>事实证明，在许多情况下，重载运算符利于生成可读性更高、更直观的代码。&lt;/p>
&lt;h5 id="661---运算符的工作方式">6.6.1 - 运算符的工作方式
&lt;/h5>&lt;ul>
&lt;li>编译器会看前后的操作数的类型，如果是相同的基础类型，则按照规定的操作进行。&lt;/li>
&lt;li>如果是不同的，则看是否能够隐式转换并选择合适的路径进行转换。&lt;/li>
&lt;li>如果是用户自定义的类型，则去查找重载，找到就走重载，找不到就报错。&lt;/li>
&lt;/ul>
&lt;h5 id="662---运算符重载的示例vector-结构">6.6.2 - 运算符重载的示例：Vector 结构
&lt;/h5>&lt;p>&lt;code>Vector&lt;/code> 结构表示一个三维的数学矢量。为了简单，就算它是三个 &lt;code>double&lt;/code> 类型数字的集合。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">struct&lt;/span> &lt;span class="nc">Vector&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">Vector&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">double&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">double&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">double&lt;/span> &lt;span class="n">z&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">X&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Y&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Z&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">z&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">Vector&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Vector&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">X&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">X&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Y&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Y&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Z&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Z&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">double&lt;/span> &lt;span class="n">X&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">double&lt;/span> &lt;span class="n">Y&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">double&lt;/span> &lt;span class="n">Z&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">override&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">ToString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="s">$&amp;#34;( {X}, {Y}, {Z} )&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>运算符重载的声明方式与静态方法基本相同，但 &lt;code>operator&lt;/code> 关键字告诉编译器这是运算符重载，它后面紧跟一个运算符，比如 &lt;code>+&lt;/code> ：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="n">Vector&lt;/span> &lt;span class="kd">operator&lt;/span> &lt;span class="p">+(&lt;/span>&lt;span class="n">Vector&lt;/span> &lt;span class="n">left&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Vector&lt;/span> &lt;span class="n">right&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">new&lt;/span> &lt;span class="n">Vector&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">left&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">X&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="n">right&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">X&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">left&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Y&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="n">right&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">left&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Z&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="n">right&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Z&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>注意：CSharp要求所有的运算符重载都声明为 &lt;code>public&lt;/code> 和 &lt;code>static&lt;/code> ，这表示它们与类或结构相关联而不是某个特定的实例。所以运算符重载的代码体不能访问非静态类成员，也不能访问 &lt;code>this&lt;/code> 标识符。&lt;/p>&lt;/blockquote>
&lt;p>有一个运算符重载，其参数依次是一个 &lt;code>double&lt;/code> 和一个 &lt;code>Vector&lt;/code> ，但是编译器不能交换参数的顺序，所以对于这种交换顺序不影响的运算，需要写两个重载。&lt;/p>
&lt;p>虽然 &lt;code>+=&lt;/code> 一般算作一个运算符，但实际上它对应的操作分为两步：相加和赋值。但是CSharp是不允许重载 &lt;code>=&lt;/code> 运算符的，不过如果重载了 &lt;code>+&lt;/code> 运算符，编译器会自动重载 &lt;code>+=&lt;/code> 运算符。&lt;/p>
&lt;h5 id="663---比较运算符的重载">6.6.3 - 比较运算符的重载
&lt;/h5>&lt;p>6个比较运算符分为三对：&lt;/p>
&lt;ol>
&lt;li>&lt;code>==&lt;/code> 和 &lt;code>!=&lt;/code>&lt;/li>
&lt;li>&lt;code>&amp;gt;&lt;/code> 和 &lt;code>&amp;lt;&lt;/code>&lt;/li>
&lt;li>&lt;code>&amp;gt;=&lt;/code> 和 &lt;code>&amp;lt;=&lt;/code>&lt;/li>
&lt;/ol>
&lt;p>CSharp语言要求成对重载比较运算符，也就是你重载了 &lt;code>&amp;gt;=&lt;/code> 也必须重载 &lt;code>&amp;lt;=&lt;/code> ，否则就会产生编译器错误。&lt;/p>
&lt;blockquote>
&lt;p>Tips：当比较时，需要考虑：如果有嵌入的类，是比较嵌入的类的引用（浅度比较）还是应该比较对象的值是否相等（深度比较）？&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>注意：不要通过调用从 &lt;code>System.Object&lt;/code> 中继承的 &lt;code>Equals&lt;/code> 方法的实例版本来重载比较运算符，如果这么做在双等号左值为 &lt;code>null&lt;/code> 时（例如 &lt;code>objA == objB&lt;/code>）系统会去调用 &lt;code>null.Equals(objB)&lt;/code> ，这样会引发一个异常。采用其他方法（重写 &lt;code>Equals&lt;/code> 方法以比较）比较安全。&lt;/p>&lt;/blockquote>
&lt;p>还需要重写 &lt;code>Equals&lt;/code> 方法和 &lt;code>GetHashCode&lt;/code> 方法。这些方法总是应该在重载 &lt;code>==&lt;/code> 进行重写，否则编译器会报错：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">override&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="n">Equals&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">object&lt;/span> &lt;span class="n">obj&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">obj&lt;/span> &lt;span class="k">is&lt;/span> &lt;span class="n">Vector&lt;/span> &lt;span class="n">v&lt;/span> &lt;span class="p">?&lt;/span> &lt;span class="k">this&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="n">v&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">override&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">GetHashCode&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">X&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetHashCode&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">^&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Y&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetHashCode&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">^&lt;/span> &lt;span class="n">Z&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetHashCode&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>散列代码的实现应比较快速，且总对相同的对象返回相同的值，因此对几个属性算散列是比较的河里的。&lt;/p>
&lt;h5 id="664---可以重载的运算符">6.6.4 - 可以重载的运算符
&lt;/h5>&lt;p>不同于C++，并不是所有的运算符可以重载。&lt;/p>
&lt;p>可以重载的运算符有：&lt;/p>
&lt;ul>
&lt;li>算术一元、二元运算符&lt;/li>
&lt;li>按位二元运算符&lt;/li>
&lt;li>按位一元运算符：&lt;code>true&lt;/code> 和 &lt;code>false&lt;/code> 运算符必须成对重载&lt;/li>
&lt;li>比较运算符：必须成对重载&lt;/li>
&lt;li>赋值运算符：不能显示重载，重载单个运算符就重载了&lt;/li>
&lt;li>索引运算符：不能直接重载索引运算符，索引器成员类型允许类和结构上支持&lt;/li>
&lt;li>类型强制转换运算符：不能直接重载，可以用用户定义的类型强制转换&lt;/li>
&lt;/ul>
&lt;h4 id="67---实现自定义的索引运算符">6.7 - 实现自定义的索引运算符
&lt;/h4>&lt;p>自定义索引器不能使用运算符重载语法来实现，但是它们可以用与属性非常相似的语法来实现。&lt;/p>
&lt;p>举个 &lt;code>PersonCollection&lt;/code> 类的栗子：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">PersonCollection&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="n">Person&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">_people&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ctor&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">PersonCollection&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">params&lt;/span> &lt;span class="n">Person&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">people&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_people&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">people&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToArray&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// indexer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">Person&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">get&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">_people&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">set&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">_people&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">value&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>为了允许索引器语法访问 &lt;code>PersonCollection&lt;/code> 并返回 &lt;code>Person&lt;/code> 对象，可以创建一个索引器。索引器看起来非常类似于属性。不同之处是名称，指定索引器必须要使用 &lt;code>this&lt;/code> 关键字，中括号中是索引的类型。&lt;/p>
&lt;p>对于索引器，不仅能用 &lt;code>int&lt;/code> 类型进行索引，任何类型都是有效的。&lt;/p>
&lt;h4 id="68-用户定义的类型强制转换">6.8 用户定义的类型强制转换
&lt;/h4>&lt;p>CSharp允许定义用户自己的数据类型，因此，需要去支持这些类型的转换。如果知道无论在源变量中存储什么值，类型强制转换总是安全的，就可以把它定义为隐式强制转换。然而，如果某些数值可能会出错，如丢失什么数据或抛出异常，就应该把数据类型转换定义为显示强制转换。&lt;/p>
&lt;ul>
&lt;li>隐式转换关键字：&lt;code>implicit&lt;/code>&lt;/li>
&lt;li>显示转换关键字：&lt;code>explicit&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>与其他运算符重载一样，类型强制必须同时声明为 &lt;code>public&lt;/code> 和 &lt;code>static&lt;/code> 。&lt;/p>
&lt;h5 id="681---实现用户定义的类型强制转换">6.8.1 - 实现用户定义的类型强制转换
&lt;/h5>&lt;p>定义隐式的强制类型转换使用 &lt;code>implicit&lt;/code> 关键字，假如我们要转 &lt;code>Currency&lt;/code> 类为 &lt;code>float&lt;/code> ：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kd">implicit&lt;/span> &lt;span class="n">operate&lt;/span> &lt;span class="kt">float&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Currency&lt;/span> &lt;span class="k">value&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">value&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Dollars&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">value&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Cents&lt;/span> &lt;span class="p">/&lt;/span> &lt;span class="m">100.0f&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>把 &lt;code>float&lt;/code> 转换成 &lt;code>Currency&lt;/code> 不总是成功的，应该定义一个强制转换：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kd">explicit&lt;/span> &lt;span class="n">operate&lt;/span> &lt;span class="n">Currency&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">float&lt;/span> &lt;span class="k">value&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">uint&lt;/span> &lt;span class="n">dollars&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">uint&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="k">value&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">ushort&lt;/span> &lt;span class="n">cents&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">ushort&lt;/span>&lt;span class="p">)((&lt;/span>&lt;span class="k">value&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="n">dollars&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">*&lt;/span> &lt;span class="m">100&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Currency&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dollars&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cents&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>Tips：如果类型强制转换用于把 &lt;code>float&lt;/code> 值转换为 &lt;code>int&lt;/code> ，计算机会截取多余的数字，而不是执行四舍五入。&lt;/p>&lt;/blockquote>
&lt;p>&lt;code>System.Convert&lt;/code> 对象包含大量的静态方法来完成各种数字转换，在使用 &lt;code>System.Covert&lt;/code> 类的方法时会造成额外的性能损失，所以只应在需要的时候使用它们。&lt;/p>
&lt;p>&lt;code>System.Convert&lt;/code> 类的方法还执行它们自己的溢出检查，因此，不需要把对它们的调用放在 &lt;code>checked&lt;/code> 环境下面。&lt;/p>
&lt;h6 id="1-类之间的类型强制转换">1. 类之间的类型强制转换
&lt;/h6>&lt;blockquote>
&lt;p>注意：派生类之间不能相互转换。&lt;/p>&lt;/blockquote>
&lt;p>CSharp要求把类型强制转换的定义放在源类或目标类的内部。&lt;/p>
&lt;h6 id="2-基类和派生类之间的类型强制转换">2. 基类和派生类之间的类型强制转换
&lt;/h6>&lt;p>在进行强制类型转换时，会检查被引用的对象。因为基类原则上可以引用一个派生类的实例，所以这个对象可能是要强制转换的派生类的一个实例。如果是这样，强制转换就会成功。如果被引用的实例不是派生自基类的一个实例，强制转换就会抛出异常。&lt;/p>
&lt;p>编译器已经提供了对于基类和派生类之间的强制类型转换。如果要进行的转换是合法的，它们也仅仅是更改了类型，而引用没有变。这些强制类型转换与用户定义的强制类型转换不同。在上面的例子中，将 &lt;code>float&lt;/code> 强制转换为 &lt;code>Currency&lt;/code> 还新定义并初始化了一个实例。&lt;/p>
&lt;h6 id="3-装箱和拆箱类型的强制类型转换">3. 装箱和拆箱类型的强制类型转换
&lt;/h6>&lt;p>从值类型到 &lt;code>object&lt;/code> 的强制转换总是一种隐式的强制转换，因为这种转换是从派生类到基类的的转换。&lt;/p>
&lt;p>在执行上述转换（装箱）时，值类型的变量的值被复制到堆上，放在一个装箱的对象中，并且将装箱后的变量的引用设置为那个对象。&lt;/p>
&lt;p>拆箱是一种显示的强制类型转换，因为如果要强制转换的对象不是正确的类型就会抛出一个异常。&lt;/p>
&lt;p>在使用装箱和拆箱时，这两个过程都把数据复制到新装箱或新拆箱的休想上，理解这一点非常重要。因此，对装箱的操作不会影响源值类型变量的值。&lt;/p>
&lt;h5 id="682-多重类型强制转换">6.8.2 多重类型强制转换
&lt;/h5>&lt;p>如果在进行要求的数据类型转换时没有可用的直接强制类型转换方法，则编译器会自动寻找一种转换方式，将多种转换合并起来以便于进行强制类型转换。&lt;/p>
&lt;blockquote>
&lt;p>Tips：如果希望类利于使用，就应该确保所有的强制类型转换都按照一种互相兼容的方式进行，即这些转换直观上应得到相同的结果。&lt;/p>&lt;/blockquote>
&lt;p>最好设计自己的强制类型转换，让所有的转换路线都得到相同的、正确的结果，此时编译器去选择哪条路径就不重要了。&lt;/p></description></item><item><title>C#中的泛型 - C#笔记</title><link>https://blog.gaein.cn/passages/csharp-note3-generics-type/</link><pubDate>Thu, 29 Apr 2021 12:40:44 +0800</pubDate><guid>https://blog.gaein.cn/passages/csharp-note3-generics-type/</guid><description>&lt;h2 id="目录">目录
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note1-Basic/" target="_blank" rel="noopener"
>C#基础&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note2-OOP/" target="_blank" rel="noopener"
>C#面向对象&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note3-Generics-Type/" target="_blank" rel="noopener"
>C#泛型&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note4-Operators-and-TypeCasts/" target="_blank" rel="noopener"
>C#运算符和强制类型转换&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note5-Array/" target="_blank" rel="noopener"
>C#中数组的使用&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note6-Delegates-lambda-Expressions-and-Events/" target="_blank" rel="noopener"
>C#的委托、lambda 表达式和事件&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note7-String-and-Regular/" target="_blank" rel="noopener"
>C#字符串和正则表达式&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="csharp-泛型">CSharp 泛型
&lt;/h2>&lt;h3 id="5---泛型">5 - 泛型
&lt;/h3>&lt;h4 id="51---泛型概述">5.1 - 泛型概述
&lt;/h4>&lt;p>有了泛型，就可以创建独立于被包含类型的类和方法。比如我希望创建一个链表 &lt;code>LinkedList&lt;/code> 类，但是存储在 &lt;code>Node.value&lt;/code> 中的可能是 &lt;code>int&lt;/code> 类型也可能是其它如 &lt;code>double&lt;/code> 等类型。这样我们就要为每种类型写一个 &lt;code>LinkedList&lt;/code> 类，但是大部分实现都是一样的（比如插入、删除等，这些操作和是什么类型几乎没有关系）。所以才有了泛型来解决类似于这样的问题。&lt;/p>
&lt;p>另一个减少代码量的是 &lt;code>Object&lt;/code> 类，但是使用这种类型转换是不安全的，比如我创建了一个 &lt;code>LinkedList&lt;/code> 类，其中有个方法是 &lt;code>Add(Object input)&lt;/code> ，我希望这是一个 &lt;code>int&lt;/code> 链表，但是使用者即使传入 &lt;code>string&lt;/code> 也不会报错，但是在使用的时候很可能引发运行时抛出异常。&lt;/p>
&lt;h5 id="511---性能">5.1.1 - 性能
&lt;/h5>&lt;p>值类型存储在栈(Stack)上，引用类型存储在堆(Heap)上。CSharp类是引用类型，结构是值类型。&lt;/p>
&lt;ul>
&lt;li>从值类型转换为引用类型称为装箱，装箱是自动进行（隐式转换）的。&lt;/li>
&lt;li>而从引用类型转换为值类型为拆箱，拆箱必须强制转换（而且如果类型有问题会抛出异常）。&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>ValueType ===(Box)===&amp;gt; ReferenceType&lt;/p>
&lt;p>ValueType &amp;lt;==(UnBox)== ReferenceType&lt;/p>&lt;/blockquote>
&lt;p>另外，这种操作性能损失比较大，遍历多项的时候更加明显。&lt;/p>
&lt;p>&lt;code>List&amp;lt;T&amp;gt;&lt;/code> 类在使用时定义传入的对象的类型，如果泛型 &lt;code>T&lt;/code> 定义为 &lt;code>int&lt;/code> ，则它在JIT编译器动态生成的类中使用，不再进行装箱和拆箱操作。大幅度提高了性能。&lt;/p>
&lt;h5 id="512---类型安全">5.1.2 - 类型安全
&lt;/h5>&lt;p>在泛型类中，&lt;code>T&lt;/code> 定义了允许使用的类型，只能使用限定的类，否则编译器会报错。而使用拆箱时不能确定对象是否为指定类型，容易引起程序崩溃或奇奇怪怪的bug。&lt;/p>
&lt;h5 id="513---二进制代码的重用">5.1.3 - 二进制代码的重用
&lt;/h5>&lt;p>泛型类可以定义一次，并且可以用许多不同的类型实例化。不需要像 C++ 模板那样访问源代码。&lt;/p>
&lt;h5 id="514---代码的扩展">5.1.4 - 代码的扩展
&lt;/h5>&lt;h5 id="515---命名约定">5.1.5 - 命名约定
&lt;/h5>&lt;ul>
&lt;li>泛型类型的名称用字母 &amp;ldquo;T&amp;rdquo; 作为前缀。&lt;/li>
&lt;li>如果没有特殊的要求，泛型类可以用任意类，并且如果只使用了一个泛型类型则通常将其命名为 &lt;code>T&lt;/code>，比如 &lt;code>List&amp;lt;T&amp;gt;&lt;/code> 。&lt;/li>
&lt;li>如果泛型有特殊的要求（比如它要求该类型必须继承自某个接口或派生自某个基类），或者使用了两个或多个泛型，就应该给泛型类型写名称，比如：&lt;code>Convert&amp;lt;TInput, TOutput&amp;gt;&lt;/code> 。&lt;/li>
&lt;/ul>
&lt;h4 id="52---创建泛型类">5.2 - 创建泛型类
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">LinkedListNode&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">LinkedListNode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">T&lt;/span> &lt;span class="k">value&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">Value&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">value&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">T&lt;/span> &lt;span class="n">Value&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">LinkedListNode&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">Next&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="kd">internal&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">LinkedListNode&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">Prev&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="kd">internal&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>另外，通过实现 &lt;code>GetEnumerator&lt;/code> 方法，可以用 foreach 语句遍历链表。 &lt;code>GetEnumerator&lt;/code> 方法使用 &lt;code>yield&lt;/code> 语句创建一个枚举器类型：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">LinkedList&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">IEnumerable&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">LinkedListNode&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">First&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">LinkedListNode&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">Last&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">LinkedListNode&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">T&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">newNode&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">LinkedList&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">First&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">First&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">newNode&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Last&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">First&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LinkedListNode&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">previous&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Last&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Last&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Next&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">newNode&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Last&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">newNode&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Last&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Prev&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">previous&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">newNode&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">IEnumerator&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">GetEnumerator&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LinkedListNode&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">current&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">First&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">current&lt;/span> &lt;span class="p">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 使用yield返回枚举的值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">yield&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">current&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">value&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 迭代&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">current&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">current&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Next&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">IEnumerator&lt;/span> &lt;span class="n">IEnumerator&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetEnumerator&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">GetEnumerator&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="53---泛型类的功能">5.3 - 泛型类的功能
&lt;/h4>&lt;h5 id="531---默认值">5.3.1 - 默认值
&lt;/h5>&lt;p>通过 &lt;code>default&lt;/code> 关键字，将 &lt;code>null&lt;/code> 赋予引用类型，将 &lt;code>0&lt;/code> 赋予值类型。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="n">T&lt;/span> &lt;span class="n">GetDocument&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">T&lt;/span> &lt;span class="n">doc&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">default&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="532---约束">5.3.2 - 约束
&lt;/h5>&lt;p>假如在上述例子中，我只想要接受实现了 &lt;code>IDocument&lt;/code> 接口的泛型。&lt;/p>
&lt;p>为了在泛型类型的名称中指定该要求，将例子中的 &lt;code>T&lt;/code> 改为 &lt;code>TDocument&lt;/code> ，&lt;code>where&lt;/code> 子句指定了实现 &lt;code>IDocument&lt;/code> 接口的要求：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">DocumentManager&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">TDocument&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">where&lt;/span> &lt;span class="n">TDocument&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">IDocument&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>注意：给泛型类添加约束的时候，最好包含泛型参数名称的一些信息。对编译器而言这不重要，但是它更可读。&lt;/p>&lt;/blockquote>
&lt;h5 id="533---继承">5.3.3 - 继承
&lt;/h5>&lt;p>泛型类可以派生自泛型基类：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">LinkedList&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">&amp;gt;:&lt;/span> &lt;span class="n">IEnumerable&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>于是，派生类可以是泛型类或非泛型类。例如：可以定义一个抽象的泛型基类，它在派生类中用一个具体的类实现。&lt;/p>
&lt;h5 id="534---静态成员">5.3.4 - 静态成员
&lt;/h5>&lt;p>泛型类的静态成员只能在类的一个实例中共享。&lt;/p>
&lt;h4 id="54---泛型接口">5.4 - 泛型接口
&lt;/h4>&lt;p>使用泛型可以定义接口，在接口中定义的方法可以带泛型参数。&lt;/p>
&lt;h5 id="541---协变和抗变">5.4.1 - 协变和抗变
&lt;/h5>&lt;blockquote>
&lt;p>淦，这部分有点搞不懂欸（
以后再做研究，这部分内容可参考性不高，可能存在错误。目前人是差不多理解了，说不出来&amp;hellip;&lt;/p>&lt;/blockquote>
&lt;ul>
&lt;li>协变：返回中，不能使用子类接收返回的父类，用父类接收返回的子类可以&lt;/li>
&lt;li>抗变：传参中，子类传入需要父类的地方&lt;/li>
&lt;/ul>
&lt;p>（那他妈不都是子类-&amp;gt;父类嘛？）&lt;/p>
&lt;p>假如有 &lt;code>Animal&lt;/code> 类和 &lt;code>Dog&lt;/code> 子类。假设我定义了一个泛型 &lt;code>Foo&amp;lt;Animal&amp;gt;&lt;/code> 那么它实现了协变，能去接受 &lt;code>Dog&lt;/code> 类的实例。即协变为接受从子类转换为父类。这种与原始类型转换方向（类 -&amp;gt; Object 基类）相同的可变性就称作协变。&lt;/p>
&lt;p>反之，泛型类或方法的返回将 &lt;code>Dog&lt;/code> 作为 &lt;code>Animal&lt;/code> 是抗变。&lt;/p>
&lt;h5 id="542---泛型接口的协变">5.4.2 - 泛型接口的协变
&lt;/h5>&lt;p>如果泛型接口用 &lt;code>out&lt;/code> 关键字标注，那么它就是协变的。&lt;/p>
&lt;p>比如，接口 &lt;code>IIndex&lt;/code> 是协变的，从一个只读索引器中返回这个类型：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">interface&lt;/span> &lt;span class="nc">IIndex&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="k">out&lt;/span> &lt;span class="n">T&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">T&lt;/span> &lt;span class="k">this&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">Count&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>不使用 &lt;code>out&lt;/code> 或者 &lt;code>in&lt;/code> 关键字，可以把类型定义为不变的。&lt;/p>
&lt;p>实现了这个接口（ &lt;code>MyClass: IIndex&amp;lt;Dog&amp;gt;&lt;/code> ）的类可以把返回值赋给 &lt;code>IIndex&amp;lt;Dog&amp;gt;&lt;/code> ，也可以赋值给 &lt;code>IIndex&amp;lt;Animal&amp;gt;&lt;/code>。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">IIndex&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Rectangle&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">rectangles&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="cm">/* codes ... */&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">IIndex&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Shape&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">shapes&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">rectangles&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="542---泛型接口的抗变">5.4.2 - 泛型接口的抗变
&lt;/h5>&lt;p>如果泛型类型用 &lt;code>in&lt;/code> 关键字标记，泛型接口就是抗变的：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">interface&lt;/span> &lt;span class="nc">IDisplay&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="k">in&lt;/span> &lt;span class="n">T&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// codes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">ShapeDisplay&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">IDisplay&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Shape&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// codes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">IDisplay&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Shape&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">shapeDisplay&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ShapeDisplay&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">IDisplay&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Rectangle&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">rectDisplay&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">shapeDisplay&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>抗变更上面的协变看起来效果是相反的（但是它怎么安全的做到这一点的啊？）&lt;/p>
&lt;h4 id="55---泛型结构">5.5 - 泛型结构
&lt;/h4>&lt;p>与类相似，结构也可以是泛型的，比如 &lt;code>Nullable&amp;lt;T&amp;gt;&lt;/code>。它们非常类似于泛型类，但是没有继承特性。&lt;/p>
&lt;p>把 &lt;code>Nullable&amp;lt;T&amp;gt;&lt;/code> 类型强制转换成 &lt;code>T&lt;/code> 类型的运算符重载是显示定义的，因为当 &lt;code>hasValue&lt;/code> 为 &lt;code>false&lt;/code> 时，它会抛出一个异常。强制转换 &lt;code>T&lt;/code> 为 &lt;code>Nullable&amp;lt;T&amp;gt;&lt;/code> 类型的运算符重载定义为隐式的，因为转换总是成功的。&lt;/p>
&lt;p>因为可空类型使用的非常频繁，CSharp有一个 &lt;code>?&lt;/code> 运算符，用它来定义可空类型的变量，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int?&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>注意：在运算可空类型的时候，如果两个可空变量中任何一个值是 &lt;code>null&lt;/code> 那么它们的和就是 &lt;code>null&lt;/code>&lt;/p>&lt;/blockquote>
&lt;p>非可空类型总是可以隐式转换为对应的可空类型。从可空类型转换到对应的非可空类型时需要强制转换，可能会引发异常，因此：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int?&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">18&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">numInt&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="p">??&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以使用该类合并运算符以不进行显示转换。&lt;/p>
&lt;h4 id="56---泛型方法">5.6 - 泛型方法
&lt;/h4>&lt;p>除了定义泛型类以外还可以泛型方法。在泛型中，泛型类型用方法声明来定义，泛型方法可以在非泛型类中定义：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">void&lt;/span> &lt;span class="n">Span&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="k">ref&lt;/span> &lt;span class="n">T&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">ref&lt;/span> &lt;span class="n">T&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">T&lt;/span> &lt;span class="n">temp&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">x&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">y&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">temp&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>CSharp编译器会通过 &lt;code>Swap&lt;/code> 方法来获取参数的类型，因此并不需要把泛型类型传过去。只需要 &lt;code>Swap(3, 6)&lt;/code> 即可。&lt;/p>
&lt;h5 id="561---泛型方法示例">5.6.1 - 泛型方法示例
&lt;/h5>&lt;h5 id="562---带约束的泛型方法">5.6.2 - 带约束的泛型方法
&lt;/h5>&lt;p>类似于带约束的泛型类，使用 &lt;code>where&lt;/code> 子句进行约束。&lt;/p>
&lt;h5 id="563---带委托的泛型方法">5.6.3 - 带委托的泛型方法
&lt;/h5>&lt;p>可以将泛型类型传给参数中的委托中的泛型类型：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pubic&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="n">T2&lt;/span> &lt;span class="n">Accumulate&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">T1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">T2&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="n">IEnumerable&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">T1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">source&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Func&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">T1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">T2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">T2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">action&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>参数表中参数类的泛型将会使用调用时候指定的泛型。&lt;/p>
&lt;h5 id="564-泛型方法规范">5.6.4 泛型方法规范
&lt;/h5>&lt;p>泛型方法可以重载，为特定的类型定义规范。这也适用于带泛型参数的方法。&lt;/p>
&lt;blockquote>
&lt;p>注意：所调用的方法是在编译期间而不是运行期间定义的。&lt;/p>&lt;/blockquote></description></item><item><title>C#面向对象——对象和类型与继承 - C#笔记</title><link>https://blog.gaein.cn/passages/csharp-note2-oop/</link><pubDate>Tue, 27 Apr 2021 21:52:51 +0800</pubDate><guid>https://blog.gaein.cn/passages/csharp-note2-oop/</guid><description>&lt;h2 id="目录">目录
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note1-Basic/" target="_blank" rel="noopener"
>C#基础&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note2-OOP/" target="_blank" rel="noopener"
>C#面向对象&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note3-Generics-Type/" target="_blank" rel="noopener"
>C#泛型&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note4-Operators-and-TypeCasts/" target="_blank" rel="noopener"
>C#运算符和强制类型转换&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note5-Array/" target="_blank" rel="noopener"
>C#中数组的使用&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note6-Delegates-lambda-Expressions-and-Events/" target="_blank" rel="noopener"
>C#的委托、lambda 表达式和事件&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note7-String-and-Regular/" target="_blank" rel="noopener"
>C#字符串和正则表达式&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="csharp-面向对象编程">CSharp 面向对象编程
&lt;/h2>&lt;blockquote>
&lt;p>系统学习CSharp笔记，本来也想写在基础部分来着，但是上一篇博客太长了，想想还是拆出来写吧。
包括CSharp的 对象和类、继承 两章&lt;/p>&lt;/blockquote>
&lt;h3 id="3---对象和类型">3 - 对象和类型
&lt;/h3>&lt;h4 id="31---创建和使用类">3.1 - 创建和使用类
&lt;/h4>&lt;h4 id="32---类和结构">3.2 - 类和结构
&lt;/h4>&lt;p>结构不同于类，结构是值类型而类是引用类型，结构不需要在堆上分配空间，它们通常存储在栈上，另外，结构不支持继承。&lt;/p>
&lt;p>较小的数据类型使用结构可以提升性能。&lt;/p>
&lt;h4 id="33---类">3.3 - 类
&lt;/h4>&lt;p>类可以包含静态成员或者实例成员。静态成员属于类而实例成员属于对象。&lt;/p>
&lt;h5 id="331---字段field">3.3.1 - 字段(Field)
&lt;/h5>&lt;p>字段是与类相关的变量，前面说过，字段通常是私有的。最好不要把它设置为 &lt;code>public&lt;/code> ，除非你有足够的理由，因为字段应该去由属性来设置，而不是直接暴露给外部。&lt;/p>
&lt;h5 id="332---只读字段">3.3.2 - 只读字段
&lt;/h5>&lt;p>带有 &lt;code>readonly&lt;/code> 修饰符的字段只能在构造函数中分配它的值。它与 &lt;code>const&lt;/code> 修饰符不同，它不需要在编译的时候就指定值。&lt;/p>
&lt;h5 id="333---属性property">3.3.3 - 属性(property)
&lt;/h5>&lt;p>属性的概念是：&lt;/p>
&lt;blockquote>
&lt;p>它是一个方法或一对方法，在客户端看来，它们是一个字段。&lt;/p>&lt;/blockquote>
&lt;p>也就是说，在类的内部，属性是设置私有字段的方法。而外部看来，它们是字段，比如：&lt;/p>
&lt;h6 id="具有表达式体的树形访问器">具有表达式体的树形访问器
&lt;/h6>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">private&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">_name&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">Name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">get&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">_name&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">set&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">_name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">value&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="自动实现的属性">自动实现的属性
&lt;/h6>&lt;p>当然，上面的代码可以使用自动实现的属性替换为，也可以用属性初始化器来初始化（第二行代码）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">Name&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="n">Guid&lt;/span> &lt;span class="n">Uid&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Guid&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>注意看第一段代码的命名规范：本来 Microsoft 那边的规范是使用小写字母命名私有字段，但是 .NET Core 团队转向用下划线加小写字母来命名，这样显然更容易区分。&lt;/p>
&lt;h6 id="属性的访问修饰符">属性的访问修饰符
&lt;/h6>&lt;p>CSharp允许给属性的 &lt;code>get&lt;/code> 和 &lt;code>set&lt;/code> 访问器分别设置不同的修饰符。&lt;/p>
&lt;blockquote>
&lt;p>注意：在 &lt;code>get&lt;/code> 和 &lt;code>set&lt;/code> 访问器中必须有一个具备属性的访问级别。&lt;/p>&lt;/blockquote>
&lt;h6 id="只读属性">只读属性
&lt;/h6>&lt;p>在属性定义中省略 &lt;code>set&lt;/code> 访问器，就可以创建只读属性。&lt;/p>
&lt;h6 id="表达式体属性">表达式体属性
&lt;/h6>&lt;p>在CSharp6之后，用于创建只读属性，类似于表达式体方法。&lt;/p>
&lt;p>比如说：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">FirstName&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">LastName&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">FullName&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="s">$&amp;#34;{FirstName} {LastName}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="不可变的类型">不可变的类型
&lt;/h6>&lt;p>如果对象没有任何可以改变的成员，只有只读成员，它就是一个不可变的类型。&lt;/p>
&lt;h5 id="334---匿名类">3.3.4 - 匿名类
&lt;/h5>&lt;p>&lt;code>var&lt;/code> 与 &lt;code>new&lt;/code> 关键字一起使用时，可以创建匿名类型。匿名类型只是一个继承自 &lt;code>Object&lt;/code> 且没有名称的类。该类的定义从初始化器中推断，类似于隐式类型化的变量，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">code&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">200&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">message&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;OK&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;AspNetCore&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果创建另外一个匿名类，但是它们的所有属性都匹配则它们为同一个类型，可以赋值。&lt;/p>
&lt;h5 id="335---方法">3.3.5 - 方法
&lt;/h5>&lt;blockquote>
&lt;p>注意：正式的CSharp术语区分函数和方法。“函数”成员不仅包含方法，也包含类或结构的一些非数据成员，比如索引器、运算符、构造函数和析构函数，甚至还有属性。字段、常量和事件才是数据成员。&lt;/p>&lt;/blockquote>
&lt;h6 id="方法的声明">方法的声明
&lt;/h6>&lt;p>说过了&lt;/p>
&lt;h6 id="表达式体方法">表达式体方法
&lt;/h6>&lt;p>一行解决问题：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="n">hasValue&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="调用方法">调用方法
&lt;/h6>&lt;p>通过 &lt;code>类名.方法名()&lt;/code> 来调用静态方法，静态方法属于类。&lt;/p>
&lt;p>对于非静态来说，它们是属于某个对象（特定实例）的，因此需要先将其类实例化，再用 &lt;code>对象.方法()&lt;/code> 来调用。&lt;/p>
&lt;h6 id="方法的重载">方法的重载
&lt;/h6>&lt;p>CSharp支持方法重载——方法的几个版本有不同的签名，即同名的方法可以接受不同的参数。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// method1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">string&lt;/span> &lt;span class="n">FindName&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Guid&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">members&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">FirstOrDefault&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">Where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Id&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">)?.&lt;/span>&lt;span class="n">Name&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// method2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">string&lt;/span> &lt;span class="n">FindName&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">guid&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Guid&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">FindName&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">guid&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>不仅参数类型可以不同，参数个数也可以不同。&lt;/p>
&lt;h6 id="命名的参数">命名的参数
&lt;/h6>&lt;p>任何方法都可以使用命名的参数，只需要写一个变量名在前面，然后就不管顺序传入指定的参数了。&lt;/p>
&lt;p>比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">TestMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">opt1&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">opt2&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">16&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">TestMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">opt2&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="m">4&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="个数可变的参数">个数可变的参数
&lt;/h6>&lt;p>声明数组类型的参数（比如 &lt;code>int&lt;/code> 类型），添加 &lt;code>params&lt;/code> 关键字，就可以使用任意数量的 &lt;code>int&lt;/code> 类型的参数调用该方法。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">PrintEach&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">params&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">inputs&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">foreach&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">item&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="n">inputs&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">item&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>调用该方法的时候可以使用任意数量个 &lt;code>int&lt;/code> 类型的参数哦，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">PrintEach&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">PrintEach&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">4&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="336---构造函数constructorctor">3.3.6 - 构造函数(constructor/ctor)
&lt;/h5>&lt;p>声明一个与类同名的方法，但是不需要写返回类型（连 &lt;code>void&lt;/code> 都不写），比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">UsersServices&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="k">readonly&lt;/span> &lt;span class="n">IOptions&lt;/span> &lt;span class="n">_options&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="k">readonly&lt;/span> &lt;span class="n">IUsersRepo&lt;/span> &lt;span class="n">_userRepo&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// constructor&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">UsersServices&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">IOptions&lt;/span> &lt;span class="n">options&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">IUsersRepo&lt;/span> &lt;span class="n">usersRepo&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_options&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">options&lt;/span> &lt;span class="p">??&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArgumentNullException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nameof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">options&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_usersRepo&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">usersRepo&lt;/span> &lt;span class="p">??&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArgumentNullException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nameof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">usersRepo&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果不写构造函数的话，编译器会默认生成一个啥也没有的构造函数。如果写了带参数的构造函数则不会默认生成默认的（没有参数什么也不做）构造函数。构造函数可以重载。&lt;/p>
&lt;p>可以包含 &lt;code>static&lt;/code> 修饰符的情况：&lt;/p>
&lt;ul>
&lt;li>类仅用于某些静态成员或属性的容器，因此永远不会实例化它。&lt;/li>
&lt;li>希望类仅通过某个静态成员函数来实例化&lt;/li>
&lt;/ul>
&lt;h6 id="表达式体和构造函数">表达式体和构造函数
&lt;/h6>&lt;p>如果CTOR由一个表达式构成，就直接用表达式体实现：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">MyClass&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">IOptions&lt;/span> &lt;span class="n">option&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">_option&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">option&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="从构造函数中调用其他构造函数">从构造函数中调用其他构造函数
&lt;/h6>&lt;p>可以调用其它的构造函数，复用代码。CSharp有一个特殊的语法，成为构造函数初始化器，可以实现此目的：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Car&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">Car&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">description&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">description&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">Car&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">description&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">num&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// codes...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>也可以包含对基类的构造函数的调用（语法和上面大致相同，使用 &lt;code>base&lt;/code> 代替 &lt;code>this&lt;/code>）&lt;/p>
&lt;h6 id="静态构造函数">静态构造函数
&lt;/h6>&lt;p>给类编写无参数的静态构造函数。这种构造函数只执行一次。&lt;/p>
&lt;h4 id="34---结构">3.4 - 结构
&lt;/h4>&lt;p>有时仅需要一个小的数据结构。此时，类提供的功能多于我们需要的功能，由于性能原因，最好使用结构。&lt;/p>
&lt;p>结构相比于类来说：&lt;/p>
&lt;ul>
&lt;li>不支持继承&lt;/li>
&lt;li>如果没有默认的构造函数则所有值被初始化为默认值&lt;/li>
&lt;li>可以指定字段如何在内存中布局&lt;/li>
&lt;/ul>
&lt;p>因为结构实际上是把数据项组合在一起，所以有时候大多数或者全部字段都声明为 &lt;code>public&lt;/code>&lt;/p>
&lt;h5 id="341---结构是值类型">3.4.1 - 结构是值类型
&lt;/h5>&lt;p>对于结构来说，&lt;code>new&lt;/code> 只是调用构造函数，初始化所有字段。&lt;/p>
&lt;p>结构遵循其它数据类型都遵循的规则：在使用所有元素都必须进行初始化，调用 &lt;code>new&lt;/code> 关键字就全部初始化了。&lt;/p>
&lt;p>但当把结构作为参数传递给方法的时候应该把它作为 &lt;code>ref&lt;/code> 参数，以免性能损失。&lt;/p>
&lt;h5 id="342---只读结构">3.4.2 - 只读结构
&lt;/h5>&lt;p>使用CSharp7.2时， &lt;code>readonly&lt;/code> 修饰符可以应用于结构，因此编译器保证结构体的不变性。&lt;/p>
&lt;h5 id="343---结构和继承">3.4.3 - 结构和继承
&lt;/h5>&lt;p>&lt;strong>结构不是为继承设计的&lt;/strong>&lt;/p>
&lt;blockquote>
&lt;p>要比较结构值，最好实现结构 &lt;code>IEquatable&amp;lt;T&amp;gt;&lt;/code> 。&lt;/p>&lt;/blockquote>
&lt;h5 id="344---结构的构造函数">3.4.4 - 结构的构造函数
&lt;/h5>&lt;p>默认构造函数把数值字段都初始化为 0，且总是隐式的给出。不能为结构创建定制的默认CTOR。&lt;/p>
&lt;h5 id="345---ref-结构">3.4.5 - ref 结构
&lt;/h5>&lt;p>使用 &lt;code>ref&lt;/code> 关键字将结构体分配到堆上。&lt;/p>
&lt;h4 id="35---按值和按引用传递参数">3.5 - 按值和按引用传递参数
&lt;/h4>&lt;blockquote>
&lt;p>为了避免在更改成员时类和结构之间的不同行为上出现这种混淆，最好将结构设置为不可变的。&lt;/p>&lt;/blockquote>
&lt;h5 id="351---ref-参数">3.5.1 - ref 参数
&lt;/h5>&lt;p>在定义和调用方法的参数前加上 &lt;code>ref&lt;/code> 修饰符，使用引用。&lt;/p>
&lt;h5 id="352---out-参数">3.5.2 - out 参数
&lt;/h5>&lt;p>处理类型错误的数据，可以使用 &lt;code>TryParse&lt;/code> 方法。无论解析成功与否，都返回一个 &lt;code>bool&lt;/code> 类型，解析成功的结果使用 &lt;code>out&lt;/code> 返回到另外一个参数。&lt;/p>
&lt;p>调用此方法时，变量不需要预先初始化，而是在方法中初始化变量，在调用方法的时候需要提供 &lt;code>out&lt;/code> 修饰符，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">TryParse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">inputStr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">out&lt;/span> &lt;span class="kt">var&lt;/span> &lt;span class="n">result&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;SUCCESS&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="353--in-参数">3.5.3- in 参数
&lt;/h5>&lt;p>&lt;code>in&lt;/code> 参数保证发送到方法中的数据不会更改，它将参数设置为只读变量。相比于只使用 &lt;code>ref&lt;/code> 来说，显然使用 &lt;code>in&lt;/code> 修饰符更安全一些。&lt;/p>
&lt;p>使用值类型和 &lt;code>in&lt;/code> 修饰符，不仅有助于确保不更改内存，编译器还可以创建更好的优化代码。&lt;/p>
&lt;h4 id="36---可空类型">3.6 - 可空类型
&lt;/h4>&lt;p>可空类型是可以为空( &lt;code>null&lt;/code> )的值类型，用于解决从数据库映射到代码或者类似这种值类型的可能为空的情况。&lt;/p>
&lt;p>可空类型只需要在类型的后面添加“?”。&lt;/p>
&lt;p>值类型隐式转换为可空类型，可空类型需要强制转换为值类型，如果强制转换的过程中可空类型变量为 &lt;code>null&lt;/code> 则会引发一个异常。更好的解决方案是使用可空类型的 &lt;code>HasValue&lt;/code> 和 &lt;code>Value&lt;/code> 属性。&lt;/p>
&lt;p>可以使用：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">idInt&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">HasValue&lt;/span> &lt;span class="p">?&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Value&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>当然，使用合并运算符更好：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">idInt&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="p">??&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="37---枚举类型">3.7 - 枚举类型
&lt;/h4>&lt;p>枚举是一个值类型，包含一组命名的常量。&lt;/p>
&lt;p>默认情况下，枚举的类型是 &lt;code>int&lt;/code> ，也可以通过 &lt;code>:[type]&lt;/code> 指定为其它整数类型，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">enum&lt;/span> &lt;span class="n">Color&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="kt">short&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>还可以使用枚举类型把多个选项分配给一个变量，分配给常量的值必须是不同的位（使用位与来把多个枚举常量赋值给变量），并且加上 &lt;code>Flags&lt;/code> 属性 ，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="na">[Flags]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">enum&lt;/span> &lt;span class="n">DaysOfWeek&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Monday&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="n">b_0000_0000_0000_0001&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Tuesday&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="n">b_0000_0000_0000_0010&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Wednesday&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="n">b_0000_0000_00000_0100&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Thursday&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="n">b_0000_0000_0000_1000&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Friday&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="n">b_0000_0000_0001_0000&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Saturday&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="n">b_0000_0000_0010_0000&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Sunday&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="n">b_0000_0000_0100_0000&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Weekend&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Saturday&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="n">Sunday&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Workday&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="n">b_0000_0000_0001_1111&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">AllWeek&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Workday&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="n">Weekend&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>枚举还提供了方法来解析字符串：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Enum&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">TryParse&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="s">&amp;#34;Red&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">out&lt;/span> &lt;span class="kt">var&lt;/span> &lt;span class="n">red&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>Enum.GetNames&lt;/code> 方法返回一个包含所有枚举名的字符串数组。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">foreach&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">day&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="n">Enum&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetNames&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">typeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>为了获取枚举的值，可以使用 &lt;code>Enum.GetValues&lt;/code>，返回枚举值的一个数组。&lt;/p>
&lt;h4 id="38---部分类">3.8 - 部分类
&lt;/h4>&lt;p>&lt;code>partial&lt;/code> 关键字允许把类、结构、方法或接口放在多个文件中。&lt;/p>
&lt;blockquote>
&lt;p>注意：尽管 &lt;code>partial&lt;/code> 关键字很容易创建跨文件的庞大的类，但是它并不应该这么用，如果类过大还是应该拆分的。&lt;/p>&lt;/blockquote>
&lt;p>部分类中可以用 &lt;code>partial&lt;/code> 关键字声明一个方法，然后在其它文件中实现（实现不需要加这个关键字），比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">partial&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">PartMethod&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在另一个文件中：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">PartMethod&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// DO SOME THING&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>部分方法必须是 &lt;code>void&lt;/code> 类型，否则编译器在没有实现代码的情况下不能将其删除。&lt;/strong>&lt;/p>
&lt;h4 id="39---扩展方法">3.9 - 扩展方法
&lt;/h4>&lt;p>扩展方法是给对象添加功能的另一个选项，在不能使用继承时，也可能使用这个选项（例如类是密封的）。&lt;/p>
&lt;p>扩展方法的定义在参数表里是这样的： &lt;code>(this [类型] [标识符])&lt;/code> 也就是普通方法的参数表类型前面加上 &lt;code>this&lt;/code>。会作为第一个参数类型的扩展方法。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">StringExt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">GetWordCount&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Split&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">Length&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="310---object-类">3.10 - Object 类
&lt;/h4>&lt;p>所有的 &lt;code>.NET&lt;/code> 类都继承于 &lt;code>System.Object&lt;/code> 。&lt;code>Object&lt;/code> 类提供了一些方法：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>方法&lt;/th>
&lt;th>作用&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>ToString()&lt;/code>&lt;/td>
&lt;td>对象的字符串表示，可以重写&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>GetHashCode()&lt;/code>&lt;/td>
&lt;td>在散列中的对象可以使用这个方法&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Equals()&lt;/code>&lt;/td>
&lt;td>比较对象的相等性，有重载可以重写&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>Finalize()&lt;/code>&lt;/td>
&lt;td>析构函数，引用被GC的时候调用&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>GetType()&lt;/code>&lt;/td>
&lt;td>返回一个实例提供对象所属类的信息&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>MemeberwiseClone&lt;/code>&lt;/td>
&lt;td>浅表复制对象并返回副本的引用&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="4---继承">4 - 继承
&lt;/h3>&lt;h4 id="41---面向对象">4.1 - 面向对象
&lt;/h4>&lt;p>面向对象的三个最重要的概念是继承、封装和多态（老生常谈了）&lt;/p>
&lt;h4 id="42---继承的类型">4.2 - 继承的类型
&lt;/h4>&lt;ul>
&lt;li>单重继承： 一个类派可以生自一个基类，CSharp采用这种继承&lt;/li>
&lt;li>多重继承： 一个类派生自多个基类，C++用，CSharp不允许这种继承，但是可以继承自多个接口&lt;/li>
&lt;li>多层继承： 一个基类的派生类可以继续被继承，CSharp允许这种继承&lt;/li>
&lt;li>接口继承： 定义了接口的继承，CSharp允许并且允许多重接口继承&lt;/li>
&lt;/ul>
&lt;h5 id="421---多重继承">4.2.1 - 多重继承
&lt;/h5>&lt;p>C++等支持多重继承，但是会增加代码复杂度以及额外开销，（并且我觉得不是很优雅）。所以CSharp不支持这种继承。但是同时，CSharp允许继承自多个接口。&lt;/p>
&lt;h5 id="422---结构和类">4.2.2 - 结构和类
&lt;/h5>&lt;p>前面说过，结构不是为继承而设计的，但是&lt;/p>
&lt;ul>
&lt;li>结构总是派生自 &lt;code>System.ValueType&lt;/code> ，它们还可以派生自多个接口。&lt;/li>
&lt;li>类总是派生自 &lt;code>System.Object&lt;/code> 或者用户选择的另一个类，它们还可以派生自多个接口。&lt;/li>
&lt;/ul>
&lt;h4 id="43---实现继承">4.3 - 实现继承
&lt;/h4>&lt;p>声明类派生自另一个类（比如类 &lt;code>A&lt;/code> 派生自 &lt;code>B&lt;/code>），使用以下的语法：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">A&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">B&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果类也派生自接口，则用逗号分隔多个接口。&lt;/p>
&lt;blockquote>
&lt;p>注意：如果派生类同时派生自类和多个接口，类放在最前面。&lt;/p>&lt;/blockquote>
&lt;h5 id="431---虚方法">4.3.1 - 虚方法
&lt;/h5>&lt;p>把一个基类方法声明为 &lt;code>virtual&lt;/code> ，就可以在任何派生类中重写(override)该方法：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">Shape&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">virtual&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">Draw&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;Shape with {Position} and {Size}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>也可以把属性声明为 &lt;code>virtual&lt;/code> 。对于虚属性或重写属性，语法和非虚属性相同，但要添加关键字 &lt;code>virtual&lt;/code>。&lt;/p>
&lt;p>CSharp中的虚函数概念与标准的 OOP 的概念相同：可以在派生类中重写虚函数。在调用方法的时候会调用该类对象的合适方法。不同于Jvav，在CSharp中函数在默认情况下不是虚拟的，但可以显示的声明为 virtual。&lt;/p>
&lt;p>CSharp要求在派生类中重写另一个函数时，使用 &lt;code>override&lt;/code>关键字显示声明：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">Rectangle&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">Shape&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">override&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">Draw&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;Rectangle with {Position} and {Size}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以重写 &lt;code>Object&lt;/code> 类的某些方法，比如 &lt;code>ToString&lt;/code> 和 &lt;code>Equals&lt;/code>。&lt;/p>
&lt;blockquote>
&lt;p>注意：成员字段和静态函数都不能声明为 &lt;code>virtual&lt;/code> ，因为这个概念只对类中的实例函数有效。&lt;/p>&lt;/blockquote>
&lt;h5 id="432---多态性">4.3.2 - 多态性
&lt;/h5>&lt;p>拿上面的例子来说，尽管方法声明为接收一个 &lt;code>Shape&lt;/code> 对象，但是任何派生自 &lt;code>Shape&lt;/code> 的类型都可以传递给这个方法。因为派生自 &lt;code>Shape&lt;/code> 的类拥有 &lt;code>Shape&lt;/code> 的所有内容。&lt;/p>
&lt;h5 id="433---隐藏方法">4.3.3 - 隐藏方法
&lt;/h5>&lt;p>如果签名相同的方法在基类和派生类中都进行了声明，但该方法没有分别声明为 &lt;code>virtual&lt;/code> 和 &lt;code>override&lt;/code> ，派生类方法就会隐藏于基类方法。&lt;/p>
&lt;blockquote>
&lt;p>注意：new 方法修饰符 &lt;strong>不应该用于&lt;/strong> 故意隐藏基类的成员。它的主要目的是处理版本冲突。&lt;/p>&lt;/blockquote>
&lt;h5 id="434---调用方法的基类版本">4.3.4 - 调用方法的基类版本
&lt;/h5>&lt;p>为了添加派生类的功能，可以使用 &lt;code>base&lt;/code> 关键字调用基类方法，语法为 &lt;code>base.&amp;lt;MethodName&amp;gt;&lt;/code>&lt;/p>
&lt;h5 id="435---抽象类和抽象方法">4.3.5 - 抽象类和抽象方法
&lt;/h5>&lt;p>CSharp允许把类声明为 &lt;code>abstract&lt;/code> 。抽象类不能实例化，而抽象方法不能直接实现，必须在非抽象的派生类中重写。&lt;/p>
&lt;h5 id="436---密封类和密封方法">4.3.6 - 密封类和密封方法
&lt;/h5>&lt;p>如果不应创建派生自某个自定义类的类，该自定义类就该密封。给类添加 &lt;code>sealed&lt;/code> 修饰符，就不允许创建该类的子类。&lt;/p>
&lt;h5 id="437---派生类的构造函数">4.3.7 - 派生类的构造函数
&lt;/h5>&lt;p>CTOR 总是按照层次结构的顺序调用：先调用 &lt;code>System.Object&lt;/code> 类的构造函数，再按照层次结构由上向下运行，直到到达编译器要实例化的类为止。&lt;/p>
&lt;p>把初始化代码放在 CTOR 代码块内太迟了，所以采用 &lt;code>base&lt;/code> 关键字传参：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">Student&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">Human&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">Student&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Sex&lt;/span> &lt;span class="n">sex&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="k">base&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sex&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="44---修饰符">4.4 - 修饰符
&lt;/h4>&lt;h5 id="441---访问修饰符">4.4.1 - 访问修饰符
&lt;/h5>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>修饰符&lt;/th>
&lt;th>应用于&lt;/th>
&lt;th>说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>public&lt;/code>&lt;/td>
&lt;td>所有的类或成员&lt;/td>
&lt;td>任何代码都可访问&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>protected&lt;/code>&lt;/td>
&lt;td>类型和内嵌类型的所有成员&lt;/td>
&lt;td>只有派生的类能够访问&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>internal&lt;/code>&lt;/td>
&lt;td>所有的类或成员&lt;/td>
&lt;td>只有在包含它的程序集才能访问&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>private&lt;/code>&lt;/td>
&lt;td>类型和内嵌类型的所有成员&lt;/td>
&lt;td>只能在它所属的类中访问&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>protected internal&lt;/code>&lt;/td>
&lt;td>同上&lt;/td>
&lt;td>&lt;code>protected&lt;/code> OR &lt;code>internal&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>private protected&lt;/code>&lt;/td>
&lt;td>同上&lt;/td>
&lt;td>&lt;code>private&lt;/code> AND &lt;code>protected&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;blockquote>
&lt;p>注意： &lt;code>public&lt;/code>、&lt;code>protected&lt;/code> 和 &lt;code>private&lt;/code> 是逻辑访问修饰符，而 &lt;code>internal&lt;/code> 是“物理”的，它表示程序集的边界。&lt;/p>&lt;/blockquote>
&lt;h5 id="442---其他修饰符">4.4.2 - 其他修饰符
&lt;/h5>&lt;p>|修饰符|应用于| 说明 |
| &lt;code>new&lt;/code>|函数成员|隐藏继承的成员|
|&lt;code>static&lt;/code>|所有成员|静态|
|&lt;code>virtual&lt;/code>|仅成员函数|虚函数|
|&lt;code>abstract&lt;/code>|同上|定义签名，没有实现|
|&lt;code>override&lt;/code>|同上|重写|
|&lt;code>sealed&lt;/code>|类、方法和属性|封闭，不可被继承|&lt;/p>
&lt;h4 id="45---接口">4.5 - 接口
&lt;/h4>&lt;p>声明接口在语法上与声明类完全相同，只是 &lt;code>class&lt;/code> 换成了 &lt;code>interface&lt;/code>，但是接口中不允许提供任何成员的实现。&lt;/p>
&lt;p>因为接口的成员总是抽象的，所以接口不需要 &lt;code>abstract&lt;/code> 修饰符。&lt;/p>
&lt;h5 id="451---定义和实现接口">4.5.1 - 定义和实现接口
&lt;/h5>&lt;p>接口名称通常以 &lt;code>I&lt;/code> 开头，以便知道这是一个接口。&lt;/p>
&lt;p>让想实现接口的类继承于接口，然后去实现接口里面定义的成员即可。比如说 &lt;code>AccountService&lt;/code> 派生于 &lt;code>IAccountService&lt;/code> ，表示它获得了 &lt;code>IAccountService&lt;/code> 中的所有成员，但接口实际上并不实现其方法，所以 &lt;code>AccountService&lt;/code> 中必须提供其实现。如果缺少代码编译器将产生一个错误。&lt;/p>
&lt;h5 id="451---派生的接口">4.5.1 - 派生的接口
&lt;/h5>&lt;p>接口可以彼此继承，其方式与类的继承相同。&lt;/p>
&lt;h4 id="46-is-和-as-运算符">4.6 is 和 as 运算符
&lt;/h4>&lt;p>两个与继承有关的重要运算符：&lt;code>is&lt;/code> 和 &lt;code>as&lt;/code>&lt;/p>
&lt;p>在从基类的对象转为派生类的对象的时候不应该直接进行强制转换，而应该先检查，使用 &lt;code>as&lt;/code> 运算符而不是强制转换 &lt;code>(&amp;lt;type&amp;gt;)&lt;/code>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">Login&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">object&lt;/span> &lt;span class="n">service&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">IAccountService&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">service&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">IAccountService&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>as&lt;/code> 运算符会检查要进项转换的对象是否符合条件（实现了接口），然后再进行转换，如果不符合不会抛出异常而是返回一个 &lt;code>null&lt;/code>。&lt;/p>
&lt;p>&lt;code>is&lt;/code> 运算符根据条件是否满足，返回一个 &lt;code>bool&lt;/code> 值，如果条件为 &lt;code>true&lt;/code> ，则将所得的对象写入后面声明的变量中：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="k">is&lt;/span> &lt;span class="n">AccountService&lt;/span> &lt;span class="n">service&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// service is AccountService.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>C#编程基础 - C#笔记</title><link>https://blog.gaein.cn/passages/csharp-note1-basic/</link><pubDate>Sat, 24 Apr 2021 21:38:19 +0800</pubDate><guid>https://blog.gaein.cn/passages/csharp-note1-basic/</guid><description>&lt;h2 id="目录">目录
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note1-Basic/" target="_blank" rel="noopener"
>C#基础&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note2-OOP/" target="_blank" rel="noopener"
>C#面向对象&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note3-Generics-Type/" target="_blank" rel="noopener"
>C#泛型&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note4-Operators-and-TypeCasts/" target="_blank" rel="noopener"
>C#运算符和强制类型转换&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note5-Array/" target="_blank" rel="noopener"
>C#中数组的使用&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note6-Delegates-lambda-Expressions-and-Events/" target="_blank" rel="noopener"
>C#的委托、lambda 表达式和事件&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/CSharp-Note7-String-and-Regular/" target="_blank" rel="noopener"
>C#字符串和正则表达式&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="csharp-基础">CSharp 基础
&lt;/h2>&lt;blockquote>
&lt;p>《CSharp高级编程（第 11 版）》 笔记，系统入 .NET&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>由于这么多年来一直用 CSharp摸鱼，所以基础部分只写一些自己认为比较重要的。今天看了一天书，一百来页，结果刚才发现好像都忘了&amp;hellip;所以来开个笔记。这一部分主要介绍了什么是 &lt;code>.NET&lt;/code> ，技术之间的关系（显然，我的理解很不透彻）。然后所CSharp的基础内容，变量定义、程序流控制等。&lt;/p>&lt;/blockquote>
&lt;h3 id="net-应用程序和技术">.NET 应用程序和技术
&lt;/h3>&lt;h4 id="net-framework">.NET Framework
&lt;/h4>&lt;p>旧技术，只能运行于 Windows 操作系统。梦开始的地方。&lt;code>.NET Framework 4.8&lt;/code> 后无更新计划，但会继续支持。&lt;/p>
&lt;h4 id="net-core--net">.NET Core &amp;amp; .NET
&lt;/h4>&lt;p>&lt;code>.NET Core&lt;/code> 是跨平台的、开源的高性能平台。近年来 &lt;code>.NET Core&lt;/code> 很有起色。&lt;code>.NET 5&lt;/code> “合并了” &lt;code>.NET Core&lt;/code> 和 &lt;code>.NET Framework&lt;/code>，未来的 &lt;code>.NET&lt;/code> 会以 &lt;code>.NET&lt;/code> 为名发布，比如今年年末计划发布的 LTS 版本：&lt;code>.NET 6&lt;/code>&lt;/p>
&lt;blockquote>
&lt;p>如果你开一个新项目的话，用 .NET Core/.NET 5 吧！如果不是维护旧代码或者有特殊需求，真的不建议用 .NET Framework 了。而且新平台上手难度也很低。&lt;/p>&lt;/blockquote>
&lt;h4 id="csharp">CSharp
&lt;/h4>&lt;p>面向对象的类型安全的高性能语言。语法上算是 C-Style，与 C/C++、Java 很相似（但是更像 Java 一点），不过相比于 Java 来说语言特性方面有很多优点。&lt;/p>
&lt;h4 id="关于相关概念的理解">关于相关概念的理解
&lt;/h4>&lt;blockquote>
&lt;p>注意：这部分是我自己的理解，不一定对。&lt;/p>&lt;/blockquote>
&lt;p>&lt;code>.NET&lt;/code> 大部分情况下可以指一个生态：它有着一个公共基础架构，包括语言（CSharp、F##、VisualBasic）以及编译器和运行库组建（比如 GC）。&lt;/p>
&lt;p>在其上是 &lt;code>.NET 标准库&lt;/code>&lt;/p>
&lt;p>要注意 &lt;code>.NET Standard&lt;/code> 不是一个实现而是一个协定，本协定规定了需要实现什么 API。&lt;code>.NET Framework&lt;/code>、&lt;code>.NET Core&lt;/code> 和 &lt;code>Mono&lt;/code> 平台实现了这个协定。但是他们各自实现了 &lt;code>CLR&lt;/code> —— 公共语言运行时，但是 &lt;code>.NET Framework&lt;/code> 实现的 &lt;code>CLR&lt;/code> 就叫做 &lt;code>CLR&lt;/code>，而&lt;code>.NET Core&lt;/code> 所实现的 &lt;code>CLR&lt;/code> 叫做 &lt;code>CLR Core&lt;/code>。因此 &lt;code>CLR&lt;/code> 是概念还是实现需要看具体语境。&lt;/p>
&lt;h4 id="clr">CLR
&lt;/h4>&lt;p>&lt;code>CLR&lt;/code> 的职责是：将构建时的中间码（IL）编译为本机码。同时还负责加载类型、垃圾回收以及线程处理。&lt;/p>
&lt;h4 id="开发工具">开发工具
&lt;/h4>&lt;p>个人心中觉得的易用程度：&lt;/p>
&lt;ol>
&lt;li>Visual Studio 2019 + JetBrains ReSharper 插件&lt;/li>
&lt;li>Visual Studio Code + CSharp插件&lt;/li>
&lt;li>JetBrains Rider&lt;/li>
&lt;li>Visual Studio&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>注： Visual Studio for MAC 没用过，家贫。&lt;/p>&lt;/blockquote>
&lt;h3 id="2---核心-csharp">2 - 核心 CSharp
&lt;/h3>&lt;h4 id="21---csharp基础">2.1 - CSharp基础
&lt;/h4>&lt;h5 id="hello-world">Hello World
&lt;/h5>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">namespace&lt;/span> &lt;span class="nn">Example&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">class&lt;/span> &lt;span class="nc">Program&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">static&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">Main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hello World&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="csharp9的脚本">CSharp9的“脚本”
&lt;/h5>&lt;p>&lt;code>Main&lt;/code> 函数是程序的入口点，但是在 CSharp9 之后，可以忽略&lt;code>Main&lt;/code>函数直接书写代码，就像“脚本”一样：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Please input your name&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">userName&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ReadLine&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;Hello, {userName}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>它将从第一行代码开始顺序执行。&lt;/p>
&lt;h5 id="每一段代码都干了啥">每一段代码都干了啥
&lt;/h5>&lt;p>下面来看看分析下 HelloWorld 的代码：&lt;/p>
&lt;h6 id="csharp的语法">CSharp的语法
&lt;/h6>&lt;p>CSharp的语法很符合 C/C++那一套：&lt;/p>
&lt;ol>
&lt;li>分号结束语句；&lt;/li>
&lt;li>标识符区分大小写；&lt;/li>
&lt;li>花括号包裹语段；&lt;/li>
&lt;li>单行注释以 &lt;code>//&lt;/code> 开头，多行注释包裹在 &lt;code>/*&lt;/code> 与 &lt;code>*/&lt;/code> 之间。&lt;/li>
&lt;/ol>
&lt;p>包括很多像定义变量、赋值、函数声明与调用什么的也都很相似。&lt;/p>
&lt;h6 id="名称空间">名称空间
&lt;/h6>&lt;p>名称空间是把相关类组合在一起的方式。&lt;code>namespace&lt;/code> 后跟名称空间，花括号内的类属于该名称空间。&lt;/p>
&lt;p>&lt;code>using System;&lt;/code> 引用了名称空间 &lt;code>System&lt;/code> 。声明语句允许引用这个类（&lt;code>Console&lt;/code>），而不用去写 &lt;code>System.Console.WriteLine();&lt;/code>&lt;/p>
&lt;p>可以使用 &lt;code>using static&lt;/code> 不仅可以打开名称空间，也可以引用类的所有静态成员 &lt;code>using static System.Console&lt;/code> 后可以直接使用 &lt;code>WriteLine()&lt;/code> 方法。&lt;/p>
&lt;h6 id="program类">Program类
&lt;/h6>&lt;p>所有的CSharp代码都应该包含在类中（9那种“脚本”编程除外。）类的声明包含 &lt;code>class&lt;/code> 关键字，后面跟类名和一对花括号。&lt;/p>
&lt;p>事实上这个类叫啥名都行啊&lt;/p>
&lt;h6 id="主函数">主函数
&lt;/h6>&lt;p>&lt;code>C&lt;/code> 、 &lt;code>C++&lt;/code> 、 &lt;code>Java&lt;/code> 等很多编程语言都有这个概念，主函数（&lt;code>Main&lt;/code> 方法）是程序的入口点，程序从这里开始执行。&lt;code>Main()&lt;/code> 方法的返回值为 &lt;code>void&lt;/code> 或者 &lt;code>int&lt;/code>。&lt;/p>
&lt;p>在CSharp中，方法的定义如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// [modifiers修饰符] return_type返回类型 MethodName方法名([parameters参数])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">ConvertToInt&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">double&lt;/span> &lt;span class="n">input&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>WriteLine&lt;/code> 是一个静态方法，所以不需要先实例化一个 &lt;code>Console&lt;/code> 对象。&lt;/p>
&lt;h4 id="22---变量">2.2 - 变量
&lt;/h4>&lt;p>使用以下语法声明变量&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// datatype类型 identifier标识符;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">number&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="221---初始化变量">2.2.1 - 初始化变量
&lt;/h5>&lt;p>CSharp中，变量在使用之前必须要被初始化。使用未初始化的变量无法通过编译。如果变量是类或结构中的字段，则会自动初始化为0（是在内存中的0，而不是字面量0）。&lt;/p>
&lt;p>在CSharp中实例化一个对象，需要使用 &lt;code>new&lt;/code> 关键字：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">HttpClient client = new HttpClient();
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="222---类型推断">2.2.2 - 类型推断
&lt;/h5>&lt;p>在CSharp中可以使用类型推断让编译器自动推断类型（使用 &lt;code>var&lt;/code> 关键字）。在类型名非常长的时候很爽，事实上大部分变量我都在用类型推断让编译器去帮我推断：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">6&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// num is int.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">option&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">JsonSerializerOptions&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">WriteIndented&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// option is JsonSerializerOptions.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>需要遵循以下规则：&lt;/p>
&lt;ol>
&lt;li>变量必须被初始化，不然编译器就没有推断的依据（谁知道你 &lt;code>var t&lt;/code> 想干啥啊）&lt;/li>
&lt;li>初始化器不能为空（也没人知道你 &lt;code>var t = null&lt;/code> 想干啥）&lt;/li>
&lt;li>初始化器必须放在表达式中&lt;/li>
&lt;li>不能把初始化器设置为一个对象，除非在初始化器中创建了一个新对象（不能把对象赋值过去&lt;code>var obj = sb;&lt;/code>，但是你可以在等号右面整个新对象&lt;code>var obj = new StringBuilder();&lt;/code>）&lt;/li>
&lt;/ol>
&lt;h5 id="223---变量的作用域">2.2.3 - 变量的作用域
&lt;/h5>&lt;p>变量是有作用域的，它遵循以下规则：&lt;/p>
&lt;ol>
&lt;li>只要类的局部变量在某个作用域内，其字段（也称为成员变量）也在该作用域内（对象的字段和对象的作用域一样）；&lt;/li>
&lt;li>局部变量存在于声明该变量的块语句或方法结束的右括号之前的作用域内；&lt;/li>
&lt;li>在 &lt;code>for&lt;/code> 、 &lt;code>while&lt;/code> 或类似语句中声明的局部变量存在于该循环体内。&lt;/li>
&lt;/ol>
&lt;h6 id="局部变量的作用域冲突">局部变量的作用域冲突
&lt;/h6>&lt;p>同名的局部变量不能在同一个作用域内声明两次。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">t&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vat&lt;/span> &lt;span class="n">t&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;str&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这必报错好吧。&lt;/p>
&lt;p>如果在不同的作用域内声明了两个同名变量，小作用域内会使用作用域小的变量（但是我觉得应该尽量避免这种情况）&lt;/p>
&lt;h6 id="字段和局部变量的作用域冲突">字段和局部变量的作用域冲突
&lt;/h6>&lt;p>在类级别（类中）定义的会被认为是字段，而方法内的看作局部变量。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">namespace&lt;/span> &lt;span class="nn">Test&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">class&lt;/span> &lt;span class="nc">Program&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">static&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">static&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">Main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">30&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// Output: 30.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以看到，在小作用域（方法中）使用了小作用域的变量（&lt;code>Main&lt;/code> 里面定义的 &lt;code>i&lt;/code>）而不是字段&lt;code>i&lt;/code>。在这一部分CSharp隐藏了作用域更大的字段&lt;code>i&lt;/code>。
想要使用类级别的变量可以使用 &lt;code>Program.i&lt;/code> 这样的语法（&lt;code>object.fieldName&lt;/code>）&lt;/p>
&lt;h5 id="224---常量">2.2.4 - 常量
&lt;/h5>&lt;p>使用 &lt;code>const&lt;/code> 关键字定义常量：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">size&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">1024&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这个 &lt;code>const&lt;/code> 和 C/C++ 中有区别，它的原理更像 &lt;code>##define SIZE (1024)&lt;/code>。编译器在编译的时候将它替换为字面量。因此，在 &lt;code>const&lt;/code> 关键字后面定义的常量要在被编译之前能确定它的值。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">dir&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Environment&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CurrentDirectory&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// Error.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>上面这语句中编译器在编译的时候不知道 &lt;code>Environment.CurrentDirectory&lt;/code> 的值，因此没有办法编译为常量。&lt;/p>
&lt;ol>
&lt;li>常量必须在声明时初始化。指定了其值后，就不能再改写了。&lt;/li>
&lt;li>常量的值必须能在编译时用于计算。因此，不能使用从变量中提取的值来初始化常量。&lt;/li>
&lt;li>常量总是隐式静态的。不需要也不允许添加 &lt;code>static&lt;/code> 关键字。&lt;/li>
&lt;/ol>
&lt;h4 id="23---预定义数据类型">2.3 - 预定义数据类型
&lt;/h4>&lt;h5 id="231---值类型和引用类型">2.3.1 - 值类型和引用类型
&lt;/h5>&lt;p>CSharp把数据类型分为两种：&lt;/p>
&lt;ul>
&lt;li>值类型&lt;/li>
&lt;li>引用类型&lt;/li>
&lt;/ul>
&lt;p>从概念上，值类型存储的是变量的值，而引用类型存储的是变量的引用。&lt;/p>
&lt;p>值类型存储在（堆）栈-Stack中，而引用类型存储在堆-Heap中。&lt;/p>
&lt;p>在CSharp中，基本的数据类型大部分值类型，比如&lt;code>int&lt;/code>、&lt;code>double&lt;/code>、&lt;code>bool&lt;/code>等，而大多数更复杂的类型（自己定义的类等）是引用类型。结构体是值类型。&lt;/p>
&lt;p>CLR会定期删除不能使用的引用。&lt;/p>
&lt;p>如果变量为引用类型则可以把它设置为 &lt;code>null&lt;/code> ，表示它不引用任何对象。&lt;/p>
&lt;blockquote>
&lt;p>如果去访问一个指向 &lt;code>null&lt;/code> 的变量的非静态成员函数或字段则会引发一个运行时异常。&lt;/p>&lt;/blockquote>
&lt;h5 id="232---net-类型">2.3.2 - .NET 类型
&lt;/h5>&lt;p>数据类型的CSharp关键字从编译器映射到.NET数据类型。在语法上可以把基本类型看作支持某些方法的类。&lt;/p>
&lt;h5 id="233---预定义的值类型">2.3.3 - 预定义的值类型
&lt;/h5>&lt;h6 id="整型">整型
&lt;/h6>&lt;p>有符号整型：&lt;/p>
&lt;ul>
&lt;li>&lt;code>sbyte&lt;/code> - 8位&lt;/li>
&lt;li>&lt;code>short&lt;/code> - 16位&lt;/li>
&lt;li>&lt;code>int&lt;/code> - 32位&lt;/li>
&lt;li>&lt;code>long&lt;/code> - 64位&lt;/li>
&lt;/ul>
&lt;p>无符号整型：&lt;/p>
&lt;ul>
&lt;li>&lt;code>byte&lt;/code> - 8位&lt;/li>
&lt;li>&lt;code>ushort&lt;/code> - 16位&lt;/li>
&lt;li>&lt;code>uint&lt;/code> - 32位&lt;/li>
&lt;li>&lt;code>ulong&lt;/code> - 64位&lt;/li>
&lt;/ul>
&lt;p>在CSharp中，所有的数据类型都以与平台无关的方式定义，以备迁移。
所有的整数类型都能被赋予十进制或者十六进制或者二进制，十六进制和二进制使用前缀：&lt;/p>
&lt;ul>
&lt;li>&lt;code>0x&lt;/code> - 十六进制&lt;/li>
&lt;li>&lt;code>0b&lt;/code> - 二进制&lt;/li>
&lt;/ul>
&lt;p>如果没有显示的声明则变量默认为 &lt;code>int&lt;/code> 类型，可以使用后缀：&lt;/p>
&lt;ul>
&lt;li>&lt;code>U&lt;/code> - 无符号&lt;/li>
&lt;li>&lt;code>L&lt;/code> - 长整型&lt;/li>
&lt;li>&lt;code>UL&lt;/code> - 无符号长整型&lt;/li>
&lt;/ul>
&lt;p>可以使用下划线作为数字分隔符，增强可阅读性，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">uint&lt;/span> &lt;span class="n">binary&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="n">b1111_1011_1100_1011_1101_1100_0010&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="浮点型">浮点型
&lt;/h6>&lt;ul>
&lt;li>&lt;code>float&lt;/code> - 32位&lt;/li>
&lt;li>&lt;code>double&lt;/code> - 64位&lt;/li>
&lt;/ul>
&lt;p>指定值为 &lt;code>float&lt;/code> 需要使用后缀 &lt;code>F&lt;/code>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">float&lt;/span> &lt;span class="n">width&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">23.8F&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="decimal类型">decimal类型
&lt;/h6>&lt;p>专门用于财务的类型。&lt;/p>
&lt;p>&lt;code>decimal&lt;/code> - 128位&lt;/p>
&lt;blockquote>
&lt;p>不是基本类型，计算的时候会有性能损失。&lt;/p>&lt;/blockquote>
&lt;p>需要在数字后面加上 &lt;code>M&lt;/code> 来指定。&lt;/p>
&lt;h6 id="bool类型">bool类型
&lt;/h6>&lt;p>它只有 &lt;code>true&lt;/code> 和 &lt;code>false&lt;/code>&lt;/p>
&lt;blockquote>
&lt;p>注意：在CSharp中 &lt;code>bool&lt;/code> 类型和整数值不能相互隐式转换。也就是说：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">flag&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">flag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Yes!&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// wrong.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">flag&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Yes!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// right.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/blockquote>
&lt;h6 id="字符类型">字符类型
&lt;/h6>&lt;p>&lt;code>char&lt;/code> 仅用于存储字符。它可以使用单引号包裹的字面量赋值，也可以使用Unicode、强制转换的整数和十六进制数以及转义字符。&lt;/p>
&lt;h5 id="234---预定义的引用类型">2.3.4 - 预定义的引用类型
&lt;/h5>&lt;h6 id="object类型">object类型
&lt;/h6>&lt;p>在CSharp中，&lt;code>object&lt;/code> 类型就是最终的父类型，所有的内置类型和用于定义的类型都从它派生而来。&lt;/p>
&lt;h6 id="string类型">string类型
&lt;/h6>&lt;p>CSharp有 &lt;code>string&lt;/code> 关键字，在遮罩下转换为 &lt;code>System.String&lt;/code>。&lt;/p>
&lt;p>&lt;code>string&lt;/code> 是一个引用类型，但是目前来说 &lt;code>string&lt;/code> 类基本上已经实现其语义遵循一般的、直观的字符串规则。&lt;/p>
&lt;blockquote>
&lt;p>可以直接用 &lt;code>==&lt;/code> 来比较字符串的值啦！&lt;/p>&lt;/blockquote>
&lt;p>CSharp字符串也可以包含Unicode和十六进制数转义序列。&lt;/p>
&lt;p>前缀：&lt;/p>
&lt;ul>
&lt;li>&lt;code>@&lt;/code> 这个字符后所有的字符都看成原来的含义，不会被解释为转义，并且也可以包含换行符（可以写多行）。&lt;/li>
&lt;li>&lt;code>$&lt;/code> 这个字符串中使用插值，可以使用 &lt;code>{var}&lt;/code> 来在字符串中插入值，比如：
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Jack&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">note&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">$&amp;#34;Hello, {Jack}!&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h4 id="24-程序流控制">2.4 程序流控制
&lt;/h4>&lt;h5 id="241---条件语句">2.4.1 - 条件语句
&lt;/h5>&lt;h6 id="if语句">if语句
&lt;/h6>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">condition&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// codes...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// other codes...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>为了安全和保持一致，建议只要使用if语句就加上花括号，如果真的只有一行并且不想加花括号可以这样写：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">isFault&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="switch-语句">switch 语句
&lt;/h6>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">switch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="m">4&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;3 or 4&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;UnKnow number&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>注意：case的值必须是常量表达式，不允许使用变量。&lt;/p>&lt;/blockquote>
&lt;p>CSharp这个玩意它很安全，如果激活了一个 &lt;code>case&lt;/code> 则其它的 &lt;code>case&lt;/code> 就不会被激活，而且 &lt;code>break&lt;/code> 是强制加入的。如果上一个 &lt;code>case&lt;/code> 没有语句则可不写 &lt;code>break&lt;/code> 来“滑滑梯”。&lt;/p>
&lt;p>还有一个玩意叫 &lt;code>switch表达式&lt;/code> ，这个东西书上没写，我搓了个 &lt;code>switch&lt;/code> 来用代码提示转换成了表达式看看：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">code&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">200&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">code&lt;/span> &lt;span class="k">switch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">200&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="s">&amp;#34;OK&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">400&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="s">&amp;#34;BadRequest&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="s">&amp;#34;UnKnow&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这个东西呢适用于以下场景：不同的条件返回不同的值，但是类型是一样的。&lt;/p>
&lt;h5 id="242---循环">2.4.2 - 循环
&lt;/h5>&lt;blockquote>
&lt;p>这些都跟C差不多咯&lt;/p>&lt;/blockquote>
&lt;h6 id="for-循环">for 循环
&lt;/h6>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">sum&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="m">100&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sum&lt;/span> &lt;span class="p">+=&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="while-循环">while 循环
&lt;/h6>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">input&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ReadLine&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">IsNullOrWhiteSpace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">input&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Invalid input, please retry.&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">input&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ReadLine&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>当输入的 &lt;code>input&lt;/code> 为空的时候会进入循环一直要求输入。&lt;/p>
&lt;h6 id="do-while-循环">do-while 循环
&lt;/h6>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">input&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Empty&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Please input.&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">input&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ReadLine&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">IsNullOrWhiteSpace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">input&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="foreach-循环">foreach 循环
&lt;/h6>&lt;p>&lt;code>foreach&lt;/code> 循环可以迭代集合中的每一项，但是它不能改变集合中的各项。&lt;/p>
&lt;h5 id="243---跳转语句">2.4.3 - 跳转语句
&lt;/h5>&lt;h6 id="goto-语句">goto 语句
&lt;/h6>&lt;p>标签：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Label&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;L1&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>跳转：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">goto&lt;/span> &lt;span class="n">Label&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>大多数情况下不允许使用goto语句。一般情况下，使用它肯定不是面向对象编程的好方式。&lt;/p>&lt;/blockquote>
&lt;h6 id="break-语句">break 语句
&lt;/h6>&lt;p>用于退出 &lt;code>case&lt;/code> 和退出循环，如果放在嵌套的循环中则退出内部循环。、&lt;/p>
&lt;h6 id="continue-语句">continue 语句
&lt;/h6>&lt;p>只退出当前迭代，立即开始下一轮循环。&lt;/p>
&lt;h6 id="return-语句">return 语句
&lt;/h6>&lt;p>退出当前方法并把控制权返回给调用者。如果方法的类型不是 &lt;code>void&lt;/code> 则必须return相应的类型。&lt;/p>
&lt;h4 id="25---名称空间">2.5 - 名称空间
&lt;/h4>&lt;p>名称空间是一种逻辑组合，而不是物理组合（事实上要尽量和文件结构对应好一些吧）&lt;/p>
&lt;p>名称空间之间用句点隔开。名称空间与程序集无关。&lt;/p>
&lt;p>一般来说 &lt;code>CompanyName.ProjectName.SystemSection&lt;/code> 是可以接受的命名方式，也是微软所推荐的。&lt;/p>
&lt;h5 id="251---using-语句">2.5.1 - using 语句
&lt;/h5>&lt;p>输名称空间太长了，所以用using来把它引入，然后就能直接写了，上面说过。&lt;/p>
&lt;p>很多CSharp代码都有 &lt;code>using System&lt;/code> ，因为微软公司提供的许多有用的都在这个名称空间下。&lt;/p>
&lt;p>如果在不同的名称空间下两个类名一样则需要写前面的名称空间。应该尽量避免这种情况的发生。&lt;/p>
&lt;h5 id="252---名称空间的别名">2.5.2 - 名称空间的别名
&lt;/h5>&lt;p>&lt;code>using&lt;/code> 关键字的另一个用途是给类和名称空间指定别名。如果名称空间很长但是还需要避免类名冲突的话可以使用别名，这样写起来爽一些。&lt;/p>
&lt;blockquote>
&lt;p>注意：名称空间的别名的修饰符 &lt;code>::&lt;/code>&lt;/p>&lt;/blockquote>
&lt;h4 id="26-main-方法">2.6 Main() 方法
&lt;/h4>&lt;p>要求一般为：&lt;/p>
&lt;ul>
&lt;li>使用了 &lt;code>static&lt;/code> 修饰符&lt;/li>
&lt;li>在任意名称的类中&lt;/li>
&lt;li>返回 &lt;code>int&lt;/code> 或 &lt;code>void&lt;/code> 类型&lt;/li>
&lt;/ul>
&lt;p>（当然，前面说过了，CSharp9所允许的那样脚本化的操作并不需要满足）&lt;/p>
&lt;p>在调用的时候可以让CLR包含参数，将命令行参数传递给程序：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">void&lt;/span> &lt;span class="n">Main&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>与C不同的是，&lt;code>args[0]&lt;/code> 并不是程序的路径，它就是传递的第一个参数。&lt;/p>
&lt;h4 id="27---注释">2.7 - 注释
&lt;/h4>&lt;p>注释是个好东西哦&lt;/p>
&lt;h5 id="271---源文件中的内部注释">2.7.1 - 源文件中的内部注释
&lt;/h5>&lt;p>CSharp使用传统的C风格的注释：&lt;/p>
&lt;ul>
&lt;li>单行注释使用 &lt;code>//&lt;/code>&lt;/li>
&lt;li>多行注释使用 &lt;code>/*&lt;/code> 和 &lt;code>*/&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>不过，在写多行的时候也可以使用多个单行注释，因为使用IDE的快捷键来这么干非常方便。&lt;/p>
&lt;h5 id="272---xml文档">2.7.2 - XML文档
&lt;/h5>&lt;p>&lt;code>///&lt;/code> 用于生成XML风格的注释，常见的XML标签有：&lt;/p>
&lt;ul>
&lt;li>&lt;code>&amp;lt;summary&amp;gt;&lt;/code> - 提供类型或成员的简短小结&lt;/li>
&lt;li>&lt;code>&amp;lt;returns&amp;gt;&lt;/code> - 说明方法的返回值&lt;/li>
&lt;li>&lt;code>&amp;lt;param&amp;gt;&lt;/code> - 标记方法的参数（编译器要验证其语法）&lt;/li>
&lt;/ul>
&lt;h4 id="28---csharp预处理器指令">2.8 - CSharp预处理器指令
&lt;/h4>&lt;h5 id="281---define-和-undef">2.8.1 - #define 和 #undef
&lt;/h5>&lt;p>&lt;code>#define&lt;/code> 本身没啥用（它不能和C/C++那样玩），和 &lt;code>#if&lt;/code> 配合才有大用。&lt;/p>
&lt;h5 id="282---ifelifelse-和-endif">2.8.2 - #if、#elif、#else 和 #endif
&lt;/h5>&lt;p>&lt;code>#if&lt;/code> 如果条件符合那就编译中间的代码，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#define&lt;/span> &lt;span class="n">DEBUG&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#if&lt;/span> &lt;span class="n">DEBUG&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;DEBUG MODE ENABLED!&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#elif&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;NORMAL MODE.&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#endif&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>它还支持一组逻辑运算符：&lt;code>!&lt;/code>、&lt;code>==&lt;/code>、&lt;code>!=&lt;/code> 和 &lt;code>||&lt;/code>&lt;/p>
&lt;h5 id="283---warning-和-error">2.8.3 - #warning 和 #error
&lt;/h5>&lt;p>编译器遇到它们的时候分别产生警告和错误，它后面的文本是给用户显示的信息。&lt;/p>
&lt;h5 id="284---region-和-endregion">2.8.4 - #region 和 #endregion
&lt;/h5>&lt;p>用于把一段代码视为有给定名称的一块，一些编辑器会识别并使这些代码在屏幕上更好的布局。&lt;/p>
&lt;h5 id="285---line">2.8.5 - #line
&lt;/h5>&lt;p>改变在编译器警告和错误中的行号。&lt;/p>
&lt;h5 id="286---pragma">2.8.6 - #pragma
&lt;/h5>&lt;p>关闭或者开启对某行代码的警告。比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#pragma&lt;/span> &lt;span class="n">warning&lt;/span> &lt;span class="n">disable&lt;/span> &lt;span class="m">169&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">MyClass&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">neverUsedField&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#pragma&lt;/span> &lt;span class="n">warning&lt;/span> &lt;span class="n">restore&lt;/span> &lt;span class="m">169&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>上述代码可以关闭“字段未使用”的警告。&lt;/p>
&lt;h4 id="29---csharp编程准则">2.9 - CSharp编程准则
&lt;/h4>&lt;p>关于规范方面，ldqk有一篇博客，写的很全面&lt;/p>
&lt;p>&lt;a class="link" href="https://ldqk.org/1755" target="_blank" rel="noopener"
>全面的CSharp编码规范整理&lt;/a>&lt;/p>
&lt;h5 id="291---关于标识符的规则">2.9.1 - 关于标识符的规则
&lt;/h5>&lt;p>标识符是给变量、用户定义的类型和这些类型的成员的名称，准则有：&lt;/p>
&lt;ul>
&lt;li>尽管可以包含数字字符，但它们必须以字母或者下划线开头；&lt;/li>
&lt;li>不能把CSharp关键字用作标识符。&lt;/li>
&lt;/ul>
&lt;h5 id="292---用法约定">2.9.2 - 用法约定
&lt;/h5>&lt;p>CSharp的约定是命名变量时不使用任何前缀（不用 &lt;code>char *pszResult&lt;/code> 这样的）：&lt;code>string Result&lt;/code>&lt;/p>
&lt;p>微软规定了许多CSharp的用法准则，虽然不是强制要求，但是尽量遵守这些准则，除非有明确的理由。&lt;/p>
&lt;h6 id="命名约定">命名约定
&lt;/h6>&lt;ol>
&lt;li>
&lt;p>名称的大小写&lt;/p>
&lt;p>名称空间和类，以及基类中的成员等名称应该遵循 Pascal 大小写规则。&lt;/p>
&lt;p>Pascal 大小写规则就是每个单词首字母大写，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">ClassMember&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">ListService&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>应该使用 Pascal 大小写规则的有：&lt;/p>
&lt;p>名称空间、类名、方法名、属性或者私有字段（最近Microsoft那边在使用下划线开头命名私有字段，那样更容易区分一些）。&lt;/p>
&lt;p>另外一种大小写方式是 camel 大小写形式，它就是第一个单词全部小写，其余单词首字母大写，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">uint&lt;/span> &lt;span class="n">itemIndex&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">string&lt;/span> &lt;span class="n">dataFileFullPath&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">@&amp;#34;C:\...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>通常来说本地变量使用这种大小写规则。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>名称的风格&lt;/p>
&lt;p>保持一致&lt;/p>
&lt;p>比如某个方法为 &lt;code>ShowConfirmationDialog()&lt;/code> ，则另一个方法不应该叫做 &lt;code>ShowDialogWarning()&lt;/code> 或者 &lt;code>WarningDialogShow()&lt;/code> 而是应该命名为 &lt;code>ShowWarningDialog()&lt;/code>。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>名称空间的名称&lt;/p>
&lt;p>尽量避免与其它重名，推荐的格式上文说过，是：&lt;code>&amp;lt;CompanyName&amp;gt;.&amp;lt;TechnologyName&amp;gt;&lt;/code>，例如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">namespace&lt;/span> &lt;span class="nn">Microsoft.Text&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>名称和关键字&lt;/p>
&lt;p>名称不应该与任何关键字冲突&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h6 id="属性和方法的使用">属性和方法的使用
&lt;/h6>&lt;p>如果这个看起来感觉是变量，就应该用属性来表示，而不是方法。总结来说：&lt;/p>
&lt;ul>
&lt;li>不要将只写的设置为属性，比如应该使用 &lt;code>SetPassword()&lt;/code> 方法而不是只写的 &lt;code>Password&lt;/code> 属性；&lt;/li>
&lt;li>读取该值不应该花费太多时间；&lt;/li>
&lt;li>读写该值不应该有其它明显的效果，它的作用应该仅与这个属性相关；&lt;/li>
&lt;li>可以按照任意的顺序去设置属性，不应该因为属性没有设置完而抛出异常；&lt;/li>
&lt;li>如果属性可能有意想不到的改变，就应该写成方法。&lt;/li>
&lt;/ul>
&lt;p>如果不能满足所有的条件，那么就写成方法吧。&lt;/p>
&lt;h6 id="字段的使用">字段的使用
&lt;/h6>&lt;p>字段的用法非常简单。字段应该总是私有的，但是某些情况下可以设置为公有。&lt;/p></description></item><item><title>为 ASP.NET Core 自定义监听 Url 和端口的五种办法</title><link>https://blog.gaein.cn/passages/set-urls-for-aspnetcore/</link><pubDate>Sun, 04 Apr 2021 03:18:28 +0800</pubDate><guid>https://blog.gaein.cn/passages/set-urls-for-aspnetcore/</guid><description>&lt;blockquote>
&lt;p>文章由我翻译自&lt;a class="link" href="https://andrewlock.net/5-ways-to-set-the-urls-for-an-aspnetcore-app/" target="_blank" rel="noopener"
>5 ways to set the URLs for an ASP.NET Core app&lt;/a>。本人文化水平不高，可能有误译，但是大致内容应该没有问题，还请多海涵。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>版权声明：本文:&lt;a class="link" href="https://andrewlock.net/5-ways-to-set-the-urls-for-an-aspnetcore-app/" target="_blank" rel="noopener"
>5 ways to set the URLs for an ASP.NET Core app&lt;/a>为&lt;a class="link" href="https://andrewlock.net/about/" target="_blank" rel="noopener"
>Andrew Lock&lt;/a>原创，依据 &lt;a class="link" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener"
>CC BY-SA 4.0&lt;/a> 许可证进行授权，转载请附上出处链接及本声明。&lt;/p>&lt;/blockquote>
&lt;h2 id="为-aspnet-core-自定义监听-url-和端口的五种办法">为 ASP.NET Core 自定义监听 Url 和端口的五种办法
&lt;/h2>&lt;p>默认情况下，ASP.NET Core应用程序监听以下地址：&lt;/p>
&lt;ul>
&lt;li>http://localhost:5000&lt;/li>
&lt;li>https://localhost:5001&lt;/li>
&lt;/ul>
&lt;p>在这篇文章里我将给出 5 种不同的办法来改变你的应用程序监听的地址。&lt;/p>
&lt;p>在启动程序的时候改变 ASP.NET Core 监听地址有很多种办法。我有一篇&lt;a class="link" href="https://andrewlock.net/configuring-urls-with-kestrel-iis-and-iis-express-with-asp-net-core/" target="_blank" rel="noopener"
>旧博客&lt;/a>指出了在 ASP.NET Core 1.0 中可选的几种办法，这些办法在 ASP.NET Core 3.x 中大致是相同的：&lt;/p>
&lt;ul>
&lt;li>&lt;code>UseUrls()&lt;/code> —— 在 &lt;em>Program.cs&lt;/em> 中写死；&lt;/li>
&lt;li>环境变量 —— 使用 &lt;code>DOTNET_URLS&lt;/code> 或者 &lt;code>ASPNETCORE_URLS&lt;/code> 来设置；&lt;/li>
&lt;li>命令行参数 —— 从命令行启动时使用 &lt;code>--urls&lt;/code> 参数来设置；&lt;/li>
&lt;li>使用 &lt;code>launchSettings.json&lt;/code> —— 在 &lt;code>applicationUrl&lt;/code> 这个节点中设置；&lt;/li>
&lt;li>&lt;code>KestrelServerOptions.Listen()&lt;/code> —— 手动使用 &lt;code>Listen()&lt;/code> 为 Kestrel 服务器设置地址。&lt;/li>
&lt;/ul>
&lt;p>在下面我们来看各个办法的详细说明。&lt;/p>
&lt;h3 id="你能用什么样的urls">你能用什么样的URLs
&lt;/h3>&lt;p>在这篇文章里我说了你可以监听的 &amp;ldquo;URLs&amp;rdquo;，但是你不可能去使用一个随意的、毫无章法 URL。这有 3 类 URL 可以用来监听。&lt;/p>
&lt;ul>
&lt;li>IPv4 和 IPv6 的本机环回地址（例如 &lt;code>http://localhost:5000&lt;/code>）。它的格式为:&lt;code>{协议}://{回路网络接口地址}:{端口}&lt;/code>；&lt;/li>
&lt;li>你机器上的某个特定 IP 地址（例如 &lt;code>http://192.168.8.31:5005&lt;/code>）。它的格式为:&lt;code>{协议}://{IP地址}:{端口}&lt;/code>；&lt;/li>
&lt;li>指定端口的全部 IP 地址（例如 &lt;code>http://*:6264&lt;/code>）。它的格式为:&lt;code>{协议}://*:{端口}&lt;/code>。&lt;/li>
&lt;/ul>
&lt;p>&lt;code>port&lt;/code> 在上述模式中也是可选的 —— 如果你省略了它，将会使用方案的默认端口（&lt;code>https&lt;/code> 端口是 &lt;code>80&lt;/code>，&lt;code>https&lt;/code> 的端口是 &lt;code>443&lt;/code>）。&lt;/p>
&lt;p>上述模式中你选择那种取决于你的部署机制。比方说，你在一台服务器上托管多个应用程序，你需要设置明确的IP地址。如果你在容器中托管，一般来说你可以使用地址 &lt;code>localhost&lt;/code>。&lt;/p>
&lt;blockquote>
&lt;p>注意观察 “任意” IP 地址的格式 —— 你不一定必须要用 &lt;code>*&lt;/code>，你可以使用一切不是 IP 地址也不是 &lt;code>localhost&lt;/code> 的地址。也就是说，你可以使用像 &lt;code>http://*&lt;/code>、&lt;code>http://+&lt;/code>，&lt;code>http://mydomain&lt;/code> 或者 &lt;code>http://example.org&lt;/code>。所有这些都会有相同的行为，并且监听任何 IP。如果你只想处理某个特定的域名的请求，你需要额外设置 &lt;a class="link" href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/servers/kestrel?view=aspnetcore-3.1##host-filtering" target="_blank" rel="noopener"
>host filtering&lt;/a>。&lt;/p>&lt;/blockquote>
&lt;p>当你知道你需要你的程序监听那些 URLs 时，你需要告诉你的程序这些事。在这篇博客里我写了设置这些的 5 种可能的方法。&lt;/p>
&lt;h3 id="useurls">UseUrls()
&lt;/h3>&lt;p>第一种、并且也是最简单的设置绑定 URL 的的办法是在 &lt;code>IWebHostBuilder&lt;/code> 中使用 &lt;code>UseUrls()&lt;/code> 写死：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">Program&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">Main&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">CreateHostBuilder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">Build&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">Run&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="n">IHostBuilder&lt;/span> &lt;span class="n">CreateHostBuilder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Host&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateDefaultBuilder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">ConfigureWebHostDefaults&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">webBuilder&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">webBuilder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">UseStartup&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Startup&lt;/span>&lt;span class="p">&amp;gt;();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">webBuilder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">UseUrls&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;http://localhost:5003&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;https://localhost:5004&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>把 URLs 写死看起来并不是一个优雅且可拓展的解决方法，所以这个方法并不怎么用在实际使用中。&lt;/p>
&lt;p>幸运的是，你仍旧可以从外部配置文件、环境变量活命令行参数中设置 URLs。&lt;/p>
&lt;h3 id="环境变量">环境变量
&lt;/h3>&lt;p>.NET Core使用两 &lt;em>种&lt;/em> 设置：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>App设置&lt;/strong> 是你通常所使用的，并且从 &lt;em>appSettings.json&lt;/em> 、环境变量以及其它地方加载。&lt;/li>
&lt;li>&lt;strong>Host设置&lt;/strong> 是用来设置基础的东西的，比如 &lt;a class="link" href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/environments?view=aspnetcore-3.1" target="_blank" rel="noopener"
>hosting环境变量&lt;/a> 和 host 使用的 URL。&lt;/li>
&lt;/ul>
&lt;p>当考虑如何为应用程序设置 URLs 时，我们感兴趣的办法是 &lt;em>Host设置&lt;/em> 。默认情况下，host设置的值从三个不同的源读取：&lt;/p>
&lt;ul>
&lt;li>带有 &lt;code>DOTNET_&lt;/code> 前缀的环境变量。这些环境变量被去除了前缀添加到集合里面；&lt;/li>
&lt;li>命令行参数；&lt;/li>
&lt;li>带有 &lt;code>ASPNETCORE_&lt;/code> 前缀的环境变量，这些环境变量也被添加到了集合里面，仅对 ASP.NET Core 应用程序有作用。如果你创建了一个.NET 通用主机的服务，那么这些环境变量将不会添加；&lt;/li>
&lt;/ul>
&lt;p>如果你不手动重写方法 &lt;code>UseUrls()&lt;/code>，ASP.NET Core 将会使用从设置系统中读取的 &lt;code>URLS&lt;/code> 键对应的值。基于前文，你可以使用两个环境变量中的任意一个设置 URLs：&lt;/p>
&lt;ul>
&lt;li>DOTNET_URLS&lt;/li>
&lt;li>ASPNETCORE_URLS&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>如果你同时设置了两个环境变量， &lt;code>ASPNETCORE_URLS&lt;/code> 的参数将会优先被使用。&lt;/p>&lt;/blockquote>
&lt;p>你可以像通常做的那样在你的环境中设置环境变量。比如，使用命令提示符：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cmd" data-lang="cmd">&lt;span class="line">&lt;span class="cl">setx ASPNETCORE_URLS &lt;span class="s2">&amp;#34;http://localhost:5001&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用PowerShell：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ps1" data-lang="ps1">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$Env&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="n">ASPNETCORE_URLS&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;http://localhost:5001&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>或者是在bash里：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">ASPNETCORE_URLS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;http://localhost:5001;https://localhost:5002&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>就像你在上面看到的那样，你可以通过用分号分割它们来传递多个被监听的地址（用HTTP和HTTPS都行）。&lt;/p>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://disq.us/p/28v6d6c" target="_blank" rel="noopener"
>Marc在评论中&lt;/a>指出，如果你在 Docker 中运行它，&lt;a class="link" href="https://github.com/dotnet/dotnet-docker/blob/402a1591e224b681015be628986eefa5012e940e/3.1/runtime-deps/alpine3.11/amd64/Dockerfile##L15" target="_blank" rel="noopener"
>Dockerfile 会将 &lt;code>ASPNETCORE_URLS&lt;/code> 环境变量设置为端口 80&lt;/a>&lt;/p>&lt;/blockquote>
&lt;h3 id="命令行参数">命令行参数
&lt;/h3>&lt;p>另外一个设置host设置值的办法是使用命令行。如果设置了环境变量则命令行参数会重写它们。只需要使用 &lt;code>--urls&lt;/code> 参数：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">dotnet run --urls &lt;span class="s2">&amp;#34;http://localhost:5100&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>像前面那样，你可以通过用分号分割来传递多个 URLs：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">dotnet run --urls &lt;span class="s2">&amp;#34;http://localhost:5100;https://localhost:5101&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>环境变量和命令行参数可能是生产环境中设置 URLs 用的最多的办法了，但是对于在本地开发来说可能略显繁琐，因此在本地开发通常简单的使用 &lt;em>launchSettings.json&lt;/em>&lt;/p>
&lt;h3 id="launchsettingsjson">launchSettings.json
&lt;/h3>&lt;p>大部分 ASP.NET 项目模板在 &lt;code>Properties&lt;/code> 文件夹中包含 &lt;code>launchSettings.json&lt;/code> 文件。这个文件包含了启动 ASP.NET Core 应用程序的几种配置。一个典型的例子是包含从命令行直接启动选项的定义还有一个使用 IIS Express。该文件配置了 Visual Studio 中 Debug 的下拉菜单：&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/blog/posts/AspNetCore-Set-Urls/launchsettings.png"
loading="lazy"
alt="Visual Studio"
>&lt;/p>
&lt;p>&lt;em>launchSettings.json&lt;/em> 通过 &lt;code>applicationUrl&lt;/code> 节点提供了一个设置 URL 的简单办法 —— 你还可以看见 &lt;code>iisSettings&lt;/code> 里面的 IIS express 设置，以及另外一个 &lt;code>TestApp&lt;/code> （应用程序的名称）。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;iisSettings&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;windowsAuthentication&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;anonymousAuthentication&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;iisExpress&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;applicationUrl&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;http://localhost:38327&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sslPort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">44310&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;profiles&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;IIS Express&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;commandName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;IISExpress&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;launchBrowser&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;environmentVariables&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;ASPNETCORE_ENVIRONMENT&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Development&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;TestApp&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;commandName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Project&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;launchBrowser&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;applicationUrl&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;https://localhost:5001;http://localhost:5000&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;environmentVariables&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;ASPNETCORE_ENVIRONMENT&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Development&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>想要使用这个文件你不需要做任何特别的设置 —— &lt;code>dotnet run&lt;/code> 将会自动使用它。&lt;/p>
&lt;blockquote>
&lt;p>launchSettings.json 同时也提供了一种方便简单的办法使用 &lt;code>environmentVariables&lt;/code> 节点来添加环境变量，你可以从上面的文件看出来这点。&lt;/p>&lt;/blockquote>
&lt;p>当你从命令行使用 &lt;code>dotnet run&lt;/code> 运行你的应用程序，你的程序将会使用上面文件中指定的“项目”中的 &lt;code>applicationUrl&lt;/code> 节点中的 URLs &lt;code>https://localhost:5001;http://localhost:5000&lt;/code>。当你使用 &amp;ldquo;IISExpress&amp;rdquo; 选项的时候，你的应用程序会使用 &lt;code>iisSettings.iisExpress&lt;/code> 中的 &lt;code>applicationUrl&lt;/code>。&lt;/p>
&lt;p>当你在本地开发时可以使用这个文件非常轻易的修改环境变量。事实上你还可以 &lt;em>不&lt;/em> 使用这个 &lt;em>launchSettings.json&lt;/em> 文件:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">dotnet run --no-launch-profile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这将会跳过 &lt;code>launchSettings.json&lt;/code> 文件并且使用本机的环境变量来内部确定URLs。&lt;/p>
&lt;p>所有的这些办法都是简介的对 Kestrel 的间接设置，但你仍然可以直接设置它们。&lt;/p>
&lt;h3 id="kestrelserveroptionslisten">KestrelServerOptions.Listen()
&lt;/h3>&lt;p>在大部分ASP.NET Core程序中，&lt;a class="link" href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/servers/kestrel?view=aspnetcore-3.1" target="_blank" rel="noopener"
>Kestrel&lt;/a>被设置为默认的服务器。如果你想的话可以手动设置为 Kestrel 设置端点，或者通过 &lt;code>IConfiguration&lt;/code> 系统去配置 &lt;code>KestrelServerOptions&lt;/code>。&lt;/p>
&lt;p>我从来没有真正需要去设置这个的时候，并且这个玩意有非常大量的选项可以用。所以，通常情况下我建议&lt;a class="link" href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/servers/kestrel?view=aspnetcore-3.1##endpoint-configuration" target="_blank" rel="noopener"
>参考文档&lt;/a>。举个例子，你可以使用被 &lt;code>KestrelServerOptions&lt;/code> 暴露的 &lt;code>Listen()&lt;/code> 方法。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">Program&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">Main&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">CreateHostBuilder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">Build&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">Run&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="n">IHostBuilder&lt;/span> &lt;span class="n">CreateHostBuilder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Host&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateDefaultBuilder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">ConfigureWebHostDefaults&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">webBuilder&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">webBuilder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">UseStartup&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Startup&lt;/span>&lt;span class="p">&amp;gt;();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">webBuilder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">UseKestrel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">opts&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 直接绑定套接字句柄或者Unix套接字&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// opts.ListenHandle(123554);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// opts.ListenUnixSocket(&amp;#34;/tmp/kestrel-test.sock&amp;#34;);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">opts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Listen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">IPAddress&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Loopback&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="m">5002&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">opts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ListenAnyIP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">5003&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">opts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ListenLocalhost&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">5004&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">opts&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">opts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">UseHttps&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">opts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ListenLocalhost&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">5005&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">opts&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">opts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">UseHttps&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这个直接设置 Kestrel 绑定多个地址。尽管它是写死的，但是也可以不是嘛 —— 你可以绑定 &lt;code>IConfiguration&lt;/code> 中的地址。当你使用这个办法去设置 kestrel 的绑定的时候，它将会覆盖你用其它办法配置的 &lt;code>URLS&lt;/code> 设置，比方说环境变量。当这种情况发生的时候，你可以在日志中看到警告。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">warn: Microsoft.AspNetCore.Server.Kestrel[0]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Overriding address(es) &amp;#39;http://localhost:5007&amp;#39;. Binding to endpoints defined in UseKestrel() instead.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">info: Microsoft.Hosting.Lifetime[0]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Now listening on: http://127.0.0.1:5002
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">info: Microsoft.Hosting.Lifetime[0]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Now listening on: http://[::]:5003
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>个人认为，没有必要像这样从 Kestrel 中绑定端点，但是如果你有需要的话，这是一个摆脱 Kestrel 控制的好方法。&lt;/p>
&lt;h3 id="总结">总结
&lt;/h3>&lt;p>这篇文章中我给出了五种不同的设置监听的 URLs 的办法。&lt;code>UseUrls()&lt;/code> 是最简单的，但是并不适合在生产环境中使用。&lt;code>--urls&lt;/code> 命令行参数和 &lt;code>ASPNETCORE_&lt;/code> / &lt;code>DOTNET_&lt;/code> 环境变量是在生产环境中设置最有用的办法。&lt;code>launchSettings.json&lt;/code> 文件在开发环境中设置URLs非常有用。如果你需要对配置进行底层的控制，你可以直接使用 Kestrel 的 &lt;code>Listen*&lt;/code> 选项，无论是生产环境开始开发环境它们都可以轻易的设置。&lt;/p></description></item><item><title>将 ASP.NET Core 应用程序部署到 docker 中</title><link>https://blog.gaein.cn/passages/aspnetcore-docker/</link><pubDate>Sun, 04 Apr 2021 00:10:02 +0800</pubDate><guid>https://blog.gaein.cn/passages/aspnetcore-docker/</guid><description>&lt;h2 id="将-aspnet-core-应用程序部署到-docker-中">将 ASP.NET Core 应用程序部署到 docker 中
&lt;/h2>&lt;h3 id="前言">前言
&lt;/h3>&lt;blockquote>
&lt;p>最近用 ASP.NET Core 随便摸了一些 API 和新博客的后端，为了方便以后迁移和管理准备部署在 docker 中。&lt;/p>&lt;/blockquote>
&lt;h3 id="编译">编译
&lt;/h3>&lt;p>&lt;del>由于使用 docker 相当于已经指定了系统（Linux），因此我们可以使用更多编译选项。&lt;/del>&lt;/p>
&lt;p>docker 中也有 Windows Server 的镜像，不过大部分是 Linux，官方的 runtime 也是基于 debian 的。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">dotnet publish -c Release -p:PublishReadyToRun&lt;span class="o">=&lt;/span>&lt;span class="nb">true&lt;/span> --no-self-contained -r ubuntu.20.04-x64 -o ./Release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="发布模式">发布模式
&lt;/h4>&lt;p>使用 &lt;code>--configuration&lt;/code> 或者 &lt;code>-c&lt;/code> 来指定发布的模式。默认为 &lt;code>Debug&lt;/code> ，由于我们需要发布正式版所以采用 &lt;code>Release&lt;/code> 。&lt;/p>
&lt;h5 id="r2r">R2R
&lt;/h5>&lt;p>ReadyToRun：在编译的时候除了编译中间码外也编译目标架构的机器码，但是仍然会保留中间码。这样会造成程序体积的翻倍，但是会加快启动速度，不过由于程序体积变大也可能减缓启动速度，&lt;del>是个很玄学的选项&lt;/del>
不过微软文档上表示。&lt;/p>
&lt;blockquote>
&lt;p>For instance, ReadyToRun can be used to reduce the response latency of the first use of Web API in an ASP.NET application.&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>比方说呢，R2R 可以加快 ASP.NET Core Web API 的第一次响应速度。&lt;/p>&lt;/blockquote>
&lt;p>更多内容见微软文档&lt;a class="link" href="https://docs.microsoft.com/en-us/dotnet/core/deploying/ready-to-run" target="_blank" rel="noopener"
>Microsoft Docs | ReadyToRun development overview&lt;/a>&lt;/p>
&lt;h5 id="非自部署发布">非自部署发布
&lt;/h5>&lt;p>使用 &lt;code>--no-self-contained&lt;/code> 或者 &lt;code>--self-contained false&lt;/code> 来指定不要自部署发布，即不包含.NET runtime。这样做有利于减少发布程序的大小。&lt;/p>
&lt;p>但是在没有.NET runtime的机器上运行时需要先安装.NET runtime。&lt;/p>
&lt;p>不过我的想法是在 docker 里面运行，可以使用 ASP.NET Core 的镜像（通常来说也确实是这样的），包含了 .NET runtime 。所以不需要自部署发布。&lt;/p>
&lt;h5 id="目标平台">目标平台
&lt;/h5>&lt;p>使用 &lt;code>--runtime &amp;lt;RUNTIME_IDENTIFIER&amp;gt;&lt;/code> 或 &lt;code>-r&lt;/code> 来指定目标平台。后面接目标平台标识符，即 Runtime Identifiers (RIDs)。&lt;/p>
&lt;p>RID 列表见微软文档：&lt;a class="link" href="https://docs.microsoft.com/en-us/dotnet/core/rid-catalog" target="_blank" rel="noopener"
>Microsoft Docs | Runtime Identifiers (RIDs)&lt;/a>&lt;/p>
&lt;p>因为启用了 R2R 所以需要指定目标平台。&lt;/p>
&lt;p>另外&lt;strong>我觉得&lt;/strong>（并没有根据的胡扯）指定发布平台比全平台编译效果好。&lt;/p>
&lt;h5 id="输出目录">输出目录
&lt;/h5>&lt;p>使用 &lt;code>--output &amp;lt;OUTPUT_DIRECTORY&amp;gt;&lt;/code> 或者 &lt;code>-o&lt;/code> 设置输出目录。&lt;/p>
&lt;h5 id="更多">更多
&lt;/h5>&lt;blockquote>
&lt;p>更多选项见&lt;a class="link" href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-publish" target="_blank" rel="noopener"
>Microsoft Docs | dotnet CLI&lt;/a>&lt;/p>&lt;/blockquote>
&lt;h3 id="docker">Docker
&lt;/h3>&lt;h4 id="添加镜像加速">添加镜像加速
&lt;/h4>&lt;p>&lt;del>docker 官方的镜像仓库慢的理解不能&lt;/del> docker hub 已经被防火墙阻断，这边我使用了阿里云的镜像加速服务（因为我是阿里云服务器，这样速度也非常可观）&lt;/p>
&lt;ol>
&lt;li>打开阿里云控制台的容器镜像服务中的&lt;a class="link" href="https://cr.console.aliyun.com/cn-beijing/instances/mirrors" target="_blank" rel="noopener"
>镜像加速器&lt;/a>Tag；&lt;/li>
&lt;li>按照下面的操作文档修改，比如Ubuntu为：
&lt;ol>
&lt;li>进入目录&lt;code>/etc/docker&lt;/code>（如果没有就创建一个）&lt;/li>
&lt;li>编辑文件&lt;code>daemon.json&lt;/code>（如果没有就创建一个）&lt;/li>
&lt;li>写入如下内容：&lt;code>{&amp;quot;registry-mirrors&amp;quot;: [&amp;quot;https://&amp;lt;token&amp;gt;.mirror.aliyuncs.com&amp;quot;]}&lt;/code>，网址在上面的“加速器地址”处有写。&lt;/li>
&lt;li>&lt;code>sudo systemctl daemon-reload&lt;/code>重载&lt;/li>
&lt;li>&lt;code>sudo systemctl restart docker&lt;/code>重启docker&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;h4 id="dockerfile">Dockerfile
&lt;/h4>&lt;blockquote>
&lt;p>Dockerfile 是一个用来构建镜像的文本文件，文本内容包含了一条条构建镜像所需的指令和说明。&lt;/p>&lt;/blockquote>
&lt;h5 id="引用-aspnet-core-镜像">引用 ASP.NET Core 镜像
&lt;/h5>&lt;p>&lt;del>首先我不希望发布自部署应用程序，因为它过于庞大。&lt;/del> 方便起见，可以考虑引用 ASP.NET Core Runtime 的 Docker 镜像：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dockerfile" data-lang="dockerfile">&lt;span class="line">&lt;span class="cl">&lt;span class="k">FROM&lt;/span>&lt;span class="s"> mcr.microsoft.com/dotnet/aspnet:5.0&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>实际上，使用自部署应用程序+alpine 或许可以发布出体积更小的镜像，但是会稍微麻烦一些。&lt;/p>
&lt;p>这句话引用了 ASP.NET Core 的 docker 镜像，里面有包含 Runtime。&lt;/p>
&lt;h5 id="设置目录">设置目录
&lt;/h5>&lt;p>首先需要使用 &lt;code>COPY&lt;/code> 命令复制我们编译出来的文件，然后使用 &lt;code>WORKDIR&lt;/code> 来指定工作目录（就是启动程序的路径）。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dockerfile" data-lang="dockerfile">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># Copy Files&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">COPY&lt;/span> . /public&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="c"># Set Workdir&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">WORKDIR&lt;/span>&lt;span class="s"> /public&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>请注意替换成自己编译输出的目录&lt;/p>&lt;/blockquote>
&lt;h5 id="设置时区">设置时区
&lt;/h5>&lt;p>为了确保时间正确，设置一下时区&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dockerfile" data-lang="dockerfile">&lt;span class="line">&lt;span class="cl">&lt;span class="k">RUN&lt;/span> ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">RUN&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Asia/Shanghai&amp;#34;&lt;/span> &amp;gt;/etc/timezone&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>当然，更好的做法是在创建容器时候使用环境变量指定，或在 docker compose 中指定：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">TZ&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;Asia/Shanghai&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="开放端口">开放端口
&lt;/h5>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dockerfile" data-lang="dockerfile">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># Expose Port 80&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">EXPOSE&lt;/span>&lt;span class="s"> 80&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>由于 docker 中是生产环境，所以会使用 80 端口而不是默认的 5000 。可以在执行程序的时候更改端口。总之，这里写你要暴露的端口咯。&lt;/p>
&lt;p>当然，你也可以不暴露端口，通过其他手段访问。&lt;/p>
&lt;h5 id="运行程序">运行程序
&lt;/h5>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dockerfile" data-lang="dockerfile">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CMD&lt;/span> ./WebApplication&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>注意替换为你的程序名&lt;/p>&lt;/blockquote>
&lt;p>使用参数 &lt;code>--urls &amp;quot;http://*:6000&amp;quot;&lt;/code> 来设置启动的端口（127.0.0.1为监听本机）。可以使用类似于 &lt;code>--urls &amp;quot;http://*:6000;http://*:6001;http://*:6002;http://*:6003&amp;quot;&lt;/code> 监听多个端口。&lt;/p>
&lt;p>或者你可以使用环境变量和其它方法，可以参考这篇文章：&lt;a class="link" href="https://andrewlock.net/5-ways-to-set-the-urls-for-an-aspnetcore-app/" target="_blank" rel="noopener"
>5 ways to set the URLs for an ASP.NET Core app&lt;/a>&lt;/p>
&lt;p>或&lt;/p>
&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/set-urls-for-aspnetcore/" target="_blank" rel="noopener"
>为 ASP.NET Core 自定义监听 Url 和端口的五种办法&lt;/a>&lt;/p>
&lt;h4 id="创建容器">创建容器
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">docker build -t MyWebApplication:v1.4.2 Release/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这句话将会创建一个 docker 容器，命令的格式如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">docker build -t &amp;lt;container name&amp;gt;:&amp;lt;tag&amp;gt; &amp;lt;directory&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>注意替换为自己容器名称和标签以及构建出来的目录&lt;/p>
&lt;h4 id="运行容器">运行容器
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">docker run -d -p 6000:80 MyWebApplication:v1.4.2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其中 &lt;code>-p 6000:80&lt;/code> 的意思是讲容器暴露的 80 端口映射到本机的 6000 端口，而后面的 &lt;code>MyWebApplication:v1.4.2&lt;/code> 则是刚才创建容器时候写的 &lt;code>container name&lt;/code> 和 &lt;code>tag&lt;/code>。&lt;/p></description></item><item><title>编程代码规范</title><link>https://blog.gaein.cn/passages/programing-standard/</link><pubDate>Tue, 16 Feb 2021 15:44:13 +0800</pubDate><guid>https://blog.gaein.cn/passages/programing-standard/</guid><description>&lt;p>上了半年大学，也写了很多年代码了（厚颜无耻）。总结一下编程中用到的一些代码规范，命名法则等。在这里总结一下。&lt;/p>
&lt;!--MORE-->
&lt;h2 id="前言">前言
&lt;/h2>&lt;blockquote>
&lt;p>上了半年大学，课余时间充裕了，学到了很多计算机的知识。虽然也是摸鱼占大多数，但是自己写的代码确实比以前规范了一些（虽然仍然是屎山）&lt;/p>&lt;/blockquote>
&lt;p>参考学长的这篇 &lt;a class="link" href="https://blog.dreace.top/2020/C-C-Coding-Standards/" target="_blank" rel="noopener"
>C/C++ 编码规范&lt;/a>&lt;/p>
&lt;h2 id="内容">内容
&lt;/h2>&lt;h4 id="缩进">缩进
&lt;/h4>&lt;p>层次之间要有缩进，如&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">namespace&lt;/span> &lt;span class="nn">MyProgram&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">class&lt;/span> &lt;span class="nc">Program&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">Main&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="p">[])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Length&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Do something...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="注释">注释
&lt;/h4>&lt;p>使用单行注释后后面留一个空格。&lt;/p>
&lt;p>使用 XML 注释时候写清所有参数。&lt;/p>
&lt;h4 id="命名">命名
&lt;/h4>&lt;p>变量名使用驼峰命名法 Camel：
第一个单词首字母小写，其余单词首字母大写，比如&lt;code>connectionStr&lt;/code> ，&lt;code>resourcesUri&lt;/code>，&lt;code>addedNode&lt;/code>等
常用于变量
字段或方法、类等使用帕斯卡命名法 Pascal：
第一个单词首字母大写，其余与驼峰相同，比如&lt;code>GetToken&lt;/code>，&lt;code>InsertToList&lt;/code>，&lt;code>UserId&lt;/code>等&lt;/p></description></item><item><title>GET、POST都是什么——常用的HTTP方法——ASP.NET Core Web API(4)</title><link>https://blog.gaein.cn/passages/aspnetcore-webapi-note4-http_method/</link><pubDate>Wed, 03 Feb 2021 23:45:55 +0800</pubDate><guid>https://blog.gaein.cn/passages/aspnetcore-webapi-note4-http_method/</guid><description>&lt;p>大家在处理 Web 程序的时候经常使用一些&lt;code>GET&lt;/code>、&lt;code>POST&lt;/code>等词汇，这是 HTTP 协议中规定的 HTTP 方法，用来发送给服务器表示对一些资源的处理。这里记录一下这些常见的 HTTP 方法的含义及作用。&lt;/p>
&lt;h2 id="前言">前言
&lt;/h2>&lt;blockquote>
&lt;p>根据杨旭老师在哔哩哔哩上的课程 &lt;a class="link" href="https://www.bilibili.com/video/BV1XJ411q7yy" target="_blank" rel="noopener"
>ASP.NET Core 3.x 构建 RESTful API&lt;/a> 记录的笔记，以后的笔记会根据课程进行更新。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>这一节主要说各种常见HTTP方法的用途和作用。&lt;/p>&lt;/blockquote>
&lt;h2 id="http-请求方法">HTTP 请求方法
&lt;/h2>&lt;blockquote>
&lt;p>关于 HTTP 方法，可以参考&lt;a class="link" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods" target="_blank" rel="noopener"
>HTTP 请求方法 - HTTP | MDN&lt;/a>&lt;/p>&lt;/blockquote>
&lt;p>不同的动作作用于同样一个 URI，区别他们的是 HTTP 方法&lt;/p>
&lt;h3 id="增删改查">“增删改查”
&lt;/h3>&lt;h4 id="http-post">HTTP POST
&lt;/h4>&lt;p>创建/添加一个资源，比如发表一篇文章或者评论。&lt;/p>
&lt;p>POST 的参数放在请求的 body 里。&lt;/p>
&lt;p>POST 收到请求应该返回新创建的资源以及可以获取该资源的唯一标识 URI。&lt;/p>
&lt;h4 id="http-get">HTTP GET
&lt;/h4>&lt;p>获取一个资源，比如访问界面、列出产品列表等。&lt;/p>
&lt;p>GET 的参数通常使用查询字符串，在 URI 的?后边，使用&amp;lt;参数&amp;gt; = &amp;lt;值&amp;gt;，多个查询使用&amp;quot;&amp;amp;&amp;ldquo;号连接。&lt;/p>
&lt;p>GET 收到请求应该返回所查询的资源。&lt;/p>
&lt;h4 id="http-delete">HTTP DELETE
&lt;/h4>&lt;p>删除一个资源，比如删除用户、文章等。&lt;/p>
&lt;p>DELETE 通常没有参数。&lt;/p>
&lt;p>DELETE 收到请求后应该删除资源（或标记为删除），无需返回信息，返回状态码&lt;code>HTTP 204&lt;/code>即可。&lt;/p>
&lt;h4 id="http-patch">HTTP PATCH
&lt;/h4>&lt;p>更新一个资源的一部分，比如用户更改头像、联系方式。&lt;/p>
&lt;p>PATCH 的参数放在请求的 body 里面。&lt;/p>
&lt;p>PATCH 收到请求后应该更新资源，返回状态码 &lt;code>HTTP 204&lt;/code> 即可。&lt;/p>
&lt;h4 id="http-put">HTTP PUT
&lt;/h4>&lt;p>替换更新一个资源，Id 不变。如果没有这个资源则创建，但是多次请求结果不变。比如过户某账号。&lt;/p>
&lt;p>PUT 的参数放在请求的 body 里，是完整的对象。&lt;/p>
&lt;p>PUT 收到请求后应该替换资源但是 ID 不变，返回状态码 &lt;code>HTTP 204&lt;/code> 即可。&lt;/p>
&lt;h2 id="总结">总结
&lt;/h2>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>动作&lt;/th>
&lt;th>HTTP 方法&lt;/th>
&lt;th>Payload&lt;/th>
&lt;th>参数位置&lt;/th>
&lt;th>URI&lt;/th>
&lt;th>请求更改&lt;/th>
&lt;th>响应内容&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>查询&lt;/td>
&lt;td>GET&lt;/td>
&lt;td>查询参数&lt;/td>
&lt;td>Query&lt;/td>
&lt;td>端点 + ID&lt;/td>
&lt;td>无修改&lt;/td>
&lt;td>单个资源或多个资源的集合&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>添加/创建&lt;/td>
&lt;td>POST&lt;/td>
&lt;td>要创建的资源的对象&lt;/td>
&lt;td>Body&lt;/td>
&lt;td>端点&lt;/td>
&lt;td>新建资源&lt;/td>
&lt;td>新创建的资源&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>局部修改/更新&lt;/td>
&lt;td>PATCH&lt;/td>
&lt;td>待修改资源的JSON键值对&lt;/td>
&lt;td>Body&lt;/td>
&lt;td>端点 + ID&lt;/td>
&lt;td>更新资源的某些字段&lt;/td>
&lt;td>无需返回&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>替换&lt;/td>
&lt;td>PUT&lt;/td>
&lt;td>要替换的单个资源对象&lt;/td>
&lt;td>Body&lt;/td>
&lt;td>端点 + ID&lt;/td>
&lt;td>替换除了ID外整个资源&lt;/td>
&lt;td>无需返回&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>使用预定义的标识进行创建&lt;/td>
&lt;td>PUT&lt;/td>
&lt;td>要创建的单个资源对象&lt;/td>
&lt;td>Body&lt;/td>
&lt;td>端点 + ID&lt;/td>
&lt;td>创建了新的资源&lt;/td>
&lt;td>返回新创建的资源&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>移动/删除&lt;/td>
&lt;td>DELETE&lt;/td>
&lt;td>无&lt;/td>
&lt;td>可含Query&lt;/td>
&lt;td>端点 + ID&lt;/td>
&lt;td>删除资源&lt;/td>
&lt;td>无需返回&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>怎么设计优雅的API——普通API对外合约——ASP.NET Core Web API(3)</title><link>https://blog.gaein.cn/passages/aspnetcore-webapi-note3-standard/</link><pubDate>Wed, 03 Feb 2021 00:49:55 +0800</pubDate><guid>https://blog.gaein.cn/passages/aspnetcore-webapi-note3-standard/</guid><description>&lt;blockquote>
&lt;p>这篇博客出了亿点问题，很奇怪的和前面那个重复了，但是我明明写了的呜呜呜。可能是删错了（x&lt;/p>&lt;/blockquote>
&lt;h2 id="前言">前言
&lt;/h2>&lt;blockquote>
&lt;p>根据杨旭老师在哔哩哔哩上的课程 &lt;a class="link" href="https://www.bilibili.com/video/BV1XJ411q7yy" target="_blank" rel="noopener"
>ASP.NET Core 3.x 构建 RESTful API&lt;/a> 记录的笔记，以后的笔记会根据课程进行更新。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>这一节主要是说说啥是REST，REST的优点与约束以及成熟度模型。&lt;/p>&lt;/blockquote>
&lt;h2 id="restful-api">RESTful API
&lt;/h2>&lt;blockquote>
&lt;p>主要是 REST 的概念和介绍（挺无聊的，抄 PPT）&lt;/p>&lt;/blockquote>
&lt;h3 id="什么是-rest">什么是 REST
&lt;/h3>&lt;p>REST:状态表述转换&lt;/p>
&lt;p>符合 REST 的良好 Web 应用设计：&lt;/p>
&lt;ol>
&lt;li>一组网页的网络（一个虚拟状态机）；&lt;/li>
&lt;li>点击链接来前进（状态转换）；&lt;/li>
&lt;li>点击链接的结果是下一个网页（程序的下一个状态）。&lt;/li>
&lt;/ol>
&lt;p>REST 是一种架构风格，而不是规范或者标准，它需要一些规范、协议和标准来实现。REST 与协议无关。JSON 与 HTTP 并不是 REST 强制的（但是大部分都是）。&lt;/p>
&lt;h3 id="优点">优点
&lt;/h3>&lt;ol>
&lt;li>简单高效；&lt;/li>
&lt;li>可扩展性、可修改性高；&lt;/li>
&lt;li>可移植性；&lt;/li>
&lt;li>可靠性；&lt;/li>
&lt;li>可视性。&lt;/li>
&lt;/ol>
&lt;h4 id="rest-的约束">REST 的约束
&lt;/h4>&lt;p>考虑到以下约束，并确定不保证互不干扰&lt;/p>
&lt;ol>
&lt;li>客户端-服务端：独立部署（前后端分离）；&lt;/li>
&lt;li>无状态：服务端不需要客户端的会话（相关请求需要全部包含，客户端要维护自己的状态）；&lt;/li>
&lt;li>*统一的资源接口：API 接口必须统一，用相同标准的接口；
&lt;ol>
&lt;li>资源的标识：URI、数据类型（？）、媒体类型对数据进行描述（application/json 等）；&lt;/li>
&lt;li>通过表述对资源进行操作：获取的时候服务端将删除或修改操作的 URI 返回；&lt;/li>
&lt;li>带有自我描述的信息：把相关的信息随着请求一起发送到服务端；&lt;/li>
&lt;li>超媒体作为应用程序状态的引擎：？；&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>多层系统：多层架构，每一层与不相邻的层解耦；&lt;/li>
&lt;li>可缓存：每个响应信息都应返回它是否可缓存；&lt;/li>
&lt;li>（按需编码）：服务器可以拓展客户端的功能，比如发送一些 JavaScript 给网页客户端。&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>如果一个 Web API 没有实现这五个约束，则不是 RESTful API。不是 RESTful API 并不能说明它不好。&lt;/p>&lt;/blockquote>
&lt;h4 id="richardson-成熟度模型">Richardson 成熟度模型
&lt;/h4>&lt;p>用来评估 RESTful API 的成熟度，有四个级别&lt;/p>
&lt;h6 id="lv0-沼泽">Lv.0 沼泽
&lt;/h6>&lt;p>仅仅使用 HTTP 协议，其余部分没有实现。比如在同一个 URI 上同一个 HTTP 动词做不同的操作（反正就是垃圾的一批）&lt;/p>
&lt;h6 id="lv1-资源">Lv.1 资源
&lt;/h6>&lt;p>URI 正确使用，不同的资源有 URI 做区分。但是 HTTP 动词没有正确（比如查询使用&lt;code>POST&lt;/code>方法）&lt;/p>
&lt;h6 id="lv2-动词">Lv.2 动词
&lt;/h6>&lt;p>HTTP 动词正确使用，返回 HTTP 状态码正确（符合统一资源接口）。&lt;/p>
&lt;blockquote>
&lt;p>&lt;del>我也就这样了&lt;/del>&lt;/p>&lt;/blockquote>
&lt;h6 id="lv3-超媒体">Lv.3 超媒体
&lt;/h6>&lt;p>前面全部正确。同时返回了其它操作的链接。&lt;/p>
&lt;blockquote>
&lt;p>这仅仅是 RESTful 的前提，只有达到 Lv.3 才可能是 RESTful API。&lt;/p>&lt;/blockquote></description></item><item><title>什么是 REST——RESTful API 简介——ASP.NET Core Web API(2)</title><link>https://blog.gaein.cn/passages/aspnetcore-webapi-note2-restful/</link><pubDate>Tue, 02 Feb 2021 15:48:49 +0800</pubDate><guid>https://blog.gaein.cn/passages/aspnetcore-webapi-note2-restful/</guid><description>&lt;p>经常听说 RESTful API ，那么究竟什么是 REST，怎么判断一个 API 的成熟度呢？&lt;/p>
&lt;h2 id="前言">前言
&lt;/h2>&lt;blockquote>
&lt;p>根据杨旭老师在哔哩哔哩上的课程 &lt;a class="link" href="https://www.bilibili.com/video/BV1XJ411q7yy" target="_blank" rel="noopener"
>ASP.NET Core 3.x 构建 RESTful API&lt;/a> 记录的笔记，以后的笔记会根据课程进行更新。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>这一节主要是说说啥是 REST，REST 的优点与约束以及成熟度模型。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>关于 API 设计的规范，可以看微软的 API 指南：&lt;a class="link" href="https://github.com/microsoft/api-guidelines" target="_blank" rel="noopener"
>microsoft/api-guidelines: Microsoft REST API Guidelines&lt;/a>&lt;/p>&lt;/blockquote>
&lt;h2 id="restful-api">RESTful API
&lt;/h2>&lt;blockquote>
&lt;p>主要是 REST 的概念和介绍（挺无聊的，抄 PPT）&lt;/p>&lt;/blockquote>
&lt;h3 id="什么是-rest">什么是 REST
&lt;/h3>&lt;p>REST: 状态表述转换&lt;/p>
&lt;p>符合 REST 的良好 Web 应用设计：&lt;/p>
&lt;ol>
&lt;li>一组网页的网络（一个虚拟状态机）；&lt;/li>
&lt;li>点击链接来前进（状态转换）；&lt;/li>
&lt;li>点击链接的结果是下一个网页（程序的下一个状态）。&lt;/li>
&lt;/ol>
&lt;p>REST 是一种架构风格，而不是规范或者标准，它需要一些规范、协议和标准来实现。REST 与协议无关。JSON 与 HTTP 并不是 REST 强制的（但是大部分都是）。&lt;/p>
&lt;h3 id="优点">优点
&lt;/h3>&lt;ol>
&lt;li>简单高效；&lt;/li>
&lt;li>可扩展性、可修改性高；&lt;/li>
&lt;li>可移植性；&lt;/li>
&lt;li>可靠性；&lt;/li>
&lt;li>可视性。&lt;/li>
&lt;/ol>
&lt;h3 id="rest-的约束">REST 的约束
&lt;/h3>&lt;p>考虑到以下约束，并确定不保证互不干扰&lt;/p>
&lt;ol>
&lt;li>客户端-服务端：独立部署（前后端分离）；&lt;/li>
&lt;li>无状态：服务端不需要客户端的会话（相关请求需要全部包含，客户端要维护自己的状态）；&lt;/li>
&lt;li>*统一的资源接口：API 接口必须统一，用相同标准的接口；
&lt;ol>
&lt;li>资源的标识：URI、数据类型（？）、媒体类型对数据进行描述（application/json 等）；&lt;/li>
&lt;li>通过表述对资源进行操作：获取的时候服务端将删除或修改操作的 URI 返回；&lt;/li>
&lt;li>带有自我描述的信息：把相关的信息随着请求一起发送到服务端；&lt;/li>
&lt;li>超媒体作为应用程序状态的引擎：即使用 HTTP 状态码；&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>多层系统：多层架构，每一层与不相邻的层解耦；&lt;/li>
&lt;li>可缓存：每个响应信息都应返回它是否可缓存；&lt;/li>
&lt;li>（按需编码）：服务器可以拓展客户端的功能，比如发送一些 JavaScript 给网页客户端。&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>如果一个 Web API 没有实现这五个约束，则不是 RESTful API。不是 RESTful API 并不能说明它不好。合适才是最好的。&lt;/p>&lt;/blockquote>
&lt;h3 id="richardson-成熟度模型">Richardson 成熟度模型
&lt;/h3>&lt;p>用来评估 RESTful API 的成熟度，有四个级别&lt;/p>
&lt;h4 id="lv0-沼泽">Lv.0 沼泽
&lt;/h4>&lt;p>仅仅使用 HTTP 协议，其余部分没有实现。比如在同一个 URI 上同一个 HTTP 动词做不同的操作（反正就是垃圾的一批）&lt;/p>
&lt;p>比如以前常见的 &lt;code>POST https://api.example.com/cmd.php?command=&amp;quot;getpost&amp;quot;&amp;amp;arg=&amp;quot;page\=3&amp;quot;&lt;/code> 多了之后容易令人迷迷糊糊，调试起来也不方便。&lt;/p>
&lt;h4 id="lv1-资源">Lv.1 资源
&lt;/h4>&lt;p>URI 正确使用，不同的资源有 URI 做区分。但是 HTTP 动词没有正确（比如查询使用&lt;code>POST&lt;/code>方法）&lt;/p>
&lt;h4 id="lv2-动词">Lv.2 动词
&lt;/h4>&lt;p>HTTP 动词正确使用，返回 HTTP 状态码正确（符合统一资源接口）。&lt;/p>
&lt;blockquote>
&lt;p>&lt;del>我也就这样了&lt;/del>&lt;/p>&lt;/blockquote>
&lt;h4 id="lv3-超媒体">Lv.3 超媒体
&lt;/h4>&lt;p>前面全部正确。同时返回了其它操作的链接。&lt;/p>
&lt;blockquote>
&lt;p>这仅仅是 RESTful 的前提，只有达到 Lv.3 才可能是 RESTful API。&lt;/p>&lt;/blockquote></description></item><item><title>如何创建 ASP.NET Core Web API——准备工作——ASP.NET Core Web API(1)</title><link>https://blog.gaein.cn/passages/aspnetcore-webapi-note1-start/</link><pubDate>Sat, 30 Jan 2021 18:47:49 +0800</pubDate><guid>https://blog.gaein.cn/passages/aspnetcore-webapi-note1-start/</guid><description>&lt;h2 id="前言">前言
&lt;/h2>&lt;blockquote>
&lt;p>根据杨旭老师在哔哩哔哩上的课程 &lt;a class="link" href="https://www.bilibili.com/video/BV1XJ411q7yy" target="_blank" rel="noopener"
>ASP.NET Core 3.x 构建 RESTful API&lt;/a> 记录的笔记，以后的笔记会根据课程进行更新。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>这一节主要是做一些准备工作，进行项目的创建。杨旭老师的教程里根据课程而编写了一个 RESTful Web API，我也将同步打代码，相关代码会储存在 GitHub 上。&lt;/p>&lt;/blockquote>
&lt;h2 id="get-start">Get Start
&lt;/h2>&lt;h3 id="准备工作">准备工作
&lt;/h3>&lt;h4 id="ide">IDE
&lt;/h4>&lt;ol>
&lt;li>Visual Studio 2019&lt;/li>
&lt;li>或 Rider、Visual Studio Code、VS for MAC&lt;/li>
&lt;/ol>
&lt;h4 id="工具">工具
&lt;/h4>&lt;ol>
&lt;li>Postman&lt;/li>
&lt;/ol>
&lt;h3 id="web-api">Web API
&lt;/h3>&lt;ul>
&lt;li>API: 应用程序接口&lt;/li>
&lt;li>Web API: 使用 HTTP 协议并通过网络调用的 API，当然，也可以理解为使用 HTTP 网络协议的 Web API。&lt;/li>
&lt;/ul>
&lt;p>Web API 就是一个 Web 系统，通过访问 URI 可以与其进行信息交互。&lt;/p>
&lt;h4 id="restful-api">RESTful API
&lt;/h4>&lt;p>RESTful API 是一套 API 约束规范或者叫架构风格。&lt;/p>
&lt;blockquote>
&lt;p>大多数的 Web API 并不是完全符合 RESTful API&lt;/p>&lt;/blockquote>
&lt;h4 id="mvc-模式">MVC 模式
&lt;/h4>&lt;blockquote>
&lt;p>前面我 MVC 的理解可能不太正确，它并不是一种前后端不分离的模式。MVC 并不是一个完整的应用程序架构，它只是 UI 的一种架构模式。&lt;/p>&lt;/blockquote>
&lt;p>用于构建 UI 的一种架构模式，特点是松耦合和关注点分离。&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Model——模型&lt;/p>
&lt;p>负责程序数据的逻辑&lt;/p>
&lt;/li>
&lt;li>
&lt;p>View——视图&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>负责展示数据，在构建 API 的时候 View 就是数据或资源的展示，通常来说是 JSON 格式的文本。&lt;/p>
&lt;ol start="3">
&lt;li>
&lt;p>Controller——控制器&lt;/p>
&lt;p>负责视图和模型之间的交互。包括 API 消费者传入和请求的数据。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="创建项目">创建项目
&lt;/h3>&lt;p>模板选择 “ASP.NET Core Web 应用程序”，项目模板选择 “.NET Core”、 “ASP.NET Core 5.0” 和 “ASP.NET Core Web API”&lt;/p>
&lt;h4 id="programcs">Program.cs
&lt;/h4>&lt;p>程序入口，创建 HostBuilder，调用 StartUp.cs&lt;/p>
&lt;h4 id="startupcs">StartUp.cs
&lt;/h4>&lt;p>构造函数注入了应用程序的设置 Configuration&lt;/p>
&lt;p>方法 &lt;code>ConfigureServices&lt;/code> 用来注册服务：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 添加一个Singleton的服务&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">services&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddSingleton&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="err">接口&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="err">实现&lt;/span>&lt;span class="p">&amp;gt;();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>生命周期分为三种：&lt;/p>
&lt;ol>
&lt;li>&lt;code>Transient&lt;/code> : 每次被请求这个服务的时候都会生成一个新的实例；&lt;/li>
&lt;li>&lt;code>Scoped&lt;/code> : 每次 Web 请求的时候生成一个新的实例，生命周期到 Web 请求最终处理完；&lt;/li>
&lt;li>&lt;code>Singleton&lt;/code> : 一旦被创建，每次请求都是这一个实例；&lt;/li>
&lt;/ol>
&lt;p>方法 &lt;code>Configure&lt;/code> 用来加入管道中间件：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 加入管道中间件路由&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">UseRouting&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>管道概念是HTTP请求通过的一个 “管子”，中间穿插有各种中间件进行处理，比如身份认证、路由等。&lt;/p>
&lt;p>如果某个中间件处短路，则不会递给下一中间件而直接返回这个中间件对它处理的结果。比如身份验证未通过等。&lt;/p>
&lt;p>如果一切正常则会在管道里一直走，到最后一个中间件进行处理，然后从管道里返回。&lt;/p>
&lt;p>&lt;strong>中间件的顺序是非常重要的&lt;/strong>&lt;/p>
&lt;p>默认的启动配置是在 &lt;code>./Properties/launchSettings.json&lt;/code> 中&lt;/p>
&lt;h4 id="数据存储">数据存储
&lt;/h4>&lt;blockquote>
&lt;p>这里 ORM 框架使用 EF（EntityFrameworkCore），数据库使用 SQLite&lt;/p>&lt;/blockquote>
&lt;h5 id="安装nuget包">安装NuGet包
&lt;/h5>&lt;ol>
&lt;li>Microsoft.EntityFrameworkCore.Sqlite&lt;/li>
&lt;li>Microsoft.EntityFrameworkCore.Tools&lt;/li>
&lt;/ol>
&lt;h5 id="建立model">建立Model
&lt;/h5>&lt;ol>
&lt;li>创建文件夹 &lt;code>Entities&lt;/code>；&lt;/li>
&lt;li>创建模型类&lt;br>
可以键入&lt;code>prop&lt;/code> 然后按两下 &lt;code>TAB&lt;/code> 键使用代码片段自动补全字段
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">Company&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">Guid&lt;/span> &lt;span class="n">Id&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">Name&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">Introduction&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">ICollection&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Employee&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">Employees&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">Employee&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 主键&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">Guid&lt;/span> &lt;span class="n">Id&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 外键&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">Guid&lt;/span> &lt;span class="n">CompanyId&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">EmployeeNo&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">FirstName&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">LastName&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">Gender&lt;/span> &lt;span class="n">Gender&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">DateTime&lt;/span> &lt;span class="n">DateOfBirth&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">Company&lt;/span> &lt;span class="n">Company&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">enum&lt;/span> &lt;span class="n">Gender&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Man&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">WoMan&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h5 id="建立数据库上下文">建立数据库上下文
&lt;/h5>&lt;ol>
&lt;li>创建文件夹 &lt;code>Data&lt;/code>&lt;/li>
&lt;li>创建类 &lt;code>RoutineDbContext&lt;/code> ，继承于 &lt;code>DbContext&lt;/code> ，构造函数需要包含参数。并且要调用父类的构造函数将其传入。
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">RoutineDbContext&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">DbContextOptions&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">RoutineDbContext&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">options&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="k">base&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">options&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>添加 &lt;code>DbSet&lt;/code> 属性
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">DbSet&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Company&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">Companies&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">DbSet&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Employee&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">Employees&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>对于实体一些属性的限制（比如是否必填等），通过重写 &lt;code>OnModelCreating&lt;/code> 来操作
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 对实体的限制&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">protected&lt;/span> &lt;span class="kd">override&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">OnModelCreating&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ModelBuilder&lt;/span> &lt;span class="n">modelBuilder&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 设置名称为必填&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">modelBuilder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Entity&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Company&lt;/span>&lt;span class="p">&amp;gt;()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">Property&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Name&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">IsRequired&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 设置简介的长度限制&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">modelBuilder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Entity&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Company&lt;/span>&lt;span class="p">&amp;gt;()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">Property&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Introduction&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">HasMaxLength&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">500&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">modelBuilder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Entity&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Employee&lt;/span>&lt;span class="p">&amp;gt;()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">Property&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Id&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">IsRequired&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">modelBuilder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Entity&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Employee&lt;/span>&lt;span class="p">&amp;gt;()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">Property&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">FirstName&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">IsRequired&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">modelBuilder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Entity&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Employee&lt;/span>&lt;span class="p">&amp;gt;()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">Property&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">LastName&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">IsRequired&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 设置实体的关系&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Employee 对应一个 Company，一个 Company 对应多个 Employee。外键为CompanyId&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// OnDelete 是删除时如果 Company 有 Employee 则无法删除&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">modelBuilder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Entity&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Employee&lt;/span>&lt;span class="p">&amp;gt;()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">HasOne&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Company&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">WithMany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Employees&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">HasForeignKey&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CompanyId&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">OnDelete&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">DeleteBehavior&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Restrict&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 初始化添加一些成员&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">modelBuilder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Entity&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Company&lt;/span>&lt;span class="p">&amp;gt;()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">HasData&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">new&lt;/span> &lt;span class="n">Company&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Id&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Guid&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">NewGuid&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Microsoft&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Introduction&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;巨硬公司&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h5 id="创建服务">创建服务
&lt;/h5>&lt;ol>
&lt;li>创建文件夹 &lt;code>Services&lt;/code>&lt;/li>
&lt;li>创建一个接口 &lt;code>ICompanyRepository&lt;/code>&lt;br>
写入
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">interface&lt;/span> &lt;span class="nc">ICompanyRepository&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Task&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">IEnumerable&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Company&lt;/span>&lt;span class="p">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">GetCompaniesAsync&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Task&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Company&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">GetCompanyAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Guid&lt;/span> &lt;span class="n">companyId&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Task&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">IEnumerable&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Company&lt;/span>&lt;span class="p">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">GetCompaniesAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">IEnumerable&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Guid&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">companyIds&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">void&lt;/span> &lt;span class="n">AddCompany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Company&lt;/span> &lt;span class="n">company&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">void&lt;/span> &lt;span class="n">UpdateCompany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Company&lt;/span> &lt;span class="n">company&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">void&lt;/span> &lt;span class="n">DeleteCompany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Company&lt;/span> &lt;span class="n">company&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Task&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">bool&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">CompanyExistsAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Guid&lt;/span> &lt;span class="n">companyId&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Task&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">IEnumerable&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Employee&lt;/span>&lt;span class="p">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">GetEmployeesAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Guid&lt;/span> &lt;span class="n">companyId&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Task&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Employee&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">GetEmployeeAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Guid&lt;/span> &lt;span class="n">companyId&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Guid&lt;/span> &lt;span class="n">employeeId&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">void&lt;/span> &lt;span class="n">AddEmployee&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Guid&lt;/span> &lt;span class="n">companyId&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Employee&lt;/span> &lt;span class="n">employee&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">void&lt;/span> &lt;span class="n">UpdateEmployee&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Employee&lt;/span> &lt;span class="n">employee&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">void&lt;/span> &lt;span class="n">DeleteEmployee&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Employee&lt;/span> &lt;span class="n">employee&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Task&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">bool&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">SaveAsync&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>创建接口的实体类 &lt;code>CompanyRepository&lt;/code> 写入
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">CompanyRepository&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">ICompanyRepository&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="k">readonly&lt;/span> &lt;span class="n">RoutineDbContext&lt;/span> &lt;span class="n">_context&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">CompanyRepository&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">RoutineDbContext&lt;/span> &lt;span class="n">context&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_context&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">context&lt;/span> &lt;span class="p">??&lt;/span> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArgumentNullException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nameof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">IEnumerable&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Company&lt;/span>&lt;span class="p">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">GetCompaniesAsync&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">_context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Companies&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToListAsync&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Company&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">GetCompanyAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Guid&lt;/span> &lt;span class="n">companyId&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">companyId&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="n">Guid&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Empty&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArgumentNullException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nameof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">companyId&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">_context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Companies&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">FirstOrDefaultAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Id&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="n">companyId&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">IEnumerable&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Company&lt;/span>&lt;span class="p">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">GetCompaniesAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">IEnumerable&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Guid&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">companyIds&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">companyIds&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArgumentNullException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nameof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">companyIds&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">_context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Companies&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">Where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">companyIds&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Contains&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Id&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">OrderBy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">ToListAsync&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">AddCompany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Company&lt;/span> &lt;span class="n">company&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">company&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArgumentNullException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nameof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">company&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">company&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Id&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Guid&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">foreach&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">employee&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="n">company&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Employees&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">employee&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Id&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Guid&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Companies&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">company&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">UpdateCompany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Company&lt;/span> &lt;span class="n">company&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 实际上EF对实体都有追踪，不需要显式的更改它们&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> if (company == null)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> throw new ArgumentNullException(nameof(company));
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> }
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> _context.Entry(company).State = EntityState.Modified;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">DeleteCompany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Company&lt;/span> &lt;span class="n">company&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">company&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArgumentNullException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nameof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">company&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Companies&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Remove&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">company&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">bool&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">CompanyExistsAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Guid&lt;/span> &lt;span class="n">companyId&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">companyId&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="n">Guid&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Empty&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArgumentNullException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nameof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">companyId&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">_context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Companies&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AnyAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Id&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="n">companyId&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">IEnumerable&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Employee&lt;/span>&lt;span class="p">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">GetEmployeesAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Guid&lt;/span> &lt;span class="n">companyId&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">companyId&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="n">Guid&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Empty&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArgumentNullException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nameof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">companyId&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">_context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Employees&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">Where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CompanyId&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="n">companyId&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">OrderBy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">EmployeeNo&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">ToListAsync&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Employee&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">GetEmployeeAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Guid&lt;/span> &lt;span class="n">companyId&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Guid&lt;/span> &lt;span class="n">employeeId&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">companyId&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="n">Guid&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Empty&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArgumentNullException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nameof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">companyId&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">employeeId&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="n">Guid&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Empty&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArgumentNullException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nameof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">employeeId&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">_context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Employees&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">Where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CompanyId&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="n">companyId&lt;/span> &lt;span class="p">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Id&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="n">employeeId&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">FirstOrDefaultAsync&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">AddEmployee&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Guid&lt;/span> &lt;span class="n">companyId&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Employee&lt;/span> &lt;span class="n">employee&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">companyId&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="n">Guid&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Empty&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArgumentNullException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nameof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">companyId&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">employee&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArgumentNullException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nameof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">employee&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Employees&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">employee&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">UpdateEmployee&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Employee&lt;/span> &lt;span class="n">employee&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 同样，EF 会追踪其中的对象，不用做更改。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">DeleteEmployee&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Employee&lt;/span> &lt;span class="n">employee&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">employee&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ArgumentNullException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nameof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">employee&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Remove&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">employee&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">bool&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">SaveAsync&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 通常保存不写在Repository里&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="n">_context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SaveChangesAsync&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">&amp;gt;=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>我觉得可以把 &lt;code>_context.Employees&lt;/code> 等 &lt;strong>看作&lt;/strong> 一个 &lt;code>List&amp;lt;Employee&amp;gt;&lt;/code> 类型的变量。&lt;/li>
&lt;li>在 &lt;code>StartUp&lt;/code> 中注册服务
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 注册服务 Scoped: 每次HTTP请求实例化一次&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">services&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddScoped&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">ICompanyRepository&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">CompanyRepository&lt;/span>&lt;span class="p">&amp;gt;();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 连接字符串&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">connectionStr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">@&amp;#34;Data Source=test.db;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 注册数据库上下文&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">services&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddDbContext&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">RoutineDbContext&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="n">option&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">option&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">UseSqlite&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">connectionStr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h5 id="初始化数据库">初始化数据库
&lt;/h5>&lt;p>在 NuGet 包管理器控制台中依次输入：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">Add-Migration InitialCreate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>和&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">Update-Database
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>或者使用 dotnet cli：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">dotnet ef migrations add InitialCreate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>和&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">dotnet ef database update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>有关迁移这部分的概述可以看 &lt;a class="link" href="https://docs.microsoft.com/zh-cn/ef/core/managing-schemas/migrations/" target="_blank" rel="noopener"
>迁移概述 - EF Core | Microsoft Docs&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>!重要：杨旭老师在这里对 Program.cs 进行了一些修改，以便于后期讲解，我没有进行这些更改，弹幕说是个坑，先记住，如果出了什么奇怪问题就回来看看。&lt;/p>&lt;/blockquote></description></item><item><title>在 ASP.NET Core 中的实时通信——SignalR 实时通信——ASP.NET Core 入门(3)</title><link>https://blog.gaein.cn/passages/aspnetcore-note5-signalr/</link><pubDate>Sat, 30 Jan 2021 13:32:57 +0800</pubDate><guid>https://blog.gaein.cn/passages/aspnetcore-note5-signalr/</guid><description>&lt;h2 id="前言">前言
&lt;/h2>&lt;blockquote>
&lt;p>这是学习 ASP.NET Core 的笔记，主要是根据微软 MVP 杨旭的课程来走的，当然也有自己的偏向。关于这些内容的笔记和代码以及更多的简介在&lt;a class="link" href="https://github.com/nidbCN/ASP.NET-Core-Note" target="_blank" rel="noopener"
>Github&lt;/a>上。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>SignalR 是.NET Core 的实现实时通讯的开源框架，抽象于长轮询、SSE 和 WS 这三种技术之上。用于实时的 web 应用。
这一篇主要是SignalR的介绍和 ASP.NET Core 项目使用SignalR等内容。&lt;/p>&lt;/blockquote>
&lt;h2 id="signalr">SignalR
&lt;/h2>&lt;p>SignalR 是.NET Core 的开源实时框架，抽象与三种技术（见下）之上。无论使用哪种技术，使用 SignalR 是没有感觉到区别的。&lt;/p>
&lt;p>用于实时的 web 应用。&lt;/p>
&lt;p>传统的是浏览器发送请求、服务器处理请求、返回 payload；实时的 web 应用由 web 服务器主动通知客户端数据有变化。&lt;/p>
&lt;h3 id="技术">技术
&lt;/h3>&lt;p>SignalR 使用了三种“底层”的技术来实现实时 Web。分别是：&lt;/p>
&lt;ol>
&lt;li>Long Polling: 长轮询；&lt;/li>
&lt;li>Server Sent Event;&lt;/li>
&lt;li>Websocket.&lt;/li>
&lt;/ol>
&lt;p>Signal 采用了回落机制，优先使用 WS，如果浏览器不支持再降级为 SSE 和 Long Polling。&lt;/p>
&lt;h4 id="轮询">轮询
&lt;/h4>&lt;p>Polling 是定期向服务器发送请求，有变化则更改数据，很简单，但是浪费资源。&lt;br>
长轮询：与轮询的不同之处是如果服务器上面的数据没有更改，则保持连接（不会立即返回 &lt;code>HTTP 204&lt;/code> 并断开），直到超时。超时后再次请求。&lt;/p>
&lt;h4 id="server-sent-events-sse">Server Sent Events (SSE)
&lt;/h4>&lt;p>使用 SSE，web 服务器可以在任何时间发送数据。而客户端（浏览器）会一直监听进来的信息，这个连接也会一直开放，直到服务器主动关闭。&lt;br>
浏览器会使用一个叫做 EventSource 的对象来处理传过来的信息。&lt;/p>
&lt;p>优点：使用简单，HTTP 协议。
缺点：浏览器有最大并发、只能发送文本，只能单项通讯。&lt;/p>
&lt;h4 id="websocket">WebSocket
&lt;/h4>&lt;p>WS 是不同于 HTTP 的另一个 TCP 协议。&lt;/p>
&lt;h5 id="优点">优点
&lt;/h5>&lt;ol>
&lt;li>使用 WS 消息可以双向发送（全双工）；&lt;/li>
&lt;li>没有 HTTP 的延迟，信息流没有完成的时候 TCP 端口始终打开；&lt;/li>
&lt;li>大部分情况下（现代浏览器） SignalR 会使用 WS 协议，这也是最有效的传输方式；&lt;/li>
&lt;li>WS 可以传输文本或者二进制文件；&lt;/li>
&lt;li>WS 不受 SSE 连接数限制，大部分浏览器对 WS 连接支持数为 50 个。&lt;/li>
&lt;/ol>
&lt;h5 id="生命周期">生命周期
&lt;/h5>&lt;ol>
&lt;li>发送一个 HTTP 请求到服务器进行握手；&lt;/li>
&lt;li>通讯；&lt;/li>
&lt;li>关闭（会返回关闭原因）。&lt;/li>
&lt;/ol>
&lt;h5 id="http-握手">HTTP 握手
&lt;/h5>&lt;ol>
&lt;li>每一个 WS 开始的时候都是一个简单的 HTTP 连接；&lt;/li>
&lt;li>客户端发送 GET 请求升级 Socket(HTTP 101)；&lt;/li>
&lt;li>服务器同意的话（HTTP 101），升级为 WebSocket。&lt;/li>
&lt;/ol>
&lt;h3 id="消息类型">消息类型
&lt;/h3>&lt;p>消息类型可以是文本或二进制。&lt;br>
每个消息由一个或多个 Frame 组成。&lt;/p>
&lt;h3 id="rpc">RPC
&lt;/h3>&lt;p>RPC 的优点是可以像调用本地方法一样调用远程服务。
SignalR 采用了 RPC 范式来进行通讯。服务端和客户端可以相互调用彼此的方法。SignalR 负责序列化和反序列化。&lt;/p>
&lt;h3 id="hub">Hub
&lt;/h3>&lt;p>Hub 是 SignalR 的一个组件，是服务端的一个类。
在 ASP.NET Core 中自己创建的 Hub 类需要继承与基类 Hub。&lt;br>
在 Hub 类里面可以调用客户端上面的方法，客户端也可以调用 Hub 类里面的方法。&lt;br>
Hub 可以序列化和反序列化，被序列化的参数的格式叫做 Hub 协议。Hub 的默认协议是 JSON，也支持 MessagePack（二进制的，更紧凑更快速）。&lt;/p>
&lt;h3 id="横向扩展">横向扩展
&lt;/h3>&lt;p>负载均衡器会保证每个进来的请求按照一定的逻辑分配。但是长轮询时候请求发送到不同的服务器就很容易出问题。&lt;/p>
&lt;h3 id="实践">实践
&lt;/h3>&lt;h4 id="配置项目">配置项目
&lt;/h4>&lt;p>在 &lt;code>StartUp&lt;/code> 中注册服务：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">ConfigureServices&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">IServiceCollection&lt;/span> &lt;span class="n">services&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 添加控制器&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">services&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddControllers&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 添加SignalR&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">services&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddSignalR&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>自定义一个测试用的类（这里写个计数调用的）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">CountService&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">Count&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 获取计数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">GetLatestCount&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">Count&lt;/span>&lt;span class="p">++;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>注册服务&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">services&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddSingleton&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">CountService&lt;/span>&lt;span class="p">&amp;gt;();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>创建一个 Hub，命名为 &lt;code>CountHub.cs&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">Microsoft.AspNetCore.SignalR&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">namespace&lt;/span> &lt;span class="nn">SignalRDemo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">CountHub&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">CountService&lt;/span> &lt;span class="n">countService&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ILogger&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">CountHub&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">logger&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="n">Hub&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 获取总和&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span> &lt;span class="n">GetLatestCount&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">userName&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">User&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Identity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Name&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">LogDebug&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;user name: {name}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">userName&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">cnt&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cnt&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">countService&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetLatestCount&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Task&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Delay&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">100&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 向所有客户端（正经写应该是返回给Connect的客户端？）返回新的数据&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="n">Clients&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">All&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SendAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ReceiveUpdate&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cnt&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">cnt&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="n">Clients&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">All&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SendAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Finished&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Code&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用 Hub：配置端点，加入&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 使用Hub，参数为亲求的端点&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">endpoints&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">MapHub&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">CountHub&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="s">&amp;#34;/count&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>创建一个控制器 &lt;code>CountController&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">Microsoft.AspNetCore.Mvc&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">Microsoft.AspNetCore.SignalR&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System.Threading.Tasks&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">namespace&lt;/span> &lt;span class="nn">SignalRDemo.Controllers&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [Route(&amp;#34;api/count&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">CountController&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Controller&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="k">readonly&lt;/span> &lt;span class="n">IHubContext&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">CountHub&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">CntHub&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 注入Hub&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">CountController&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">IHubContext&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">CountHub&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">cntHub&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">CntHub&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">cntHub&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Post请求时返回执行客户端上的方法&amp;#34;SomeFunc&amp;#34;，传递参数对象&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">IActionResult&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">Post&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="n">CntHub&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Clients&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">All&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SendAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;SomeFunc&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">random&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;object&amp;#34;&lt;/span> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">Accepted&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在 Hub 中重写 &lt;code>OnConnectedAsync()&lt;/code> 来执行一些方法：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">override&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span> &lt;span class="n">OnConnectedAsync&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>常见的操作有：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 获取ConnectId&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">ConnectId&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ConnectionId&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 获取当前客户端&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">client&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Clients&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Client&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ConnectId&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 执行客户端上面的一个方法，参数为 方法名、参数（对象）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">await&lt;/span> &lt;span class="n">client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SendAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;SomeFunc&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 除了这个客户端（指定ConnectId）以外，其它的客户端执行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">await&lt;/span> &lt;span class="n">Clients&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AllExcept&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ConnectId&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">SendAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;SomeFunc&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 将某个客户端加入组，参数为ConnectId和字符串组名&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">await&lt;/span> &lt;span class="n">Groups&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddToGroupAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ConnectId&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;myGroup&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 将某个客户端移除，参数同上&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">await&lt;/span> &lt;span class="n">Groups&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">RemoveFromGroupAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ConnectId&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;myGroup&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 对某组中的客户端执行某个方法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">await&lt;/span> &lt;span class="n">Clients&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;myGroup&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">SendAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;SomeFunc&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用 Hub 身份认证，需要加入 &lt;code>[Authorize]&lt;/code> 属性&lt;/p>
&lt;p>可以使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">userName&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">User&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Identity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Name&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>获取认证的用户名。其它属性也类似。&lt;/p>
&lt;blockquote>
&lt;p>至于 SignalR，我会以后有时间来研究一下。&lt;/p>&lt;/blockquote>
&lt;h4 id="客户端">客户端
&lt;/h4>&lt;p>使用 libman 安装 &lt;code>SignalR@next&lt;/code>&lt;/p>
&lt;h5 id="javascript">JavaScript
&lt;/h5>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">let&lt;/span> &lt;span class="nx">connection&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">setupConnection&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 设置连接，其中withUrl是请求的url
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">connection&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">signalR&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HubConnectionBuilder&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">withUrl&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/api/count&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">build&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 获得返回值，这里的第一个字符串参数是Hub中Clint.SendAsync(&amp;#34;ReceiveUpdate&amp;#34;, cnt)中的第一个参数（？可以看作是双方的一个约定）
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">connection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ReceiveUpdate&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">update&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 打印返回的更新数据
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">update&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 更改ID为resultDiv的节点内容（jq）
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;##resultDiv&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">update&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">connection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;SomeFunc&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// SomeFunc是客户端的方法，obj则是传入的参数
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 开始这个连接
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">connection&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">start&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ERROR!&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">error&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">toString&lt;/span>&lt;span class="p">()));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">setupConnection&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 执行服务端方法，字符串参数为方法名，后面为参数
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">connection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">invoke&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;GetLatestCount&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">id&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>如何配置 ASP.NET Core 应用程序——配置文件——ASP.NET Core 入门(2)</title><link>https://blog.gaein.cn/passages/aspnetcore-note3-config/</link><pubDate>Thu, 28 Jan 2021 02:19:14 +0800</pubDate><guid>https://blog.gaein.cn/passages/aspnetcore-note3-config/</guid><description>&lt;h2 id="前言">前言
&lt;/h2>&lt;blockquote>
&lt;p>这是学习ASP.NET Core的笔记，主要是根据微软MVP杨旭的课程来走的，当然也有自己的偏向。关于这些内容的笔记和代码以及更多的简介在 &lt;a class="link" href="https://github.com/nidbCN/ASP.NET-Core-Note" target="_blank" rel="noopener"
>Github&lt;/a> 上。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>ASP.NET Core 提供了一个默认的配置文件——&amp;ldquo;appsettings.json&amp;rdquo;，这个文件中写了启动ASP.NET Core的一些配置，比如环境、log 等级等，也支持写入自定义的 JSON 对象。&lt;br>
这一篇主要是看 ASP.NET Core 项目的配置文件等内容。&lt;/p>&lt;/blockquote>
&lt;h2 id="aspnet-core-中的配置信息">ASP.NET Core 中的配置信息
&lt;/h2>&lt;h3 id="特点">特点
&lt;/h3>&lt;ol>
&lt;li>使用键值对；&lt;/li>
&lt;li>存储在内存、JSON、XML、INI 等文件，或者系统环境变量；&lt;/li>
&lt;li>配置信息与配置系统是解耦的，不是和某一部分写死的；&lt;/li>
&lt;li>可以依赖注入。&lt;/li>
&lt;/ol>
&lt;p>第 2 条即配置可以以多种形式分别存储，并不是某一个固定的文件，他们共同组成了逻辑上的“配置”。&lt;/p>
&lt;h3 id="信息源">信息源
&lt;/h3>&lt;p>按照查找顺序排序&lt;/p>
&lt;ol>
&lt;li>配置文件通常为 &lt;code>appsettings.json&lt;/code> 和 &lt;code>appsettings.{Environment}.json&lt;/code>&lt;/li>
&lt;li>Secret Manager（一种 .NET 命令行工具，用于管理用户机密）（优先级高于 &lt;code>appsettings.json&lt;/code> ）&lt;/li>
&lt;li>环境变量&lt;/li>
&lt;li>命令行参数（优先级最高）&lt;/li>
&lt;/ol>
&lt;h3 id="自定义配置">自定义配置
&lt;/h3>&lt;ol>
&lt;li>在 &lt;code>appsettings.json&lt;/code> 里面添加自定义信息；&lt;/li>
&lt;li>在 &lt;code>StartUp&lt;/code> 的构造方法中添加参数，类型为 &lt;code>IConfiguration&lt;/code> ，赋值给一个 &lt;code>readonly&lt;/code> 的私有变量，或者只有 &lt;code>get&lt;/code> 访问器的变量；&lt;/li>
&lt;/ol>
&lt;h4 id="使用索引获取">使用索引获取
&lt;/h4>&lt;p>实际上这个接口对象实际上是一个存有配置信息键值对的列表，可以通过索引比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Logging&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// Some Key-value
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;AppConfig&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;port&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">3306&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>CSharp&lt;/p>&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">myConfig&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Configuration&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s">&amp;#34;AppConfig:port&amp;#34;&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// string myConfig = &amp;#34;3306&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="映射到模型">映射到模型
&lt;/h4>&lt;p>但是 C# 作为强类型语言，比较好的做法是用强类型表示，可以避免很多错误。&lt;br>
将自定义的 JSON 对象映射到一个 类/结构体/记录 中：&lt;/p>
&lt;ol>
&lt;li>创建类&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">record&lt;/span> &lt;span class="nc">AppConfig&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 字段名称和JSON文件中应该是对应的&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">Port&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>注册服务&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 其中GetSection的参数是string 键&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">services&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Configure&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">AppConfig&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Configuration&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetSection&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nameof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">AppConfig&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>使用自定义配置文件，如 &lt;code>config.json&lt;/code> ，需要更改 &lt;code>CreateHostBuilder&lt;/code> 方法，使其返回值调用 &lt;code>ConfigureAppConfiguration&lt;/code> 方法：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="n">IHostBuilder&lt;/span> &lt;span class="n">CreateHostBuilder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Host&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateDefaultBuilder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 调用这个方法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">ConfigureAppConfiguration&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">configBuilder&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 清除源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">configBuilder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Sources&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Clear&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 添加json文件夹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">configBuilder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddJsonFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;config.json&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Code&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="使用配置">使用配置
&lt;/h3>&lt;p>完成上文的服务注入后：&lt;br>
在接口中注入，构造函数添加以下参数：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="n">SomeMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">IOptions&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">AppConfig&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">options&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Codes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>ASP.NET Core 代码各个文件都是什么——项目结构——ASP.NET Core 入门(1)</title><link>https://blog.gaein.cn/passages/aspnetcore-note1-projects/</link><pubDate>Tue, 26 Jan 2021 22:35:31 +0800</pubDate><guid>https://blog.gaein.cn/passages/aspnetcore-note1-projects/</guid><description>&lt;h2 id="前言">前言
&lt;/h2>&lt;blockquote>
&lt;p>不知不觉新的一年来了，大学半年生活也落下帷幕。经过这半年和各位大佬们的摸鱼，深感自身技能不足，趁着寒假没什么事情，学习一下 web 框架——ASP.NET Core（主要是后端部分）。选择 ASP.NET Core 是因为 ASP.NET Core 是高效的 web 框架，同时自己用了挺长时间的 C# ，转战其它语言也挺不习惯。另外，算是半个软粉了。&lt;br>
&lt;del>不过有一个缺点是，ASP.NET 这玩意老是自动蓝成链接。&lt;/del>&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>这是学习 ASP.NET Core的笔记，主要是根据微软 MVP 杨旭的课程来走的，当然也有自己的偏向。关于这些内容的笔记和代码以及更多的简介在&lt;a class="link" href="https://github.com/nidbCN/ASP.NET-Core-Note" target="_blank" rel="noopener"
>Github&lt;/a>上。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>这一篇主要是看 ASP.NET Core 项目的结构、配置以及一些基础的内容。&lt;/p>&lt;/blockquote>
&lt;h2 id="aspnet-core">ASP.NET Core
&lt;/h2>&lt;p>ASP.NET Core 和 ASP.NET 不是一回事，ASP.NET Core 基于.NET Core（或者 .NET 5 以及更新的版本），它的效率远高于基于 .NET Framework 的 ASP.NET。&lt;br>
ASP.NET Core 项目本质上仍然是 .NET Core 控制台应用。&lt;/p>
&lt;h2 id="项目基本结构旧模板">项目基本结构（旧模板）
&lt;/h2>&lt;h3 id="main-方法">Main 方法
&lt;/h3>&lt;p>程序入口点，配置整个 ASP.NET Core 然后运行。&lt;br>
调用了一个静态方法&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">IHostBuilder&lt;/span> &lt;span class="n">CreateHostBuilder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>调用这个方法，返回 &lt;code>IHostBuilder&lt;/code> 执行 &lt;code>Build()&lt;/code> 方法后控制台项目转变为了 ASP.NET Core 项目，然后执行 &lt;code>Run()&lt;/code> 方法启动。&lt;/p>
&lt;h3 id="createhostbuilder-方法">CreateHostBuilder 方法
&lt;/h3>&lt;p>lambda 表达式&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="n">IHostBuilder&lt;/span> &lt;span class="n">CreateHostBuilder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Host&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateDefaultBuilder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">ConfigureWebHostDefaults&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Code&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>，右侧返回调用 &lt;code>Host&lt;/code> 静态类的一个静态方法 &lt;code>CreateDefaultBuilder()&lt;/code> 的返回调用 &lt;code>ConfigureWebHostDefaults()&lt;/code> 方法，配置 ASP.NET Core。&lt;br>
第二个 lambda 表达式&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Code&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Host&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateDefaultBuilder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">ConfigureWebHostDefaults&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">webBuilder&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">webBuilder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">UseStartup&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Startup&lt;/span>&lt;span class="p">&amp;gt;();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>左侧参数名为自动推断类型的 &lt;code>webBuilder&lt;/code> ，将 WebBuilder 的一些方法返回作为参数传入。&lt;/p>
&lt;blockquote>
&lt;p>这部分可以配置 ASP.NET Core 相关的内容，只需要调用 &lt;code>webBuilder.&amp;lt;方法&amp;gt;()&lt;/code>&lt;/p>&lt;/blockquote>
&lt;p>然后 &lt;code>webBuilder&lt;/code> 使用 &lt;code>StartUp&lt;/code> 类来初始化。&lt;/p>
&lt;h3 id="starup-类文件">StarUp 类文件
&lt;/h3>&lt;p>这个类没有实现任何的接口等，这里面方法的名称是运行时的约定名称，运行时通过名字来进行调用两个方法：&lt;code>ConfigureServices&lt;/code>和&lt;code>Configure&lt;/code>。&lt;/p>
&lt;h4 id="configureservices-方法">ConfigureServices 方法
&lt;/h4>&lt;p>负责配置依赖注入（DI）等&lt;/p>
&lt;h5 id="依赖注入-di">依赖注入 DI
&lt;/h5>&lt;p>它是 ASP.NET Core 不可分割的一部分，依赖于 IoC 容器。&lt;/p>
&lt;p>首先在 ASP.NET Core 启动时会进行注册，可以向 IoC 容器请求被注册的服务的示例。在注册时可以配置被注册的服务的生命周期。&lt;br>
生命周期分为三种：&lt;/p>
&lt;ol>
&lt;li>&lt;code>Transient&lt;/code> : 每次被请求这个服务的时候都会生成一个新的实例；&lt;/li>
&lt;li>&lt;code>Scoped&lt;/code> : 每次 Web 请求的时候生成一个新的实例，生命周期到 Web 请求最终处理完；&lt;/li>
&lt;li>&lt;code>Singleton&lt;/code> : 一旦被创建，每次请求都是这一个实例；&lt;/li>
&lt;/ol>
&lt;h6 id="注册服务">注册服务
&lt;/h6>&lt;p>使用通过 &lt;code>IServiceCollection&lt;/code> 接口的变量 &lt;code>service&lt;/code> 注册服务，比如 MVC 的注册方法：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">services&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddControllersWithViews&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// 传统 ASP.NET Core MVC&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>不需要 &lt;code>Views&lt;/code> 做 API 只用 Controllers 则使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">services&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddControllers&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// 添加控制器&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="自定服务">自定服务
&lt;/h6>&lt;ol>
&lt;li>
&lt;p>创建一个文件夹(通常命名为&amp;quot;Services&amp;quot;)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>新建一个接口，比如 &lt;code>IClock&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">interface&lt;/span> &lt;span class="nc">IClock&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>新建 CSharp 类，实现接口&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">ChineseClock&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">IClock&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>注册自己写的服务：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">services&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddTransient&lt;/span>&lt;span class="p">&amp;lt;&amp;gt;();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">services&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddScoped&lt;/span>&lt;span class="p">&amp;lt;&amp;gt;();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">services&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddSingleton&lt;/span>&lt;span class="p">&amp;lt;&amp;gt;();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 注册指定生命周期的服务&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 泛型：有实例请求IClock接口的对象,返回ChineseClock类型的实例&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">services&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddSingleton&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">IClock&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ChineseClock&lt;/span>&lt;span class="p">&amp;gt;();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>使用服务：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>建立文件夹 &lt;code>Controllers&lt;/code> ，ASP.NET Core 一般都有一个文件夹叫做这个名字，里面放着所有的控制器；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>新建类 &lt;code>xxxxController.cs&lt;/code> ，按照约定，应该以 &lt;code>&amp;quot;Controller&amp;quot;&lt;/code> 结尾;&lt;/p>
&lt;/li>
&lt;li>
&lt;p>首先让新建的这个类（比如 &lt;code>HomeController&lt;/code> ）&lt;del>继承 Controller&lt;/del>（在命名空间 &lt;code>Microsoft.AspNetCore.Mvc&lt;/code> 下，疑似已经更改为 &lt;code>ControllerBase&lt;/code>）这个父类；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>写构造函数，参数类型为前面定义的接口；&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">HomeController&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Controller&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">HomeController&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">IClock&lt;/span> &lt;span class="n">clock&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>注册服务后，传给控制器的参数的类型为泛型的第二个参数；这样写实现一个接口可以保证在更改服务注入其它类的时候不需要更改控制器的传入参数。这样可以使控制器和具体的服务类解耦。&lt;/p>&lt;/blockquote>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;h6 id="di-的优点">DI 的优点
&lt;/h6>&lt;ol>
&lt;li>解耦，没有强依赖，利于进行单元测试；&lt;/li>
&lt;li>不需要了解具体的服务类；&lt;/li>
&lt;li>不需要手动管理服务类的生命周期。&lt;/li>
&lt;/ol>
&lt;h4 id="configure-方法">Configure 方法
&lt;/h4>&lt;p>实际上传入的参数 &lt;code>IApplicationBuilder app&lt;/code> 对应的是一个服务，通过依赖注入（在 &lt;code>CreateHostBuilder()&lt;/code> 时候）注入进来。&lt;/p>
&lt;p>此方法用来配置 ASP.NET Core 对处理 HTTP 请求的管道（pipeline），指定整个应用对 HTTP 请求的处理方法，HTTP 请求从管道进去，又从管道返回。&lt;/p>
&lt;h5 id="管道与中间件">管道与中间件
&lt;/h5>&lt;p>如果管道什么也没有，那么对 HTTP 请求不会做任何处理。&lt;/p>
&lt;p>放在管道里面、处理请求的叫做中间件。&lt;/p>
&lt;h6 id="中间件开发模式设置">中间件：开发模式设置
&lt;/h6>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 判断是否为开发模式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">env&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">IsDevelopment&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 开发模式中间件：显示错误信息页面&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">UseDeveloperExceptionPage&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以通过设置环境变量来启用或关闭开发模式。开发模式时 &lt;code>env.IsDevelopment()&lt;/code> 即返回 &lt;code>true&lt;/code> 。&lt;/p>
&lt;p>环境变量名称为： &lt;code>ASPNETCORE_ENVIRONMENT&lt;/code>
值为：&lt;/p>
&lt;ol>
&lt;li>开发环境——&amp;ldquo;Development&amp;rdquo;&lt;/li>
&lt;li>生产环境——&amp;ldquo;Production&amp;rdquo;&lt;/li>
&lt;li>预发布环境——&amp;ldquo;Staging&amp;rdquo;&lt;/li>
&lt;li>自定义环境——&amp;ldquo;自定义字符串&amp;rdquo;
&lt;blockquote>
&lt;p>使用 &lt;code>env.IsEnvironment(&amp;quot;自定义字符串&amp;quot;)&lt;/code> 来判断自定义环境变量。&lt;/p>&lt;/blockquote>
&lt;/li>
&lt;/ol>
&lt;h5 id="中间件路由">中间件：路由
&lt;/h5>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">UseRouting&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// 中间件：使用路由&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>路由中间件能判断 HTTP 请求出现在那个端点。&lt;/p>
&lt;h5 id="中间件端点">中间件：端点
&lt;/h5>&lt;p>端点就是 HTTP 请求的 URL 的结尾部分。这一部分会被中间件件处理。&lt;/p>
&lt;p>比如 &lt;code>https://api.gaein.cn/WebCommitApi/write&lt;/code> 中 &lt;code>WebCommitApi/write&lt;/code> 就是端点。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">UseEndpoints&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">endpoints&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 对端点进行配置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">endpoints&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">MapGet&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">context&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 匹配端点后在浏览器打印HW&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="n">context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hello World!&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>通过 lambda 表达式来配置端点。&lt;br>
如果使用属性标签（就是在 Action 上面中括号书写路由的话），只需要这样就可以了。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">UseEndpoints&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">endpoints&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">endpoints&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">MapControllers&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="中间件静态文件">中间件：静态文件
&lt;/h5>&lt;p>如果需要静态文件的话（返回 HTML、JS 等）需要中间件。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">UseStaticFiles&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>想要使用静态文件，需要新建文件夹名为&lt;code>wwwroot&lt;/code>，在文件夹里面的静态文件可以被访问到（不需要在 URL 加上&amp;quot;wwwroot&amp;quot;）。&lt;/p>
&lt;p>图片存储的路径为
&lt;code>./wwwroot/daily-picture/today.png&lt;/code>&lt;/p>
&lt;p>则 url 为
&lt;code>https://api.gaein.cn/daily-picture/today.png&lt;/code>&lt;/p>
&lt;h5 id="中间件强制-https">中间件：强制 HTTPS
&lt;/h5>&lt;p>如果需要将 HTTP 请求强制跳转到 HTTPS 则需要中间件。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">UseHttpsRedirection&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="中间件顺序">中间件顺序
&lt;/h5>&lt;p>中间件的顺序就是处理的顺序，顺序很重要。比如 Auth 会放在前边，路由、端点等写在认证的后边。&lt;/p>
&lt;h2 id="项目基本结构新模板">项目基本结构（新模板）
&lt;/h2>&lt;p>新的模板使用了顶级语句来作为程序入口，详见 &lt;a class="link" href="https://learn.microsoft.com/en-us/dotnet/csharp/fundamentals/program-structure/top-level-statements" target="_blank" rel="noopener"
>Top-level statements - programs without Main methods - C# | Microsoft Learn&lt;/a>。&lt;/p>
&lt;p>开头即使用 &lt;code>WebApplication&lt;/code> 的静态方法来创建 builder。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">builder&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">WebApplication&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateBuilder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>之后使用 builder 的 &lt;code>Services&lt;/code> 属性和 &lt;code>Configuration&lt;/code> 属性来访问和添加服务，具体代码与上文相同。&lt;/p>
&lt;p>之后通过&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">app&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">builder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Build&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>来构建主机，构建后设置中间件与上文相同。&lt;/p>
&lt;h2 id="运行-aspnet-core-应用">运行 ASP.NET Core 应用
&lt;/h2>&lt;p>在 VS 中运行时，有两个选项：可以选择 IIS Express，也可以选择项目本身（ASP.NET Core 控制台应用内嵌了一个 Web 服务器，名叫 Kestrel）。&lt;br>
可以在“项目”-&amp;gt;“右键”-&amp;gt;“属性”来配置启动时候的工作。&lt;/p>
&lt;h3 id="环境设置">环境设置
&lt;/h3>&lt;ol>
&lt;li>通过环境变量设置；&lt;/li>
&lt;li>通过约定名称方法，比如 &lt;code>Configure()&lt;/code> 方法和 &lt;code>ConfigureDevelopment()&lt;/code> 方法。&lt;/li>
&lt;li>通过约定名称类，比如 &lt;code>StarUpDevelopment&lt;/code> 类。注意，需要设置 Program.cs 文件中的 &lt;code>webBuilder&lt;/code> ，将其更改为
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="n">webBuilder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">UseStartup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">typeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Program&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="包管理">包管理
&lt;/h3>&lt;h4 id="后端">后端
&lt;/h4>&lt;h5 id="nuget">NuGet
&lt;/h5>&lt;h4 id="前端">前端
&lt;/h4>&lt;blockquote>
&lt;p>但是实际上手的话前后端分离香一些&lt;/p>&lt;/blockquote>
&lt;h5 id="npm">NPM
&lt;/h5>&lt;ol>
&lt;li>添加 &lt;code>package.json&lt;/code> 文件（有模板）&lt;/li>
&lt;li>在 &lt;code>devDependencies&lt;/code> 中添加包，使用 json 键值对来设置包和版本，比如：
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;devDependencies&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;aPlayer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;1.10.1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h5 id="libman">LibMan
&lt;/h5>&lt;ol>
&lt;li>“右键”-&amp;gt;“添加”-&amp;gt;“添加客户端库”&lt;/li>
&lt;li>“提供程序”选择&amp;quot;unpkg&amp;quot;&lt;/li>
&lt;li>搜索、安装，会自动安装到 wwwroot 文件夹&lt;/li>
&lt;/ol></description></item><item><title>OpenGL GLFW 窗口前端显示</title><link>https://blog.gaein.cn/passages/glfw-window-float/</link><pubDate>Sat, 26 Dec 2020 01:27:00 +0800</pubDate><guid>https://blog.gaein.cn/passages/glfw-window-float/</guid><description>&lt;p>使用 GLFW 库自带的函数设置窗口置于顶层前端显示。起因：一位群友问到这个问题，在网上查找 GLFW 前端显示窗口和 OpenGL 前端显示窗口无果后翻阅 GLFW 的 docs 找到了解决方案。写个博客记录一下。&lt;/p>
&lt;h2 id="起因">起因
&lt;/h2>&lt;p>群友在群里问有没有会 OpenGL 的，&lt;del>虽然我不会但是肯定要凑热闹假装会啊&lt;/del>。它的需求是创建一个窗口，显示在最顶层（即使是有全屏程序的情况下）大概就是类似于录屏工具的样子。&lt;/p>
&lt;h2 id="过程">过程
&lt;/h2>&lt;p>在网上几番搜索没用结果后我干脆直接翻看了 GLFW 的官方文档（果然那玩意才是最好用的）&lt;/p>
&lt;p>一开始我以为是在创建窗口&lt;code>glfwCreateWindow()&lt;/code>时候传入参数里面设置置顶。但是并没有相关的参数，倒是发现了&lt;a class="link" href="https://www.glfw.org/docs/latest/window_guide.html##window_windowed_full_screen" target="_blank" rel="noopener"
>全屏的方法&lt;/a>。&lt;/p>
&lt;p>继续查阅函数列表，希望找到一个能置顶窗口的函数，类似于&lt;code>glfwSetWindowTop()&lt;/code>这样名字的。但是一番查找无果。像&lt;code>glfwShowWindow ( GLFWwindow * window ) &lt;/code>显示窗口和&lt;code>void glfwFocusWindow ( GLFWwindow * window ) &lt;/code>聚焦窗口都不是我想要的，聚集窗口会把焦点移动到窗口上，如果你打游戏时候干了这怕是要被打死。&lt;/p>
&lt;p>最后引起我注意的是函数&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">void&lt;/span> &lt;span class="nf">glfwSetWindowAttrib&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="n">GLFWwindow&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">window&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">attrib&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">value&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>它的意思是设置窗口的属性，我想，置顶不正是一种属性嘛？于是我跳转到了&lt;code>glfwSetWindowAttrib()&lt;/code>的&lt;a class="link" href="https://www.glfw.org/docs/latest/group__window.html##gace2afda29b4116ec012e410a6819033e" target="_blank" rel="noopener"
>页面&lt;/a>，用法很简单，和想象的一样。里面有个链接到&lt;a class="link" href="https://www.glfw.org/docs/latest/window_guide.html##window_attribs" target="_blank" rel="noopener"
>Window attributes&lt;/a>，及窗口的所有属性列表。在这里我们可以看到一个叫做&lt;code>GLFW_FLOATING&lt;/code>属性，&lt;a class="link" href="https://www.glfw.org/docs/latest/window_guide.html##GLFW_FLOATING_hint" target="_blank" rel="noopener"
>它的介绍&lt;/a>是：&lt;/p>
&lt;blockquote>
&lt;p>GLFW_FLOATING indicates whether the specified window is floating, also called topmost or always-on-top. This can be set before creation with the GLFW_FLOATING window hint or after with glfwSetWindowAttrib.&lt;/p>&lt;/blockquote>
&lt;p>它可以让窗口浮动，也就是置顶（always-on-top）这正是我们想要的了！&lt;/p>
&lt;h2 id="实施">实施
&lt;/h2>&lt;p>随便打开了以前测试 OpenGL 环境的项目，我的想法是按下&lt;code>T&lt;/code>键置顶，这样可以有一个前后对比。在监听按键的函数里面如下写道：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 按下T设置浮动
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">glfwGetKey&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">window&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">GLFW_KEY_T&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">GLFW_PRESS&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;[INFO]监测到置顶窗口&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">glfwSetWindowAttrib&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">window&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">GLFW_FLOATING&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">GLFW_TRUE&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>启动程序，点击其它程序发现可以覆盖我们的窗口。焦点在窗口时按下&lt;code>T&lt;/code>，然后再将其它程序拖动过去，发现不能覆盖。
&lt;img src="https://s3.ax1x.com/2020/12/26/rfwPXQ.md.jpg"
loading="lazy"
alt="结果"
>
全屏播放视频和全屏游戏也不能将我们的窗口覆盖。至此目的达成。&lt;/p>
&lt;h2 id="总结">总结
&lt;/h2>&lt;p>使用如下代码将窗口置顶，其中&lt;code>window&lt;/code>是窗口指针&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">glfwSetWindowAttrib&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">window&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">GLFW_FLOATING&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">GLFW_TRUE&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用如下代码取消窗口置顶，其中&lt;code>window&lt;/code>是窗口指针&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">glfwSetWindowAttrib&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">window&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">GLFW_FLOATING&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">GLFW_FALSE&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="参考">参考
&lt;/h2>&lt;p>&lt;a class="link" href="https://www.glfw.org/documentation.html" target="_blank" rel="noopener"
>GLFW 文档&lt;/a>&lt;br>
&lt;a class="link" href="https://www.glfw.org/docs/latest/group__window.html" target="_blank" rel="noopener"
>GLFW 文档 -&amp;gt; 窗口参考&lt;/a>&lt;br>
&lt;a class="link" href="https://www.glfw.org/docs/latest/group__window.html#gace2afda29b4116ec012e410a6819033e" target="_blank" rel="noopener"
>GLFW 文档 -&amp;gt; 窗口参考:glfwSetWindowAttrib&lt;/a>&lt;br>
&lt;a class="link" href="https://www.glfw.org/docs/latest/window_guide.html#window_attribs" target="_blank" rel="noopener"
>GLFW 文档 -&amp;gt; 窗口导览 -&amp;gt; 窗口属性&lt;/a>&lt;br>
&lt;a class="link" href="https://www.glfw.org/docs/latest/window_guide.html#GLFW_FLOATING_hint" target="_blank" rel="noopener"
>GLFW 文档 -&amp;gt; 窗口导览 -&amp;gt; 窗口属性:GLFW_FLOATING&lt;/a>&lt;/p></description></item><item><title>Windows下CLion配置SDL2开发环境</title><link>https://blog.gaein.cn/passages/config-sdl2-on-clion-win/</link><pubDate>Wed, 16 Dec 2020 23:51:22 +0800</pubDate><guid>https://blog.gaein.cn/passages/config-sdl2-on-clion-win/</guid><description>&lt;p>SDL（Simple DirectMedia Layer）是一套开放源代码的跨平台多媒体开发库，使用 C 语言写成。SDL 提供了数种控制图像、声音、输出入的函数。简单易用。这篇文章介绍一下我在 Windows 下 CLion 配置 SDL2 开发环境的方法。&lt;/p>
&lt;blockquote>
&lt;p>配 SDL2 还是由于大一的 C 语言程序设计课设。由于我始终不愿意使用 EasyX，却由于 GLFW 太过复杂而担心无法完成作业&lt;/p>
&lt;p>&lt;del>其实我的担心是多余的，以我的实力，根本不用担心，就是完不成&lt;/del>&lt;/p>
&lt;p>所以采用了学 &lt;del>姐&lt;/del> 长 &lt;a class="link" href="https://mzdluo123.github.io/" target="_blank" rel="noopener"
>@HelloWorld&lt;/a> 的建议，使用了 SDL。不过配置的过程中遇到了很多问题，在这里记录并分享一下。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>环境：&lt;/p>
&lt;ol>
&lt;li>CLion 2020.3 Build 203.5981.166&lt;/li>
&lt;li>Windows10 20H2 19042.685&lt;/li>
&lt;li>MinGW-w64 GCC 8.1.0(x86_64-posix-seh-rev0)&lt;/li>
&lt;li>SDL2-2.0.12 [DEV]&lt;/li>
&lt;/ol>&lt;/blockquote>
&lt;h2 id="sdl2-配置">SDL2 配置
&lt;/h2>&lt;h3 id="下载-sdl2">下载 SDL2
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>打开 SDL 官网的下载页 &lt;a class="link" href="https://www.libsdl.org/download-2.0.php" target="_blank" rel="noopener"
>LibSDL.org&lt;/a>
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Config-SDL2-On-CLion-Win/01.webp"
loading="lazy"
alt="下载"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>下载 &amp;ldquo;Development Libraries&amp;rdquo; (开发版)中的 &amp;ldquo;Windows&amp;rdquo;-&amp;gt;&amp;ldquo;MinGW 32/64-bit&amp;rdquo;&lt;br>
我下载的是&lt;a class="link" href="https://www.libsdl.org/release/SDL2-devel-2.0.12-mingw.tar.gz" target="_blank" rel="noopener"
>&amp;ldquo;SDL2-devel-2.0.12-mingw.tar.gz&amp;rdquo;&lt;/a>&lt;br>
(注：此链接不确保时效性，请去官网下载最新版本)&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="配置-sdl2">配置 SDL2
&lt;/h3>&lt;ol>
&lt;li>解压缩下载的 &amp;ldquo;SDL2-devel-2.0.12-mingw.tar.gz&amp;rdquo; ，将 &amp;ldquo;x86_64-w64-mingw32&amp;rdquo; 中的所有文件复制到你 MinGW-w64 的目录中。&lt;br>
如果你的 MinGW 是 i686 则复制&amp;quot;i686-w64-mingw32&amp;quot;中的所有文件。
(注：在终端中使用 &lt;code>gcc -v&lt;/code> 可以查看到 MinGW-w64 的版本)
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Config-SDL2-On-CLion-Win/02.webp"
loading="lazy"
alt="解压"
>
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Config-SDL2-On-CLion-Win/03.webp"
loading="lazy"
alt="复制"
>
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Config-SDL2-On-CLion-Win/04.webp"
loading="lazy"
alt="粘贴"
>&lt;/li>
&lt;li>在项目目录下新建一个文件夹&amp;quot;SDL&amp;quot;，将&amp;quot;include&amp;quot;中的&amp;quot;SDL2&amp;quot;，复制到项目目录下&amp;quot;SDL&amp;quot;文件夹中
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Config-SDL2-On-CLion-Win/05.webp"
loading="lazy"
alt="SDL2"
>&lt;/li>
&lt;/ol>
&lt;h2 id="cmake-配置">CMake 配置
&lt;/h2>&lt;h3 id="新建">新建
&lt;/h3>&lt;p>在 CLion 中点&amp;quot;文件&amp;quot;-&amp;gt;&amp;ldquo;新建项目&amp;rdquo;，选择 C++(C 也可以)
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Config-SDL2-On-CLion-Win/06.webp"
loading="lazy"
alt="新建"
>&lt;/p>
&lt;h4 id="配置">配置
&lt;/h4>&lt;p>将&amp;quot;CMakeLists.txt&amp;quot;按照如下内容修改：&lt;br>
(注：文件的内容根据你的项目决定，一般来说不用修改默认生成的)
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Config-SDL2-On-CLion-Win/07.webp"
loading="lazy"
alt="库"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cmake" data-lang="cmake">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># 设置CMake需要的版本
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span>&lt;span class="nb">cmake_minimum_required&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">VERSION&lt;/span> &lt;span class="s">3.17&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="c"># 设置项目名称
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span>&lt;span class="nb">project&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">SDL2_Test&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="c"># 设置C++版本
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span>&lt;span class="nb">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">CMAKE_CXX_STANDARD&lt;/span> &lt;span class="s">20&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="c"># 设置includePath
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span>&lt;span class="nb">include_directories&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">SDL&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="c"># 生成文件
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span>&lt;span class="nb">add_executable&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">SDL2_Test&lt;/span> &lt;span class="s">main.cpp&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="c"># 链接库
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span>&lt;span class="nb">target_link_libraries&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">SDL2_Test&lt;/span> &lt;span class="s">mingw32&lt;/span> &lt;span class="s">SDL2main&lt;/span> &lt;span class="s">SDL2&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Config-SDL2-On-CLion-Win/08.webp"
loading="lazy"
alt="完成"
>&lt;/p>
&lt;h2 id="测试">测试
&lt;/h2>&lt;p>在 &amp;ldquo;main.cpp&amp;rdquo; 中写入如下内容：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;#34;SDL2/SDL.h&amp;#34;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">argc&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">char&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">argv&lt;/span>&lt;span class="p">[])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 初始化SDL
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">SDL_Init&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">SDL_INIT_VIDEO&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 创建SDL窗口指针
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">SDL_Window&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">window&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">SDL_CreateWindow&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;SDL2Test&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">SDL_WINDOWPOS_UNDEFINED&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">SDL_WINDOWPOS_UNDEFINED&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">640&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">480&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 创建渲染器
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">SDL_Renderer&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">renderer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">SDL_CreateRenderer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">window&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">SDL_RENDERER_SOFTWARE&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 设置渲染器
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">SDL_SetRenderDrawColor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">renderer&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">SDL_ALPHA_OPAQUE&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">SDL_RenderClear&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">renderer&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 渲染
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">SDL_RenderPresent&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">renderer&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 等待3000ms
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">SDL_Delay&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3000&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 销毁窗口&amp;amp;退出
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">SDL_DestroyWindow&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">window&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">SDL_Quit&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Config-SDL2-On-CLion-Win/09.webp"
loading="lazy"
alt="源代码"
>&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Config-SDL2-On-CLion-Win/10.webp"
loading="lazy"
alt="结果"
>&lt;/p>
&lt;p>点击右上角的三角运行，如果出现&lt;/p>
&lt;ol>
&lt;li>无法找到头文件：检查是否复制&amp;quot;include&amp;quot;和设置&amp;quot;include_directories(SDL)&amp;quot;&lt;/li>
&lt;li>找不到WinMain：检查是否复制库。或者尝试调换&amp;quot;target_link_libraries(SDL2_Test mingw32 SDL2main SDL2)&amp;ldquo;中库的顺序&lt;/li>
&lt;/ol>
&lt;h2 id="说明">说明
&lt;/h2>&lt;ol>
&lt;li>有些同学可能很迷惑：为什么要把SDL扔进MinGW-w64的目录里面呢？因为我在外面的目录尝试的时候各种报错，后来看了 &lt;a class="link" href="https://blog.csdn.net/ronaldinho2014/article/details/104835426" target="_blank" rel="noopener"
>CSDN:CLion配置SDL2开发环境（Windows系统）&lt;/a>。貌似把SDL扔进mingw目录就能解决。具体原因还有待深究。&lt;/li>
&lt;li>其它方法：使用vcpkg可以安装，也可以使用CMake模块：
&lt;ol>
&lt;li>&lt;a class="link" href="https://github.com/tcbrindle/sdl2-cmake-scripts" target="_blank" rel="noopener"
>GitHub:SDL2-CMake-Scripts&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/binary132/cmake-sdl" target="_blank" rel="noopener"
>GitHub:CMake-SDL&lt;/a>&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;p>参考：&lt;/p>
&lt;ol>
&lt;li>&lt;a class="link" href="https://wiki.libsdl.org/" target="_blank" rel="noopener"
>SDL官网:SDL-WIKI&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://trenki2.github.io/blog/2017/06/02/using-sdl2-with-cmake/" target="_blank" rel="noopener"
>Trenki&amp;rsquo;s Dev Blog:Using SDL2 with CMake&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://intellij-support.jetbrains.com/hc/en-us/community/posts/360006864999-Configuring-SDL2-with-Clion" target="_blank" rel="noopener"
>JetBrains-Community:Configuring SDL2 with CLion&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://adolfans.github.io/sdltutorialcn/" target="_blank" rel="noopener"
>adolfans:SDL中文教程&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.csdn.net/ronaldinho2014/article/details/104835426" target="_blank" rel="noopener"
>CSDN:CLion配置SDL2开发环境（Windows系统）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://cmake.org/cmake/help/latest/module/FindSDL.html" target="_blank" rel="noopener"
>CMake:FindSDL&lt;/a>&lt;/li>
&lt;/ol></description></item><item><title>OpenGL学习笔记——第一个窗口</title><link>https://blog.gaein.cn/passages/opengl-note1-firstwindow/</link><pubDate>Fri, 13 Nov 2020 20:50:55 +0800</pubDate><guid>https://blog.gaein.cn/passages/opengl-note1-firstwindow/</guid><description>&lt;p>学校的C语言程序设计课设是编写一个图形化的程序，学校方面采用的是EasyX，当然也允许其它图形库，因此我准备学习OpenGL&lt;/p>
&lt;!-- more -->
&lt;blockquote>
&lt;p>EasyX虽然可能比OpenGL简单一些，但是可能不如OpenGL应用面更广泛，也不如OpenGL更有挑战性。&lt;/p>&lt;/blockquote>
&lt;h2 id="基本">基本
&lt;/h2>&lt;h4 id="笔记">笔记
&lt;/h4>&lt;p>OpenGL是一个图形API，需要一个编程语言来工作，因此我选择C/C++，在不需要用到C++特性的情况下会使用C来编写（因为毕竟是C语言程序设计课设）。我使用的教程是&lt;a class="link" href="https://learnopengl-cn.github.io" target="_blank" rel="noopener"
>LearnOpenGL CN&lt;/a>和《OpenGL编程指南》（忘了是那一版了，实验室的书；大部分情况下会使用LearnOpenGL CN网站的教程）&lt;/p>
&lt;h4 id="opengl">OpenGL
&lt;/h4>&lt;p>早期的OpenGL使用&lt;strong>立即渲染模式&lt;/strong>（固定渲染管线），这个模式下绘制图形很方便。从OpenGL3.2开始，立即渲染模式开始被废除，鼓励使用&lt;strong>核心模式&lt;/strong>。&lt;br>
OpenGL自身是一个巨大的状态机：一系列的变量描述OpenGL此刻应当如何运行。OpenGL的状态通常被称为OpenGL上下文(Context)。
（OpenGL自己搓了面向对象）一般来说，我们创建一个对象，然后用一个id保存它的引用（实际数据被储存在后台）。然后我们将对象绑定至上下文的目标位置（例子中窗口对象目标的位置被定义成GL_WINDOW_TARGET）。接下来我们设置窗口的选项。最后我们将目标位置的对象id设回0，解绑这个对象。设置的选项将被保存在objectId所引用的对象中，一旦我们重新绑定这个对象到GL_WINDOW_TARGET位置，这些选项就会重新生效。&lt;/p>
&lt;h4 id="glfw">GLFW
&lt;/h4>&lt;p>GLFW是一个库，提供了渲染物体的最低限度的接口。&lt;/p>
&lt;h6 id="获取">获取
&lt;/h6>&lt;p>&lt;a class="link" href="http://www.glfw.org/download.html" target="_blank" rel="noopener"
>官方网站下载页&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>使用预编译的二进制版本时下载32位，因为64位可能有奇奇怪怪的问题。&lt;/p>&lt;/blockquote>
&lt;h6 id="链接">链接
&lt;/h6>&lt;ol>
&lt;li>“右键项目”-&amp;gt;“属性”-&amp;gt;“VC++目录”，在“包含目录”和“库目录”中添加GLFW的include文件夹；&lt;/li>
&lt;li>在“链接器”-&amp;gt;“输入”-&amp;gt;“附加依赖项”中加入&amp;quot;&lt;code>glfw3.lib&lt;/code>&amp;quot;、&amp;quot;&lt;code>opengl32.lib&lt;/code>&amp;quot;&lt;/li>
&lt;/ol>
&lt;h4 id="glad">GLAD
&lt;/h4>&lt;p>由于OpenGL驱动版本众多，因此大多数函数在编译时没有确定的位置，在运行时查询的工作量很大，因此使用GLAD库来解决。&lt;/p>
&lt;h6 id="配置glad">配置GLAD
&lt;/h6>&lt;ol>
&lt;li>打开&lt;a class="link" href="http://glad.dav1d.de/" target="_blank" rel="noopener"
>GLAD在线服务&lt;/a>；&lt;/li>
&lt;li>设置语言为&lt;code>C/C++&lt;/code>；&lt;/li>
&lt;li>OpenGL版本选择&lt;code>3.3&lt;/code>及以上；&lt;/li>
&lt;li>模式设置为&lt;code>Core&lt;/code>；&lt;/li>
&lt;li>选中&lt;strong>生成加载器&lt;/strong>(Generate a loader)；&lt;/li>
&lt;li>点击&lt;strong>生成&lt;/strong>(Generate)按钮。&lt;/li>
&lt;/ol>
&lt;h6 id="使用glad">使用GLAD
&lt;/h6>&lt;p>将生成的文件添加到&lt;code>include&lt;/code>目录中
引用头文件&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">##include &amp;lt;glad/glad.h&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>来使用&lt;/p>
&lt;h2 id="你好窗口">你好，窗口
&lt;/h2>&lt;p>在&lt;code>main()&lt;/code>函数中&lt;/p></description></item><item><title>有效的括号-力扣20 栈</title><link>https://blog.gaein.cn/passages/leetcode-20-validparentheses/</link><pubDate>Fri, 13 Nov 2020 11:25:24 +0800</pubDate><guid>https://blog.gaein.cn/passages/leetcode-20-validparentheses/</guid><description>&lt;p>中北大学 AI+移动互联创新实验室 C语言培训作业，力扣第20题有效的括号 题解&lt;/p>
&lt;!-- more -->
&lt;blockquote>
&lt;p>这道题感觉很简单，但是吧，做起来还真不简单。对于人类来说理解判断似乎不难，但是对于计算机来说可能就比较麻烦了。起初我写了很多判断，但是依旧无法实现。经过党明&lt;strong>学姐&lt;/strong>的启发，我觉得使用栈，官方题解上使用的是数组，其实数组就可以做一个简单的栈。不过数组很可能造成内存的浪费，经过李涛的启(qī)发(piàn)自己搓了一个链式栈。&lt;/p>&lt;/blockquote>
&lt;h2 id="题干">题干
&lt;/h2>&lt;p>[&lt;a class="link" href="https://leetcode-cn.com/problems/valid-parentheses/" target="_blank" rel="noopener"
>力扣-有效的括号&lt;/a>]&lt;/p>
&lt;blockquote>
&lt;p>给定一个只包括 &amp;lsquo;(&amp;rsquo;，&amp;rsquo;)&amp;rsquo;，&amp;rsquo;{&amp;rsquo;，&amp;rsquo;}&amp;rsquo;，&amp;rsquo;[&amp;rsquo;，&amp;rsquo;]&amp;rsquo; 的字符串，判断字符串是否有效。
有效字符串需满足：&lt;/p>
&lt;ol>
&lt;li>左括号必须用相同类型的右括号闭合。&lt;/li>
&lt;li>左括号必须以正确的顺序闭合。&lt;/li>
&lt;li>&lt;strong>注意空字符串可被认为是有效字符串。&lt;/strong>&lt;/li>
&lt;/ol>&lt;/blockquote>
&lt;blockquote>
&lt;p>示例 1:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">输入: &amp;#34;()&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">输出: true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/blockquote>
&lt;blockquote>
&lt;p>示例 2:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">输入: &amp;#34;()[]{}&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">输出: true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/blockquote>
&lt;blockquote>
&lt;p>示例 3:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">输入: &amp;#34;(]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">输出: false
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/blockquote>
&lt;blockquote>
&lt;p>示例 4:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">输入: &amp;#34;([)]&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">输出: false
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/blockquote>
&lt;blockquote>
&lt;p>示例 5:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">输入: &amp;#34;{[]}&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">输出: true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/blockquote>
&lt;h2 id="栈">栈
&lt;/h2>&lt;h4 id="思路">思路
&lt;/h4>&lt;p>起初我写了很多判断，但是依旧无法实现。经过党明&lt;strong>学姐&lt;/strong>的启发，我觉得使用栈，官方题解上使用的是数组，其实数组就可以做一个简单的栈。不过数组很可能造成内存的浪费，经过李涛的启(qī)发(piàn)自己搓了一个链式栈。&lt;br>
做法是首先判断是否为空字符串，为空则返回&lt;code>true&lt;/code>，不为空则遍历字符数组，当匹配到左括号&lt;code>{&lt;/code>、&lt;code>[&lt;/code>、&lt;code>(&lt;/code>时候，将左括号入栈。&lt;br>
继续遍历，发现右括号后将其和栈顶的左括号匹配，匹配成功则将其出栈，继续进行循环，直到读取到&lt;code>'\0'&lt;/code>为止。&lt;br>
如果&lt;/p>
&lt;ol>
&lt;li>没有任何括号入栈&lt;/li>
&lt;li>遍历结束后栈不为空
则返回&lt;code>false&lt;/code>&lt;/li>
&lt;/ol>
&lt;h4 id="代码">代码
&lt;/h4>&lt;h6 id="官方题解">官方题解
&lt;/h6>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">char&lt;/span> &lt;span class="nf">pairs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">char&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="sc">&amp;#39;}&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="sc">&amp;#39;{&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="sc">&amp;#39;]&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="sc">&amp;#39;[&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="sc">&amp;#39;)&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="sc">&amp;#39;(&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">bool&lt;/span> &lt;span class="nf">isValid&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">char&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">strlen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">stk&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">top&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">char&lt;/span> &lt;span class="n">ch&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">pairs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">ch&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">top&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">stk&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">top&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">ch&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">top&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stk&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">top&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">top&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="我的题解">我的题解
&lt;/h6>&lt;blockquote>
&lt;p>由于手搓了一个链式栈，所以代码很长&lt;/p>&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;span class="lnt">193
&lt;/span>&lt;span class="lnt">194
&lt;/span>&lt;span class="lnt">195
&lt;/span>&lt;span class="lnt">196
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*AI+移动互联创新实验室 C语言培训练习题 有效的括号 | 力扣-20*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">##include &amp;lt;stdio.h&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">##include &amp;lt;stdbool.h&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">##include &amp;lt;string.h&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">##include &amp;lt;malloc.h&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 结构体栈
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">typedef&lt;/span> &lt;span class="k">struct&lt;/span> &lt;span class="n">_Node&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">char&lt;/span> &lt;span class="n">value&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">struct&lt;/span> &lt;span class="n">_Node&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">next&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">struct&lt;/span> &lt;span class="n">_Node&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">last&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="n">Node&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 结构体栈
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">typedef&lt;/span> &lt;span class="k">struct&lt;/span> &lt;span class="n">_Stack&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Node&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">top&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="n">Stack&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 函数声明
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">void&lt;/span> &lt;span class="nf">stackPush&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Stack&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">st&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">char&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">char&lt;/span> &lt;span class="nf">stackPop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Stack&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">st&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">bool&lt;/span> &lt;span class="nf">isOdd&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">num&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Stack&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nf">stackInit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">char&lt;/span> &lt;span class="n">in&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">void&lt;/span> &lt;span class="nf">bracketsTableInit&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">char&lt;/span> &lt;span class="nf">bracketsTable&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">char&lt;/span> &lt;span class="n">ch&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 定义对应表
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">char&lt;/span> &lt;span class="n">table&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">126&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// bool isValid(char *s);
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// int main(int argc, char const *argv[])
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// char ch[] = &amp;#34;()[]{}&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// if (isValid(ch))
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// printf(&amp;#34;%s \n&amp;#34;, &amp;#34;有效&amp;#34;);
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// }
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// else
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// printf(&amp;#34;%s \n&amp;#34;, &amp;#34;无效&amp;#34;);
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// }
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// return 0;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// }
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 测试用代码
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">bool&lt;/span> &lt;span class="nf">isValid&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">char&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">LENGTH&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">strlen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">bool&lt;/span> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="nf">isOdd&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">LENGTH&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">bracketsTableInit&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">bracketsTable&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 匹配到左括号
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">Stack&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">st&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">stackInit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 入栈
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 移到下一个字符
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="n">hasR&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 默认有对应的右边为false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">LENGTH&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 循环遍历字符数组
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">bracketsTable&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 左括号入栈
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nf">stackPush&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">st&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//右括号，设置hasR为true并且出栈
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">hasR&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">char&lt;/span> &lt;span class="n">inSt&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">bracketsTable&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">stackPop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">st&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// printf(&amp;#34;%c %c\n&amp;#34;,inSt,*s );
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">inSt&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 无法匹配
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 匹配并跳到下一循环
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">continue&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">hasR&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 未找到右括号
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">st&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">top&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 栈未出空
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Stack&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nf">stackInit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">char&lt;/span> &lt;span class="n">in&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Node&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">newNode&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Node&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="nf">malloc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">sizeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Node&lt;/span>&lt;span class="p">));&lt;/span> &lt;span class="c1">// 新建栈节点
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">Stack&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">newSt&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Stack&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="nf">malloc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">sizeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Stack&lt;/span>&lt;span class="p">));&lt;/span> &lt;span class="c1">// 新建栈
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">newNode&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">in&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 节点值
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">newNode&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">next&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 置空节点next
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">newNode&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">last&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 置空节点last
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">newSt&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">top&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">newNode&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 栈顶指向节点
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">newSt&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 入栈
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">void&lt;/span> &lt;span class="nf">stackPush&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Stack&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">st&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">char&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Node&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">newNode&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Node&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="nf">malloc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">sizeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Node&lt;/span>&lt;span class="p">));&lt;/span> &lt;span class="c1">// 新建栈节点
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">newNode&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 设置栈节点的值
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">newNode&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">next&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 置空节点next
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">newNode&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">last&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">st&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">top&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 判空
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">st&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">top&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">next&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">newNode&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 将节点加入栈
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">newNode&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">last&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">st&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">top&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 设置节点的last
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">st&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">top&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">newNode&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 指向新节点
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 出栈
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">char&lt;/span> &lt;span class="nf">stackPop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Stack&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">st&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">char&lt;/span> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sc">&amp;#39;\0&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">st&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">top&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">st&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">top&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">last&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 仅有一个栈
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">st&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">top&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 取值
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">st&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">top&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 置空
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// free(st-&amp;gt;top);
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Node&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">del&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">st&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">top&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 临时节点
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">st&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">top&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">del&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">last&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 修改栈顶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">st&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">top&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">next&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 取消栈与del节点的链接
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">del&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">last&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 取消del节点与栈的链接
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">del&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 取ret值
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nf">free&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">del&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 释放内存
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">del&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 设置NULL
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 判断是否能出栈
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">bool&lt;/span> &lt;span class="nf">stackCanPop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Stack&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">st&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">st&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">top&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 判断是否为奇数
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">bool&lt;/span> &lt;span class="nf">isOdd&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">num&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="nb">true&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 初始化对应表
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">void&lt;/span> &lt;span class="nf">bracketsTableInit&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">table&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="sc">&amp;#39;(&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sc">&amp;#39;)&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">table&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="sc">&amp;#39;[&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sc">&amp;#39;]&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">table&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="sc">&amp;#39;{&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sc">&amp;#39;}&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 查询对应空格
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">char&lt;/span> &lt;span class="nf">bracketsTable&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">char&lt;/span> &lt;span class="n">ch&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">table&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">ch&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这次只使用了C语言，因为CSharp反转链表应该不难，&lt;code>list.Reverse();&lt;/code>（逃）&lt;/p>
&lt;h4 id="结果">结果
&lt;/h4>&lt;p>仅有一次循环，使用迭代的方法还是蛮快的，完成了力扣的任务。但是递归我实在不会，甚至不能很好的区分它们。所以暂时就没有写递归方法。
&lt;img src="https://s3.ax1x.com/2020/11/12/DSKJ74.md.jpg"
loading="lazy"
alt="力扣"
>&lt;/p>
&lt;h2 id="最后">最后
&lt;/h2>&lt;p>这道题的话还是比较简单的，毕竟画起图来感觉不难，但是实际写起来还是有一定挑战性的。通过这道题顺手复习了忘干净的链表，也是非常好的。链表的题先画图理解一下有很大帮助，尤其是自己用笔手动遍历一下，利于理解过程。&lt;/p></description></item><item><title>反转链表-力扣206 迭代</title><link>https://blog.gaein.cn/passages/leetcode-206-reverselinkedlist/</link><pubDate>Fri, 13 Nov 2020 00:00:59 +0800</pubDate><guid>https://blog.gaein.cn/passages/leetcode-206-reverselinkedlist/</guid><description>&lt;p>中北大学 AI+移动互联创新实验室 C语言培训作业，力扣第206题反转链表 题解&lt;/p>
&lt;!-- more -->
&lt;blockquote>
&lt;p>反转链表听起来蛮难的，但是也就是一次迭代改变链表中指针的指向，将其反向指回去。这种方法比复制一个链表出来效率要高。当然，作为单向链表来说，去复制链表也不是什么简单的好办法。&lt;/p>&lt;/blockquote>
&lt;h2 id="题干">题干
&lt;/h2>&lt;p>[&lt;a class="link" href="https://leetcode-cn.com/problems/reverse-linked-list/" target="_blank" rel="noopener"
>力扣-反转链表&lt;/a>]&lt;/p>
&lt;blockquote>
&lt;p>反转一个单链表。&lt;br>
示例:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">输入: 1-&amp;gt;2-&amp;gt;3-&amp;gt;4-&amp;gt;5-&amp;gt;NULL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">输出: 5-&amp;gt;4-&amp;gt;3-&amp;gt;2-&amp;gt;1-&amp;gt;NULL
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>进阶:
你可以迭代或递归地反转链表。你能否用两种方法解决这道题？&lt;/p>&lt;/blockquote>
&lt;h2 id="迭代">迭代
&lt;/h2>&lt;h4 id="思路">思路
&lt;/h4>&lt;p>说实话迭代是什么也不是很理解，廖雪峰有一篇文章介绍了迭代：[&lt;a class="link" href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017316949097888" target="_blank" rel="noopener"
>廖雪峰的官网&lt;/a>] 大致上可以理解为遍历吧。大致过程就是不断的改变指针指向，将本节点指向下一个节点的指针指向上一个节点，因此需要临时的结构体指针来保存节点（毕竟是单向链表，不能回去）。为了方便理解，粗略的画了一下图，在实际应用中关于链表的问题画图确实比较好理解一些。（u1s1，surface的笔是真的爽，买电脑不能只看性能啊，另外字太丑了&amp;hellip;）&lt;/p>
&lt;p>&lt;img src="https://s3.ax1x.com/2020/11/12/DSu1dH.png"
loading="lazy"
alt="图一"
>
在开始的时候，定义临时节点&lt;code>nextNode&lt;/code>，然后更改&lt;code>head-&amp;gt;next&lt;/code>指向&lt;code>NULL&lt;/code>，然后定义临时节点&lt;code>lastNode&lt;/code>用于保存上一节点，将&lt;code>head&lt;/code>指向&lt;code>nextNode&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://s3.ax1x.com/2020/11/12/DSuMLD.png"
loading="lazy"
alt="图二"
>
循环，修改&lt;code>nextNode&lt;/code>、&lt;code>lastNode&lt;/code>、&lt;code>head&lt;/code>等指针的指向，不断的将&lt;code>节点-&amp;gt;next&lt;/code>反转，并向前移动&lt;code>head&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://s3.ax1x.com/2020/11/12/DSulee.png"
loading="lazy"
alt="图三"
>
当&lt;code>head-&amp;gt;next == NULL&lt;/code>的时候即为最后一个节点，此时结束循环并修改最后一个节点的指向，然后返回链表。&lt;/p>
&lt;h4 id="代码">代码
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * 单向链表的结构体定义
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * struct ListNode {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * int val;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * struct ListNode *next;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * };
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">struct&lt;/span> &lt;span class="n">ListNode&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nf">reverseList&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">struct&lt;/span> &lt;span class="n">ListNode&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">head&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">struct&lt;/span> &lt;span class="n">ListNode&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">lastNode&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">head&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">struct&lt;/span> &lt;span class="n">ListNode&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">temp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">head&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">head&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="nb">NULL&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">head&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">next&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">isFirst&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">head&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">next&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">temp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">head&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">head&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">head&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">next&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">isFirst&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">temp&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">next&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">isFirst&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">temp&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">next&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lastNode&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lastNode&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">temp&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">head&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">next&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lastNode&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">head&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这次只使用了C语言，因为CSharp反转链表应该不难，&lt;code>list.Reverse();&lt;/code>（逃）&lt;/p>
&lt;h4 id="结果">结果
&lt;/h4>&lt;p>仅有一次循环，使用迭代的方法还是蛮快的，完成了力扣的任务。但是递归我实在不会，甚至不能很好的区分它们。所以暂时就没有写递归方法。
&lt;img src="https://s3.ax1x.com/2020/11/12/DSKJ74.md.jpg"
loading="lazy"
alt="力扣"
>&lt;/p>
&lt;h2 id="最后">最后
&lt;/h2>&lt;p>这道题的话还是比较简单的，毕竟画起图来感觉不难，但是实际写起来还是有一定挑战性的。通过这道题顺手复习了忘干净的链表，也是非常好的。链表的题先画图理解一下有很大帮助，尤其是自己用笔手动遍历一下，利于理解过程。&lt;/p></description></item><item><title>两数之和-力扣1 暴力算法/哈希表</title><link>https://blog.gaein.cn/passages/leetcode-1-twosum/</link><pubDate>Mon, 09 Nov 2020 12:29:51 +0800</pubDate><guid>https://blog.gaein.cn/passages/leetcode-1-twosum/</guid><description>&lt;p>中北大学 AI+移动互联创新实验室 C语言培训作业，力扣第一题两数之和 题解&lt;/p>
&lt;!-- more -->
&lt;blockquote>
&lt;p>其实两数之和这道题在一个月前用Java写过一次，难度应该是不算高。但是力扣判题变得丧心病狂了，一个月前通过了的相同代码到现在就疯狂超时，所以还要看看这题。&lt;/p>&lt;/blockquote>
&lt;h2 id="题干">题干
&lt;/h2>&lt;p>[&lt;a class="link" href="https://leetcode-cn.com/problems/two-sum/" target="_blank" rel="noopener"
>力扣-两数之和&lt;/a>]&lt;/p>
&lt;blockquote>
&lt;p>给定一个整数数组 &lt;code>nums&lt;/code> 和一个目标值 &lt;code>target&lt;/code>，请你在该数组中找出和为目标值的那&lt;strong>两个&lt;/strong>整数，并返回他们的数组下标。你可以假设每种输入只会对应一个答案。但是，数组中同一个元素不能使用两遍。&lt;br>
示例:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">给定 nums = [2, 7, 11, 15], target = 9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">因为 nums[0] + nums[1] = 2 + 7 = 9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">所以返回 [0, 1]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/blockquote>
&lt;h2 id="暴力解法">暴力解法
&lt;/h2>&lt;h4 id="思路">思路
&lt;/h4>&lt;p>用最暴力的算法两层循环还是非常简单的，只需要让第二层从&lt;code>i + 1&lt;/code>开始循环即可防止重复，匹配到后将数组下标&lt;code>i&lt;/code>和&lt;code>j&lt;/code>添加到返回的数组里面即可&lt;/p>
&lt;h4 id="代码">代码
&lt;/h4>&lt;h6 id="java">Java
&lt;/h6>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">Solution&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">[]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">twoSum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">[]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">[]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">2&lt;/span>&lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// 临时储存结果&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">length&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// 循环第一层&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">1&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">length&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// 循环第二层&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// j从i+1开始，即不重复加&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="o">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">0&lt;/span>&lt;span class="o">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">1&lt;/span>&lt;span class="o">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// 将结果的索引存储在result数组中&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="csharpmicrosoft-java">CSharp(Microsoft Java)
&lt;/h6>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">Solution&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">TwoSum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="c1">// 临时储存结果&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Length&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">++)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">// 循环第一层&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Length&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">++)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">// 循环第二层&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// j从i+1开始，即不重复加&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 将结果的索引存储在result数组中&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">result&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="c">C
&lt;/h6>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nf">twoSum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">numsSize&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">returnSize&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 定义空指针用来存储返回数据
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">returnSize&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 默认的返回大小为0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">numsSize&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="c1">// 循环第一层
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">numsSize&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="c1">// 循环第二层
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="nf">malloc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">sizeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 为返回结果的指针分配内存
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 赋值result
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">result&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 赋值第二项
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">returnSize&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 设置返回大小
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">goto&lt;/span> &lt;span class="n">end&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 跳出两层循环
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nl">end&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">result&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>p.s.别骂我的goto，使用goto跳出C的两层循环还是蛮方便（逃）&lt;/p>
&lt;h4 id="结果">结果
&lt;/h4>&lt;p>&lt;img src="https://s1.ax1x.com/2020/11/10/BbBDCd.png"
loading="lazy"
alt="一个月前的Java暴力算法"
>&lt;/p>
&lt;blockquote>
&lt;p>一个月前的Java代码，那个时候还能通过，现在提交同样的代码也会超时&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://s1.ax1x.com/2020/11/10/BbB04H.png"
loading="lazy"
alt="C语言暴力算法"
>&lt;/p>
&lt;blockquote>
&lt;p>C语言暴力算法结果（超时）&lt;/p>&lt;/blockquote>
&lt;h2 id="哈希表法">哈希表法
&lt;/h2>&lt;h4 id="思路-1">思路
&lt;/h4>&lt;blockquote>
&lt;p>这是实验室巨佬和我说的，所以我去了解了一下这个思路。大概的实现是这样的：遍历一次数组将值存入哈希表中，同时检查哈希表中是否存在 &lt;code>target - num&lt;/code> 存在和话返回下标，不存在继续循环并将当前插入哈希表，直到循环结束则无结果。&lt;br>
官方题解使用的HashMap是开源项目 &lt;a class="link" href="https://troydhanson.github.io/uthash/" target="_blank" rel="noopener"
>uthash&lt;/a> leetcode已经默认包含其头文件，可以直接使用（官方文档： &lt;a class="link" href="https://troydhanson.github.io/uthash/userguide.html" target="_blank" rel="noopener"
>https://troydhanson.github.io/uthash/userguide.html&lt;/a>）&lt;/p>&lt;/blockquote>
&lt;h4 id="代码-1">代码
&lt;/h4>&lt;p>p.s. 写起来还是有点自闭的，现在已经是12:35了，才刚通过一个&lt;br>
p.s. 代码很长，有很多被注释掉的是当时测试用的，不舍得删掉了(最后还是删了)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;span class="lnt">90
&lt;/span>&lt;span class="lnt">91
&lt;/span>&lt;span class="lnt">92
&lt;/span>&lt;span class="lnt">93
&lt;/span>&lt;span class="lnt">94
&lt;/span>&lt;span class="lnt">95
&lt;/span>&lt;span class="lnt">96
&lt;/span>&lt;span class="lnt">97
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-C" data-lang="C">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*AI+移动互联创新实验室 C语言培训练习题 两数之和 | 力扣-1*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">##include &amp;lt;stdio.h&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">##include &amp;lt;malloc.h&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">##include &amp;lt;math.h&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">##include &amp;lt;stdbool.h&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1">// 头文件
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">##include &amp;#34;uthash\uthash.h&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">##define DEFAULT_SIZE 0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">##define FOUND_SIZE 2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">##define INT2_SIZE sizeof(int) * 2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1">// 定义常量 PART1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">typedef&lt;/span> &lt;span class="k">struct&lt;/span> &lt;span class="n">_hashMap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">UT_hash_handle&lt;/span> &lt;span class="n">hh&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="n">HashMap&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 哈希表结构体
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">##define HASH_SIZE sizeof(HashMap) * 2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1">// 定义常量 PART2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nf">twoSum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">numsSize&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">returnSize&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">hashFind&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">HashMap&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">bool&lt;/span> &lt;span class="nf">hashInsert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 函数声明
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">HashMap&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">numHash&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 新哈希表
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nf">twoSum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">numsSize&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">returnSize&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="n">returnSize&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">DEFAULT_SIZE&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">numsSize&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">other&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">target&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 计算另一个orher
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">index&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">hashFind&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">other&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">numHash&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 将other作为键寻找
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">index&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 找到则进行返回
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="nf">malloc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">INT2_SIZE&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ret&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// printf(&amp;#34;%d %d\n&amp;#34;,index,i );
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">returnSize&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">FOUND_SIZE&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 未找到则插入数据
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nf">hashInsert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 插入数字作为键，i作为值
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">numHash&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 置空哈希表，因为在力扣上面是多次运行，而哈希表会保留上次运行的数据
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 哈希表查找值
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="nf">hashFind&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">HashMap&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">HashMap&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">tmp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">HASH_FIND_INT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">tmp&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">tmp&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">tmp&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 哈希表插入值
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">bool&lt;/span> &lt;span class="nf">hashInsert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">bool&lt;/span> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">it&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">HASH_COUNT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">numHash&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">it&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">hashFind&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">numHash&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">it&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">HashMap&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">newHash&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">newHash&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">malloc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">HASH_SIZE&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">newHash&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">newHash&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">key&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">HASH_ADD_INT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">numHash&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">newHash&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// free(newHash); // 加上这一行会爆炸
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="结果-1">结果
&lt;/h4>&lt;p>&lt;img src="https://s1.ax1x.com/2020/11/10/BbBwUe.png"
loading="lazy"
alt="C语言代码"
>&lt;/p>
&lt;blockquote>
&lt;p>C语言的代码，时间还算不错，内存占用大了一点&lt;/p>&lt;/blockquote>
&lt;h2 id="最后">最后
&lt;/h2>&lt;p>说起这题来真是心酸啊，跨越了一个月，也通过这道题学(zì)会(bì)了很多
&lt;img src="https://s1.ax1x.com/2020/11/10/BbBr8A.png"
loading="lazy"
alt="通过截屏"
>
&lt;img src="https://s1.ax1x.com/2020/11/10/BbDKMt.png"
loading="lazy"
alt="艰辛历史"
>&lt;/p></description></item><item><title>个性化你的 Windows Terminal 终端与 PowerShell</title><link>https://blog.gaein.cn/passages/windows-terminal-usage/</link><pubDate>Mon, 09 Nov 2020 01:43:18 +0800</pubDate><guid>https://blog.gaein.cn/passages/windows-terminal-usage/</guid><description>&lt;h2 id="前言">前言
&lt;/h2>&lt;blockquote>
&lt;p>总感觉 cmd、PowerShell 太丑。以前折腾过一阵子的 cmder 感觉也就一般。听学姐们吹了挺长时间的 Windows Terminal。今天试一下，确实效果非常好，美观好用。不得不说&lt;del>巨硬&lt;/del>Micro$oft 正经去做某个东西还是非常好的。&lt;/p>&lt;/blockquote>
&lt;p>2022年11月9日更新如下：&lt;/p>
&lt;blockquote>
&lt;ul>
&lt;li>修改名称 “Powershell 7” 为 “Powershell”，“Powershell 5” 为 “Windows Powershell”；&lt;/li>
&lt;li>修改部分失效的配置&lt;/li>
&lt;li>修改安装方式等&lt;/li>
&lt;/ul>&lt;/blockquote>
&lt;p>（其实还改了很多，毕竟已经两年过去了）&lt;/p>
&lt;h2 id="安装">安装
&lt;/h2>&lt;p>这次主要有以下几个目的：&lt;/p>
&lt;ol>
&lt;li>使用 PowerShell 代替系统自带的 Windows PowerShell；&lt;/li>
&lt;li>优化 PowerShell 字体、配色等；&lt;/li>
&lt;li>在 Windows Terminal 里面添加 python 控制台；&lt;/li>
&lt;li>合并 PowerShell、Git Bash、cmd 和 python 到 Windows Terminal 中，并取消其它的右键菜单，为 Windows Terminal 添加右键菜单。&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>可参阅： &lt;a class="link" href="https://docs.microsoft.com/en-us/windows/terminal/customize-settings/startup" target="_blank" rel="noopener"
>Windows Terminal Startup Settings | Microsoft Docs&lt;/a>&lt;/p>&lt;/blockquote>
&lt;h3 id="windows-terminal">Windows Terminal
&lt;/h3>&lt;h4 id="windows-terminal-简介">Windows Terminal 简介
&lt;/h4>&lt;p>是一款新式、快速、高效且强大的终端应用程序。通过它可以使用命令提示符、PowerShell、WSL 等诸多 shell。Windows Terminal 支持多选项卡、窗格、Unicode 和 GPU 加速文本渲染引擎，同时也支持丰富多彩的用户自定义主题。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Windows-Terminal-Usage/01.webp"
loading="lazy"
alt="wt宣传片"
>&lt;/p>
&lt;h4 id="安装-windows-terminal">安装 Windows Terminal
&lt;/h4>&lt;p>可以使用多种方式安装：&lt;/p>
&lt;p>包管理器 &lt;code>winget&lt;/code> 和 &lt;code>scoop&lt;/code> 等均有 windows terminal 的包，Windows 11 自带 Windows Terminal（中文版显示为“终端”）。&lt;/p>
&lt;p>应用商店：&lt;/p>
&lt;ol>
&lt;li>打开系统的 Microsoft Store；&lt;/li>
&lt;li>搜索&amp;quot;Windows Terminal&amp;quot;；
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Windows-Terminal-Usage/02.webp"
loading="lazy"
alt="商店界面"
>&lt;/li>
&lt;li>点击&amp;quot;安装&amp;quot;。&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>由于网络环境不同等待时间也可能不一样
&lt;del>在未来某个版本的Windows会默认安装Windows Terminal，但是是几百年后就不知道了（x&lt;/del> Windows 11 已经预装。&lt;/p>&lt;/blockquote>
&lt;p>菜单里出现 Windows Terminal，打开后如图所示即为安装完成。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Windows-Terminal-Usage/03.webp"
loading="lazy"
alt="WT打开"
>&lt;/p>
&lt;h4 id="powershell">PowerShell
&lt;/h4>&lt;p>所以 Powershell 和 Windows Powershell 有啥不同？&lt;/p>
&lt;h5 id="powershell-简介">Powershell 简介
&lt;/h5>&lt;p>最初，Windows PowerShell 是在 .NET Framework 基础之上构建而成，仅适用于 Windows 系统。 在最新版本中，PowerShell 使用 .NET Core 3.1 作为运行时。 PowerShell 在 Windows、macOS 和 Linux 平台上运行。
新的 PowerShell 拥有更高的效率和诸多优点。
PowerShell Core 是 &lt;a class="link" href="https://github.com/PowerShell/PowerShell" target="_blank" rel="noopener"
>GitHub&lt;/a> 上面的开源项目，使用 MIT 许可证。&lt;/p>
&lt;h5 id="安装-powershell">安装 Powershell
&lt;/h5>&lt;blockquote>
&lt;p>官方有详细的安装文档，见 &lt;a class="link" href="https://docs.microsoft.com/zh-cn/powershell/scripting/install/installing-powershell" target="_blank" rel="noopener"
>Microsoft DOCS&lt;/a>&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>建议参考官方文档选择适合自己的方式安装，我目前系统中的WT是作为dotnet CLI 全局工具安装的&lt;/p>&lt;/blockquote>
&lt;p>我使用下载-安装的方式而没有使用包管理器。&lt;/p>
&lt;ol>
&lt;li>
&lt;p>从&lt;a class="link" href="https://github.com/PowerShell/PowerShell/releases/" target="_blank" rel="noopener"
>GitHub 的 Release&lt;/a>中下载&lt;code>PowerShell-7.1.0-win-x64.msi&lt;/code>；
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Windows-Terminal-Usage/04.webp"
loading="lazy"
alt="Release页面"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>下载完成后找到下载的文件夹，双击运行；&lt;/p>
&lt;blockquote>
&lt;p>如果提示 “不是有效的 WIN32 应用程序” 请返回刚才的 Release 页面下载&lt;code>PowerShell-7.1.0-win-x86.msi&lt;/code>&lt;/p>&lt;/blockquote>
&lt;/li>
&lt;li>
&lt;p>一直点击&amp;quot;Next&amp;quot;，直到安装完成，点击&amp;quot;Finish&amp;quot;。
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Windows-Terminal-Usage/05.webp"
loading="lazy"
alt="安装PSCore"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="配置-powershell-core">配置 PowerShell Core
&lt;/h4>&lt;h5 id="准备">准备
&lt;/h5>&lt;h6 id="安装模块">安装模块
&lt;/h6>&lt;p>打开 PowerShell 7，输入以下命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ps" data-lang="ps">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">Install-Module&lt;/span> &lt;span class="nf">posh-git&lt;/span> &lt;span class="nf">-Scope&lt;/span> &lt;span class="nf">CurrentUser&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ps" data-lang="ps">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">Install-Module&lt;/span> &lt;span class="nf">oh-my-posh&lt;/span> &lt;span class="nf">-Scope&lt;/span> &lt;span class="nf">CurrentUser&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>先输入一个命令，光标会移动到下一行的最左侧。这时候不要着急输入另一个，稍等一会如果出现提示那么就按&lt;code>Y&lt;/code>。安装完成（左侧有显示&amp;quot;PS xxx&amp;quot;字样）再安装另外一个。两个不分先后。&lt;/p>&lt;/blockquote>
&lt;h6 id="安装-powerline-字体">安装 PowerLine 字体
&lt;/h6>&lt;p>这一部分微软官方文档有写，详见 &lt;a class="link" href="https://docs.microsoft.com/zh-cn/windows/terminal/tutorials/powerline-setup" target="_blank" rel="noopener"
>Microsoft Docs&lt;/a>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>打开 Cascadia Code &lt;a class="link" href="https://github.com/microsoft/cascadia-code/releases" target="_blank" rel="noopener"
>GitHub 发布页&lt;/a>，下载最新的 Release &lt;code>CascadiaCode-2009.22.zip&lt;/code>；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>下载完成后解压文件，进入&lt;code>解压后的文件夹-&amp;gt;ttf&lt;/code>，双击里面&lt;code>.ttf&lt;/code>结尾的文件，安装。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h6 id="配置">配置
&lt;/h6>&lt;ol>
&lt;li>
&lt;p>从菜单栏打开安装好的 PowerShell 7。如果电脑安装有 Visual Studio Code 的话在里面输入以下内容：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ps" data-lang="ps">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">code&lt;/span> &lt;span class="nf">$profile&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Windows-Terminal-Usage/06.webp"
loading="lazy"
alt="code效果"
>
如果你没有安装或者不知道什么是 Visual Studio Code 的话输入以下内容：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ps" data-lang="ps">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">notepad&lt;/span> &lt;span class="nf">$profile&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Windows-Terminal-Usage/07.webp"
loading="lazy"
alt="notepad效果"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>输入完成后按下回车，VSCode（或记事本）将会打开一个文件（可能是空的），在里面输入以下内容后保存&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ps" data-lang="ps">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">#&lt;/span> &lt;span class="nf">by&lt;/span> &lt;span class="nf">Gaein&lt;/span> &lt;span class="nf">nidb&lt;/span> &lt;span class="nf">,&lt;/span> &lt;span class="nf">https:&lt;/span>&lt;span class="err">/&lt;/span>&lt;span class="nv">/www.Gaein.cn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">Clear-Host&lt;/span> &lt;span class="nf">#&lt;/span> &lt;span class="nf">清除屏幕&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">$time&lt;/span> &lt;span class="nf">=&lt;/span> &lt;span class="nf">Get-date&lt;/span> &lt;span class="nf">-Format&lt;/span> &lt;span class="nf">&amp;#34;现在是yyyy年MM月dd日&lt;/span> &lt;span class="nf">HH时mm分&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">$path&lt;/span> &lt;span class="nf">=&lt;/span> &lt;span class="nf">$pwd.path&lt;/span> &lt;span class="nf">#&lt;/span> &lt;span class="nf">获取路径&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">if&lt;/span> &lt;span class="s">( $path.split(&amp;#34;&lt;/span>&lt;span class="se">\&lt;/span>&lt;span class="s">&amp;#34;)[-1] -eq &amp;#34;Windows&amp;#34; -xor $path.split(&amp;#34;&lt;/span>&lt;span class="se">\&lt;/span>&lt;span class="s">&amp;#34;)[-1] -eq &amp;#34;System32&amp;#34;)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">##&lt;/span> &lt;span class="nf">默认路径为桌面&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">$desktop&lt;/span> &lt;span class="nf">=&lt;/span> &lt;span class="nf">&amp;#34;C:\Users\&amp;#34;&lt;/span> &lt;span class="nf">+&lt;/span> &lt;span class="nf">$env:UserName&lt;/span> &lt;span class="nf">+&lt;/span> &lt;span class="nf">&amp;#34;\Desktop\&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">##&lt;/span> &lt;span class="nf">切换到桌面&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Set-Location&lt;/span> &lt;span class="nf">$desktop&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">Write-Output&lt;/span> &lt;span class="nf">$time&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">$motdPath&lt;/span> &lt;span class="nf">=&lt;/span> &lt;span class="nf">&amp;#34;C:\Users\&amp;#34;&lt;/span> &lt;span class="nf">+&lt;/span> &lt;span class="nf">$env:UserName&lt;/span> &lt;span class="nf">+&lt;/span> &lt;span class="nf">&amp;#34;\Documents\PowerShell\motd.txt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">Get-Content&lt;/span> &lt;span class="nf">$motdPath&lt;/span> &lt;span class="nf">#&lt;/span> &lt;span class="nf">欢迎消息&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">#&lt;/span> &lt;span class="nf">导入模块&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">Import-Module&lt;/span> &lt;span class="nf">posh-git&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">Import-Module&lt;/span> &lt;span class="nf">oh-my-posh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">#&lt;/span> &lt;span class="nf">设置主题&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">Set-Theme&lt;/span> &lt;span class="nf">PowerLine&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>如果你想自定义的话建议先备份后修改。&lt;/p>&lt;/blockquote>
&lt;/li>
&lt;li>
&lt;p>在&lt;code>此电脑-&amp;gt;文档-&amp;gt;PowerShell&lt;/code>文件夹，点击&lt;code>新建文本文档&lt;/code>，文件名为&amp;quot;motd.txt&amp;quot;，写入以下内容：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-txt" data-lang="txt">&lt;span class="line">&lt;span class="cl">PowerShell 7.1.0 (Windows10专业版 x64 20H2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">* 终端: https://docs.microsoft.com/zh-cn/powershell/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">* 系统: https://support.microsoft.com/zh-cn/windows/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">* 指令: https://docs.microsoft.com/zh-cn/dotnet/api/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">欢迎使用PowerShell Core
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>这里的内容是完全自定义的，算是欢迎消息，即打开 PowerShell 输出的一段话。你可以随便写。&lt;/p>&lt;/blockquote>
&lt;/li>
&lt;/ol>
&lt;h4 id="配置-windows-terminal">配置 Windows Terminal
&lt;/h4>&lt;h5 id="自定义设置">自定义设置
&lt;/h5>&lt;ol>
&lt;li>
&lt;p>打开 Windows Terminal，点击 &lt;code>下箭头-&amp;gt;设置&lt;/code> 或按下 &lt;code>Win+,&lt;/code> 打开设置文件
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Windows-Terminal-Usage/08.webp"
loading="lazy"
alt="打开的setting.json"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>向设置文件写入以下内容：&lt;/p>
&lt;blockquote>
&lt;p>注意，现在打开默认是图形化设置，需要进入图形设置再点击左侧栏目下方的设置图标。&lt;/p>&lt;/blockquote>
&lt;p>首先修改全局设置（即 &lt;code>profiles.defaults&lt;/code> 节点）：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;defaults&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 默认设置
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;acrylicOpacity&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">0.75&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 不透明度
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;closeOnExit&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 退出时关闭
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;colorScheme&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Campbell&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 配色方案
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;cursorColor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;#FFFFFF&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 颜色
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;cursorShape&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;bar&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// bar
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;fontFace&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Cascadia Code PL&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 字体
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;fontSize&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 字号
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;historySize&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">9001&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 历史记录
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;padding&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;0, 0, 0, 0&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 内部显示位置
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;snapOnInput&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// ?
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;startingDirectory&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;./&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 打开目录
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;useAcrylic&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="c1">// 使用亚克力效果
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="err">,&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后添加Python控制台，并将不想看到的自动生成的三个的 &lt;code>hidden&lt;/code> 属性设置为 &lt;code>true&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Python Console
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;guid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;{de7c0f31-aa6b-c0f6-44a8-fe162d8f31fc}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 随机生成一个guid即可
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;hidden&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Python 3.9&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;icon&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;C:\\Users\\Gaein\\Documents\\WindowsTerminal\\python-logo.png&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 自定义python图标
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;commandline&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;C:\\Program Files\\Python39\\python.exe&amp;#34;&lt;/span> &lt;span class="c1">// python路径
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="err">,&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>整个配置文件如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 文档: https://aka.ms/terminal-documentation
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 默认设置在点击设置按钮时按住&amp;#34;Alt&amp;#34;键
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// by Gaein nidb, https://www.gaein.cn
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// rev 1.0.0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 全局设置
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;$schema&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;https://aka.ms/terminal-profiles-schema&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;defaultProfile&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;{574e775e-4f2a-5b96-ac1e-a2962a402336}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 默认打开的
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;copyOnSelect&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 自动复制选中的内容到剪切板
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;copyFormatting&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 复制格式，将选中文字的颜色、背景等也复制
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;initialCols&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">120&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 初始化大小（栏）
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;initialRows&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">38&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 初始化大小（行）
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 打开的选项的设置，文档: https://aka.ms/terminal-profile-settings
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;profiles&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;defaults&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 默认设置
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;acrylicOpacity&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">0.75&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 不透明度
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;closeOnExit&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 退出时关闭
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;colorScheme&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Campbell&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 配色方案
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;cursorColor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;#FFFFFF&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 颜色
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;cursorShape&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;bar&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// bar
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;fontFace&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Cascadia Code PL&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 字体
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;fontSize&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 字号
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;historySize&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">9001&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 历史记录
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;padding&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;0, 0, 0, 0&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 内部显示位置
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;snapOnInput&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// ?
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;startingDirectory&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;./&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 打开目录
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;useAcrylic&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="c1">// 使用亚克力效果
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;list&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// PowerShell Core
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;guid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;{574e775e-4f2a-5b96-ac1e-a2962a402336}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hidden&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;PowerShell Core&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;commandline&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;pwsh.exe -NoLogo&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Python Console
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;guid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;{de7c0f31-aa6b-c0f6-44a8-fe162d8f31fc}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 随机生成一个guid即可
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;hidden&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Python 3.9&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;icon&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;C:\\Users\\Gaein\\Documents\\WindowsTerminal\\python-logo.png&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 自定义python图标
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;commandline&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;C:\\Program Files\\Python39\\python.exe&amp;#34;&lt;/span> &lt;span class="c1">// python路径
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 自带的旧版PowerShell
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;guid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;{61c54bbd-c2c6-5271-96e7-009a87ff44bf}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hidden&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;PowerShell(旧版)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;commandline&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;powershell.exe -NoLogo&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 命令提示符
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;guid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;{0caa0dad-35be-5f56-a8ff-afceeeaa6101}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hidden&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;命令提示符(cmd)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;commandline&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;cmd.exe&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 默认生成的Azure Cloud Shell
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;guid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;{b453ae62-4e3d-5e58-b989-0a998ec441b8}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hidden&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Azure Cloud Shell&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;source&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Windows.Terminal.Azure&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Add custom color schemes to this array.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// To learn more about color schemes, visit https://aka.ms/terminal-color-schemes
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;schemes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Add custom actions and keybindings to this array.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// To unbind a key combination from your defaults.json, set the command to &amp;#34;unbound&amp;#34;.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// To learn more about actions and keybindings, visit https://aka.ms/terminal-keybindings
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;actions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Copy and paste are bound to Ctrl+Shift+C and Ctrl+Shift+V in your defaults.json.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// These two lines additionally bind them to Ctrl+C and Ctrl+V.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// To learn more about selection, visit https://aka.ms/terminal-selection
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;command&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;action&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;copy&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nt">&amp;#34;singleLine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;keys&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;ctrl+c&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;command&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;paste&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nt">&amp;#34;keys&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;ctrl+v&amp;#34;&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Press Ctrl+Shift+F to open the search box
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;command&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;find&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nt">&amp;#34;keys&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;ctrl+shift+f&amp;#34;&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Press Alt+Shift+D to open a new pane.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// - &amp;#34;split&amp;#34;: &amp;#34;auto&amp;#34; makes this pane open in the direction that provides the most surface area.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// - &amp;#34;splitMode&amp;#34;: &amp;#34;duplicate&amp;#34; makes the new pane use the focused pane&amp;#39;s profile.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// To learn more about panes, visit https://aka.ms/terminal-panes
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;command&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;action&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;splitPane&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;split&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;auto&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;splitMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;duplicate&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;keys&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;alt+shift+d&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>可以按需进行修改&lt;/p>&lt;/blockquote>
&lt;/li>
&lt;/ol>
&lt;h5 id="添加到右键菜单">添加到右键菜单
&lt;/h5>&lt;blockquote>
&lt;p>注意：这部分可能不再需要。貌似现在的wt装完之后自动添加了右键菜单。&lt;/p>&lt;/blockquote>
&lt;ol>
&lt;li>&lt;code>Win + R&lt;/code> 输入 &lt;code>regedit&lt;/code> 打开注册表编辑器；&lt;/li>
&lt;li>转到&lt;code>计算机\HKEY_CLASSES_ROOT\Directory\Background\shell&lt;/code>；&lt;/li>
&lt;li>新建项&lt;code>Terminal&lt;/code>，将默认值修改为&lt;code>在此处打开 Windows Terminal&lt;/code>；
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Windows-Terminal-Usage/09.webp"
loading="lazy"
alt="修改值"
>&lt;/li>
&lt;li>&lt;a class="link" href="https://static.cdn.gaein.cn/website_used/files/WT-Icon/wt.ico" target="_blank" rel="noopener"
>下载图标(从Gaein.cn)&lt;/a>，保存到某个路径；&lt;/li>
&lt;li>在&lt;code>Terminal&lt;/code>里新建字符串，名字为&lt;code>icon&lt;/code>，右键-&amp;gt;修改，值为图标的路径；
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Windows-Terminal-Usage/10.webp"
loading="lazy"
alt="设置图标"
>
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Windows-Terminal-Usage/11.webp"
loading="lazy"
alt="设置图标路径"
>&lt;/li>
&lt;li>在&lt;code>Terminal&lt;/code>新建项，名字为&lt;code>command&lt;/code>，值为&lt;code>wt.exe&lt;/code>
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Windows-Terminal-Usage/12.webp"
loading="lazy"
alt="命令"
>&lt;/li>
&lt;/ol>
&lt;h2 id="参考">参考
&lt;/h2>&lt;ol>
&lt;li>&lt;a class="link" href="https://docs.microsoft.com/zh-cn/windows/terminal/" target="_blank" rel="noopener"
>Microsoft Docs:Windows Terminal&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://docs.microsoft.com/zh-cn/powershell/scripting/install/migrating-from-windows-powershell-51-to-powershell-7?view=powershell-7.1" target="_blank" rel="noopener"
>Microsoft Docs:从 PowerShell5 迁移到 7&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://zhuanlan.zhihu.com/p/144612614" target="_blank" rel="noopener"
>知乎 @tnnmigga:Windows Terminal 终端入门&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.jianshu.com/p/95c5194857b7" target="_blank" rel="noopener"
>简书 @码农小胖哥:Windows 命令行终端 PowerShell 美化计划&lt;/a>&lt;/li>
&lt;/ol></description></item><item><title>比较——零基础学Java语言笔记（二）</title><link>https://blog.gaein.cn/passages/java-note2-compare/</link><pubDate>Sun, 04 Oct 2020 14:43:04 +0800</pubDate><guid>https://blog.gaein.cn/passages/java-note2-compare/</guid><description>&lt;p>距离笔记1大概有两周了，由于Java、C、C++、CSharp都是C like语言，它们的有很多相似之处，因此没有再细致一点点看，而是从数组开始看起，将《零基础学习Java看完》。当然这几节只是非常基础的课程，所以笔记也比较简短。已经了解之处就不再做笔记了。&lt;/p>
&lt;!--MORE-->
&lt;blockquote>
&lt;p>终于没有忍住去跟课程进度，而是去看了上次开课的视频。下一步的计划是看进阶的Java，或者是学习一下python。最近用python写了一个QQ bot，发现很是好用。&lt;/p>&lt;/blockquote>
&lt;h2 id="下一篇笔记">下一篇笔记
&lt;/h2>&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/Java-Note1-Calculation/" target="_blank" rel="noopener"
>计算——零基础学Java语言笔记（一）&lt;/a>&lt;/p>
&lt;h2 id="下一篇笔记-1">下一篇笔记
&lt;/h2>&lt;p>暂无&lt;/p>
&lt;h2 id="21-比较">2.1 比较
&lt;/h2>&lt;p>Java语言使用&lt;code>// notes&lt;/code>和&lt;code>/*notes*/&lt;/code>来作注释&lt;/p>
&lt;p>Java语言的关系运算符有&lt;code>&amp;gt;&lt;/code>、&lt;code>&amp;lt;&lt;/code>、&lt;code>==&lt;/code>、&lt;code>&amp;gt;=&lt;/code>、&lt;code>&amp;lt;=&lt;/code>、&lt;code>!=&lt;/code> 6个&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">5&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="n">3&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// 输出false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">5&lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="n">3&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// 输出true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>所有关系运算符的优先级比算数运算符的低，但比赋值运算符&lt;code>=&lt;/code>高&lt;/p>
&lt;h2 id="22-判断">2.2 判断
&lt;/h2>&lt;blockquote>
&lt;p>建议不管有几条语句在if或else后总要跟上一对花括号，这样利于人类阅读&lt;/p>&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="cm">/*条件*/&lt;/span>&lt;span class="p">){&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// 代码&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// ...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// if语句&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="cm">/*条件*/&lt;/span>&lt;span class="p">){&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// 代码&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// ...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// 代码&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// ...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// if-else语句&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="cm">/*条件*/&lt;/span>&lt;span class="p">){&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// 代码&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// ...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="cm">/*条件2*/&lt;/span>&lt;span class="p">){&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// 代码&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// ...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// if-elseif语句&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="23-分支">2.3 分支
&lt;/h2>&lt;p>switch-case&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="k">switch&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="cm">/*控制表达式，通常是某个变量*/&lt;/span>&lt;span class="p">){&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">case&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cm">/*常量*/&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// 语句&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// ...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">case&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cm">/*常量*/&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// 语句&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// ...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// 语句&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// ...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>执行完分支中的语句后，如果后面没有&lt;code>break;&lt;/code>，就会进入下面的&lt;code>case&lt;/code>里面去，直到遇到&lt;code>break;&lt;/code>或者&lt;code>switch&lt;/code>结束为止&lt;/p>
&lt;h2 id="24-判断语句常见错误">2.4 判断语句常见错误
&lt;/h2>&lt;h2 id="2x-小测验">2.x 小测验
&lt;/h2>&lt;h6 id="1写出以下代码段的执行结果">1.写出以下代码段的执行结果：
&lt;/h6>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">num&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">34&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">30&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">num&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;zhang&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;huang&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;zhu&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>huang\n&lt;/p>&lt;/blockquote>
&lt;h6 id="2写出以下代码段的执行结果">2.写出以下代码段的执行结果：
&lt;/h6>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">limit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">100&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">num1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">15&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">num2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">40&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">limit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">limit&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">num1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">num2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;lemon&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;lime&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;grape&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="n">zhu&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>lime\ngrape&lt;/p>&lt;/blockquote>
&lt;h2 id="第二周编程题">第二周编程题
&lt;/h2>&lt;h6 id="第一题时间换算">第一题——时间换算
&lt;/h6>&lt;blockquote>
&lt;p>题目内容：
&lt;code>UTC&lt;/code>是世界协调时，&lt;code>BJT&lt;/code>是北京时间，&lt;code>UTC&lt;/code>时间相当于&lt;code>BJT&lt;/code>减去&lt;code>8&lt;/code>。&lt;br>
现在，你的程序要读入一个整数，表示&lt;code>BJT&lt;/code>的时和分。&lt;br>
整数的个位和十位表示分，百位和千位表示小时。&lt;br>
如果小时小于&lt;code>10&lt;/code>，则没有千位部分；如果小时是&lt;code>0&lt;/code>，则没有百位部分；如果分小于&lt;code>10&lt;/code>分，需要保留十位上的&lt;code>0&lt;/code>。 &lt;br>
如&lt;code>1124&lt;/code>表示&lt;code>11&lt;/code>点&lt;code>24&lt;/code>分，而&lt;code>905&lt;/code>表示&lt;code>9&lt;/code>点&lt;code>5&lt;/code>分，&lt;code>36&lt;/code>表示&lt;code>0&lt;/code>点&lt;code>36&lt;/code>分，&lt;code>7&lt;/code>表示&lt;code>0&lt;/code>点&lt;code>7&lt;/code>分。&lt;br>
有效的输入范围是&lt;code>0&lt;/code>到&lt;code>2359&lt;/code>，即你的程序不可能从测试服务器读到&lt;code>0&lt;/code>到&lt;code>2359&lt;/code>以外的输入数据。&lt;br>
你的程序要输出这个时间对应的&lt;code>UTC&lt;/code>时间，输出的格式和输入的相同，即输出一个整数，表示&lt;code>UTC&lt;/code>的时和分。&lt;br>
整数的个位和十位表示分，百位和千位表示小时。&lt;br>
如果小时小于&lt;code>10&lt;/code>，则没有千位部分；如果小时是&lt;code>0&lt;/code>，则没有百位部分；如果分小于&lt;code>10&lt;/code>分，需要保留十位上的&lt;code>0&lt;/code>。&lt;br>
提醒：&lt;strong>要小心跨日的换算。&lt;/strong>&lt;br>
输入格式:&lt;br>
一个整数，表示&lt;code>BJT&lt;/code>的时和分。整数的个位和十位表示分，百位和千位表示小时。如果小时小于&lt;code>10&lt;/code>，则没有千位部分；如果小时是&lt;code>0&lt;/code>，则没有百位部分；如果小时不是&lt;code>0&lt;/code>而且分小于&lt;code>10&lt;/code>分，需要保留十位上的&lt;code>0&lt;/code>。&lt;br>
输出格式： &lt;br>
一个整数，表示&lt;code>UTC&lt;/code>的时和分。整数的个位和十位表示分，百位和千位表示小时。如果小时小于&lt;code>10&lt;/code>，则没有千位部分；如果小时是&lt;code>0&lt;/code>，则没有百位部分；如果小时不是&lt;code>0&lt;/code>而且分小于&lt;code>10&lt;/code>分，需要保留十位上的&lt;code>0&lt;/code>。&lt;br>
输入样例：&lt;code>933&lt;/code>&lt;br>
输出样例：&lt;code>133&lt;/code>&lt;br>
时间限制：500ms内存限制：32000kb&lt;/p>&lt;/blockquote>
&lt;p>需要注意的问题：&lt;/p>
&lt;ol>
&lt;li>是从BJT转到UTC&lt;/li>
&lt;li>UTC = BJT - 8&lt;/li>
&lt;li>跨日期需要加上24小时&lt;/li>
&lt;/ol>
&lt;p>提交的代码：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nn">java.util.Scanner&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">Main&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">static&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">main&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">[]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Args&lt;/span>&lt;span class="p">){&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Scanner&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Scanner&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">in&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">BJT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">nextInt&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// 输入北京时间&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">UTC&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">BJT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">800&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// 转换成UTC&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">UTC&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">0&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// 判断是否跨日&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">UTC&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">2400&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">UTC&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="第二题信号报告">第二题——信号报告
&lt;/h6>&lt;blockquote>
&lt;p>题目内容：
无线电台的RS制信号报告是由三两个部分组成的：&lt;br>
&lt;code>R(Readability)&lt;/code> 信号可辨度即清晰度.&lt;br>
&lt;code>S(Strength)&lt;/code> 信号强度即大小.&lt;br>
其中&lt;code>R&lt;/code>位于报告第一位，共分5级，用1—5数字表示.&lt;br>
&lt;code>1---Unreadable&lt;/code>&lt;br>
&lt;code>2---Barely readable, occasional words distinguishable&lt;/code>&lt;br>
&lt;code>3---Readable with considerable difficulty&lt;/code>&lt;br>
&lt;code>4---Readable with practically no difficulty&lt;/code>&lt;br>
&lt;code>5---Perfectly readable&lt;/code>&lt;br>
报告第二位是&lt;code>S&lt;/code>，共分九个级别，用1—9中的一位数字表示&lt;br>
&lt;code>1---Faint signals, barely perceptible&lt;/code>&lt;br>
&lt;code>2---Very weak signals&lt;/code>&lt;br>
&lt;code>3---Weak signals&lt;/code>&lt;br>
&lt;code>4---Fair signals&lt;/code>&lt;br>
&lt;code>5---Fairly good signals&lt;/code>&lt;br>
&lt;code>6---Good signals&lt;/code>&lt;br>
&lt;code>7---Moderately strong signals&lt;/code>&lt;br>
&lt;code>8---Strong signals&lt;/code>&lt;br>
&lt;code>9---Extremely strong signals&lt;/code>&lt;br>
现在，你的程序要读入一个信号报告的数字，然后输出对应的含义。如读到59，则输出：&lt;br>
&lt;code>Extremely strong signals, perfectly readable.&lt;/code>&lt;br>
输入格式:&lt;br>
一个整数，信号报告。整数的十位部分表示可辨度，个位部分表示强度。输入的整数范围是&lt;code>[11,59]&lt;/code>内有效的数字，这个范围外的数字不可能出现在测试数据中。&lt;br>
输出格式：&lt;br>
一句话，表示这个信号报告的意义。按照题目中的文字，先输出表示强度的文字，跟上逗号和空格，然后是表示可辨度的文字，跟上句号。注意可辨度的句子的第一个字母是小写的。注意这里的标点符号都是英文的。&lt;br>
输入样例：&lt;br>
&lt;code>33&lt;/code>&lt;br>
输出样例：&lt;br>
&lt;code>Weak signals, readable with considerable difficulty.&lt;/code>&lt;br>
时间限制：500ms内存限制：32000kb&lt;/p>&lt;/blockquote>
&lt;p>需要注意的问题：&lt;/p>
&lt;ol>
&lt;li>输出时候先输出S再输出R&lt;/li>
&lt;li>输出的格式为&lt;code>S,□R.&lt;/code>（“□”代表空格）&lt;/li>
&lt;li>R的第一个字母要小写&lt;/li>
&lt;/ol>
&lt;p>解决方案：&lt;/p>
&lt;ol>
&lt;li>获取R和S数字值：
假设输入的是input，那么我们用input除以10可以得到十位上的数字，对它取余10可以得到个位上的数字
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">input&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">10&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">input&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">10&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>出题者的意图显然是用&lt;code>switch-case&lt;/code>来解决问题，但是未免太麻烦了点，至少看起来很难受。因为懒得用map所以我的解决方案是使用字符串数组，按顺序将字符串放在单元中，然后用&lt;code>s&lt;/code>或者&lt;code>r&lt;/code>减去&lt;code>1&lt;/code>的值作为索引就可以了。&lt;/li>
&lt;/ol>
&lt;p>提交的代码：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nn">java.util.Scanner&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">Main_2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">static&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">main&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">[]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Args&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Scanner&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Scanner&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">in&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">input&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">nextInt&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// 获取输入&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">input&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">10&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// 解析获取R&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">input&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">10&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// 解析获取S&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">[]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">rDic&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;unreadable&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;barely readable, occasional words distinguishable&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;readable with considerable difficulty&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;readable with practically no difficulty&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;perfectly readable&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">};&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// 定义字符串数组存储R对应的字符串&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">[]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sDic&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Faint signals, barely perceptible&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Very weak signals&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Weak signals&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Fair signals&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Fairly good signals&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Good signals&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Moderately strong signals&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Strong signals&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Extremely strong signals&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">};&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// 定义字符串数组存储S对应的字符串&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sDic&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">1&lt;/span>&lt;span class="o">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;, &amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">rDic&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">1&lt;/span>&lt;span class="o">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;.&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// 输出结果&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>链表——C语言程序设计笔记（七）</title><link>https://blog.gaein.cn/passages/c-note7-linkedlist/</link><pubDate>Wed, 23 Sep 2020 16:48:50 +0800</pubDate><guid>https://blog.gaein.cn/passages/c-note7-linkedlist/</guid><description>&lt;p>链表是一种实现大小可变的、类似于数组的数据类型，每个node至少包含一个存储的值和指针，指向下一个node&amp;hellip;这样把链表连接起来。其实这东西还是挺烧脑的，后期会把自己尝试写的链表发上来。跟随着翁恺教授的课记了一些笔记。&lt;/p>
&lt;!--MORE-->
&lt;h2 id="c语言笔记目录">C语言笔记目录
&lt;/h2>&lt;ol>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note1-Basics/" target="_blank" rel="noopener"
>基础结构——C语言程序设计笔记（一）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note2-Pointer/" target="_blank" rel="noopener"
>指针——C语言程序设计笔记（二）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note3-String/" target="_blank" rel="noopener"
>字符串——C语言程序设计笔记（三）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note4-Struct/" target="_blank" rel="noopener"
>结构类型——C语言程序设计笔记（四）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note5-ProgramStructure/" target="_blank" rel="noopener"
>程序结构——C语言程序设计笔记（五）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note6-File/" target="_blank" rel="noopener"
>文件——C语言程序设计笔记（六）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note7-LinkedList/" target="_blank" rel="noopener"
>链表——C语言程序设计笔记（七）&lt;/a>&lt;/li>
&lt;/ol>
&lt;h2 id="上一篇笔记">上一篇笔记
&lt;/h2>&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note6-File/" target="_blank" rel="noopener"
>文件——C语言程序设计笔记（六）&lt;/a>&lt;/p>
&lt;h2 id="字符串">字符串
&lt;/h2>&lt;p>由于这些笔记都是用OneNote手写的，听到那写到那，所以就没有排版可言了（逃&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/blog/posts/C-Notes/C-Note7-LinkedList-notePic.png"
loading="lazy"
alt="链表笔记"
>&lt;/p>
&lt;h2 id="下载">下载
&lt;/h2>&lt;p>&lt;a class="link" href="https://static.cdn.gaein.cn/files/Notes/C-Notes/LinkedList.pdf" target="_blank" rel="noopener"
>LinkedList.pdf|3.99MB&lt;/a>&lt;/p></description></item><item><title>文件——C语言程序设计笔记（六）</title><link>https://blog.gaein.cn/passages/c-note6-file/</link><pubDate>Wed, 23 Sep 2020 16:07:31 +0800</pubDate><guid>https://blog.gaein.cn/passages/c-note6-file/</guid><description>&lt;p>这节课讲了C操作文件的一些方法，包括格式化的输入输出、读写文本和二进制文件等。跟随着翁恺教授的课记了一些笔记。&lt;/p>
&lt;!--MORE-->
&lt;h2 id="c语言笔记目录">C语言笔记目录
&lt;/h2>&lt;ol>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note1-Basics/" target="_blank" rel="noopener"
>基础结构——C语言程序设计笔记（一）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note2-Pointer/" target="_blank" rel="noopener"
>指针——C语言程序设计笔记（二）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note3-String/" target="_blank" rel="noopener"
>字符串——C语言程序设计笔记（三）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note4-Struct/" target="_blank" rel="noopener"
>结构类型——C语言程序设计笔记（四）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note5-ProgramStructure/" target="_blank" rel="noopener"
>程序结构——C语言程序设计笔记（五）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note6-File/" target="_blank" rel="noopener"
>文件——C语言程序设计笔记（六）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note7-LinkedList/" target="_blank" rel="noopener"
>链表——C语言程序设计笔记（七）&lt;/a>&lt;/li>
&lt;/ol>
&lt;h2 id="上一篇笔记">上一篇笔记
&lt;/h2>&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note5-ProgramStructure/" target="_blank" rel="noopener"
>程序结构——C语言程序设计笔记（五）&lt;/a>&lt;/p>
&lt;h2 id="下一篇笔记">下一篇笔记
&lt;/h2>&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note7-LinkedList/" target="_blank" rel="noopener"
>链表——C语言程序设计笔记（七）&lt;/a>&lt;/p>
&lt;h2 id="文件">文件
&lt;/h2>&lt;p>由于这些笔记都是用OneNote手写的，听到那写到那，所以就没有排版可言了（逃&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/blog/posts/C-Notes/C-Note6-File-notePic.png"
loading="lazy"
alt="文件笔记"
>&lt;/p>
&lt;h2 id="下载">下载
&lt;/h2>&lt;p>&lt;a class="link" href="https://static.cdn.gaein.cn/files/Notes/C-Notes/File.pdf" target="_blank" rel="noopener"
>File.pdf|4.31MB&lt;/a>&lt;/p></description></item><item><title>程序结构——C语言程序设计笔记（五）</title><link>https://blog.gaein.cn/passages/c-note5-programstructure/</link><pubDate>Wed, 23 Sep 2020 15:39:27 +0800</pubDate><guid>https://blog.gaein.cn/passages/c-note5-programstructure/</guid><description>&lt;p>程序结构使整个程序变得更加“优雅”、利于后期维护和更新，在做大型程序的时候是不可或缺的。翁恺教授讲解了本地变量、全局变量等以及预编译处理指令、如果编译多个.c文件等等。跟随着翁恺教授的课记了一些笔记。&lt;/p>
&lt;!--MORE-->
&lt;h2 id="c语言笔记目录">C语言笔记目录
&lt;/h2>&lt;ol>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note1-Basics/" target="_blank" rel="noopener"
>基础结构——C语言程序设计笔记（一）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note2-Pointer/" target="_blank" rel="noopener"
>指针——C语言程序设计笔记（二）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note3-String/" target="_blank" rel="noopener"
>字符串——C语言程序设计笔记（三）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note4-Struct/" target="_blank" rel="noopener"
>结构类型——C语言程序设计笔记（四）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note5-ProgramStructure/" target="_blank" rel="noopener"
>程序结构——C语言程序设计笔记（五）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note6-File/" target="_blank" rel="noopener"
>文件——C语言程序设计笔记（六）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note7-LinkedList/" target="_blank" rel="noopener"
>链表——C语言程序设计笔记（七）&lt;/a>&lt;/li>
&lt;/ol>
&lt;h2 id="上一篇笔记">上一篇笔记
&lt;/h2>&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note4-Struct/" target="_blank" rel="noopener"
>结构类型——C语言程序设计笔记（四）&lt;/a>&lt;/p>
&lt;h2 id="下一篇笔记">下一篇笔记
&lt;/h2>&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note6-File/" target="_blank" rel="noopener"
>文件——C语言程序设计笔记（六）&lt;/a>&lt;/p>
&lt;h2 id="程序结构">程序结构
&lt;/h2>&lt;p>由于这些笔记都是用OneNote手写的，听到那写到那，所以就没有排版可言了（逃&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/C-Note5-ProgramStructure/01.webp"
loading="lazy"
alt="程序结构笔记"
>&lt;/p>
&lt;h2 id="下载">下载
&lt;/h2>&lt;p>&lt;a class="link" href="https://static.cdn.gaein.cn/files/Notes/C-Notes/ProgramStructure.pdf" target="_blank" rel="noopener"
>ProgramStructure.pdf|3.66MB&lt;/a>&lt;/p></description></item><item><title>计算——零基础学Java语言笔记（一）</title><link>https://blog.gaein.cn/passages/java-note1-calculation/</link><pubDate>Tue, 22 Sep 2020 20:56:21 +0800</pubDate><guid>https://blog.gaein.cn/passages/java-note1-calculation/</guid><description>&lt;p>那么看完了C语言的课程之后呢，在@&lt;a class="link" href="https://farewell12345.github.io/" target="_blank" rel="noopener"
>伞菌&lt;/a>大佬的指点下我准备下一步去学习Java语言，至于课程选择嘛我就直接选择了浙江大学翁恺教授的课（毕竟看了有一段时间了有点不舍emm）并且这门课是国家精品课程，不过是面向零基础的。Java和CSharp很像，本来没有想这么细致的去学习，但是碰巧又赶上这门课程在开课，可以去讨论区互动和交作业等，于是便准备养老一般的跟着课程走。&lt;/p>
&lt;!--MORE-->
&lt;blockquote>
&lt;p>那么Java这门语言呢，我准备跟着开课的进度一点一点学。（当然我看了一眼进度有点猴急，准备跟着上一次开课去学，然后跟着这个次开课去做题）。毕竟它和CSharp非常相似，我觉得把课跟下来应该不是特别难，当然，学好是另外一回事了。因为前面几周很多东西都偏基础，所以这些笔记可能会很短、很短&lt;/p>&lt;/blockquote>
&lt;p>&lt;a class="link" href="https://www.icourse163.org/learn/ZJU-9001" target="_blank" rel="noopener"
>浙江大学-零基础学习Java&lt;/a>&lt;/p>
&lt;h2 id="下一篇笔记">下一篇笔记
&lt;/h2>&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/Java-Note2-Compare/" target="_blank" rel="noopener"
>比较——零基础学Java语言笔记（二）&lt;/a>&lt;/p>
&lt;h2 id="11-第一个java程序">1.1 第一个Java程序
&lt;/h2>&lt;p>IDEA新建项目、新建模块、然后新建包、新建类，在class中写入&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">static&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">main&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">[]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">){&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;HelloWorld&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>来输出HelloWorld，其中main函数是主函数，程序的入口点&lt;/p>
&lt;p>输出时println函数括号里面的运算要用括号括起来，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;3 + 2 = &amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">3&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">2&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// 输出32&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;3 + 2 = &amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">3&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">2&lt;/span>&lt;span class="p">));&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// 输出5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Java语言使用“+”来拼接字符串&lt;/p>
&lt;h2 id="12-变量与计算">1.2 变量与计算
&lt;/h2>&lt;h4 id="121-输入">1.2.1 输入
&lt;/h4>&lt;p>Java获取输入需要首先定义一个Scanner&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Scanner&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Scanner&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">in&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>并且在前面&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nn">java.util.Scanner&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// 自动生成&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="n">in&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">nextLine&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// 读取一行输入&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">nextInt&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// 读取输入的整数&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// 其余类型的类似&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="122-变量">1.2.2 变量
&lt;/h4>&lt;p>Java是强类型语言，所有的变量在使用前都需要经过定义并且有明确的类型并且被初始化。&lt;/p>
&lt;p>使用 &amp;quot; 变量类型 + 变量名 &amp;quot; 定义变量，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">myVar&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>变量的名字叫做标识(zhi4)符，只能由字母、数字和下划线，第一个字符只能是字母或下划线，&lt;strong>不能用Java的关键字做标识符&lt;/strong>&lt;/p>
&lt;p>在一行当中定义多个变量，每一个变量都应该有单独的赋值，比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">amount&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">price&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// [!]推荐一行定义一个变量&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">final&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">AMOUNT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// 在前面加上final来定义常量&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="123-赋值">1.2.3 赋值
&lt;/h4>&lt;p>等于号 &amp;quot; = &amp;quot; 是赋值运算，将右边的值给左边&lt;/p>
&lt;h2 id="13-浮点数计算">1.3 浮点数计算
&lt;/h2>&lt;h4 id="131-浮点数">1.3.1 浮点数
&lt;/h4>&lt;p>double用于定义double类型的浮点数变量
浮点数计算是有误差的&lt;/p>
&lt;h4 id="132-计算的优先级">1.3.2 计算的优先级
&lt;/h4>&lt;p>如果不能确定计算的优先级可以加上括号来确保万无一失
大部分计算的优先级是按照人正常的思维来规定的
单目运算符只有一个算子，通常单目运算符的优先级较高&lt;/p>
&lt;h4 id="133-类型的转换">1.3.3 类型的转换
&lt;/h4>&lt;p>Java使用(类型)进行强制转换（和C一样）
比如说：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)((&lt;/span>&lt;span class="n">3&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">2&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">5&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="1x-在中国大学mooc上面提交编程作业">1.x 在中国大学MOOC上面提交编程作业：
&lt;/h4>&lt;ol>
&lt;li>需要将 &lt;code>package&lt;/code> 以下的内容复制过去&lt;/li>
&lt;li>将&lt;code>class&lt;/code>名改为&lt;code>Main&lt;/code>&lt;/li>
&lt;/ol>
&lt;h2 id="第一周编程题">第一周编程题
&lt;/h2>&lt;blockquote>
&lt;p>题目内容：
写一个将华氏温度转换成摄氏温度的程序，转换的公式是：&lt;br>
&lt;code>°F = (9/5)*°C + 32&lt;/code>&lt;br>
其中C表示摄氏温度，F表示华氏温度。&lt;br>
程序的输入是一个整数，&lt;strong>表示华氏温度&lt;/strong>。输出对应的摄氏温度，也是一个整数。&lt;br>
提示，为了把计算结果的浮点数转换成整数，需要使用下面的表达式：&lt;br>
&lt;code>(int)x;&lt;/code>&lt;br>
其中x是要转换的那个浮点数。&lt;br>
注意：除了题目要求的输出，不能输出任何其他内容，比如输入时的提示，输出时的说明等等都不能。&lt;br>
这道题目要求转换后的数字，程序就只能输出这个数字，除此之外任何内容都不能输出。&lt;br>
输入格式:&lt;br>
&lt;code>一个整数&lt;/code>&lt;br>
输出格式：&lt;br>
&lt;code>一个整数&lt;/code>&lt;br>
输入样例：&lt;br>
&lt;code>100&lt;/code>&lt;br>
输出样例：&lt;br>
&lt;code>37&lt;/code>&lt;br>
时间限制：500ms 内存限制：32000kb&lt;/p>&lt;/blockquote>
&lt;p>需要注意的问题：&lt;/p>
&lt;p>给的公式是摄氏度转华氏度，而程序的目的是华氏度转摄氏度&lt;/p>
&lt;p>提交的代码&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nn">java.util.Scanner&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">Main&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">static&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">main&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">[]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Scanner&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Scanner&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">in&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">F&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">nextInt&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// F代表读取的华氏度&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kt">double&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// C代表读取的摄氏度&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">F&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">32&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">9&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">5&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">0&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// 根据公式运算（需要把公式导一下）&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// 输出，并强制转换为int&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>结构类型——C语言程序设计笔记（四）</title><link>https://blog.gaein.cn/passages/c-note4-struct/</link><pubDate>Tue, 22 Sep 2020 17:23:09 +0800</pubDate><guid>https://blog.gaein.cn/passages/c-note4-struct/</guid><description>&lt;p>从结构类型开始学习了一些自定义的结构，其中struct是较为重要的。跟随着翁恺教授的课记了一些笔记。&lt;/p>
&lt;!--MORE-->
&lt;h2 id="c语言笔记目录">C语言笔记目录
&lt;/h2>&lt;ol>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note1-Basics/" target="_blank" rel="noopener"
>基础结构——C语言程序设计笔记（一）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note2-Pointer/" target="_blank" rel="noopener"
>指针——C语言程序设计笔记（二）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note3-String/" target="_blank" rel="noopener"
>字符串——C语言程序设计笔记（三）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note4-Struct/" target="_blank" rel="noopener"
>结构类型——C语言程序设计笔记（四）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note5-ProgramStructure/" target="_blank" rel="noopener"
>程序结构——C语言程序设计笔记（五）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note6-File/" target="_blank" rel="noopener"
>文件——C语言程序设计笔记（六）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note7-LinkedList/" target="_blank" rel="noopener"
>链表——C语言程序设计笔记（七）&lt;/a>&lt;/li>
&lt;/ol>
&lt;h2 id="上一篇笔记">上一篇笔记
&lt;/h2>&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note3-String/" target="_blank" rel="noopener"
>字符串——C语言程序设计笔记（三）&lt;/a>&lt;/p>
&lt;h2 id="下一篇笔记">下一篇笔记
&lt;/h2>&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note5-ProgramStructure/" target="_blank" rel="noopener"
>程序结构——C语言程序设计笔记（五）&lt;/a>&lt;/p>
&lt;h2 id="结构类型">结构类型
&lt;/h2>&lt;p>由于这些笔记都是用OneNote手写的，听到那写到那，所以就没有排版可言了（逃&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/C-Note4-Struct/01.webp"
loading="lazy"
alt="结构类型笔记"
>&lt;/p>
&lt;h2 id="下载">下载
&lt;/h2>&lt;p>&lt;a class="link" href="https://static.cdn.gaein.cn/files/Notes/C-Notes/Struct.pdf" target="_blank" rel="noopener"
>Struct.pdf|2.58MB&lt;/a>&lt;/p></description></item><item><title>字符串——C语言程序设计笔记（三）</title><link>https://blog.gaein.cn/passages/c-note3-string/</link><pubDate>Tue, 22 Sep 2020 16:58:09 +0800</pubDate><guid>https://blog.gaein.cn/passages/c-note3-string/</guid><description>&lt;p>C语言的字符串实际上是char数组。跟随着翁恺教授的课记了一些笔记。&lt;/p>
&lt;h2 id="c语言笔记目录">C语言笔记目录
&lt;/h2>&lt;ol>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note1-Basics/" target="_blank" rel="noopener"
>基础结构——C语言程序设计笔记（一）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note2-Pointer/" target="_blank" rel="noopener"
>指针——C语言程序设计笔记（二）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note3-String/" target="_blank" rel="noopener"
>字符串——C语言程序设计笔记（三）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note4-Struct/" target="_blank" rel="noopener"
>结构类型——C语言程序设计笔记（四）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note5-ProgramStructure/" target="_blank" rel="noopener"
>程序结构——C语言程序设计笔记（五）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note6-File/" target="_blank" rel="noopener"
>文件——C语言程序设计笔记（六）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note7-LinkedList/" target="_blank" rel="noopener"
>链表——C语言程序设计笔记（七）&lt;/a>&lt;/li>
&lt;/ol>
&lt;h2 id="上一篇笔记">上一篇笔记
&lt;/h2>&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note2-Pointer/" target="_blank" rel="noopener"
>指针——C语言程序设计笔记（二）&lt;/a>&lt;/p>
&lt;h2 id="下一篇笔记">下一篇笔记
&lt;/h2>&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note4-Struct/" target="_blank" rel="noopener"
>结构类型——C语言程序设计笔记（四）&lt;/a>&lt;/p>
&lt;h2 id="字符串">字符串
&lt;/h2>&lt;p>由于这些笔记都是用OneNote手写的，听到那写到那，所以就没有排版可言了（逃&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/C-Note3-String/01.webp"
loading="lazy"
alt="字符串笔记"
>&lt;/p>
&lt;h2 id="下载">下载
&lt;/h2>&lt;p>&lt;a class="link" href="https://static.cdn.gaein.cn/files/Notes/C-Notes/String.pdf" target="_blank" rel="noopener"
>String.pdf|2.65MB&lt;/a>&lt;/p></description></item><item><title>指针——C语言程序设计笔记（二）</title><link>https://blog.gaein.cn/passages/c-note2-pointer/</link><pubDate>Tue, 22 Sep 2020 16:32:51 +0800</pubDate><guid>https://blog.gaein.cn/passages/c-note2-pointer/</guid><description>&lt;p>从指针开始，难度便变高了，因此每一周的课程都做了一些笔记、摘要。虽然以前学C++的时候接触过指针，但是也忘得差不多了。所以课还是要听的。&lt;/p>
&lt;!--MORE-->
&lt;h2 id="c语言笔记目录">C语言笔记目录
&lt;/h2>&lt;ol>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note1-Basics/" target="_blank" rel="noopener"
>基础结构——C语言程序设计笔记（一）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note2-Pointer/" target="_blank" rel="noopener"
>指针——C语言程序设计笔记（二）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note3-String/" target="_blank" rel="noopener"
>字符串——C语言程序设计笔记（三）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note4-Struct/" target="_blank" rel="noopener"
>结构类型——C语言程序设计笔记（四）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note5-ProgramStructure/" target="_blank" rel="noopener"
>程序结构——C语言程序设计笔记（五）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note6-File/" target="_blank" rel="noopener"
>文件——C语言程序设计笔记（六）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note7-LinkedList/" target="_blank" rel="noopener"
>链表——C语言程序设计笔记（七）&lt;/a>&lt;/li>
&lt;/ol>
&lt;h2 id="上一篇笔记">上一篇笔记
&lt;/h2>&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note1-Basics/" target="_blank" rel="noopener"
>基础结构——C语言程序设计笔记（一）&lt;/a>&lt;/p>
&lt;h2 id="下一篇笔记">下一篇笔记
&lt;/h2>&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note3-String/" target="_blank" rel="noopener"
>字符串——C语言程序设计笔记（三）&lt;/a>&lt;/p>
&lt;h2 id="指针">指针
&lt;/h2>&lt;p>由于这些笔记都是用OneNote手写的，听到那写到那，所以就没有排版可言了（逃&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/C-Note2-Pointer/01.webp"
loading="lazy"
alt="指针笔记"
>&lt;/p>
&lt;h2 id="下载">下载
&lt;/h2>&lt;p>&lt;a class="link" href="https://static.cdn.gaein.cn/files/Notes/C-Notes/Pointer.pdf" target="_blank" rel="noopener"
>Pointer.pdf|1.83MB&lt;/a>&lt;/p></description></item><item><title>ASCII 码对照表和转换器</title><link>https://blog.gaein.cn/passages/ascii-code-convertor/</link><pubDate>Tue, 22 Sep 2020 14:05:19 +0800</pubDate><guid>https://blog.gaein.cn/passages/ascii-code-convertor/</guid><description>&lt;h2 id="简介">简介
&lt;/h2>&lt;blockquote>
&lt;p>ASCII 是最通用的信息交换标准，并等同于国际标准 ISO/IEC 646。ASCII 第一次以规范标准的类型发表是在 1967 年，最后一次更新则是在 1986 年，到目前为止共定义了 128 个字符（一个 char）&lt;/p>&lt;/blockquote>
&lt;h2 id="内容">内容
&lt;/h2>&lt;p>下面是完整的 ASCII 表，0 ～ 31 及 127(共 33 个)是控制字符或通信专用字符，其余为可显示字符&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/ASCII-Code-Convertor/01.webp"
loading="lazy"
alt="ASCII"
>&lt;/p>
&lt;h2 id="转换">转换
&lt;/h2>&lt;h3 id="将字符转换为-ascii-十进制码">将字符转换为 ASCII 十进制码
&lt;/h3>&lt;link rel="stylesheet" href="https://static.cdn.gaein.cn/libs/layui/2.9.21/layui/css/layui.css">
&lt;div class="layui-form">
&lt;div class="layui-form-item">
&lt;label class="layui-form-label">输入&lt;/label>
&lt;div class="layui-input-inline">
&lt;input type="text" id="char" placeholder="请输入字符" class="layui-input">
&lt;/div>
&lt;/div>
&lt;div class="layui-form-item">
&lt;label class="layui-form-label">操作&lt;/label>
&lt;div class="layui-input-inline">
&lt;button class="layui-btn layui-btn-lg layui-btn-warm" onclick="charToNum()">转换&lt;/button>
&lt;button type="reset" class="layui-btn layui-btn-lg">清空&lt;/button>
&lt;/div>
&lt;/div>
&lt;div class="layui-form-item">
&lt;label class="layui-form-label">结果&lt;/label>
&lt;div class="layui-input-inline">
&lt;div id="numResult" class="layui-bg-blue" style="width:190px;height:35px;text-align:center"> 转换结果
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;br/ >
&lt;h3 id="将十进制码转换为-ascii-字符">将十进制码转换为 ASCII 字符
&lt;/h3>&lt;div class="layui-form">
&lt;div class="layui-form-item">
&lt;label class="layui-form-label">输入&lt;/label>
&lt;div class="layui-input-inline">
&lt;input type="text" id="num" placeholder="请输入数字" class="layui-input">
&lt;/div>
&lt;/div>
&lt;div class="layui-form-item">
&lt;label class="layui-form-label">操作&lt;/label>
&lt;div class="layui-input-inline">
&lt;button class="layui-btn layui-btn-normal layui-btn-lg" onclick="numToChar()">转换&lt;/button>
&lt;button type="reset" class="layui-btn layui-btn-lg">清空&lt;/button>
&lt;/div>
&lt;/div>
&lt;div class="layui-form-item">
&lt;label class="layui-form-label">结果&lt;/label>
&lt;div class="layui-input-inline">
&lt;div id="charResult" class="layui-bg-orange" style="width:190px;height:35px;text-align:center"> 转换结果
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;br />
&lt;script>
function numToChar() {
var input = document.getElementById("num").value;
if (input >= 40 &amp;&amp; input &lt;= 126){
var result = String.fromCharCode(input);
document.getElementById("charResult").innerHTML = input + "对应的字符是:\"" + result + "\"";
}
else
{
document.getElementById("charResult").innerHTML = input + "超出有效范围";
}
}
function charToNum() {
var input = document.getElementById("char").value;
input = input.substring(0,1);
var result = input.charCodeAt();
document.getElementById("numResult").innerHTML = "\"" + input + "\"对应的数字是:" + result;
}
&lt;/script></description></item><item><title>基础结构——C语言程序设计笔记（一）</title><link>https://blog.gaein.cn/passages/c-note1-basics/</link><pubDate>Sat, 19 Sep 2020 20:06:23 +0800</pubDate><guid>https://blog.gaein.cn/passages/c-note1-basics/</guid><description>&lt;p>趁着假期呢看了一些中国大学MOOC中浙江大学翁恺教授的C语言程序设计，也算是预习大学课程吧。因为有一点编程基础因此前边一些听起来也不是很吃力，因此前边很多章节都没有记笔记，准备记在一起（其实是懒得记吧hhh）&lt;/p>
&lt;blockquote>
&lt;p>趁着假期呢看了一些中国大学MOOC中浙江大学翁恺教授的C语言程序设计，也算是预习大学课程吧。因为有一点编程基础因此前边一些听起来也不是很吃力，因此前边很多章节都没有记笔记，准备记在一起（其实是懒得记吧hhh）&lt;/p>&lt;/blockquote>
&lt;p>&lt;a class="link" href="https://www.icourse163.org/learn/ZJU-9001" target="_blank" rel="noopener"
>浙江大学-C语言程序设计&lt;/a>&lt;/p>
&lt;h2 id="c语言笔记目录">C语言笔记目录
&lt;/h2>&lt;ol>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note1-Basics/" target="_blank" rel="noopener"
>基础结构——C语言程序设计笔记（一）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note2-Pointer/" target="_blank" rel="noopener"
>指针——C语言程序设计笔记（二）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note3-String/" target="_blank" rel="noopener"
>字符串——C语言程序设计笔记（三）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note4-Struct/" target="_blank" rel="noopener"
>结构类型——C语言程序设计笔记（四）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note5-ProgramStructure/" target="_blank" rel="noopener"
>程序结构——C语言程序设计笔记（五）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note6-File/" target="_blank" rel="noopener"
>文件——C语言程序设计笔记（六）&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note7-LinkedList/" target="_blank" rel="noopener"
>链表——C语言程序设计笔记（七）&lt;/a>&lt;/li>
&lt;/ol>
&lt;h2 id="下一篇笔记">下一篇笔记
&lt;/h2>&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/C-Note2-Pointer/" target="_blank" rel="noopener"
>指针——C语言程序设计笔记（二）&lt;/a>&lt;/p>
&lt;h2 id="程序设计与c语言">程序设计与C语言
&lt;/h2>&lt;p>C语言是一门古老的、低级的、底层的、面向过程的语言&lt;/p>
&lt;h3 id="helloworld">HelloWorld
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hello World&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>程序从&lt;code>main函数&lt;/code>开始，如上是最基础的Hello World&lt;/p>
&lt;p>通常来说C语言是编译-运行的&lt;/p>
&lt;h3 id="输入输出">输入输出
&lt;/h3>&lt;p>在C语言中，使用&lt;code>printf()&lt;/code>函数来输出内容，其中，传递给printf的参数是：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">64&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;字符串&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;格式字符，比如%d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>运行程序会输出：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&amp;gt;字符串
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;格式字符，比如64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="格式字符">格式字符
&lt;/h4>&lt;p>格式字符是%+一个或多个字符，用于控制输出的格式。比如说，后面传入的参数i是int类型的，那么使用%d来输出整数&lt;/p>
&lt;p>常见的格式字符有：&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/C-Note1-Basics/01.webp"
loading="lazy"
alt="格式字符"
>&lt;/p>
&lt;p>更多的用法：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">64&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">double&lt;/span> &lt;span class="n">d&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">32.64128&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">char&lt;/span> &lt;span class="n">c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sc">&amp;#39;c&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;HelloWorld&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// %s:字符串
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%c&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// %c:字符
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// %d:整数（十进制）
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%5d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// %5d:五位整数，不足五位前面补充空格
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%05d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// %05d:五位整数，不足五位前面补充0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%-5d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// %-5d:五位整数，不足五位后面补充空格
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%u&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// %u:打印无符号数
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%x&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// %x:整数（十六进制）
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%o&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// %o:整数（八进制）
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%f&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// %f:浮点数
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%0.0f&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// %0.0f不保留小数
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%0.100f&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// %0.100保留三位小数
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%p&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// %p取指针的地址
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>输出大致如下（其中%p的例子仅做示范，“□”代表空格）：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">HelloWorld
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">□□□64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">00064
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64□□□
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">40
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">100
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">32.64128
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">32
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">32.641
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0x7fff5cc109d4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>更多情况见&lt;a class="link" href="" >C语言格式字符（还没写先挖坑）&lt;/a>&lt;/p>
&lt;p>C语言使用&lt;code>scanf()&lt;/code>函数来获取输入，其中的参数是格式字符，另外一个参数是&lt;code>&amp;amp;变量名&lt;/code>（&amp;amp;是取地址）&lt;/p>
&lt;h4 id="转义逃逸字符">转义（逃逸）字符
&lt;/h4>&lt;p>常见转义字符有：&lt;/p>
&lt;p>&lt;code>\n&lt;/code>:&lt;code>换行&lt;/code>&lt;/p>
&lt;p>&lt;code>\t&lt;/code>:&lt;code>制表符&lt;/code>&lt;/p>
&lt;p>&lt;code>\&amp;quot;&lt;/code>:&lt;code>&amp;quot;&lt;/code>&lt;/p>
&lt;p>&lt;code>\'&lt;/code>:&lt;code>'&lt;/code>&lt;/p>
&lt;p>&lt;code>\\&lt;/code>:&lt;code>\&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/C-Note1-Basics/02.webp"
loading="lazy"
alt="转义字符"
>&lt;/p>
&lt;h2 id="运算">运算
&lt;/h2>&lt;p>在C语言中这样定义变量：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">变量类型 变量名;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以在变量定义的时候给其赋值，否则不会初始化&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">myVar&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">64&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在这中等号代表赋值而不是相等&lt;/p>
&lt;p>变量区分大小写，即MyVar和myVar完全是不同的两个变量&lt;/p>
&lt;p>使用typeof()函数可以输出变量占据的字节，typeof是静态的，括号里面的运算不会被进行&lt;/p>
&lt;p>在C语言中有多种运算符常见的有+、-、&lt;em>、\、以及+=、-=、&lt;/em>=、+和++、&amp;ndash;&lt;/p>
&lt;h2 id="程序流控制">程序流控制
&lt;/h2>&lt;h3 id="判断">判断
&lt;/h3>&lt;p>&lt;code>if&lt;/code> 语句用于判断，其结构如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="cm">/*条件*/&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 语句;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="cm">/*条件*/&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 语句;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 语句;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>if&lt;/code> 是可以嵌套的&lt;/p>
&lt;p>在条件中判断值是否相等使用“==”而不是“=”，单个的等号是赋值运算。括号内1表示是，0表示非。&lt;/p>
&lt;p>比如说&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>条件成立则3 &amp;lt; 6 的结果为1即result的值为1&lt;/p>
&lt;p>&lt;code>else if&lt;/code> 等同于：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="cm">/*条件1*/&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 语句;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="cm">/*条件2*/&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 语句;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>虽然单行的语句可以不使用{}，但是建议使用&lt;/p>&lt;/blockquote>
&lt;p>&lt;code>switch case语句&lt;/code>的结构如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="k">switch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="cm">/*变量*/&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="sc">&amp;#39;0&amp;#39;&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 语句1;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="sc">&amp;#39;1&amp;#39;&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 语句2;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">default&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 语句;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>switch的作用是根据变量的值将代码跳转到某个地方，如果case后面没有&lt;code>break;&lt;/code>那么会接着走下一行&lt;/p>
&lt;h3 id="循环">循环
&lt;/h3>&lt;h4 id="while">while
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="cm">/*条件*/&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 执行语句;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>while&lt;/code>循环的过程如下：&lt;/p>
&lt;ol>
&lt;li>判断是否满足条件&lt;/li>
&lt;li>满足条件进入循环体，执行语句；不满足条件则跳出&lt;/li>
&lt;li>返回1&lt;/li>
&lt;/ol>
&lt;h4 id="do-while">do while
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 执行语句;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="cm">/*条件*/&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>do while&lt;/code>循环的过程如下：&lt;/p>
&lt;ol>
&lt;li>执行语句&lt;/li>
&lt;li>判断是否满足条件，满足条件返回1；不满足条件则跳出&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="cm">/*表达式1*/&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="cm">/*表达式2*/&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="cm">/*表达式3*/&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 执行语句;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>for&lt;/code> 循环是一种古老的循环（所以它看起来比较怪），它的执行过程如下：&lt;/p>
&lt;ol>
&lt;li>求解表达式1（通常是初始化计数变量）&lt;/li>
&lt;li>求解表达式2（其实是条件），符合条件继续运行，不符合则跳出&lt;/li>
&lt;li>执行语句&lt;/li>
&lt;li>求解表达式3（通常是计数变量）&lt;/li>
&lt;li>回到2步执行&lt;/li>
&lt;/ol>
&lt;p>也就是 &lt;code>for&lt;/code> 循环改写成 &lt;code>while&lt;/code> 相当于：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 表达式1;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="cm">/*表达式2*/&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 执行语句;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// 表达式3;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在很多时候使用 &lt;code>for循环&lt;/code> 会很方便（虽然我没感觉但是代码短了）&lt;/p>
&lt;p>比如需要计数时&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 从1数到100
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="数据类型">数据类型
&lt;/h2>&lt;h3 id="整型">整型
&lt;/h3>&lt;p>&lt;code>char&lt;/code>
&lt;code>short&lt;/code>
&lt;code>int&lt;/code>
&lt;code>long&lt;/code>
&lt;code>long long&lt;/code>&lt;/p>
&lt;h4 id="整数的二进制表示">整数的二进制表示
&lt;/h4>&lt;p>在计算机内部所有变量都是二进制的。&lt;/p>
&lt;p>为了表示负数，使用了补码，比如：&lt;/p>
&lt;p>-1为 &lt;code>11111111&lt;/code>&lt;/p>
&lt;p>1 为 &lt;code>00000001&lt;/code>&lt;/p>
&lt;p>进行二进制加法时，&lt;code>11111111&lt;/code> + &lt;code>00000001&lt;/code> = &lt;code>100000000&lt;/code>&lt;/p>
&lt;p>然而，进位上去的1被舍弃了，从而实现 &lt;code>-1&lt;/code> + &lt;code>1&lt;/code> = &lt;code>0&lt;/code>&lt;/p>
&lt;h4 id="整数的范围">整数的范围
&lt;/h4>&lt;p>如果某个类型占据n个字节&lt;/p>
&lt;p>那么它的范围是 -2^(n-1)~2^(n-1)-1&lt;/p>
&lt;p>&lt;code>// 这里的&amp;quot;^&amp;quot;表示次幂而不是异或&lt;/code>&lt;/p>
&lt;h4 id="字符类型char">字符类型char
&lt;/h4>&lt;p>char既是整型数字又是字符，将字符赋值给char时应该用单引号&amp;quot; &amp;rsquo; &amp;ldquo;包裹，比如&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">char&lt;/span> &lt;span class="n">ch&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sc">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以将字符作为整数输出、计算、输入，字符的整数值是它的ASCII码&lt;/p>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/ASCII-Code-Convertor/" target="_blank" rel="noopener"
>ASCII码对照表和转换器&lt;/a>&lt;/p>&lt;/blockquote>
&lt;h3 id="浮点数">浮点数
&lt;/h3>&lt;p>&lt;code>float&lt;/code>
&lt;code>double&lt;/code>
&lt;code>long double&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/C-Note1-Basics/03.webp"
loading="lazy"
alt="浮点类型的选择"
>&lt;/p>
&lt;blockquote>
&lt;p>!注意：浮点数是有精度的，它们可能不是准确的，制作计算器程序应该使用BCD&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>其实个人觉得整型也是一个道理，通常来说只用int就行了&lt;/p>&lt;/blockquote>
&lt;h3 id="逻辑">逻辑
&lt;/h3>&lt;h4 id="bool">bool
&lt;/h4>&lt;p>bool类型只有true和false两个值，使用bool需要添加头文件&lt;code>&amp;lt;stdbool.h&amp;gt;&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/C-Note1-Basics/04.webp"
loading="lazy"
alt="bool"
>&lt;/p>
&lt;h4 id="逻辑运算">逻辑运算
&lt;/h4>&lt;p>&lt;code>&amp;amp;&amp;amp;&lt;/code>逻辑且&lt;/p>
&lt;p>当逻辑且左右的条件全成立时返回1，否则返回0&lt;/p>
&lt;p>&lt;code>||&lt;/code>逻辑或&lt;/p>
&lt;p>当逻辑或两侧任意的一个条件成立时返回1，全不成立则返回0&lt;/p>
&lt;h3 id="数组">数组
&lt;/h3>&lt;h4 id="数组的定义">数组的定义
&lt;/h4>&lt;p>可以使用以下形式定义一个数组&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">arrayInt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这个数组具有30个单元，通过&lt;code>arrayInt[i]&lt;/code>来访问，索引从0开始，不能超过30 - 1，否则数组会越界&lt;/p>
&lt;h4 id="数组的初始化">数组的初始化
&lt;/h4>&lt;p>可以在定义时去初始化数组：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">arrayInt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这样初始化会使得数组被赋值为大括号中的数字，如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="n">arrayInt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">arrayInt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">arrayInt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">arrayInt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">arrayInt&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="cm">/* ... */&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>来创建自动设置大小的数组&lt;/p>
&lt;blockquote>
&lt;p>!注意：这样的数组大小仍然是固定的，只是在初始化的时候根据大括号内容自动算了大小&lt;/p>&lt;/blockquote>
&lt;p>使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">arrayInt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>来创建指定单元被初始化为指定值的数组&lt;/p>
&lt;p>使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">arrayInt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>来让整个数组的每个单元初始化为0（实际上，当大括号内的数字数量比数组的大小小时，会默认填充每个单位为0）&lt;/p>
&lt;h4 id="数组的运算">数组的运算
&lt;/h4>&lt;p>数组不能由一个数组赋值给另外一个数组&lt;/p>
&lt;p>数组的每个单元都可以进行运算&lt;/p>
&lt;h4 id="二维数组">二维数组
&lt;/h4>&lt;p>使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>来定义一个二维数组，可以把它看成是一个5行3列表格（或者矩阵）&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>1&lt;/th>
&lt;th>2&lt;/th>
&lt;th>3&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>a[0][0]&lt;/code>&lt;/td>
&lt;td>&lt;code>a[0][1]&lt;/code>&lt;/td>
&lt;td>&lt;code>a[0][2]&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>a[1][0]&lt;/code>&lt;/td>
&lt;td>&lt;code>a[1][1]&lt;/code>&lt;/td>
&lt;td>&lt;code>a[1][2]&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>a[2][0]&lt;/code>&lt;/td>
&lt;td>&lt;code>a[2][1]&lt;/code>&lt;/td>
&lt;td>&lt;code>a[2][2]&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>a[3][0]&lt;/code>&lt;/td>
&lt;td>&lt;code>a[3][1]&lt;/code>&lt;/td>
&lt;td>&lt;code>a[3][2]&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>a[4][0]&lt;/code>&lt;/td>
&lt;td>&lt;code>a[4][1]&lt;/code>&lt;/td>
&lt;td>&lt;code>a[4][2]&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>如表所示&lt;/p>
&lt;p>数组的遍历，使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">Length&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%d &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>来完成&lt;/p>
&lt;h3 id="强制类型转换">强制类型转换
&lt;/h3>&lt;p>C语言会将小范围-&amp;gt;大范围的做自动类型转换，比如说5/7.0（&lt;code>int\double&lt;/code>）结果是&lt;code>double&lt;/code>&lt;/p>
&lt;p>在C语言中使用&lt;code>(类型)变量&lt;/code>来做强制类型转换，比如说&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="nf">malloc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">sizeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="函数">函数
&lt;/h2>&lt;h3 id="函数的定义">函数的定义
&lt;/h3>&lt;p>其实int main()就是函数&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">myFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">foot&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">inch&lt;/span> &lt;span class="cm">/*参数表*/&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="c1">// 函数头
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)((&lt;/span>&lt;span class="n">foot&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">inch&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">12.0&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mf">0.3&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 函数体
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>函数由以下内容构成：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="err">数据类型&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="err">函数名&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="err">参数表&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 语句
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果把函数定义在main函数的后面则需要在main函数的前面声明函数原型（其实就是把函数头copy过去并改成分号结尾）以便于编译器“认出”函数&lt;/p>
&lt;p>使用 &lt;code>void&lt;/code> 定义一个不返回值的函数，不能用 &lt;code>return&lt;/code> 语句&lt;/p>
&lt;blockquote>
&lt;p>注意：请使用 &lt;code>int main&lt;/code> 来定义主函数，没有任何标准规定可以使用 &lt;code>void main&lt;/code> 定义主函数。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>!注意：使用函数时有多个可以return的时候建议遵循单一出口原则，即定义一个本地变量（通常叫做ret）来存储结果，然后最后返回这个本地变量&lt;/p>&lt;/blockquote>
&lt;p>调用函数时传递的参数是值而不是变量本身，在函数内修改传过去的变量不会对main中的变量造成影响（指针除外）&lt;/p>
&lt;p>基础部分的笔记到此结束，剩下的我想每周一个文（其实我已经看完了啦啦啦）&lt;/p></description></item><item><title>VSCode 一键配置 C/C++环境程序</title><link>https://blog.gaein.cn/passages/vscode-c-installer/</link><pubDate>Fri, 18 Sep 2020 15:17:26 +0800</pubDate><guid>https://blog.gaein.cn/passages/vscode-c-installer/</guid><description>&lt;p>VSCode 是轻量级的、跨平台的编辑器。相对于使用 DEVC++来说，使用 VSCode 开发 C/C++有很大的优势（至少它好看）。鉴于环境配置对新人不是很友好，我就写了一个一键安装程序。&lt;/p>
&lt;!-- more -->
&lt;h2 id="发行说明">发行说明
&lt;/h2>&lt;h4 id="平台">平台
&lt;/h4>&lt;p>适用于 Windows7/8/8.1/10 64 位操作系统&lt;/p>
&lt;blockquote>
&lt;p>注意：其中 Windows7 版本需要安装.NET Framework 4.5.2 及以上版本&lt;/p>&lt;/blockquote>
&lt;h4 id="开发">开发
&lt;/h4>&lt;p>使用 CSharp .NET Core 编写（其中 Windows7 版本使用.NET Framework）&lt;/p>
&lt;h4 id="版本">版本
&lt;/h4>&lt;p>当前版本为 1.12.0&lt;/p>
&lt;h4 id="安装">安装
&lt;/h4>&lt;ol>
&lt;li>Visual Studio Code 1.48.2&lt;/li>
&lt;li>LLVM v10.0.0&lt;/li>
&lt;li>mingw64-w64 8.1.0-release-posix-seh-rt_v6-rev0&lt;/li>
&lt;/ol>
&lt;h4 id="插件">插件
&lt;/h4>&lt;ol>
&lt;li>vscode-icons-team.vscode-icons&lt;/li>
&lt;li>ms-vscode.cpptools&lt;/li>
&lt;li>MS-CEINTL.vscode-language-pack-zh-hans&lt;/li>
&lt;li>formulahendry.code-runner&lt;/li>
&lt;li>HookyQR.beautify&lt;/li>
&lt;li>zhuangtongfa.Material-theme&lt;/li>
&lt;li>christian-kohler.path-intellisense&lt;/li>
&lt;li>VisualStudioExptTeam.vscodeintellicode&lt;/li>
&lt;li>esbenp.prettier-vscode&lt;/li>
&lt;/ol>
&lt;h4 id="下载">下载
&lt;/h4>&lt;p>&lt;a class="link" href="https://gitee.com/nidb/vscode--c/releases" target="_blank" rel="noopener"
>码云-gitee.com&lt;/a>&lt;/p>
&lt;h4 id="项目">项目
&lt;/h4>&lt;p>项目地址：&lt;a class="link" href="https://gitee.com/nidb/vscode--c" target="_blank" rel="noopener"
>码云-gitee.com&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>VSCode 配置文件来自 中北大学·AI+移动互联创新实验室&lt;/p>&lt;/blockquote>
&lt;h2 id="使用方法">使用方法
&lt;/h2>&lt;ol>
&lt;li>下载文件&lt;/li>
&lt;li>双击运行后点击“开始”&lt;/li>
&lt;li>等待进度条满后进入文件夹“VSCode+C”&lt;/li>
&lt;li>双击文件“VSCode+C Installer.exe”，系统弹窗提示后点击是&lt;/li>
&lt;li>点击“开始安装”&lt;/li>
&lt;li>安装完成后会自动打开 VSCode，关闭安装程序。&lt;/li>
&lt;li>在 C:\VSCode+C\UserCode\C-Project 文件夹下创建 c 语言源代码文件；在 C:\VSCode+C\UserCode\C++-Project 文件夹下创建 c++源代码文件&lt;/li>
&lt;li>在文件夹内右键&amp;gt;在 code 中打开，或者在 VSCode 中点击文件&amp;gt;打开文件夹，然后浏览选择 C:\VSCode+C\UserCode\C-Project 或 C++的&lt;/li>
&lt;/ol>
&lt;h2 id="开发过程">开发过程
&lt;/h2>&lt;p>本来想打包 msi，后来无论怎么尝试都不行，干脆就使用 CSharp写一个安装器&lt;/p>
&lt;h4 id="安装实现">安装实现
&lt;/h4>&lt;h6 id="vscode">VSCode
&lt;/h6>&lt;p>从官网下载安装包
VSCode 使用 Inno Setup，通过 Process 类中的方法调用其安装程序并传递参数，查阅 Inno Setup 的文档后，我使用的安装的命令行参数如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">/SP- ## 不显示“是否安装”
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/VERYSILENT ## 超级静默安装（不弹窗）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/NOCANCEL ## 禁止取消安装
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/NORESTART ## 不重启电脑
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/CLOSEAPPLICATIONS ## 关闭影响安装的程序
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/ALLUSERS ## 为所有用户安装
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/DIR=&amp;#34;C:\VSCode+C\Microsoft Visual Studio Code\&amp;#34; ##设置安装目录
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/MERGETASKS=&amp;#34;!runcode,desktopicon,quicklaunchicon,addcontextmenufiles,addcontextmenufolders,associatewithfiles,addtopath&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## 安装的任务：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## !runcode 安装完成后不启动vscode
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## desktopicon 桌面图标
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## quicklaunchicon 开始菜单
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## addcontextmenufiles 文件右键菜单
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## addcontextmenufolders 文件夹右键菜单
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## associatewithfiles 关联文件
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## addtopath 添加到环境变量
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>附：&lt;a class="link" href="https://jrsoftware.org/ishelp/topic_setupcmdline.htm" target="_blank" rel="noopener"
>Inno Setup 官方文档&lt;/a>&lt;/p>
&lt;p>MERGETASKS 的内容我一直不知道该怎么写（毕竟这个是编译 Inno Setup 前 VSCode 的开发者写的），但是我突然想到 VSCode 是开源的！于是我查阅了&lt;a class="link" href="https://github.com/microsoft/vscode" target="_blank" rel="noopener"
>GitHub 仓库&lt;/a>。在分支 &lt;a class="link" href="https://github.com/microsoft/vscode/tree/joao/innosetup6" target="_blank" rel="noopener"
>joao/innosetup6&lt;/a>中的 &lt;a class="link" href="https://github.com/microsoft/vscode/blob/joao/innosetup6/build/win32/code.iss" target="_blank" rel="noopener"
>build/win32/code.iss&lt;/a>中找到了如下内容：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[Tasks]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: &amp;#34;desktopicon&amp;#34;; Description: &amp;#34;{cm:CreateDesktopIcon}&amp;#34;; GroupDescription: &amp;#34;{cm:AdditionalIcons}&amp;#34;; Flags: unchecked
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: &amp;#34;quicklaunchicon&amp;#34;; Description: &amp;#34;{cm:CreateQuickLaunchIcon}&amp;#34;; GroupDescription: &amp;#34;{cm:AdditionalIcons}&amp;#34;; Flags: unchecked; OnlyBelowVersion: 0,6.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: &amp;#34;addcontextmenufiles&amp;#34;; Description: &amp;#34;{cm:AddContextMenuFiles,{##NameShort}}&amp;#34;; GroupDescription: &amp;#34;{cm:Other}&amp;#34;; Flags: unchecked
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: &amp;#34;addcontextmenufolders&amp;#34;; Description: &amp;#34;{cm:AddContextMenuFolders,{##NameShort}}&amp;#34;; GroupDescription: &amp;#34;{cm:Other}&amp;#34;; Flags: unchecked
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: &amp;#34;associatewithfiles&amp;#34;; Description: &amp;#34;{cm:AssociateWithFiles,{##NameShort}}&amp;#34;; GroupDescription: &amp;#34;{cm:Other}&amp;#34;; Flags: unchecked
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: &amp;#34;addtopath&amp;#34;; Description: &amp;#34;{cm:AddToPath}&amp;#34;; GroupDescription: &amp;#34;{cm:Other}&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: &amp;#34;runcode&amp;#34;; Description: &amp;#34;{cm:RunAfter,{##NameShort}}&amp;#34;; GroupDescription: &amp;#34;{cm:Other}&amp;#34;; Check: WizardSilent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>顺利解决问题&lt;/p>
&lt;h6 id="llvm">LLVM
&lt;/h6>&lt;p>从&lt;a class="link" href="https://releases.llvm.org/" target="_blank" rel="noopener"
>官网&lt;/a>下载安装包，访问速度可能有些慢，可以考虑使用代理
LLVM 使用 NSIS（问了中北的学姐），通过 Process 类中的方法调用其安装程序并传递参数，查阅 NSIS 的文档后，我使用的安装的命令行参数如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">/S ## 静默安装
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/D=&amp;#34;C:\VSCode+C\LLVM&amp;#34; ## 设置安装目录
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>附：&lt;a class="link" href="https://nsis.sourceforge.io/Docs/Chapter3.html##installerusage" target="_blank" rel="noopener"
>NSIS 官方文档&lt;/a>&lt;/p>
&lt;h6 id="mingw64-w64">mingw64-w64
&lt;/h6>&lt;p>mingw64-w64 下载下来是一个压缩包，因此我们直接去解压文件就好
从&lt;a class="link" href="https://sourceforge.net/projects/mingw-w64/files/" target="_blank" rel="noopener"
>sourceforge&lt;/a>下载 mingw64-w64
&lt;img src="https://s1.ax1x.com/2020/09/18/whTJL8.png"
loading="lazy"
alt="sourceforge文件列表"
>
在这么多文件里面下载 Toolchains targetting Win64&amp;gt;Personal Builds&amp;gt;mingw-builds&amp;gt;8.1.0&amp;gt;threads-posix&amp;gt;seh&amp;gt;x86_64-8.1.0-release-posix-seh-rt_v6-rev0.7z
（找对版本可真不容易）&lt;/p>
&lt;h6 id="代码文件夹和vscode-配置">代码文件夹和.vscode 配置
&lt;/h6>&lt;p>我使用的是中北大学 AI+移动互联创新实验室的配置文件
&lt;a class="link" href="https://github.com/android-nuc/VSCode-C-Environment" target="_blank" rel="noopener"
>GitHub 项目地址&lt;/a>
下载、解压、提取需要的即可&lt;/p>
&lt;h6 id="安装方案">安装方案
&lt;/h6>&lt;p>我的方案是：VSCode、LLVM 使用安装包安装，mingw64-w64 和代码文件夹配置等直接打包成 data.zip 然后解压缩。VSCode 插件调用命令行使用
`C:\VSCode+C\Microsoft Visual Studio Code\bin\code.cmd &amp;ndash;install-extension 插件
由于国内网络原因某些插件安装的很慢或者根本无法安装&lt;/p></description></item><item><title>2020年9月17日服务器宕机说明</title><link>https://blog.gaein.cn/passages/errorlog-200917/</link><pubDate>Thu, 17 Sep 2020 22:26:55 +0800</pubDate><guid>https://blog.gaein.cn/passages/errorlog-200917/</guid><description>&lt;p>网站从2020年9月17日午13点起宕机，到当天22:00基本恢复访问&lt;/p>
&lt;h2 id="">
&lt;/h2>&lt;p>宕机原因如下：
没事闲的使用rm -rf /*结果没有提示直接执行（人类迷惑行为）&lt;/p>
&lt;h2 id="解决步骤">解决步骤：
&lt;/h2>&lt;ol>
&lt;li>当场懵了然后按下Ctrl+C&lt;/li>
&lt;li>查看快照&lt;/li>
&lt;li>尝试连接SSH，显示密码错误&lt;/li>
&lt;li>更改SSH密码，无法连接&lt;/li>
&lt;li>使用阿里云紧急救援，发现服务器已经无法开启&lt;/li>
&lt;li>回滚到刚刚安装环境的快照&lt;/li>
&lt;li>启动nginx，修改配置文件&lt;/li>
&lt;li>上传网站页面，恢复主页等访问&lt;/li>
&lt;li>开启PHP，修复数据库，恢复评论系统和旧博客的访问&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>应多使用快照功能以便在出现问题时及时回滚&lt;/p>&lt;/blockquote></description></item><item><title>高考志愿填报指津</title><link>https://blog.gaein.cn/passages/cee-wish-guidance/</link><pubDate>Sun, 02 Aug 2020 15:52:25 +0800</pubDate><guid>https://blog.gaein.cn/passages/cee-wish-guidance/</guid><description>&lt;p>高考志愿填报一直是很令各位同学、家长纠结的事情，关系到学生的升学。高考结束已经将近一个月，我也研究了大半个月的志愿填报，将经验分享在这里&lt;/p>
&lt;h2 id="明确主体">明确主体
&lt;/h2>&lt;p>高考志愿是大学录取的重要依据，关系到考生4年将在哪里读大学、在哪里生活，很大程度上也会影响之后的就业、组建家庭。所以，作为考生，志愿填报是自己的责任，不能考完试就玩去了，把填报的任务完全推给家长；更不能花钱交给机构，不闻不问！这件事情一定要自己来，家长可以提出建议适度干扰，但不要以强硬的姿态来决定！
当然就算家长强硬决定了，报考密码在你手里呀~ 不过家长的建议要充分的去参考。&lt;/p>
&lt;hr>
&lt;h2 id="明确目的">明确目的
&lt;/h2>&lt;p>志愿填报的目的是升学，升学的目的是就业（至少大部分是，不排除少部分精英们要为国做贡献。但是大部分普通人的目的很简单、也要现实一点，就是就业）
就业还有两种情况，一种是本科/专科毕业后就业，另一种是考研（或者读博士）后再就业，两种就业对于学校的选择不一样。&lt;/p>
&lt;hr>
&lt;h2 id="三个因素">三个因素
&lt;/h2>&lt;p>报考学校有三个重要因素要考虑：&lt;/p>
&lt;h3 id="一是地域">一是地域
&lt;/h3>&lt;ol>
&lt;li>东部大城市，如北京、上海、南京等，大部分学校分数较高，一部分学校虽然是一本招生，但是在其省市内很有可能是二批乃至三批招生。这样学校优势就是地域，能够开拓视野，同时也会有更多的工作机会。&lt;/li>
&lt;li>东部二三线城市，像青岛、大连等，这些地区学校有很多可以选择，视野相对较开阔，工作机会也比中西部地区多一点。&lt;/li>
&lt;li>中部城市，像兰州等地，这里的学校比较有“性价比”，可以用相对少的分数报考一所实力相对好的学校。&lt;/li>
&lt;li>西部地区，像新疆、西藏，这里的学校大部分分数很低，存在很多政策性的211学校（如青海大学、石河子大学）。&lt;/li>
&lt;/ol>
&lt;h3 id="二是学校">二是学校
&lt;/h3>&lt;p>这里比的因素是学校的教学水平、学习氛围、还有社会认可度等，具体可以看学校的博士硕士授予点数量、院士的数量等，还有在校友会、软科等的排名也算是有参考价值（注意：参考价值，仅供参考）。选择一所实力强的学校往往意味着能够学到更多的技能（当然是因人而异，一天到晚不学习还想会什么纯属做梦）。当然，可以比较的还有学校的“标签”：985、211、双一流。有时候“标签”会是某用人单位招聘的“门槛”。&lt;/p>
&lt;h3 id="三是专业">三是专业
&lt;/h3>&lt;p>两个方面，一是专业是否是好就业的专业，比如比较热门的自动化等（当然不代表它一直好就业，这个需要了解专业做出形势推测）。二是专业是否是学校侧重的专业，比如人民政法大学侧重于法学等、理工科学校侧重与工科，电子科技大学侧重电子信息类和计算机等。大部分学校都有它的侧重点，选择学校侧重的学科可能会获得更多的资源。&lt;/p>
&lt;h2 id="选择专业">选择专业
&lt;/h2>&lt;p>订购一本专业解读的书，详细了解各个专业的就业方向和对身体的要求，初步选择出自己比较敢兴趣的专业，不能太少，多选一些。&lt;/p>
&lt;h2 id="初选学校">初选学校
&lt;/h2>&lt;p>回到目的那里。&lt;/p>
&lt;ol>
&lt;li>本科毕业就业：选择东部沿海城市的实力相对较弱点学校的易于就业的专业，保证能报上那种。&lt;/li>
&lt;li>研究生毕业就业：选择西部211（政策性）或者中部985，这些学校易于考研，选择学校实力较强、地域较差的学校，学习氛围较好的学校&lt;/li>
&lt;/ol>
&lt;p>如果你对某方面有强烈的兴趣爱好，不妨报考一所稳上某专业的学校，浪费点分就浪费点呗！
根据以上要点初步筛选分数差不多的学校。&lt;/p>
&lt;blockquote>
&lt;p>注意：宿舍、食堂、商业街等不在考虑范围之内，你要想清楚去大学不是养大爷去了，是学习去了，能上一所实力强点的学校就是睡长椅都行。这些因素我在报考时压根都没有考虑，作为一个农村娃，我觉得所有大学的宿舍都很好，很棒，真的不用过分考虑这些。高中毕业大部分都成人了，应该明白那些重要、那些不重要。&lt;/p>&lt;/blockquote>
&lt;h2 id="再筛学校">再筛学校
&lt;/h2>&lt;ol>
&lt;li>将自己的分数根据今年（2020）的一分一档查到对应的位次，记住这个位次，再根据过去三年（2017、2018、2019）的一分一档查到该位次对应的分数，记下这些数据用于参考。&lt;/li>
&lt;li>根据书上或者学校官网的数据，比较自己和往年的差距，如果分数和提档线不相上下，则可以冲一冲；如果分数高于提档线2~3分，则学校可以上，但是专业无法选择。&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>如果冲的学校不是跨水平的学校（比如二本分数冲一本、一本分数冲211 算是跨水平），则不是很有必要冲。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>提档线是自然形成的而非人为划定的，在录取工作完成之前谁也不知道提档线是多少。按照比例进行调档的最后一个人的分数则是提档线。往年数据里最低分就是提档线。&lt;/p>&lt;/blockquote>
&lt;ol start="3">
&lt;li>排除一些“坑”（就是学校不行分数不少）的学校&lt;/li>
&lt;li>根据自己的专业意向，选择偏该专业的学校&lt;/li>
&lt;li>挨个查看学校的招生章程：是否有分数级差，查看学校招生计划：是否扩招&lt;/li>
&lt;/ol>
&lt;h2 id="专业选择">专业选择
&lt;/h2>&lt;p>将分数较高、自己喜欢、学校侧重的专业排在前面，分数较低但是可以接受的专业写在后面，尽量不被调剂但是一定要服从专业调剂。&lt;/p>
&lt;h2 id="志愿填报">志愿填报
&lt;/h2>&lt;p>不用过于害怕网络崩溃，但是也别过分不紧张。在河北省等不限次数更改的省份，可以先填报，不满意再更改。尽早完成。&lt;/p>
&lt;h2 id="解释说明">解释说明
&lt;/h2>&lt;p>报志愿时遇到的部分概念做解释说明。&lt;/p>
&lt;h3 id="分数级差">分数级差
&lt;/h3>&lt;p>一个志愿（比如山东科技大学）各个专业之间的级差，比如考生考了605分，今年山东科技大学的分数级差是3-0-0-0-0-0，那么第一专业按605分计算，第二第三个专业在录取时按照602分计算.&lt;/p>
&lt;h3 id="专业调剂">专业调剂
&lt;/h3>&lt;p>在考生所填报的专业计划已经满的情况下，服从专业调剂会分配到未填报的其它计划数没有满的专业。服从专业调剂不一定会被调剂到冷门专业，专业调剂是随机分配的（但是热门专业计划数都满了&amp;hellip;调剂的很大可能就是冷门专业）。所以建议考生将分低的可以接受的专业写在后面，尽量避免专业调剂。&lt;/p>
&lt;p>&lt;strong>但是，必须勾选服从专业调剂，因为如果整个学校招生计划没满，被提档，但是所填报的专业计划全部满，又不服从专业调剂会做退档处理！大部分省份一个批次只有一次投档机会，退档后其它志愿作废，到下一批次（期间有一个征集志愿，分数很高的）才能投档。也就是本来能报本科批的滑档到专科批！可没少亏！因此，不要害怕上不了喜欢的专业，至少比滑档到下一批次强。就是十拿九稳的也要服从专业调剂，多一份保障&lt;/strong>&lt;/p>
&lt;h3 id="平行志愿">平行志愿
&lt;/h3>&lt;p>平行志愿是“分数优先，遵循志愿”的原则，不同于顺序志愿，平行志愿退档的概率更低（服从专业调剂的情况下）。整个录取工作只进行一轮检索，因此不用担心把学校报在C志愿会因为A、B两所学校而致使检索C时C被填满。录取的流程是这样的：&lt;/p>
&lt;ol>
&lt;li>将考生按总分排名，分数相同考生比较单科成绩排名（单科成绩全部相同考生比较学考成绩）。&lt;/li>
&lt;li>按照排名检索，先检索全省第一，比方他A志愿填写的“1466 清华大学”，此时系统检索清华大学招生人数，未满，则提档；提档后检索该考生的专业，第一专业人数未满，则投档给清华、录取。&lt;/li>
&lt;li>系统依次检索第二、三、四&amp;hellip;人的志愿，每人都是先检索A，再检索B、C&amp;hellip;志愿。如果A志愿所填报的学校招生计划已经满，则不做提档，检索B学校，直到检索到最后一所学校，如果仍然无法投档则进入下一批次。&lt;/li>
&lt;/ol>
&lt;h3 id="调档比例">调档比例
&lt;/h3>&lt;p>比如调档比例是105%，招生计划是100人，则实际调档105人。其中肯定有因为不服从专业调剂或者身体原因或者自己申请而退档的，那么实际招生也就差不多100人，如果超出计划则使用预留人数。大部分学校即使超出计划但是你服从专业调剂也不会退档，不过还是建议拨打招生办电话进行咨询。&lt;/p>
&lt;h2 id="注意事项">注意事项
&lt;/h2>&lt;h3 id="服从专业调剂">服从专业调剂
&lt;/h3>&lt;p>原因说了，一定要服从专业调剂！！！&lt;/p>
&lt;h3 id="院校代码">院校代码
&lt;/h3>&lt;p>以省教育考试院公布或发行的书本为主，不要使用往年的代码。可能有部分省份使用国标代码，但是大部分省份都是自己省内编排的代码。&lt;/p>
&lt;h2 id="大学推荐">大学推荐
&lt;/h2>&lt;p>说说几个宝藏大学吧！这些学校不是985、不是211，但是非常厉害！&lt;/p>
&lt;ol>
&lt;li>
&lt;p>中北大学
（我报考的就是中北大学）兵工类学校，不是军校。彭德怀创立，解放军第一所兵工院校，有人民兵工第一校的美称。兵工七子之一，国家二级保密单位。位于山西省太原市，由于学校比较低调，知名度很低。在山西省内由于省内招生优惠，分数很低，所以在山西省内也不是很有名。测控技术与仪器、航空航天等专业为王牌专业，国庆展出的军事装备中很多研发都有中北师生的身影。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>燕山大学&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>位于河北省秦皇岛，综合实力超过了很多211学校，在河北省内排名第一。是河北省人民政府、教育部、工业和信息化部、国家国防科技工业局共建的全国重点大学。&lt;/p>
&lt;ol start="3">
&lt;li>
&lt;p>桂林电子科技大学。电子、计算机类实力很强，很多地区是二本、三本招生，受生源和地域影响其它学科发展不是很好。四大电子科技大学之一
（末）。参与北斗卫星研发。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>杭州电子科技大学。实力超过很多211，四大电子科技大学之一。位于杭州阿里巴巴隔壁，工作机会较多。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>集美大学。位于厦门市集美区。环境优美，办学水平也很高。
最近看到，这所学校航海专业很强势，如果向往星辰大海可以考虑。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>石家庄铁道大学，就业率高，土木工程等专业排名靠前。（铁路类院校）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>兰州交通大学，就业率高，车辆、通信等发展较好。（铁路类院校）&lt;/p>
&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>&amp;lt;1&amp;gt;排名不分先后&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>&amp;lt;2&amp;gt;具体学校数据请以官网介绍为准，本文本部分凭印象所写，难免有偏差。&lt;/p>&lt;/blockquote>
&lt;p>最后，欢迎报考博主所报考的中北大学，一起来碗老陈醋！&lt;/p></description></item><item><title>最特殊的高三开学前的一些感想</title><link>https://blog.gaein.cn/passages/diary-20200420/</link><pubDate>Mon, 20 Apr 2020 18:12:08 +0800</pubDate><guid>https://blog.gaein.cn/passages/diary-20200420/</guid><description>&lt;p>要开学了，刚刚看了以前爹妈给买的一本逆袭。一晃自己已经要面临高考，三年学习就要画上句号了。&lt;/p>
&lt;p>三年，玩过浪过也努力过。不管是摄影、航模、还是计算机，抑或是高三第一学期的奋起直追，他们填充了我的生活。&lt;/p>
&lt;p>感觉，高三这一年就像人生的一个缩影，有起有落，有大起有大落。我用了半年的时间让别人两年的努力付诸东流、又用了两个月的时间让我自己的努力付诸东流。人生没有后悔药，历史已然过去，我们无法改变。一节网课没听的两个月，我写了订餐表软件、写了考勤系统、又搭了两个站，显然，我没有去吧重心放在学习上。不能把重心放对以后又怎么创业呢？昨天和一家公司的老板聊了聊，刚认识的时候他还是创业初期，高中三年过去，他的公司已经市值5000万。但是又有几个创业者能像他一样一次成功的呢？没有几个。在他的身上我看到了很多优点，包括对时间的规划等。&lt;/p>
&lt;p>人很重要的是要自律。但是有多少人会自律的呢？显然我不算，很多同学也不算，那些真正的学霸算是的，我觉得在他们那里学习是一种享受，就像我连夜写码一样，不知疲倦。&lt;/p>
&lt;p>好在，又是开学季。尽管心有不甘，为什么？我在别人元旦晚会开心看电影的时候去学习，在未来的两个月以及过去的半年里在别人睡觉的时候去学习，可是却在家里、有着大把自主安排的时间，却没有放在学习上。但是正如前文所说，历史无法改变，而且以我对自己的了解在给我两个月我可能也会浪费过去。好在今年高考延期，给了我反攻机会。我用了半年爬到了班级第一，看到了211的梦想，是否还能用两个月再回到那个时候呢？每一次考试对于自己都是奖励，我希望今后能这样。学习是有奖励机制的，只不过容易陷入循环（考得好&amp;gt;好好学&amp;gt;考得好or你懂的）。学长和我说要有个好的心态，希望吧。无论在开学后的考试如何翻车，也要坚持学习，因为我相信自己不会是一个平凡的人。我能用半年追到别人学习三年的成绩，凭什么不能用两个月干翻两个月？&lt;/p>
&lt;p>我想，高三一年是一部故事。我的故事一定会很奇特，毕竟这里有大起有大落，有欢笑有泪水。那么现在刚刚大落完的我，或许还能大起？&lt;/p>
&lt;p>展望一下未来，大学。在我喜欢的专业干我喜欢的事情。
日常语无伦次，今日有些感想记在此处。开学后奋起直追，力挽狂澜，夺回本属于自己的。&lt;/p>
&lt;blockquote>
&lt;p>穷发之北，有冥海者，天池也。有鱼焉，其广数千里，未有知其修者，其名为鲲。有鸟焉，其名为鹏，背若泰山，翼若垂天之云；抟扶摇羊角而上者九万里，绝云气，负青天，然后图南，且适南冥也&lt;/p>&lt;/blockquote>
&lt;p>既然是青年，就该有青年的热血和奋发。红日初升，其道大光；河出伏流，一泻汪洋！&lt;/p>
&lt;p>Gaein nidb&lt;/p>
&lt;p>2020 04 20&lt;/p>
&lt;p>LIVE FOR DREAM/爲夢而生&lt;/p></description></item><item><title>MySQL常用命令：导入导出、创建数据库等</title><link>https://blog.gaein.cn/passages/mysql-usage/</link><pubDate>Fri, 17 Apr 2020 15:10:44 +0800</pubDate><guid>https://blog.gaein.cn/passages/mysql-usage/</guid><description>&lt;p>由于博客和其它的程序，经常要接触MySQL数据库。自己暑假想要学习PHP，肯定也要用到MySQL数据库。为了避免经常上网查常用的命令，就写篇博客备用。&lt;/p>
&lt;p>p.s. 为什么我感觉我从一个写桌面程序(CSharp.NET)的孩子变成了web运维(???)&lt;/p>
&lt;h2 id="相关链接">相关链接
&lt;/h2>&lt;p>&lt;a class="link" href="https://www.runoob.com/mysql" target="_blank" rel="noopener"
>菜鸟教程&lt;/a>
&lt;a class="link" href="https://www.mysql.com/downloads/" target="_blank" rel="noopener"
>MySQL官网下载&lt;/a>&lt;/p>
&lt;h2 id="终端命令">终端命令
&lt;/h2>&lt;h6 id="连接mysql">连接MySQL
&lt;/h6>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mysql -p &lt;span class="c1">##使用root连接，如果需要在命令行中输入密码，则密码与&amp;#34;-p&amp;#34;之间没有空格&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>参数&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">-u &lt;span class="c1">##指定用户&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-p &lt;span class="c1">##密码（必选，新版MySQL已经不支持无密码登录）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-P &lt;span class="c1">##端口，默认3306&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-h &lt;span class="c1">##服务器地址&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-D &lt;span class="c1">##数据库名&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="开启关闭mysql">开启、关闭MySQL
&lt;/h6>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mysqladmin -u root -p shutdown &lt;span class="c1">##关闭MySQL，需要输入密码&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##切记！千万不要使用kill等命令关闭MySQL，可能会造成数据损坏&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service mysqld start &lt;span class="c1">##启动MySQL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service mysqld status &lt;span class="c1">##查看运行状态&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="查看默认密码">查看默认密码
&lt;/h6>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo grep &lt;span class="s1">&amp;#39;temporary password&amp;#39;&lt;/span> /var/log/mysqld.log &lt;span class="c1">##刚安装完MySQL时候使用此命令查看初始化的密码&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="备份与恢复">备份与恢复
&lt;/h2>&lt;h6 id="备份导出sql文件">备份（导出.sql文件）
&lt;/h6>&lt;p>终端输入：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mysqldump -u root -p 用户名 数据库名 &amp;gt; dump.sql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="恢复导入sql文件">恢复（导入.sql文件）
&lt;/h6>&lt;p>MySQL输入：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">SOURCE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">文件路径&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="修复">修复
&lt;/h6>&lt;p>有时候错误的关闭MySQL会造成数据损害，此时可以尝试修复。MySQL内输入命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CHECK&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">表名称&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="c1">##检查数据表是否损坏
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">REPAIRE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">表名称&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="c1">##修复损坏的表
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">REPAIR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">EXTENDED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">表名称&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="c1">##速度慢，修复率高
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="mysql命令">MySQL命令
&lt;/h2>&lt;h6 id="用户管理">用户管理
&lt;/h6>&lt;blockquote>
&lt;p>新版MySQL的密码规则要求密码必须包含大小写字母、特殊字符、数字，并且长度在8个字符及以上。不符合会弹出&amp;quot;ERROR 1819 (HY000): Your password does not satisfy the current policy requirements&amp;quot;
在某些数据库中localhost可能是&amp;quot;%&amp;quot;
########## 新建用户&lt;/p>&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;用户名&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IDENTIFIED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;密码&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>########## 添加权限&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">GRANT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">权限&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">数据库&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="err">数据表&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;用户名&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WITH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">GRANT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">OPTION&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其中权限有&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">1) 授予数据库权限时，&amp;lt;权限类型&amp;gt;可以指定为以下值：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SELECT：表示授予用户可以使用 SELECT 语句访问特定数据库中所有表和视图的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INSERT：表示授予用户可以使用 INSERT 语句向特定数据库中所有表添加数据行的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DELETE：表示授予用户可以使用 DELETE 语句删除特定数据库中所有表的数据行的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UPDATE：表示授予用户可以使用 UPDATE 语句更新特定数据库中所有数据表的值的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REFERENCES：表示授予用户可以创建指向特定的数据库中的表外键的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CREATE：表示授权用户可以使用 CREATE TABLE 语句在特定数据库中创建新表的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ALTER：表示授予用户可以使用 ALTER TABLE 语句修改特定数据库中所有数据表的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SHOW VIEW：表示授予用户可以查看特定数据库中已有视图的视图定义的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CREATE ROUTINE：表示授予用户可以为特定的数据库创建存储过程和存储函数的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ALTER ROUTINE：表示授予用户可以更新和删除数据库中已有的存储过程和存储函数的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INDEX：表示授予用户可以在特定数据库中的所有数据表上定义和删除索引的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DROP：表示授予用户可以删除特定数据库中所有表和视图的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CREATE TEMPORARY TABLES：表示授予用户可以在特定数据库中创建临时表的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CREATE VIEW：表示授予用户可以在特定数据库中创建新的视图的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">EXECUTE ROUTINE：表示授予用户可以调用特定数据库的存储过程和存储函数的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LOCK TABLES：表示授予用户可以锁定特定数据库的已有数据表的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ALL 或 ALL PRIVILEGES：表示以上所有权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2) 授予表权限时，&amp;lt;权限类型&amp;gt;可以指定为以下值：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SELECT：授予用户可以使用 SELECT 语句进行访问特定表的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INSERT：授予用户可以使用 INSERT 语句向一个特定表中添加数据行的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DELETE：授予用户可以使用 DELETE 语句从一个特定表中删除数据行的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DROP：授予用户可以删除数据表的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UPDATE：授予用户可以使用 UPDATE 语句更新特定数据表的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ALTER：授予用户可以使用 ALTER TABLE 语句修改数据表的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REFERENCES：授予用户可以创建一个外键来参照特定数据表的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CREATE：授予用户可以使用特定的名字创建一个数据表的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INDEX：授予用户可以在表上定义索引的权限。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ALL 或 ALL PRIVILEGES：所有的权限名。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>（权限列表摘自biancheng.net）
########## 回收权限&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">REVOKE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">权限&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">数据库&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="err">数据表&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;用户名&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>########## 更改密码&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;用户名&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IDENTIFIED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;密码&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">##更改密码
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>########## 删除用户&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;用户名&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h6 id="数据管理">数据管理
&lt;/h6>&lt;p>########## 列出数据库&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SHOW&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASES&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>########## 选中数据库&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">USE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">数据库名&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>########## 查看数据库大小&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">USE information_schema;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">select concat(round(sum(data_length/1024/1024),2),&amp;#39;MB&amp;#39;) as data from tables;##查看总大小
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">select concat(round(sum(data_length/1024/1024),2),&amp;#39;MB&amp;#39;) as data from tables where table_schema=&amp;#39;数据库名&amp;#39;;##查看指定数据库大小
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">select concat(round(sum(data_length/1024/1024),2),&amp;#39;MB&amp;#39;) as data from tables where table_schema=&amp;#39;数据库名&amp;#39; and table_name=&amp;#39;表名&amp;#39;;##查看指定表的大小
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>########## 新建数据库&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">数据库名&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>########## 删除数据库&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">数据库名&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>CentOS配置PHP+Nginx+MySQL——记一次环境配置的过程</title><link>https://blog.gaein.cn/passages/config-lnmp-on-centos/</link><pubDate>Thu, 16 Apr 2020 15:40:30 +0800</pubDate><guid>https://blog.gaein.cn/passages/config-lnmp-on-centos/</guid><description>&lt;h2 id="缘由">缘由
&lt;/h2>&lt;blockquote>
&lt;p>最近阿里云的服务器到期了，由于阿里云学生机活动规则更改了，而我手里的服务器已经升级无法再使用优惠价格续费。只好中转其它服务器，再将手里的第二台服务器退款。总之是很折腾的&lt;/p>&lt;/blockquote>
&lt;h2 id="过程">过程
&lt;/h2>&lt;p>我选择的安装方式并不是一键安装包、也没有用面板。总感觉那些东西安装完成之后不在自己习惯的位置。用着很不舒服，改配置文件还要搜索。所以我使用熟悉的yum来进行安装&lt;/p>
&lt;h3 id="使用我自己写的脚本">使用我自己写的脚本
&lt;/h3>&lt;p>&lt;code>wget https://res.gaein.cn/files/bash/init.sh&amp;amp;&amp;amp;sudo ./init/sh&lt;/code>&lt;/p>
&lt;p>进行自动化安装
（如果提示未知命令请先安装wget，参考下文）&lt;/p>
&lt;blockquote>
&lt;p>脚本因为用不到所以删了&lt;/p>&lt;/blockquote>
&lt;h3 id="安装基础软件i">安装基础软件I
&lt;/h3>&lt;p>包括&lt;/p>
&lt;ul>
&lt;li>wget (下载)&lt;/li>
&lt;li>tmux (终端复用)。&lt;/li>
&lt;/ul>
&lt;p>没有他们无法完成下一步的配置yum源。&lt;/p>
&lt;h4 id="安装wget">安装wget
&lt;/h4>&lt;p>使用命令 &lt;code>wget&lt;/code>&lt;/p>
&lt;p>如果输出&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">wget: missing URL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage: wget &lt;span class="o">[&lt;/span>OPTION&lt;span class="o">]&lt;/span>... &lt;span class="o">[&lt;/span>URL&lt;span class="o">]&lt;/span>...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Try &lt;span class="s1">&amp;#39;wget --help&amp;#39;&lt;/span> &lt;span class="k">for&lt;/span> more options.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>则已经安装wget。&lt;/p>
&lt;p>如果输出未知命令之类的，则使用 &lt;code>yum install -y wget&lt;/code> 安装wget。&lt;/p>
&lt;h4 id="安装tmux">安装tmux
&lt;/h4>&lt;blockquote>
&lt;p>tmux是一款优秀的终端复用神器，它可以在后端运行。也就是在里面运行的进程不会在你关闭SSH时结束。对于压缩转移大文件、下载大文件很有用（比如稍后我们安装MySQL用到将近一个小时，就是在tmux里面操作的）同时tmux还提供窗口切分、切换，让我们更方便的使用终端。&lt;/p>&lt;/blockquote>
&lt;p>&lt;strong>目前已知tmux和lrzsz不兼容&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Config-LNMP-On-CentOS/01.webp"
loading="lazy"
alt="tmux截屏"
>&lt;/p>
&lt;p>使用命令 &lt;code>tmux --help&lt;/code> 来查看是否安装了tmux。如果输出&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">usage: tmux &lt;span class="o">[&lt;/span>-2CluvV&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-c shell-command&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-f file&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-L socket-name&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>-S socket-path&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="nb">command&lt;/span> &lt;span class="o">[&lt;/span>flags&lt;span class="o">]]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>则已经安装，输出未知指令之类的，则使用 &lt;code>yum install -y tmux&lt;/code> 进行安装&lt;/p>
&lt;h5 id="使用tmux">使用tmux
&lt;/h5>&lt;p>tmux采用快捷键 &lt;code>Ctrl+B&lt;/code> 来激活控制台。同时按下键盘上面的&lt;code>Ctrl&lt;/code> 和 &lt;code>B&lt;/code> ，然后在按键盘就是tmux命令（快捷键）了。注意，使用 &lt;code>Ctrl+C&lt;/code> 无法强制结束tmux，只会结束里面的任务。
&lt;code>Ctrl+B&lt;/code> 后的常用快捷键（注意先按Ctrl+B再按下快捷键！）&lt;/p>
&lt;ul>
&lt;li>&lt;code>D&lt;/code>隐藏tmux（类似于windows的最小化，隐藏窗口而不退出，里面的进程继续）&lt;/li>
&lt;li>&lt;code>X&lt;/code>关闭tmux当前窗口（需要输入 &lt;code>y/n&lt;/code> 确定或取消）&lt;/li>
&lt;li>&lt;code>N&lt;/code>下一个窗口&lt;/li>
&lt;li>&lt;code>P&lt;/code>上一个窗口&lt;/li>
&lt;li>&lt;code>%&lt;/code>将窗口分为左右两块&lt;/li>
&lt;li>&lt;code>&amp;quot;&lt;/code>将窗口分为上下两块，注意是英文半角的&amp;quot;&lt;/li>
&lt;/ul>
&lt;p>记住这些命令也就暂时够了，其它的以后再研究&lt;/p>
&lt;h3 id="配置yum源">配置yum源
&lt;/h3>&lt;p>默认的yum源速度较慢、而且提供的软件不是很多。&lt;/p>
&lt;h4 id="配置epel">配置epel
&lt;/h4>&lt;p>使用命令 &lt;code>yum install -y epel-release&lt;/code> 安装epel&lt;/p>
&lt;h4 id="使用阿里镜像">使用阿里镜像
&lt;/h4>&lt;p>输入命令&lt;/p>
&lt;p>&lt;code>wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo&lt;/code>&lt;/p>
&lt;p>下载repo文件&lt;/p>
&lt;h4 id="配置webstatic">配置WebStatic
&lt;/h4>&lt;p>WebStatic提供最高到PHP7.2（目前我就需要PHP,yum默认的是PHP5.6）&lt;/p>
&lt;p>使用命令&lt;/p>
&lt;p>&lt;code>yum install -y https://mirror.WebStatic.com/yum/el7/WebStatic-release.rpm &lt;/code>&lt;/p>
&lt;p>安装rpm包&lt;/p>
&lt;p>配置完后别忘了使用&lt;/p>
&lt;p>&lt;code>yum clean all &amp;amp;&amp;amp; yum makecache&lt;/code> 来清空yum的缓存，使用 &lt;code>yum update&lt;/code> 来进行更新。&lt;/p>
&lt;h3 id="安装基础软件ii">安装基础软件II
&lt;/h3>&lt;p>操作服务器的一些常用软件。一般来说都预装的。可惜，我这神奇服务器没有。&lt;/p>
&lt;p>包括：&lt;/p>
&lt;ul>
&lt;li>vim(文本编辑)&lt;/li>
&lt;li>curl(下载)&lt;/li>
&lt;li>tar(tar压缩)&lt;/li>
&lt;li>7za(7z压缩)&lt;/li>
&lt;li>lrzsz(通过XShell终端传输文件)&lt;/li>
&lt;li>git&lt;/li>
&lt;/ul>
&lt;p>对于这些软件我无所谓版本，直接 &lt;code>yum install&lt;/code> 安装就可以(不说都是最新的也旧不了太多吧)&lt;/p>
&lt;p>这些软件都可以使用yum安装&lt;/p>
&lt;p>&lt;code>yum install -y curl lrzsz yum-utils vim p7zip git-core&lt;/code>&lt;/p>
&lt;h3 id="安装nginx">安装nginx
&lt;/h3>&lt;p>使用命令&lt;/p>
&lt;p>&lt;code>wget http://nginx.org/packages/centos/7/x86_64/RPMS/nginx-1.16.1-1.el7.ngx.x86_64.rpm &lt;/code>&lt;/p>
&lt;p>下载rpm包，然使用命令&lt;/p>
&lt;p>&lt;code>rpm -ivh nginx-1.16.1-1.el7.ngx.x86_64.rpm&lt;/code>&lt;/p>
&lt;p>安装nginx官方的rpm（版本1.16.1）需要其它可以自行到官方查看&lt;/p>
&lt;p>&lt;a class="link" href="https://nginx.org/packages/" target="_blank" rel="noopener"
>nginx官网&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>注意：使用 &lt;code>yum install nginx&lt;/code> 安装的为WebStatic源中的1.12版&lt;/p>&lt;/blockquote>
&lt;h4 id="常用命令">常用命令
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">nginx -v &lt;span class="c1">#查看nginx版本&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service nginx start&lt;span class="p">|&lt;/span>stop&lt;span class="p">|&lt;/span>restart &lt;span class="c1">#启动|停止|重启nginx服务&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx -t &lt;span class="c1">#检查配置文件是否正确&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx -s reload &lt;span class="c1">#重载配置文件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx &lt;span class="c1">#启动nginx&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="安装php">安装PHP
&lt;/h3>&lt;p>使用命令&lt;/p>
&lt;p>&lt;code>yum install -y php72w-common php72w-fpm php72w-opcache php72w-gd php72w-mysqlnd php72w-mbstring php72w-pecl-redis php72w-pecl-memcached php72w-devel&lt;/code>&lt;/p>
&lt;p>进行安装&lt;/p>
&lt;p>这里安装了PHP PHP-FPM和一些常用模块，可以自行裁决。一般这些模块已经可以完美的支持WordPress、ZBlog等博客程序了&lt;/p>
&lt;blockquote>
&lt;p>如果想要安装PHP其它版本，把72w改成版本+w就可以咯&lt;/p>&lt;/blockquote>
&lt;h3 id="安装mysql">安装MySQL
&lt;/h3>&lt;p>参考以前写过的文章：&lt;/p>
&lt;p>&lt;a class="link" href="https://blog.gaein.cn/passages/MySQL8-CentOS7/" target="_blank" rel="noopener"
>CentOS部署MySQL8步骤&lt;/a>&lt;/p>
&lt;p>进行，这里只写主要步骤&lt;/p>
&lt;p>下载rpm&lt;/p>
&lt;p>&lt;code>wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm&lt;/code>&lt;/p>
&lt;p>//由于MySQL的rpm很大，所以采用先下载后安装&lt;/p>
&lt;p>使用命令导入MySQL rpm&lt;/p>
&lt;p>&lt;code>sudo rpm -Uvh mysql80-community-release-el7-3.noarch.rpm&lt;/code>&lt;/p>
&lt;p>使用命令&lt;/p>
&lt;p>&lt;code>yum install -y mysql-community-server &lt;/code>&lt;/p>
&lt;p>来安装&lt;/p>
&lt;h3 id="常用命令-1">常用命令
&lt;/h3>&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Config-LNMP-On-CentOS/02.webp"
loading="lazy"
alt="mysql截屏"
>&lt;/p>
&lt;p>更多命令见 &lt;a class="link" href="https://blog.gaein.cn/passages/MySQL-usage/" target="_blank" rel="noopener"
>MySQL常用命令：导入导出、创建数据库等&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">service mysqld start &lt;span class="c1">##启动&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service mysqld status &lt;span class="c1">##查看状态&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo grep &lt;span class="s1">&amp;#39;temporary password&amp;#39;&lt;/span> /var/log/mysqld.log &lt;span class="c1">##查看默认密码&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql -u root -p &lt;span class="c1">##连接&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;root&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IDENTIFIED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;pWD123456-&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">#更改密码
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SHOW&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASES&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">#显示数据库
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">USE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">数据库名&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">#切换到数据库
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">exit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">#退出
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>最新版surface pro7键盘盖兼容pro3！实测</title><link>https://blog.gaein.cn/passages/newtypecover-on-surfacepro3/</link><pubDate>Fri, 28 Feb 2020 14:23:25 +0800</pubDate><guid>https://blog.gaein.cn/passages/newtypecover-on-surfacepro3/</guid><description>&lt;p>尽管全网都在说surface pro7的键盘盖不支持pro3，但是我还是义务反顾买了一个，结果发现，完美兼容！&lt;/p>
&lt;!-- more -->
&lt;blockquote>
&lt;p>surface pro3的键盘盖终于被我玩坏了，考虑到暑假也许会买pro7（和laptop3纠结半天了）所以我准备先买一个键盘盖防止到时候纠结（我真是个机灵鬼）看了一下官方的介绍，支持pro3.于是淘宝找了一家店准备入手，结果卖家告诉我不支持pro3，百度一番也都说支持到pro4。但是我给微软打电话后，微软肯定的告诉我支持pro3并且硬核告诉我其他渠道不用参考（是真的“巨硬”）。尽管卖家一再跟我说他们是实测的，我还是买了，不行就吃半年灰呗，早晚也要用到的啊！&lt;/p>&lt;/blockquote>
&lt;h2 id="配置">配置
&lt;/h2>&lt;p>说说我实测成功的pro3吧
最低配
Microsoft surface pro3 i3 64G
系统是Windows 10 1909（Surface OEM版本）&lt;/p>
&lt;blockquote>
&lt;p>我觉得他们不能兼容的或许就是自己重装的系统的问题，没法识别type cover。我的surface pro3收来的时候是w10专业版，我自己重装了OEM系统（就为了surface的LOGO！）&lt;/p>&lt;/blockquote>
&lt;h2 id="上图">上图
&lt;/h2>&lt;p>即使是老款的surface pro3，她仍然是那么漂亮!
&lt;img src="https://s2.ax1x.com/2020/02/28/3DFlBq.md.jpg"
loading="lazy"
alt="3DFlBq.jpg"
>
surface pro3的背面还是“surface”，到了pro4就改成了标志性的巨硬四方格标&lt;/p>
&lt;p>&lt;img src="https://s2.ax1x.com/2020/02/28/3DFQun.md.jpg"
loading="lazy"
alt="3DFQun.jpg"
>
键盘材质非常棒，是微软大肆宣传的新一代 Alcantara 材质，摸上去确实很像皮革，非常舒服！据说还是非常耐脏的！
&lt;img src="https://s2.ax1x.com/2020/02/28/3DFGNT.md.jpg"
loading="lazy"
alt="3DFGNT.jpg"
>
说好的完美兼容，就要连大小都一样！下面的标已经是Microsoft了，pro3的键盘盖还是surface
&lt;img src="https://s2.ax1x.com/2020/02/28/3DFUgJ.md.jpg"
loading="lazy"
alt="3DFUgJ.jpg"
>
键程适中的键盘，非常有感觉，比起pro3的键盘进步很大了（毕竟好多年了），pro3的键盘，几乎没有手感可言。而pro7的键盘，我感觉已经对得起她的价格了！另外锁定Fn也是一个非常实用的功能。&lt;/p>
&lt;p>如图是我的系统配置，丝毫不吹，完美兼容!
&lt;img src="https://s2.ax1x.com/2020/02/28/3DF1H0.md.jpg"
loading="lazy"
alt="3DF1H0.jpg"
>&lt;/p></description></item><item><title>Office 2019安装（附激活）</title><link>https://blog.gaein.cn/passages/how-to-install-office19/</link><pubDate>Fri, 28 Feb 2020 09:29:34 +0800</pubDate><guid>https://blog.gaein.cn/passages/how-to-install-office19/</guid><description>&lt;p>闲来无事安装了Office2019，激活软件是从 HWIDGen 作者的 Github 上面拉下来的（顺手汉化了一下），KMS激活，180天&lt;/p>
&lt;blockquote>
&lt;p>2021.5.27 作者 GitHub 已经没了&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>其实网上貌似有很多类似的，但是大多数都不怎么“讲究”，再者下载的激活软件很多不能用或者有病毒，虽然我不能保证我提供的激活100%安全，但是我还是选择相信HWIDGen的开发者。&lt;/p>&lt;/blockquote>
&lt;h2 id="下载office2019">下载Office2019
&lt;/h2>&lt;p>&lt;strong>注意，office2019仅支持Windows10系统，如果想要知道您的操作系统是什么，可以在属性中查看，或者直接看左下角开始菜单的标志，如果是“开始”，则为Windows XP系统，原型的Windows标志是Windows7系统，四方格标志是Windows10系统（不一定准确，但是大多没问题！）&lt;/strong>&lt;/p>
&lt;p>如果您使用的是Windows7操作系统可以安装Office2016，不可以安装Office2019&lt;/p>
&lt;p>如果您使用的是WindowsXP操作系统那么放弃吧，转WPS吧&lt;/p>
&lt;p>下面是Office2019和Office2016的下载链接，来自 &lt;a class="link" href="https://msdn.itellyou.cn" target="_blank" rel="noopener"
>MSDN，我告诉你&lt;/a>&lt;/p>
&lt;ul>
&lt;li>Office2019 :
&lt;code>ed2k://|file|cn_office_professional_plus_2019_x86_x64_dvd_5e5be643.iso|3775004672|1E4FFA5240F21F60DC027F73F1C62FF4|/ &lt;/code>&lt;/li>
&lt;li>Office2016 :
&lt;code>ed2k://|file|cn_office_professional_plus_2016_x86_x64_dvd_6969182.iso|2588266496|27EEA4FE4BB13CD0ECCDFC24167F9E01|/ &lt;/code>&lt;/li>
&lt;/ul>
&lt;p>可以使用迅雷等工具进行下载，复制“ed2k:&amp;hellip;..|/”并粘贴即可&lt;/p>
&lt;h2 id="解压安装">解压安装
&lt;/h2>&lt;p>&lt;img src="https://s2.ax1x.com/2020/02/28/3BG4oD.png"
loading="lazy"
alt="3BG4oD.png"
>&lt;/p>
&lt;p>我将文件下载到了D:\安装包&lt;/p>
&lt;p>右键下载来的文件（它通常在D:\迅雷下载里面 根据你设置的路径而定（在复制完链接下载之前有个对话框，里面有选择的）如果找不到可以打开迅雷，通常在已完成&amp;gt;你下载的文件边上有个文件夹的标志，点击它可以打开文件夹）&lt;/p>
&lt;p>右键之后选择“解压到&amp;hellip;”，如果没有这个选项可以选择“解压到当前文件夹”，如果都没有可以去安装压缩软件（推荐Bandizip，详见 &lt;a class="link" href="https://blog.gaein.cn/passages/Open-File-in-right-way/" target="_blank" rel="noopener"
>这一篇博客&lt;/a>），或者右键&amp;gt;挂载（仅限于Windows10操作系统）&lt;/p>
&lt;p>打开解压出来的文件夹（或者挂载的盘，他们通常是最后一个盘符）&lt;/p>
&lt;p>&lt;img src="https://s2.ax1x.com/2020/02/28/3BGhdO.png"
loading="lazy"
alt="3BGhdO.png"
>&lt;/p>
&lt;p>如果你希望自动安装，可以双击setup.exe（Office2019是默认安装64位，2016默认安装32位；希望手动安装可以进入office目录，安装相应版本，推荐64位）&lt;/p>
&lt;p>&lt;strong>如果你听不懂小括号里面是啥就直接双击即可&lt;/strong>&lt;/p>
&lt;p>&lt;strong>如果你准备安装Office2016，而且觉得自己电脑配置还行的话就进入Office目录，双击“setup-64.exe”（或者类似的名字）如果无法安装再双击“setup.exe”&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://s2.ax1x.com/2020/02/28/3BGfeK.png"
loading="lazy"
alt="3BGfeK.png"
>&lt;/p>
&lt;p>&lt;img src="https://s2.ax1x.com/2020/02/28/3BGIFe.png"
loading="lazy"
alt="3BGIFe.png"
>&lt;/p>
&lt;p>安装过程是全自动，你可以坐下来歇会，大概5分钟左右（Microsoft surface pro3），好一点的电脑应该会更快，&lt;del>不过也不排除我电脑有微软本家加成&lt;/del>（如果你听不懂我在说什么等着就好）&lt;/p>
&lt;p>&lt;img src="https://s2.ax1x.com/2020/02/28/3BGTWd.png"
loading="lazy"
alt="3BGTWd.png"
>&lt;/p>
&lt;p>如图即为安装成功&lt;/p>
&lt;h2 id="更改安全设置">更改安全设置
&lt;/h2>&lt;p>如果您希望白嫖这款软件，后面的步骤是必须的。如果您希望支持微软可以去官方购买Office2019激活密钥或者淘宝购买&lt;/p>
&lt;p>在开始下面的操作之前可以新建一个文件夹，比如G:\工具。稍后我们的激活操作将在这里面进行，请确保您能够找到此文件夹&lt;/p>
&lt;ol>
&lt;li>
&lt;p>打开安全中心（如果您使用其它软件可以尝试直接进行下一步操作，再杀毒软件报告含有病毒时选择允许就可以了）
&lt;strong>激活软件由于涉及到敏感操作，会被判定为病毒&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://s2.ax1x.com/2020/02/28/3BGHSA.png"
loading="lazy"
alt="3BGHSA.png"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>点击管理设置
&lt;img src="https://s2.ax1x.com/2020/02/28/3BGbQI.png"
loading="lazy"
alt="3BGbQI.png"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>添加或删除排除项
&lt;img src="https://s2.ax1x.com/2020/02/28/3BGqyt.png"
loading="lazy"
alt="3BGqyt.png"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>添加排除项&amp;gt;文件夹。选择我们刚才新建的文件夹G:\工具&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="激活office">激活Office
&lt;/h2>&lt;p>首先下载激活软件&lt;/p>
&lt;p>该软件和知名的系统数字权利激活软件HWIDGen为同一人开发，我选择相信软件开发者&lt;/p>
&lt;p>注意，在网上找到的激活软件仍然有含有病毒的可能性。我提供的软件是从作者的Github（源码仓库）获取的&lt;/p>
&lt;p>暂时不可用 &lt;del>点击此处下载: &lt;a class="link" href="https://static.cdn.gaein.cn/files/tools/ActivateTools/" target="_blank" rel="noopener"
>https://static.cdn.gaein.cn/files/tools/ActivateTools/&lt;/a>激活office.zip&lt;/del>&lt;/p>
&lt;p>（我已经将它翻译为了中文，当然还是混有部分英文的。不过以下的图片是全英文的）&lt;/p>
&lt;ol>
&lt;li>
&lt;p>解压到文件夹
&lt;img src="https://s2.ax1x.com/2020/02/28/3BGLOP.png"
loading="lazy"
alt="3BGLOP.png"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>进入“v36”
&lt;img src="https://s2.ax1x.com/2020/02/28/3BGjw8.png"
loading="lazy"
alt="3BGjw8.png"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>右键，以管理员身份运行
&lt;img src="https://s2.ax1x.com/2020/02/28/3BGzFg.png"
loading="lazy"
alt="3BGzFg.png"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>出现此窗口，然后稍等片刻（大概有一两分钟吧）
&lt;img src="https://s2.ax1x.com/2020/02/28/3BJSYQ.png"
loading="lazy"
alt="3BJSYQ.png"
>&lt;/p>
&lt;p>程序会自动检查未激活的Windows系统和Office并激活他们。此时如果杀毒软件弹出任何禁止的东西，请选择允许运行&lt;/p>
&lt;p>&lt;img src="https://s2.ax1x.com/2020/02/28/3BJpWj.png"
loading="lazy"
alt="3BJpWj.png"
>&lt;/p>
&lt;p>出现到此即为成功（汉化之后的会有激活成功字样）&lt;/p>
&lt;p>&lt;img src="https://s2.ax1x.com/2020/02/28/3BriZj.png"
loading="lazy"
alt="3BriZj.png"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>（附汉化版图片）
5. 打开Office（word excel都行），弹窗，点击接受
&lt;img src="https://s2.ax1x.com/2020/02/28/3BJCSs.png"
loading="lazy"
alt="3BJCSs.png"
>
6. 至此Office激活完成!
&lt;img src="https://s2.ax1x.com/2020/02/28/3BJPln.png"
loading="lazy"
alt="3BJPln.png"
>&lt;/p>
&lt;p>&lt;strong>安装的是初始版本，可以点击更新进行更新&lt;/strong>
&lt;img src="https://s2.ax1x.com/2020/02/28/3BJiyq.png"
loading="lazy"
alt="3BJiyq.png"
>&lt;/p></description></item><item><title>打开文档公式乱码的解决办法——使用正确的软件</title><link>https://blog.gaein.cn/passages/openfile-in-rightway/</link><pubDate>Thu, 20 Feb 2020 08:29:59 +0800</pubDate><guid>https://blog.gaein.cn/passages/openfile-in-rightway/</guid><description>&lt;p>由于疫情原因，不能上学，学校只好把学习资料、试题发到同学们手中，于是我开始遇到各种提问，为什么打不开、打开是空白、公式乱码、缺页&amp;hellip;其中大多数是软件的问题，很多人都用了QQ浏览器。我就好奇腾讯你不好好开发浏览器搞什么飞机。&lt;/p>
&lt;!-- more -->
&lt;p>** 既然您点进来了，一定是遇到了相应的问题，请阅读本文。感谢您的合作！ **&lt;/p>
&lt;h2 id="文件的类型">文件的类型
&lt;/h2>&lt;p>&lt;img src="https://s2.ax1x.com/2020/02/20/3Zd3P1.png"
loading="lazy"
alt="3Zd3P1.png"
>
首先来说一下经常遇到的文件类型，主要是看文件的后缀名，就是&amp;quot;.&amp;ldquo;后面的字符，比如VSCode.exe，那么后缀名就是.exe，由此判断是可执行程序&lt;/p>
&lt;blockquote>
&lt;p>.doc或.docx 最常见的文档类型，是word文档；.doc是旧版本的类型（word97-2003）文档
.xls或.xlsx是excel文档（表格文件）
.ppt或.pptx是PowerPoint文档（就是我们常说的PPT）
以上这些属于一个类型，我们暂且叫他文档。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>.pdf,是“便携式文档格式”，PDF文件，无论在哪种打印机上都可保证精确的颜色和准确的打印效果，即PDF会忠实地再现原稿的每一个字符、颜色以及图象。PDF不会受软件不同而影响，使用非常广泛。而且一般软件不能编辑PDF内容，有利于保护内容不受篡改。通常我们就称之为PDF。
** 强烈建议学校将文件排版好后输出为PDF文件，这样不会因为使用错误的word软件而造成公式乱码 **&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>.txt文本。纯文本文件几乎可以使用任何文本查看软件打开，如果出现乱码电脑版可以下载notepad++，更改编码查看。不再赘述。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>. rar .7z 或.zip文件。是压缩文件，通常包含一个或多个文件。&lt;/p>&lt;/blockquote>
&lt;h2 id="文档的打开方式">文档的打开方式
&lt;/h2>&lt;p>推荐两家的软件：&lt;/p>
&lt;ol>
&lt;li>Microsoft Office&lt;/li>
&lt;li>金山WPS&lt;/li>
&lt;/ol>
&lt;h4 id="1使用microsoft-office">1，使用Microsoft Office
&lt;/h4>&lt;h6 id="简介">简介
&lt;/h6>&lt;p>使用Microsoft Office办公套件打开，Office办公套件包含word、excel、ppt等。我们在学习或者办公室常见的word2003就属于office（当然是老版本了）。
&lt;img src="https://s2.ax1x.com/2020/02/20/3Z1X9g.jpg"
loading="lazy"
alt="3Z1X9g.jpg"
>
鉴于下发的文件有部分为docx、xlsx、pptx，无法使用老版本打开（或者打开后出现错误），推荐安装最新版Microsft Office 2019或者Office365。当然，这些软件都是收费的。&lt;/p>
&lt;ul>
&lt;li>注：Microsoft是微软，Office是微软的一个产品，微软目前是全球最大的电脑软件提供商，其创始人是比尔盖茨 *
** 注意，尽管office软件的名字是英文，但他们是全中文界面的 **
** 注意，手机版的office是可以免费下载安装的，并且可以查看文档。但是想要编辑、保存文档需要付费 **&lt;/li>
&lt;/ul>
&lt;h6 id="安装电脑版office">安装电脑版Office
&lt;/h6>&lt;p>&lt;img src="https://s2.ax1x.com/2020/02/20/3ZdOZ4.png"
loading="lazy"
alt="3ZdOZ4.png"
>
如图是我使用的Office Word 2019专业增强版&lt;/p>
&lt;blockquote>
&lt;p>如果你想要免费的永久安装使用Microsoft Office 2019，请看我的另外一篇博客：&lt;a class="link" href="https://blog.gaein.cn/passages/install-office19/" target="_blank" rel="noopener"
>Microsoft Office 2019 安装与激活（点击跳转）&lt;/a>&lt;/p>&lt;/blockquote>
&lt;h6 id="安装手机版office">安装手机版Office
&lt;/h6>&lt;p>如果想要使用手机版Microsfot Office办公套件，可以在软件商城里面搜索Word、Excel或者Powerpoint。结果通常会是金山WPS或者Microsoft Office Word或Microsoft Excel或Microsoft Office Powerpoint。注意下载安装您想要的（金山WPS或者Microsoft Office）
如图是Word的详情页面
&lt;img src="https://s2.ax1x.com/2020/02/20/3ZlCMn.png"
loading="lazy"
alt="3ZlCMn.png"
>
请注意核实开发者或开发商为Microsoft Corporation或微软
&lt;img src="https://s2.ax1x.com/2020/02/20/3Z39H0.jpg"
loading="lazy"
alt="3Z39H0.jpg"
>
如图便不是我们需要的Word，不要下载这种软件
** 请确保下载的是正儿八经的Office Word（或Excel、Powerpoint），不推荐其他软件！ **
如果你不能确保在软件商城里面找到的是真正的Office，请到官网（下面链接）下载
&lt;a class="link" href="https://products.office.com/zh-cn/mobile/office-mobile-apps-for-android" target="_blank" rel="noopener"
>https://products.office.com/zh-cn/mobile/office-mobile-apps-for-android&lt;/a>&lt;/p>
&lt;h4 id="2使用金山wps">2，使用金山WPS
&lt;/h4>&lt;h6 id="简介-1">简介
&lt;/h6>&lt;p>另外一个类似于Microsoft Office的软件是金山WPS，包含WPS文字（功能对应Office Word）、WPS表格等等。金山WPS是免费的国产软件，相比于Office来说它的缺点是含有广告。如果你不是特别介意的话，可以使用金山WPS查看、编辑文件，如果你介意请参考上面那篇博客，免费安装Office 2019（略费事），或者花钱购买。* 为了保护版权，有能力最好要购买正版。 *
下载金山WPS直接在手机应用商城里面搜索WPS即可，有的应用商城搜索word等也会显示出金山WPS（为了保证结果准确，推荐搜索WPS）&lt;/p>
&lt;h6 id="安装电脑版wps">安装电脑版WPS
&lt;/h6>&lt;p>电脑版的金山WPS直接访问官网下载即可，金山官网链接：https://www.wps.cn/&lt;/p>
&lt;h6 id="安装手机版wps">安装手机版WPS
&lt;/h6>&lt;p>&lt;img src="https://s2.ax1x.com/2020/02/20/3Zliq0.png"
loading="lazy"
alt="3Zliq0.png"
>
如图，是苹果AppStore的搜索结果。第一个结果是Microsoft Office Word，属于我们介绍的Office办公套件；第二个结果就是金山WPS
&lt;img src="https://s2.ax1x.com/2020/02/20/3ZlPrq.png"
loading="lazy"
alt="3ZlPrq.png"
>
金山WPS的详情页面
** 为了防止下载错误的软件而带来不便或损失，请务必核实一下软件开发商/开发者为金山办公软件或金山办公软件有限公司或者Kingsoft **&lt;/p>
&lt;p>########## ** 再次强调，除了Office和WPS，不推荐任何其他的软件。这两家在处理文档方面是巨头，其他品牌的产品基本没有能与之媲美的 **&lt;/p>
&lt;h2 id="pdf的打开方式">PDF的打开方式
&lt;/h2>&lt;p>通常，任意浏览器都能打开PDF。但是我观察到有的同学在用QQ浏览器打开WPF文件时出现了缺页现象。
&lt;a class="link" href="https://imgchr.com/i/3ZGk6J" target="_blank" rel="noopener"
>&lt;img src="https://s2.ax1x.com/2020/02/20/3ZGk6J.png"
loading="lazy"
alt="3ZGk6J.png"
>&lt;/a>
如果你感到自己的PDF文件缺页的话，请下载以下软件：&lt;/p>
&lt;ol>
&lt;li>Adobe Acrobat Reader&lt;/li>
&lt;li>福昕PDF阅读器安卓版（或IOS版）&lt;/li>
&lt;/ol>
&lt;h4 id="1使用adobe-acrobat-reader">1，使用Adobe Acrobat Reader
&lt;/h4>&lt;p>PDF是由Adobe公司出品的，同样Adobe Acrobat Reader也是该公司的产品之一（大名鼎鼎的PhotoShop也是改公司的产品，“PS”、“P图”则是由这个产品衍生出的词汇），Adobe Acrobat Reader有着良好的兼容性。缺点是体积较大。
&lt;a class="link" href="https://imgchr.com/i/3ZdqLF" target="_blank" rel="noopener"
>&lt;img src="https://s2.ax1x.com/2020/02/20/3ZdqLF.png"
loading="lazy"
alt="3ZdqLF.png"
>&lt;/a>
图片是我使用的收费版Adobe Acroat Pro
Adobe Acrobat Reader是免费软件。拥有编辑功能的Adobe Acrobat Pro是收费的。
&lt;img src="https://s2.ax1x.com/2020/02/20/3ZGou9.png"
loading="lazy"
alt="3ZGou9.png"
>
如图是Adobe官方的介绍&lt;/p>
&lt;h6 id="安装电脑版acrobat-reader">安装电脑版Acrobat Reader
&lt;/h6>&lt;p>到官网下载：
&lt;a class="link" href="https://get.adobe.com/cn/reader/?promoid=KSWLH" target="_blank" rel="noopener"
>https://get.adobe.com/cn/reader/?promoid=KSWLH&lt;/a>
注意不要勾选“可选程序”中的可选程序：“是，请安装免费的 McAfee Security Scan Plus 工具以检测我的电脑安全。该工具不会更改现有防病毒程序或电脑设置。”；当然，如果您希望安装杀毒软件也可以勾选，McAfee Security Scan Plus是全球知名的杀毒软件。
&lt;img src="https://s2.ax1x.com/2020/02/20/3ZJr8O.png"
loading="lazy"
alt="3ZJr8O.png"
>
下载界面&lt;/p>
&lt;h6 id="安装手机版acrobat-reader">安装手机版Acrobat Reader
&lt;/h6>&lt;p>在应用商城中搜索Acrobat Reader，安装即可。注意核实软件开发商/开发者为Adobe Inc.&lt;/p>
&lt;h4 id="2使用福昕pdffoxit-pdf">2，使用福昕PDF（Foxit PDF）
&lt;/h4>&lt;p>福昕软件开发有限公司（Foxit Corporation）是全球领先的PDF软件方案与服务提供商，也是国内为数不多的具有全球影响力和竞争力的中国的软件品牌和基础软件开发商之一。福昕PDF阅读器弥补了Adobe Acrobat Reader的缺点，启动更加迅速，体积小巧。但是免费版会在编辑后留下水印。&lt;/p>
&lt;h6 id="安装电脑版福昕pdf">安装电脑版福昕PDF
&lt;/h6>&lt;p>到官网下载：
&lt;a class="link" href="https://www.foxitsoftware.cn/pdf-reader/" target="_blank" rel="noopener"
>https://www.foxitsoftware.cn/pdf-reader/&lt;/a>
福昕的版本较多，可以下载其他版本尝试。注意，很多版本都是收费的。考虑到平常只涉及基础的PDF阅读查看，下载如上链接的PDF阅读器即可。&lt;/p>
&lt;h6 id="安装手机版福昕pdf">安装手机版福昕PDF
&lt;/h6>&lt;p>在软件商城中搜索福昕PDF
注意核实开发者/开发商为‪Foxit Software Inc.或福昕软件
&lt;img src="https://s2.ax1x.com/2020/02/20/3eFaon.png"
loading="lazy"
alt="3eFaon.png"
>
如果不能确定可以到官网下载
&lt;a class="link" href="https://www.foxitsoftware.cn/pdf-reader-mobile/" target="_blank" rel="noopener"
>https://www.foxitsoftware.cn/pdf-reader-mobile/&lt;/a>&lt;/p>
&lt;h2 id="压缩文件的打开方式">压缩文件的打开方式
&lt;/h2>&lt;h6 id="手机">手机
&lt;/h6>&lt;p>.7z .zip文件可以使用手机自带的解压缩功能（限于Android系统），如果希望查看.rar文件，或者手机系统自带的解压出来的文件有问题，可以下载ES文件浏览器，或者应用商城内搜索解压软件，随意下载即可。&lt;/p>
&lt;h6 id="电脑">电脑
&lt;/h6>&lt;p>Windows10系统自带解压能够解压.7z .zip .rar文件，双击文件打开，点击上方提取即可。
如果不希望使用自带的解压功能可以考虑Bandizip或者winRAR&lt;/p>
&lt;h6 id="bandizip">Bandizip
&lt;/h6>&lt;p>界面美观简洁的压缩解压软件，无任何广告且个人/家用100%免费
支持所有常见类型的压缩文件。官网下载链接：
&lt;a class="link" href="http://www.bandisoft.com/bandizip/" target="_blank" rel="noopener"
>http://www.bandisoft.com/bandizip/&lt;/a>
界面如图
&lt;img src="https://s2.ax1x.com/2020/02/20/3Z0R4s.png"
loading="lazy"
alt="3Z0R4s.png"
>
** 我在测试版本中发现它加入了广告，但是目前的最新版是没有广告的，而且测试版只是下角有一个小框，写着购买专业版 **&lt;/p>
&lt;h6 id="winrar">WinRAR
&lt;/h6>&lt;p>&lt;img src="https://s2.ax1x.com/2020/02/20/3Z0pkj.png"
loading="lazy"
alt="3Z0pkj.png"
>
如图是加持广告的WinRAR
老牌压缩解压软件，缺点是个人免费版含有广告
实测压缩解压速度比bandizip稍快
&lt;a class="link" href="http://www.winrar.com.cn/download.htm" target="_blank" rel="noopener"
>http://www.winrar.com.cn/download.htm&lt;/a>
下载选择免费个人版下载即可，如果您不知道自己的操作系统是32位还是64位下载32位即可。如果您有兴趣可以右键我的电脑（或计算机或此电脑）&amp;gt;属性
如果系统是Winows XP，那么很大可能是32位系统，如果在Windows XP后面注明了x64版则是64位版本
如果系统是Windows 7 则系统类型：那行会写出64位操作系统或32位操作系统
如果系统是Windows10，那么很大可能是64位系统，系统类型：那行会有64位操作系统或32位操作系统
&lt;img src="https://s2.ax1x.com/2020/02/20/3ZdmKU.png"
loading="lazy"
alt="3ZdmKU.png"
>
全文终，感谢您的认真阅读
对应的文件格式一定要用相应的专业软件打开，像QQ浏览器这样的软件不知道害了多少人&lt;/p></description></item><item><title>PHP考勤系统源码 利用PHP实现简单的打卡考勤 超详细教程+实例+代码（一）</title><link>https://blog.gaein.cn/passages/checker-webpage-1/</link><pubDate>Sat, 08 Feb 2020 22:36:25 +0800</pubDate><guid>https://blog.gaein.cn/passages/checker-webpage-1/</guid><description>&lt;p>利用PHP实现简单的考勤打卡、人数统计功能。&lt;/p>
&lt;blockquote>
&lt;p>这什么屑玩意啊，黑历史黑历史。&lt;/p>&lt;/blockquote>
&lt;h2 id="先讲个故事">先讲个故事&amp;hellip;
&lt;/h2>&lt;p>由于疫情原因，开学延迟，班主任为了监督我们学习，所以叫我们每天打卡。那么就要到群里点人，还要统计，谁打卡了谁没打卡谁迟到&amp;hellip;我一想太麻烦了&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Checker-Webpage-1/01.webp"
loading="lazy"
alt="截屏1"
>&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Checker-Webpage-1/02.webp"
loading="lazy"
alt="截屏2"
>&lt;/p>
&lt;p>于是我在群里水了一句，要不然开发个考勤系统吧&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Checker-Webpage-1/03.webp"
loading="lazy"
alt="截屏3"
>&lt;/p>
&lt;p>当然我当时的开发指的是“面向百度”编程（就是随便找个什么源码改一下title。&lt;/p>
&lt;p>结果我发现行不通&amp;hellip;没有符合我要求的源码，只好试试了。&lt;/p>
&lt;p>我虽然接触了点编程，不过PHP还真没碰过，想想编程语言也都是26个字母只好硬着头皮干了。&lt;/p>
&lt;h2 id="要求">要求
&lt;/h2>&lt;p>明确一下自己的期望吧：&lt;/p>
&lt;ol>
&lt;li>能记录打卡人（开始就这一个想法）&lt;/li>
&lt;/ol>
&lt;p>好的没有了。&lt;/p>
&lt;p>现在实现的功能（很多都是我晚上在被窝的新奇想法）&lt;/p>
&lt;ol>
&lt;li>记录打卡人，打卡时间，自动标注准时或者迟到；&lt;/li>
&lt;li>打卡成功后返回页面，提示成功与否并且提示信息（非常智障的实现，我跳转了一个html并且get传参信息，当时自己不知道php echo能输出html）；（2021补:什么我为什么要用php echo来输出html？？？）&lt;/li>
&lt;li>后台统计打卡人数、未打卡人数、迟到人数还有未打卡人名单；&lt;/li>
&lt;/ol>
&lt;h2 id="准备">准备
&lt;/h2>&lt;ol>
&lt;li>语言：思考来思考去，服务器只装着PHP，空间倒是有 &lt;code>.NET fw&lt;/code>，不过看看还是PHP的网站居多；&lt;/li>
&lt;li>实现：操作数据库一想就头大了，MySQL这玩意真玩不了，上次导入旧博客数据就差点没玩死我，想想还是直接磁盘上写文件吧；&lt;/li>
&lt;li>服务器：本来想用我一个虚拟主机来着，不过那玩意权限有问题，写不了文件，无奈搬到网站服务器上面；&lt;/li>
&lt;li>IDE：没有专门去找PHP的IDE，直接用的vscode+网上随便找一个在线PHP作为调试；&lt;/li>
&lt;/ol>
&lt;h2 id="开工">开工
&lt;/h2>&lt;h3 id="表单页面">表单页面
&lt;/h3>&lt;h4 id="表单创建">表单创建
&lt;/h4>&lt;p>想来想去输入一个姓名就可以了，后来又想想需要一个时间，那么html如下:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;!DOCTYPE html&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;utf-8&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>考勤打卡&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">form&lt;/span> &lt;span class="na">action&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;process.php&amp;#34;&lt;/span> &lt;span class="na">method&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;post&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 姓名：&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;text&amp;#34;&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 时间：&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;text&amp;#34;&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 日期：&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;text&amp;#34;&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;filename&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;submit&amp;#34;&lt;/span> &lt;span class="na">value&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;打卡 &amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">form&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>看起来是这样的：&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Checker-Webpage-1/04.webp"
loading="lazy"
alt="界面"
>&lt;/p>
&lt;p>（丑死了）&lt;/p>
&lt;p>&lt;code>&amp;lt;!DOCTYPE html&amp;gt;&lt;/code> 和 &lt;code>meta&lt;/code> 是必须的，否则有可能乱码。&lt;/p>
&lt;p>&lt;code>form&lt;/code> 标签里面是表单，&lt;code>action&lt;/code> 后面是提交到的地址，&lt;code>method&lt;/code> 是方法（别问我为啥用 &lt;code>post&lt;/code> ，因为它看起来好看）&lt;/p>
&lt;p>&lt;code>input&lt;/code> 中的 &lt;code>type&lt;/code> 是输入的类型，&lt;code>text&lt;/code> 自然就是文本啦，&lt;code>submit&lt;/code> 是提交表单，&lt;code>name&lt;/code> 是参数的名字（我日期参数是 &lt;code>filename&lt;/code> 是因为我想把存储打卡信息的文件用日期命名），&lt;code>value&lt;/code> 是默认的值。&lt;/p>
&lt;h4 id="时间获取">时间获取
&lt;/h4>&lt;p>那么又一个问题来了，时间和日期怎么获取？这就要用的&lt;code>javascript&lt;/code> 了，&lt;code>js&lt;/code> 获取时间和日期后再去改动 &lt;code>html&lt;/code>，为了找到他们我把他们用 &lt;code>div&lt;/code> 框起来然后给他们 &lt;code>id&lt;/code> 为 &lt;code>0&lt;/code> 和 &lt;code>1&lt;/code>（懒死了）&lt;/p>
&lt;p>&lt;code>js&lt;/code> 的时间获取百度一下就有，不过获取的都是浏览网页的人电脑上的时间，我怕别人通过修改本地时间来掩盖自己迟到的事实，所以我要去获取网络时间。&lt;/p>
&lt;p>我的方法是 &lt;code>get&lt;/code> 请求自己的服务器，在返回的头里面有时间信息（服务器的）。当然，你也可以百度一下时间 &lt;code>api&lt;/code>，调用起来也会很方便的。
&lt;code>js&lt;/code> 代码如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">script&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">getTime&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ajax&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">function&lt;/span> &lt;span class="nx">ajax&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">option&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">xhr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">XMLHttpRequest&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">xhr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">XMLHttpRequest&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">// ie
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">xhr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">ActiveObject&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Microsoft&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 通过get的方式请求当前文件
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;get&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">null&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 监听请求状态变化
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">onreadystatechange&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">time&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">curDate&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">readyState&lt;/span>&lt;span class="o">===&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 获取响应头里的时间戳
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">time&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getResponseHeader&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Date&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">curDate&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nb">Date&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//下面修改HTML
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;0&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">innerHTML&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;时间：&amp;lt;input type=&amp;#39;text&amp;#39; name=&amp;#39;time&amp;#39; value=&amp;#39;&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">curDate&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getHours&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">curDate&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getMinutes&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34;&amp;#39; readonly&amp;gt;&amp;lt;br&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="c1">//拼接时间
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;0&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">innerHTML&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;日期：&amp;lt;input type=&amp;#39;text&amp;#39; name=&amp;#39;filename&amp;#39; value=&amp;#39;&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">curDate&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getFullYear&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">curDate&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getMonth&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">curDate&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getDate&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34;&amp;#39; readonly&amp;gt;&amp;lt;br&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="c1">//通过readonly阻止修改时间
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="err">/script&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="页面代码">页面代码
&lt;/h4>&lt;p>因为HTML是顺序加载的，所以我希望 &lt;code>HTML&lt;/code> 加载完全后再读取&lt;code>js&lt;/code>（否则 &lt;code>js&lt;/code> 会找不到 &lt;code>id&lt;/code> 为 &lt;code>0&lt;/code> 的 &lt;code>div&lt;/code>），所以我们写个 &lt;code>onload&lt;/code>，为了刷新时间我在 &lt;code>getTime&lt;/code> 函数里面利用 &lt;code>setTimeout&lt;/code> 调用它自己实现定时（一分钟）刷新。HTML全文如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;!DOCTYPE html&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;utf-8&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>考勤打卡&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">function&lt;/span> &lt;span class="nx">getTime&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ajax&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">function&lt;/span> &lt;span class="nx">ajax&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">option&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">xhr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">XMLHttpRequest&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">xhr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">XMLHttpRequest&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">// ie
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">xhr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">ActiveObject&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Microsoft&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 通过get的方式请求当前文件
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;get&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="c1">//可以把/改成https://www.baidu.com/
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">null&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 监听请求状态变化
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">onreadystatechange&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">time&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">curDate&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">readyState&lt;/span>&lt;span class="o">===&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 获取响应头里的时间戳
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">time&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getResponseHeader&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Date&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">curDate&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nb">Date&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//下面修改HTML
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;0&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">innerHTML&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;时间：&amp;lt;input type=&amp;#39;text&amp;#39; name=&amp;#39;time&amp;#39; value=&amp;#39;&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">curDate&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getHours&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">cur&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DateGetMinutes&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34;&amp;#39; readonly&amp;gt;&amp;lt;br&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="c1">//拼接时间
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">innerHTML&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;日期：&amp;lt;input type=&amp;#39;text&amp;#39; name=&amp;#39;filename&amp;#39; value=&amp;#39;&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">curDate&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getFullYear&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">curDate&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getMonth&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">curDate&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getDate&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34;&amp;#39; readonly&amp;gt;&amp;lt;br&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="c1">//通过readonly阻止修改时间
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">getTime&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">60000&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span> &lt;span class="na">onload&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;getTime()&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">form&lt;/span> &lt;span class="na">action&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;process.php&amp;#34;&lt;/span> &lt;span class="na">method&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;post&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 姓名：&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;text&amp;#34;&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;0&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;submit&amp;#34;&lt;/span> &lt;span class="na">value&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;打卡 &amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">form&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>很可惜在自己家电脑上面是无法完成测试的，&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Checker-Webpage-1/05.webp"
loading="lazy"
alt="CORS"
>&lt;/p>
&lt;p>把html上传到服务器之后效果是这样的:&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Checker-Webpage-1/06.webp"
loading="lazy"
alt="效果"
>&lt;/p>
&lt;p>虽然很丑，但是功能实现了，手动试一试确实无法修改时间、日期，而且时间也会每分钟刷新&lt;/p>
&lt;h3 id="php页面">PHP页面
&lt;/h3>&lt;blockquote>
&lt;p>由于PHP较为奇特的语法，和跟没有一样的报错，坑了我很长时间。PHP中字符串用 &lt;code>.&lt;/code> 拼接、变量无需声明前面加上 &lt;code>$&lt;/code> 即可&amp;hellip;建议先过一遍菜鸟教程或者w3school&lt;/p>&lt;/blockquote>
&lt;h4 id="参数接收">参数接收
&lt;/h4>&lt;p>PHP中接收到的POST的参数的值在&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$_POST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;参数名&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>GET的在&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$_GET&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;参数名&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="参数处理">参数处理
&lt;/h4>&lt;h5 id="文件名">文件名
&lt;/h5>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$filename&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$_POST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;filename&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="s2">&amp;#34;txt&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="c1">//拼接文件名
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="姓名">姓名
&lt;/h5>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$_POST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="时间">时间
&lt;/h5>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$time&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">str_replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nv">$_POST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">]);&lt;/span>&lt;span class="c1">//把时间里的“:”去除掉
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">if&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="nx">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="nv">$time&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">730&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="c1">//7:30之后迟到
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$name&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="s2">&amp;#34;[迟到]&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$name&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="s2">&amp;#34;[准时]&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="写入文件">写入文件
&lt;/h5>&lt;p>我使用的是函数&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">file_put_contents&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">文件&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">内容&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">模式可选&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>文件是文件的路径（字符串），比如/root/test.txt；（没有则创建一个文件）&lt;/p>
&lt;blockquote>
&lt;p>注意：当无法创建且无法写入文件时，应该检查是否有权限。当能够创建但是无法写入文件时，应该检查首次写入的字符串是否为空，再检查后续代码是否有相关的操作覆盖了该文件，最后记得check一下你的磁盘空间（真的，我的硬盘满了，我检查了一天代码&amp;hellip;）&lt;/p>&lt;/blockquote>
&lt;p>内容是需要写入文件的内容；
模式是写入文件的模式，它包括：&lt;/p>
&lt;ul>
&lt;li>FILE_USE_INCLUDE_PATH //检查 &lt;em>filename&lt;/em> 副本的内置路径?&lt;/li>
&lt;li>FILE_APPEND //添加模式更改文件，向文件的末尾加入字符串&lt;/li>
&lt;li>LOCK_EX //锁定文件&lt;/li>
&lt;/ul>
&lt;p>//如果模式为空则采用覆盖原内容的方式写入&lt;/p>
&lt;p>它相对于 &lt;code>fopen&lt;/code> 再 &lt;code>write&lt;/code> 再 &lt;code>close&lt;/code>
来说更简洁，功能上几乎是一样的。
我们写入的文件要求内容格式大致如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">张三[准时] | 7:25
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">李四[迟到] | 7:33
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这样后续我们可以通过计算“|”的数量来得出打卡人数，通过“[迟到]”的数量来得出迟到人数（当然我并不是这么办的，刚想起来这么机智的办法）
那么下面我们来写入文件：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$str&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$name&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="s2">&amp;#34; | &amp;#34;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="nv">$_POST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">file_put_contents&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$filename&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nv">$str&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">FILE_APPEND&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">echo&lt;/span> &lt;span class="s2">&amp;#34;打卡成功&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>那么PHP的全文是：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;?&lt;/span>&lt;span class="nx">php&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$filename&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$_POST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;filename&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="s2">&amp;#34;txt&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="c1">//拼接文件名
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nv">$name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$_POST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$time&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">str_replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nv">$_POST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">]);&lt;/span>&lt;span class="c1">//把时间里的“:”去除掉
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">if&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="nx">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="nv">$time&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">730&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="c1">//7:30之后迟到
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$name&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="s2">&amp;#34;[迟到]&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$name&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="s2">&amp;#34;[准时]&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$str&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$name&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="s2">&amp;#34; | &amp;#34;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="nv">$_POST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="c1">// \n的目的是在文件里面换行
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">file_put_contents&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$filename&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nv">$str&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">FILE_APPEND&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">or&lt;/span> &lt;span class="k">die&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;打卡失败&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">echo&lt;/span> &lt;span class="s2">&amp;#34;打卡成功&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">?&amp;gt;&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>让我们把前面的HTML代码保存到 &lt;code>index.html&lt;/code>，上面的 &lt;code>php&lt;/code> 保存到 &lt;code>process.php&lt;/code>，上传到服务器试试吧！&lt;/p>
&lt;p>输入姓名提交表单：&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Checker-Webpage-1/06.webp"
loading="lazy"
alt="表单"
>&lt;/p>
&lt;p>POST到PHP，输出成功&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Checker-Webpage-1/07.webp"
loading="lazy"
alt="结果"
>&lt;/p>
&lt;blockquote>
&lt;p>如果PHP不输出任何内容，可以考虑在第一行加入一个 echo &amp;ldquo;test&amp;rdquo;; ，如果仍然不输出任何内容，那么可能是你的代码有问题&lt;/p>&lt;/blockquote>
&lt;p>打卡前文件列表：&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Checker-Webpage-1/08.webp"
loading="lazy"
alt="列表"
>&lt;/p>
&lt;p>打卡后文件列表：&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Checker-Webpage-1/09.webp"
loading="lazy"
alt="列表2"
>&lt;/p>
&lt;p>TXT内容：&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Checker-Webpage-1/10.webp"
loading="lazy"
alt="文件内容"
>&lt;/p>
&lt;p>（一）完结
实在是太累了，其他功能在后续的（二）中说&lt;/p>
&lt;p>代码自己copy，成品会在（二）p.s.也没准是（三）中放出来&lt;/p>
&lt;p>如果你觉得有用或者有需要补充之处不妨评论一下&lt;/p></description></item><item><title>在surface pro上使用WindowsToGo - surface pro启动win to go</title><link>https://blog.gaein.cn/passages/wtg-on-surface/</link><pubDate>Sun, 02 Feb 2020 08:25:08 +0800</pubDate><guid>https://blog.gaein.cn/passages/wtg-on-surface/</guid><description>&lt;p>在上一篇博客中我介绍了WindowsToGo，那么如何在surface上面使用WTG呢？我重复设置了很多次也参考了网上设置surface Book的教程，终于找到了完美的解决方案。&lt;/p>
&lt;!-- more -->
&lt;blockquote>
&lt;p>传送门：世界那么大，旅行时别忘了带上Windows——windows to go 入坑 &lt;a class="link" href="https://blog.gaein.cn/passages/windows-to-go/" target="_blank" rel="noopener"
>https://blog.gaein.cn/passages/windows-to-go/&lt;/a>&lt;/p>&lt;/blockquote>
&lt;h2 id="进入uefi固件设置bios设置">进入UEFI固件设置（BIOS设置）
&lt;/h2>&lt;p>方法一：在关机时候进入UEFI固件设置&lt;/p>
&lt;ol>
&lt;li>关闭 Surface，然后等待大约 10 秒钟以确保其处于关闭状态。&lt;/li>
&lt;li>按住 Surface 上的调高音量按钮，同时按下并释放电源按钮。&lt;/li>
&lt;li>屏幕上会显示 Microsoft 或 Surface 徽标。继续按住调高音量按钮。显示 UEFI 屏幕后，释放此按钮。&lt;/li>
&lt;/ol>
&lt;p>方法二：通过 Windows 加载 UEFI 固件设置菜单&lt;/p>
&lt;ol>
&lt;li>选择“开始”菜单&amp;gt;“设置”&amp;gt;“更新和安全”&amp;gt;“恢复”。&lt;/li>
&lt;li>在“高级启动”下，选择“立即重启”。
&lt;img src="https://s2.ax1x.com/2020/02/05/1ruAnx.png"
loading="lazy"
alt="设置菜单"
>&lt;/li>
&lt;li>在“选择一个选项”下，选择“疑难解答”&amp;gt;“高级选项”&amp;gt;“UEFI固件设置”，然后选择“重启”&lt;/li>
&lt;/ol>
&lt;h2 id="操作系统设置">操作系统设置
&lt;/h2>&lt;ol>
&lt;li>打开“此电脑”观察系统盘图标上面是否有一个小锁的标准如果有，继续，没有则重启进入BIOS。&lt;/li>
&lt;li>右键系统盘&amp;gt;“取消或关闭BitLocker”&lt;/li>
&lt;/ol>
&lt;h2 id="uefi固件设置">UEFI固件设置
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>关闭TPM&lt;/p>
&lt;/li>
&lt;li>
&lt;p>更改启动顺序，将usb调到ssd之前
如图所示（别问我怎么拍照的，我扫描仪扫的）&lt;/p>
&lt;blockquote>
&lt;p>注意：我使用的是surface pro3，固件设置和后续的pro4、5、6、7图形界面有很大区别，但是选项是相通的嘛&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://s2.ax1x.com/2020/02/05/1ruaCQ.jpg"
loading="lazy"
alt="UEFI固件设置"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="插入u盘重新启动即可进入wtg系统">插入U盘，重新启动即可进入WTG系统
&lt;/h2></description></item><item><title>世界那么大，旅行时别忘了带上Windows——windows to go 入坑</title><link>https://blog.gaein.cn/passages/windows-togo/</link><pubDate>Fri, 24 Jan 2020 23:38:30 +0800</pubDate><guid>https://blog.gaein.cn/passages/windows-togo/</guid><description>&lt;p>Windows to go，说白了就是在U盘里面装Windows，随身带着Windows操作系统和软件。只要在BIOS里面设置了U盘启动就能进入U盘里面的Windows系统。&lt;/p>
&lt;!-- more -->
&lt;p>官方说明详见 &lt;a class="link" href="https://docs.microsoft.com/zh-cn/windows/deployment/planning/windows-to-go-overview" target="_blank" rel="noopener"
>https://docs.microsoft.com/zh-cn/windows/deployment/planning/windows-to-go-overview&lt;/a> （机翻）&lt;/p>
&lt;h2 id="准备">准备
&lt;/h2>&lt;ol>
&lt;li>如果使用Windows自带的Windows to go软件，需使用移动硬盘（插上电脑显示在设备和驱动器里，而不是可移动驱动器）&lt;/li>
&lt;li>最好选购USB3.1或者USB3.0接口的移动硬盘或U盘，USB2.0由于速度瓶颈会严重影响使用体验&lt;/li>
&lt;li>移动硬盘或U盘的容量在64GB及以上，32G可能无法正常运行（我选择的是256G的SSFD，读写可到2000MB/S）&lt;/li>
&lt;li>电脑有键盘，用于修改BIOS&lt;/li>
&lt;li>Windows系统安装ISO镜像文件（我选择的是Windows10 企业版）&lt;/li>
&lt;/ol>
&lt;h2 id="优缺点">优缺点
&lt;/h2>&lt;ol>
&lt;li>优点：便携性&lt;/li>
&lt;li>缺点：对U盘有一定要求，数据不是很安全，容易遭到破坏，而BitLocker又不能兼容IOS系统&lt;/li>
&lt;/ol>
&lt;h2 id="软件">软件
&lt;/h2>&lt;ol>
&lt;li>官方工具&lt;/li>
&lt;li>萝卜头出品的WTGA&lt;/li>
&lt;/ol>
&lt;h2 id="制作">制作
&lt;/h2>&lt;p>基本上是下一步无脑操作，网上有很多类似帖子&lt;/p>
&lt;h2 id="开机">开机
&lt;/h2>&lt;p>开机按DEL进入主板BIOS，在BOOT中将U盘启动调到硬盘或者Windows boot manager前面，保存并退出
如果不希望更改BIOS，可以在启动列表中直接选择U盘&lt;/p></description></item><item><title>javascript 制作高考倒计时网页</title><link>https://blog.gaein.cn/passages/javascipt-ceetime/</link><pubDate>Sun, 01 Dec 2019 09:54:14 +0800</pubDate><guid>https://blog.gaein.cn/passages/javascipt-ceetime/</guid><description>&lt;p>暑假的时候做了一个高考倒计时兼目标的页面，由于高三实在是忙，一直没有时间写成博客&lt;/p>
&lt;!-- more -->
&lt;blockquote>
&lt;p>网上有很多javascript实现倒计时的代码，但是我找到的都不是很好用，或者有bug，所以自己绞尽没有脑子的汁写了一个，算法智障还请多多包涵。&lt;/p>&lt;/blockquote>
&lt;h4 id="一原理">[一]原理
&lt;/h4>&lt;p>其实原理非常简单，就是用高考开始的时间（河北省是6月7日9：00语文第一场开考）减去当前的时间（javascript函数获取的用户电脑时间），然后换算成天、时、分、秒，再舍去小数。每一秒钟调用一次自己，就实现了动态更新。&lt;/p>
&lt;h4 id="二代码">[二]代码
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">script&lt;/span> &lt;span class="n">language&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;javascript&amp;#34;&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;text/javascript&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">function&lt;/span> &lt;span class="n">timerun&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">now&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">new&lt;/span> &lt;span class="n">Date&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">end&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">new&lt;/span> &lt;span class="n">Date&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;2020/06/07 09:00:00&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">day&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Math&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">floor&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">end&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">24000&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">3600&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">day&lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">document&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;timeShowDay&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">innerHTML&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">day&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">hour&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Math&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">floor&lt;/span>&lt;span class="p">(((&lt;/span>&lt;span class="n">end&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">day&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">24000&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">3600&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1000&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">3600&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">document&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;timeShowHour&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">innerHTML&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">hour&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="nb">min&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Math&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">floor&lt;/span>&lt;span class="p">(((&lt;/span>&lt;span class="n">end&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">day&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">24000&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">3600&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">hour&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">1000&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">3600&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1000&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">60&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">document&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;timeShowMin&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">innerHTML&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nb">min&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="k">var&lt;/span> &lt;span class="n">sec&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Math&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">floor&lt;/span>&lt;span class="p">(((&lt;/span>&lt;span class="n">end&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">day&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">24000&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">3600&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">hour&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">1000&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">3600&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">min&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">1000&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">60&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1000&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">document&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;timeShowSec&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">innerHTML&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">sec&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">document&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;timeShow&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">innerHTML&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;高考已经开始&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">setTimeout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;timerun()&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1000&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">script&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="三效果">[三]效果
&lt;/h4>&lt;p>见 &lt;a class="link" href="https://www.gaein.cn/live-for-dream/" target="_blank" rel="noopener"
>https://www.gaein.cn/live-for-dream/&lt;/a>
或标题图&lt;/p></description></item><item><title>用废显示器自制充电柔和吸顶灯</title><link>https://blog.gaein.cn/passages/how-to-diy-lamp/</link><pubDate>Tue, 16 Jul 2019 08:22:58 +0800</pubDate><guid>https://blog.gaein.cn/passages/how-to-diy-lamp/</guid><description>&lt;p>年前呢，在 b 站上看见有牛人拆了坏电视来做一盏效果超强、超棒的吸顶灯，而且成本也很低。看着就手痒痒。加上学长刚好有一个坏的屏幕，宿舍晚上断电需要照明，所以就干脆弄一个试试。&lt;/p>
&lt;blockquote>
&lt;p>制作灵感来自视频：&lt;a class="link" href="https://www.bilibili.com/video/BV1xp4y1s7WY" target="_blank" rel="noopener"
>哔哩哔哩:DIY-Perks——把坏掉的电视改造成日光灯，效果秒杀吸顶灯！&lt;/a>&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>参照这个视频来进行制作&lt;/p>&lt;/blockquote>
&lt;h2 id="材料">材料
&lt;/h2>&lt;ol>
&lt;li>坏的显示器面板，不显示、碎屏、花屏都可以用，而且有面板就行。可以考虑到本地垃圾场去捡一个，单买的话有点 &lt;del>败家&lt;/del>。
&lt;blockquote>
&lt;p>注意：必须是 LCD 屏！&lt;br>
注意：请使用其它视频源和连接线确保显示器是坏的，至少我不会希望把好的显示器拆开。
&lt;img src="https://img.cdn.gaein.cn/blog/posts/How-to-DIY-lamp/BD33RARLZ.jpg"
loading="lazy"
alt="确实坏了"
>&lt;/p>&lt;/blockquote>
&lt;/li>
&lt;li>LED 灯带/灯条
&lt;blockquote>
&lt;p>注意：不是最小裁剪 1m 那种，而是裸板的 LED 灯带。这种：
&lt;img src="https://img.cdn.gaein.cn/blog/posts/How-to-DIY-lamp/BD95Q9R2T.jpg"
loading="lazy"
alt="LED"
>&lt;/p>&lt;/blockquote>
&lt;/li>
&lt;li>12v 电源适配器，用于给 LED 灯带供电&lt;/li>
&lt;li>DC 母座，方便插电用&lt;/li>
&lt;li>18650 电池、电池盒 x3，用于停电时给灯供电&lt;/li>
&lt;li>12v 供电切换模块，停电时切换供电&lt;/li>
&lt;/ol>
&lt;p>基本上的清单就是这样：&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/blog/posts/How-to-DIY-lamp/BD53DHR2E.png"
loading="lazy"
alt="物品"
>&lt;/p>
&lt;p>当然还有一个显示屏&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/blog/posts/How-to-DIY-lamp/BD33Q9R2T.jpg"
loading="lazy"
alt="屏幕"
>&lt;/p>
&lt;h2 id="制作">制作
&lt;/h2>&lt;h4 id="拆屏">拆屏
&lt;/h4>&lt;p>需要的是显示屏内的背光部分，具体来说就是扩散层和一些膜（其实把显示器值钱的部分全扔了）&lt;/p>
&lt;h6 id="拆解外壳">拆解外壳
&lt;/h6>&lt;p>把显示器的外壳拆下来，一般来说背面有螺丝，侧面是卡扣的。但是因为没有找到窍门，我就暴力了一下。&lt;/p>
&lt;p>我用显卡翘的，结果都弯了&amp;hellip;&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/blog/posts/How-to-DIY-lamp/BD33RBNW5.jpg"
loading="lazy"
alt="显卡"
>&lt;/p>
&lt;p>最后暴力钻孔打穿了卡扣才卸下来。&lt;/p>
&lt;h6 id="拆解面板">拆解面板
&lt;/h6>&lt;p>将后壳拿下来后里面大致是这样的&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/blog/posts/How-to-DIY-lamp/BD33RCVCZ.jpg"
loading="lazy"
alt="内部"
>&lt;/p>
&lt;p>将上面的胶带撕开，断开连接控制按钮的电线。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/blog/posts/How-to-DIY-lamp/BD33RC82Q.jpg"
loading="lazy"
alt="电线"
>&lt;/p>
&lt;p>将鼓起来那块放 PCB 的拆下，并断开电线&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/blog/posts/How-to-DIY-lamp/BD33RD375.jpg"
loading="lazy"
alt="PCB"
>&lt;/p>
&lt;p>这根电线粘在上面，要撕下来，这是给背光模组供电的。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/blog/posts/How-to-DIY-lamp/BD33RERGM.jpg"
loading="lazy"
alt="电线"
>&lt;/p>
&lt;p>拆完后就剩下一个面板&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/blog/posts/How-to-DIY-lamp/BD33RE3WP.jpg"
loading="lazy"
alt="面板"
>&lt;/p>
&lt;h6 id="拆解背光">拆解背光
&lt;/h6>&lt;p>面板的四周是完全用卡扣固定的，轻轻的撬开就能将它打开。由于下面还有胶带粘住，只能先掀起来。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/blog/posts/How-to-DIY-lamp/BD33RFF05.jpg"
loading="lazy"
alt="撬"
>&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/blog/posts/How-to-DIY-lamp/BD33RFR2T.jpg"
loading="lazy"
alt="LCD"
>&lt;/p>
&lt;p>黑色的是屏幕，去掉胶带后把黑色的屏幕拿下去，剩下的就是背光层。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/blog/posts/How-to-DIY-lamp/BD33RGF5A.jpg"
loading="lazy"
alt="背光层"
>&lt;/p>
&lt;p>一层一层的把薄膜拿下来，最后一层是散光层&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/blog/posts/How-to-DIY-lamp/BD33RGZHG.jpg"
loading="lazy"
alt="散光层"
>&lt;/p>
&lt;p>侧面有一条LED灯带，作为光源。但是我这里不采用这个灯带，因为它的电压很高（我这个屏幕光源电压已经高于100V了），不是很安全。而且还要对供电进行魔改。所以我买了LED灯带。&lt;/p>
&lt;h4 id="电路">电路
&lt;/h4>&lt;p>为了实现断电时仍然能供电，我买了一些模块，用于供电。
大致就是，12v适配器用于平时供电与电池充电。断电时自动切换到电池进行供电。为了电压合适使用了3节18650电池串联。&lt;/p>
&lt;blockquote>
&lt;p>等待物资到货中。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>咕咕咕&lt;/p>&lt;/blockquote></description></item><item><title>自制可充电式MP3</title><link>https://blog.gaein.cn/passages/how-to-diy-mp3/</link><pubDate>Tue, 16 Jul 2019 08:22:58 +0800</pubDate><guid>https://blog.gaein.cn/passages/how-to-diy-mp3/</guid><description>&lt;p>最近闲来无事，做个mp3听歌用，准备加上锂电池充电使用，比较方便&lt;/p>
&lt;blockquote>
&lt;p>以前倒是做过一个，也是网上买的mp3解码板，但是供电用的是3节电池，实在是有点浪费，而且也没有喇叭。这次加入了一个3W 4Ω的扬声器，供电使用2000mah（典型值）的锂聚合物电池。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>焊接电池真的很累人，反正我是焊不好，图省心可以购买18650电池+电池盒&lt;/p>&lt;/blockquote>
&lt;h2 id="一准备工作">[一]准备工作
&lt;/h2>&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/How-to-DIY-mp3/01.webp"
loading="lazy"
alt="商品截图"
>&lt;/p>
&lt;p>首先想好需要买的东西：包括但不限于&lt;/p>
&lt;ul>
&lt;li>mp3解码板&lt;/li>
&lt;li>开关（因为我家里有，就没有购买新的）&lt;/li>
&lt;li>锂电池（2000mah用不太完，不用购买带保护的，因为充电模组就带保护）&lt;/li>
&lt;li>锂电池充电板&lt;/li>
&lt;li>电压表（用来显示剩余电量，注意购买合适电压的（锂电池3.7v-4.2v，USB5v））&lt;/li>
&lt;li>扬声器（根据板载功放的功率而定，推荐3W 4Ω）&lt;/li>
&lt;li>导线、热缩管若干（导线我用的电压表上面的剪的&amp;hellip;）&lt;/li>
&lt;li>电烙铁/焊台、焊锡等&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>
&lt;p>拿到东西后拆开包装，检查是否齐全
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/How-to-DIY-mp3/02.webp"
loading="lazy"
alt="合影"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>画个简易的电路图，规划好怎么焊接
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/How-to-DIY-mp3/03.webp"
loading="lazy"
alt="电路图"
>&lt;/p>
&lt;p>我的思路很简单：MP3分为3层，第一层是MP3解码器和电压表；第二层是锂电池；第三层是扬声器和充电模块。电路方面如图，先把MP3和充电模块并联起来&lt;/p>
&lt;p>充电模块有4个焊点，两个接电池正负极，另外两个接负载（MP3和电压表）正负极&lt;/p>
&lt;/li>
&lt;li>
&lt;p>制作第一二层夹板
推荐使用快递盒子制作，或者其它质量更好的硬纸板。因为我手头没有，只能裁剪荷兰白卡，然后一张张粘了&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/How-to-DIY-mp3/04.webp"
loading="lazy"
alt="抹胶"
>&lt;/p>
&lt;p>纸与纸之间用胶棒粘贴&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/How-to-DIY-mp3/05.webp"
loading="lazy"
alt="开孔"
>&lt;/p>
&lt;p>粘贴完成后形成一个厚纸板，由于MP3解码板下面焊点突起较大，在焊点处开孔&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/How-to-DIY-mp3/06.webp"
loading="lazy"
alt="开孔完成"
>&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/How-to-DIY-mp3/07.webp"
loading="lazy"
alt="MP3解码板与纸板"
>&lt;/p>
&lt;p>夹板制作完成！&lt;/p>
&lt;/li>
&lt;li>
&lt;p>标出电池正负极
为了方便制作，首先用记号笔在电池上面标出正负极
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/How-to-DIY-mp3/08.webp"
loading="lazy"
alt="标正负极"
>&lt;/p>
&lt;p>可以用万能表调到直流20V挡位测量，当然，也可以用买的电压表测量（注意是防反接的那种，反接不亮，正确接入后有读数）&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/How-to-DIY-mp3/09.webp"
loading="lazy"
alt="电压表"
>&lt;/p>
&lt;p>我惊喜的发现尽管我买错了表，仍然可以读数。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="二焊接">[二]焊接
&lt;/h2>&lt;p>这是最主要的步骤了，如果不会焊接的画建议先找找东西练练手，能凑合了再焊（比如我这就是纯属凑合事(lll￢ω￢) ）&lt;/p>
&lt;ol>
&lt;li>
&lt;p>焊接MP3与充电模块
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/How-to-DIY-mp3/10.webp"
loading="lazy"
alt="MP3与充电模块"
>&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/How-to-DIY-mp3/11.webp"
loading="lazy"
alt="MP3与充电模块"
>&lt;/p>
&lt;p>MP3要焊接在充电模块 &lt;code>OUT+&lt;/code> &lt;code>OUT-&lt;/code> 两个焊点上，注意正负极对应。充电模块在不接电池的情况下即使供电也不会给MP3供电的，上电没反应的不要慌。&lt;/p>
&lt;p>这块焊接不算困难，电路板很好焊。注意剥导线的时候尽量少弄断里面的丝，别像我一样就剩几根&amp;hellip;&lt;/p>
&lt;p>把焊锡化到烙铁上面，然后把导线插进电路板的孔里面，把烙铁上的焊锡沾到电路板上面的焊点，等到焊锡覆盖满焊点且渗到导线里面，拿开烙铁，用最吹冷却即可。推荐背面的焊点也这样弄，焊的比较牢固即可。&lt;/p>
&lt;p>焊完后可以拿万用表调到欧姆档测量电阻，如果接通电阻不会超过0.1Ω&lt;/p>
&lt;/li>
&lt;li>
&lt;p>焊接电池与开关
我真的焊不好，这块费心费时最多，主要是电池极板面积太大，不好加热，不沾锡。电池这种东西又不能长时间受热。如果想了解怎么焊电池可以上网百度。反正我是不会&amp;hellip;&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/How-to-DIY-mp3/12.webp"
loading="lazy"
alt="电池与开关"
>&lt;/p>
&lt;p>另外开关也怕受热&amp;hellip;如果想焊好点的话推荐使用导线连接，因为开关的引脚也很大&amp;hellip;&lt;/p>
&lt;/li>
&lt;li>
&lt;p>焊接电池与充电模块
根据电路图，电池的负极（还没焊开关那个）需要和充电模块的&lt;code>B-&lt;/code> 焊点焊接。只能用导线相连。正极（有开关那个）在开关的另外一个引脚上面去连接充电模块的 &lt;code>B+&lt;/code> 焊点
&lt;img src="https://img.cdn.gaein.cn/website_used/blog/How-to-DIY-mp3/13.webp"
loading="lazy"
alt="电池开关与充电模块"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>焊接电压表，连接扬声器
没图&amp;hellip;&lt;/p>
&lt;p>电压表并联即可。也就是电压表正极连接充电模块的 &lt;code>B+&lt;/code> 焊点，负极连接 &lt;code>B-&lt;/code> 焊点。缺点是没法看充电进度&amp;hellip;可以将导线焊接在充电模块背面，注意固定好以前焊接的MP3解码板和充电模块处，以防受热后弹出&lt;/p>
&lt;p>焊接导线与扬声器，导线另外一头可以直接用螺丝接到MP3解码板上面&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/How-to-DIY-mp3/14.webp"
loading="lazy"
alt="电压表与MP3"
>&lt;/p>
&lt;p>其实还是有图的，只不过surface pro3的相机&amp;hellip;不敢恭维:D&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="三组装">[三]组装
&lt;/h2>&lt;p>其实也没啥可组装的&amp;hellip;按照之前说过的，三层&lt;/p>
&lt;p>扬声器和电压表不好固定，无奈只能使用胶带&amp;hellip; _(: 」∠)_&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/How-to-DIY-mp3/15.webp"
loading="lazy"
alt="完成P1"
>&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/How-to-DIY-mp3/16.webp"
loading="lazy"
alt="完成P2"
>&lt;/p>
&lt;p>P1怎么看着有点像相机？？？&lt;/p>
&lt;blockquote>
&lt;p>注意事项：&lt;/p>&lt;/blockquote>
&lt;ol>
&lt;li>不要和我一样在切割垫上焊接东西，千万不要！&lt;/li>
&lt;li>注意焊接电池时的时间不要太长，电池不耐高温&lt;/li>
&lt;li>注意正负极&lt;/li>
&lt;li>上电之前检查电路，以防发生危险&lt;/li>
&lt;li>注意电池不要长时间满电保存&lt;/li>
&lt;li>每焊接完一个模块，冷却后就要检查是否虚焊，如果没虚焊再进行下一步。&lt;/li>
&lt;li>好像没了诶&amp;hellip;&lt;/li>
&lt;/ol></description></item><item><title>CentOS部署MySQL8步骤</title><link>https://blog.gaein.cn/passages/install-mysql8-on-centos7/</link><pubDate>Mon, 15 Jul 2019 10:52:59 +0800</pubDate><guid>https://blog.gaein.cn/passages/install-mysql8-on-centos7/</guid><description>&lt;p>早就想去写的一篇博文，因为我在部署现在这个网站的服务器时，使用了最新版的MySQL，按照网上的教程安装出现了不少问题，写在这里备忘。&lt;/p>
&lt;!-- more -->
&lt;h2 id="获取rpm">获取rpm
&lt;/h2>&lt;ol>
&lt;li>访问 &lt;a class="link" href="https://www.mysql.com/downloads/" target="_blank" rel="noopener"
>https://www.mysql.com/downloads/&lt;/a>
&lt;img src="https://s2.ax1x.com/2019/07/15/ZoEUeO.md.png"
loading="lazy"
alt="MySQL官网的下载界面"
>
选择Yum Repository&lt;/li>
&lt;li>选择适合于自己系统的版本，比如我的是CentOS7，则选择这个，点击下载（Donwnload）
&lt;img src="https://s2.ax1x.com/2019/07/15/ZoEJQx.png"
loading="lazy"
alt="下载栏"
>&lt;/li>
&lt;li>忽略下载页面的登录提示，右键&amp;quot;No thanks,just start my download.&amp;quot;，复制连接
&lt;img src="https://s2.ax1x.com/2019/07/15/ZoEYy6.md.png"
loading="lazy"
alt="下载页面"
>&lt;/li>
&lt;li>连接到服务器，使用wget命令下载rpm&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://s2.ax1x.com/2019/07/15/ZoEtOK.png"
loading="lazy"
alt="wget下载完成"
>&lt;/p>
&lt;h2 id="安装mysql">安装MySQL
&lt;/h2>&lt;ol>
&lt;li>导入rpm，使用命令：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo rpm -Uvh mysql80-community-release-el7-3.noarch.rpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://s2.ax1x.com/2019/07/15/ZoEGS1.png"
loading="lazy"
alt="导入rpm"
>
2. 完成后使用：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> yum install mysql-community-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装MySQL社区版
&lt;img src="https://s2.ax1x.com/2019/07/15/ZoEawD.md.png"
loading="lazy"
alt="Mysql社区版安装"
>
提示后按y开始安装，会自动下载文件，可能需要一段时间，依网速和服务器位置而定
提示&amp;quot;Is this ok&amp;quot;时再次输入y并回车，确认
&lt;img src="https://s2.ax1x.com/2019/07/15/ZoEBYd.md.png"
loading="lazy"
alt="确认"
>&lt;/p>
&lt;h2 id="设置mysql">设置MySQL
&lt;/h2>&lt;ol>
&lt;li>启动MySQL
使用&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo service mysqld start
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>启动MySQL服务
使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo service mysqld status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看状态
&lt;img src="https://s2.ax1x.com/2019/07/15/ZoEylt.png"
loading="lazy"
alt="状态"
>
不能使用mysqld来启动，会启动失败
&lt;img src="https://s2.ax1x.com/2019/07/15/ZoEdTe.png"
loading="lazy"
alt="启动失败"
>
2. 连接到MySQL
MySQL8不支持无密码登录，在初次安装时就自动生成了root用户的密码
使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sudo&lt;/span> &lt;span class="n">grep&lt;/span> &lt;span class="s1">&amp;#39;temporary password&amp;#39;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mysqld&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">log&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看root用户的密码
&lt;img src="https://s2.ax1x.com/2019/07/15/ZoEDfA.png"
loading="lazy"
alt="查看密码"
>
使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mysql -u root -p
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>并输入默认密码（Linux系统输入密码时不会显示）
连接到MySQL服务器
&lt;img src="https://s2.ax1x.com/2019/07/15/ZoE66P.md.png"
loading="lazy"
alt="连接到MySQL"
>&lt;/p>
&lt;h2 id="修改默认密码">修改默认密码
&lt;/h2>&lt;p>连接到MySQL服务器后，使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">alter user &amp;#39;root&amp;#39;@&amp;#39;localhost&amp;#39;IDENTIFIED BY &amp;#39;pWD123456-&amp;#39;;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>修改root的密码，其中&amp;rsquo;pWD123456-&amp;lsquo;是要修改成的新密码&lt;/p>
&lt;blockquote>
&lt;p>注意！MySQL8默认安装 validate_password 插件。这将要求密码包含至少一个大写字母，一个小写字母，一个数字和一个特殊字符，
并且密码总长度至少为8个字符。&lt;/p>&lt;/blockquote>
&lt;p>如果不符合密码规范，修改密码会失败&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ERROR 1819 (HY000): Your password does not satisfy the current policy requirements
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>修改成功会控制台输出&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Query OK, 0 rows affected (0.01 sec)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://s2.ax1x.com/2019/07/15/Zoe76I.png"
loading="lazy"
alt="实例"
>
使用“exit”或“quit”命令退出MySQL&lt;/p></description></item><item><title>MySQL8服务器配置远程连接用户</title><link>https://blog.gaein.cn/passages/mysql8-connect/</link><pubDate>Mon, 15 Jul 2019 08:50:50 +0800</pubDate><guid>https://blog.gaein.cn/passages/mysql8-connect/</guid><description>&lt;p>最近需要有网站程序连接到数据库，但网站程序放在另外一个服务器上，所以需要设置数据库的远程连接。不同于网上给root远程连接权限的方法，我准备新建一个用户。&lt;/p>
&lt;!-- more -->
&lt;blockquote>
&lt;p>最近需要有网站程序连接到数据库，但网站程序放在另外一个服务器上，所以需要设置数据库的远程连接。不同于网上给root远程连接权限的方法，我准备新建一个用户。&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>服务器环境：
操作系统：CentOS7
MySQL版本：8.0.16 MySQL Community Server&lt;/p>&lt;/blockquote>
&lt;p>########## 首先，登录服务器ssh
使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mysql -u root -p
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>并输入密码，进入mysql
由于我使用的是MySQL8，安全级别比以前高，不能同时创建用户并且赋值
首先创建用户&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">create user testuser@&amp;#39;%&amp;#39; identified by &amp;#39;TestUserPWD0&amp;#39;;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>再进行赋值&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">grant all privileges on *.* to testuser@&amp;#39;%&amp;#39; with grant option;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>刷新&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">flush privileges
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>因为MySQL8使用的是caching_sha2_password加密规则，所以为了方便连接，需要更改一下规则&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ALTER USER &amp;#39;testuser&amp;#39;@&amp;#39;%&amp;#39; IDENTIFIED WITH mysql_native_password BY &amp;#39;TestUserPWD0&amp;#39;;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>########## 注意事项
testuser是你要创建的用户的用户名
TestUserPWD0是新创建的用户的密码
MySQL8默认安装 validate_password 插件。这将要求密码包含至少一个大写字母，一个小写字母，一个数字和一个特殊字符，并且密码总长度至少为8个字符。
如果无法连接，主要检查服务器防火墙或安全狗等规则限制&lt;/p></description></item><item><title>最新官方版化学元素周期表高清大图下载</title><link>https://blog.gaein.cn/passages/periodictable-of-theelements/</link><pubDate>Sat, 13 Jul 2019 22:55:37 +0800</pubDate><guid>https://blog.gaein.cn/passages/periodictable-of-theelements/</guid><description>&lt;p>来自国际纯粹与应用化学联合会和中国化学会的权威元素周期表高清下载。有最新的元素和最权威的数据&lt;/p>
&lt;!-- more -->
&lt;blockquote>
&lt;p>因为刚好需要元素周期表就找了一下，网上大多数更新不及时而且样式不好看，数据不权威。终于在IUPAC官网和中国化学会找到了英文和中文（中国化学会译制的IUPAC周期表）&lt;/p>&lt;/blockquote>
&lt;h4 id="iupac国际纯粹与应用化学联合会元素周期表英文english">IUPAC（国际纯粹与应用化学联合会）元素周期表[英文/English]
&lt;/h4>&lt;blockquote>
&lt;p>International Union of Pure and Applied Chemistry (IUPAC) 国际纯粹与应用化学联合会，又译 国际理论（化学）与应用化学联合会， 是一个致力于促进化学相关的非政府组织，也是各国化学会的一个联合组织。 以公认的化学命名权威著称。 命名及符号分支委员会每年都会修改IUPAC命名法，以力求提供化合物命名的准确规则。 IUPAC 也是国际科学理事会的会员之一。&lt;/p>&lt;/blockquote>
&lt;p>IUPAC官网:&lt;a class="link" href="https://iupac.org" title="国际纯粹与应用化学联合会官网"
target="_blank" rel="noopener"
>IUPAC.org&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://s2.ax1x.com/2019/07/13/Z4O5i4.md.png"
loading="lazy"
alt="元素周期表英文版(IUPAC)"
>&lt;/p>
&lt;h6 id="图片下载gaeincn--pte-iupacpng--225-kb">图片下载：[&lt;a class="link" href="https://static.cdn.gaein.cn/website_used/files/PTE/PTE-IUPAC.png" target="_blank" rel="noopener"
>Gaein.cn | PTE-IUPAC.png | 225 KB&lt;/a>]
&lt;/h6>&lt;h6 id="pdf下载gaeincn--pte-iupacpdf--236-kb">PDF下载：[&lt;a class="link" href="https://static.cdn.gaein.cn/website_used/files/PTE/PTE-IUPAC.pdf" target="_blank" rel="noopener"
>Gaein.cn | PTE-IUPAC.pdf | 236 KB&lt;/a>]
&lt;/h6>&lt;p>//推荐下载PDF文件，更清晰，方便打印&lt;/p>
&lt;h4 id="ccs中国化学会元素周期表中文chinese">CCS（中国化学会）元素周期表[中文/Chinese]
&lt;/h4>&lt;blockquote>
&lt;p>中国化学会（Chinese Chemical Society，缩写CCS）是从事化学或与化学相关专业的科技、教育工作者自愿组成并依法注册登记的学术性、公益性法人社会团体，是中国科学技术协会的组成部分，是中国发展化学科学技术的重要社会力量。&lt;/p>&lt;/blockquote>
&lt;p>中国化学会于1932年在南京成立。1959年，中国化学会曾与中国化工学会筹委会合并成立中国化学化工学会。1963年，又分为化学、化工两个学会。中国化学会是国际纯粹与应用化学联合会（IUPAC）、亚洲化学学会联合会（FACS）等7个国际组织的成员。&lt;/p>
&lt;p>CCS官网：&lt;a class="link" href="https://www.chemsoc.org.cn" title="中国化学会官网"
target="_blank" rel="noopener"
>chemsoc.org.cn&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://s2.ax1x.com/2019/07/13/Z4XcfH.md.png"
loading="lazy"
alt="元素周期表中文版(CCS)"
>&lt;/p>
&lt;h6 id="图片下载gaeincn--pte-ccspng--217-kb">图片下载：[&lt;a class="link" href="https://static.cdn.gaein.cn/website_used/files/PTE/PTE-CCS.png" target="_blank" rel="noopener"
>Gaein.cn | PTE-CCS.png | 217 KB&lt;/a>]
&lt;/h6>&lt;h6 id="pdf下载gaeincn--pte-ccspdf--638-kb">PDF下载：[&lt;a class="link" href="https://static.cdn.gaein.cn/website_used/files/PTE/PTE-CCS.pdf" target="_blank" rel="noopener"
>Gaein.cn | PTE-CCS.pdf | 638 KB&lt;/a>]
&lt;/h6>&lt;p>//推荐下载PDF文件，更清晰，方便打印&lt;/p>
&lt;p>另外发现一个非常不错的在线元素周期表网站：&lt;a class="link" href="https://periodic-table.io/" target="_blank" rel="noopener"
>periodic-table.io&lt;/a>
这个网站有很多的优点&lt;/p>
&lt;blockquote>
&lt;p>元素：周期表 在一个界面中提供易于理解且有用的关于化学元素的信息。 点击一个元素符号去了解更多的关于其性质，历史，名字来源，图片，应用，危险性和电子层分布的图片。&lt;/p>&lt;/blockquote>
&lt;ol>
&lt;li>令人视觉愉悦的彩色表格&lt;/li>
&lt;li>简单流畅的设计和丰富的信息&lt;/li>
&lt;li>每个元素的详细描述&lt;/li>
&lt;li>使用字母表顺序来浏览元素&lt;/li>
&lt;li>每个元素的电子壳层示意图&lt;/li>
&lt;li>在一个表格中比较两种元素的性质&lt;/li>
&lt;li>用符号，原子序数或者名称来搜索元素&lt;/li>
&lt;li>详情网站的超链接以便进一步学习&lt;/li>
&lt;/ol>
&lt;p>支持多国语言，建议各位使用，当然也存在部分中文元素汉字无法拼写的问题（字库没有字）&lt;/p>
&lt;p>另外 元素：周期表 开发了Windows10应用，请到 [&lt;a class="link" href="https://www.microsoft.com/zh-cn/p/%e5%85%83%e7%b4%a0-%e5%91%a8%e6%9c%9f%e8%a1%a8/9wzdncrfjcm1" target="_blank" rel="noopener"
>Microsoft应用商店 元素：周期表&lt;/a>] 下载&lt;/p>
&lt;h2 id="有关版权的特别声明">有关版权的特别声明：
&lt;/h2>&lt;blockquote>
&lt;p>英文版化学元素周期表版权归国际纯粹与应用化学联合会（IUPAC）所有&lt;/p>&lt;/blockquote>
&lt;p>中文版化学元素周期表版权归中国化学会（CCS）所有&lt;/p>
&lt;p>元素：周期表 网站及应用程序版权归原作者所有&lt;/p>
&lt;p>本站仅撰写此文并转载元素周期表文件以及转换为PNG图片文件，未参与化学元素周期表的制作。向IUPAC及CCS和元素：周期表作者致敬&lt;/p></description></item><item><title>nginX设置错误页面</title><link>https://blog.gaein.cn/passages/nginx-error-page/</link><pubDate>Fri, 07 Jun 2019 18:40:33 +0800</pubDate><guid>https://blog.gaein.cn/passages/nginx-error-page/</guid><description>&lt;p>最近几天完善了一下网站，尤其是nginx默认的丑的要死的错误页面（标题图那样的）。今天把nginx配置错误页面的方法写在这里&lt;/p>
&lt;!-- more -->
&lt;p>首先在网上搜教程，说必须要有
&lt;code>fastcgi_intercept_errors on; &lt;/code>
自定义的错误页面才会生效，但是我删除这句话仍然可以正常跳转。大家依据实际需求添加。
接下来就是配置错误页面的具体代码了
&lt;code> error_page 404 /404.html; error_page 502 /502.html; location = /404.html{ root /data/errpages; } location = /502.html{ root /data/errpages; } &lt;/code>
error_page的意思是设置错误页，后面接状态码和页面文件，然后使用location来跳转。由于location的存在，这部分代码只能写在server区块里面。&lt;/p></description></item><item><title>认识与入门MarkDown</title><link>https://blog.gaein.cn/passages/hello-markdown/</link><pubDate>Sun, 28 Apr 2019 00:23:38 +0800</pubDate><guid>https://blog.gaein.cn/passages/hello-markdown/</guid><description>&lt;p>&lt;a class="link" href="https://zh.wikipedia.org/wiki/Markdown" target="_blank" rel="noopener"
>Markdown&lt;/a>是一种轻量级的 &lt;strong>「标记语言」&lt;/strong>，它的优点很多，目前也被越来越多的写作爱好&amp;gt;者，撰稿者广泛使用。看到这里请不要被 &lt;strong>「标记」&lt;/strong>、 &lt;strong>「语言」&lt;/strong> 所迷惑，Markdown 的语法十分简单。常用的标记符号也不超过十个，这种相对于更为复杂的 HTML 标记语言来说，Markdown 可谓是十分
轻量的，学习成本也不需要太多，且一旦熟悉这种语法规则，会有一劳永逸的效果。&lt;/p>
&lt;p>根据作者&lt;/p>
&lt;blockquote>
&lt;p>转载请注明原作者&lt;/p>&lt;/blockquote>
&lt;p>转载&lt;/p>
&lt;p>作者：Te_Lee&lt;/p>
&lt;p>原文：https://www.jianshu.com/p/1e402922ee32&lt;/p>
&lt;p>如有侵权请联系删除&lt;/p>
&lt;p>&lt;strong>转载请注明原作者，如果你觉得这篇文章对你有帮助或启发，也可以来请我&lt;a class="link" href="https://link.jianshu.com?t=http://ww2.sinaimg.cn/large/6aee7dbbjw1eiixgkex2ij21kw0t7wn5.jpg" target="_blank" rel="noopener"
>喝咖啡&lt;/a>&lt;/strong>&lt;/p>
&lt;h2 id="导语">导语
&lt;/h2>&lt;blockquote>
&lt;p>&lt;a class="link" href="https://zh.wikipedia.org/wiki/Markdown" target="_blank" rel="noopener"
>Markdown&lt;/a>是一种轻量级的 &lt;strong>「标记语言」&lt;/strong>，它的优点很多，目前也被越来越多的写作爱好&amp;gt;者，撰稿者广泛使用。看到这里请不要被 &lt;strong>「标记」&lt;/strong>、 &lt;strong>「语言」&lt;/strong> 所迷惑，Markdown 的语法十分简单。常用的标记符号也不超过十个，这种相对于更为复杂的 HTML 标记语言来说，Markdown 可谓是十分
轻量的，学习成本也不需要太多，且一旦熟悉这种语法规则，会有一劳永逸的效果。&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://ww3.sinaimg.cn/large/6aee7dbbjw1eqft66xcg3j21kw12mdub.jpg" data-original-src="http://ww3.sinaimg.cn/large/6aee7dbbjw1eqft66xcg3j21kw12mdub.jpg" alt="[Ulysses for Mac](http://www.ulyssesapp.com)" style="cursor: zoom-in;">&lt;div class="image-caption">&lt;a class="link" href="http://www.ulyssesapp.com" target="_blank" rel="noopener"
>Ulysses for Mac&lt;/a>&lt;/div>&lt;/p>
&lt;/div>
&lt;h2>一，认识 Markdown&lt;/h2>
&lt;p>在刚才的导语里提到，Markdown 是一种用来写作的轻量级&lt;strong>「标记语言」&lt;/strong>，它用简洁的语法代替排版，而不像一般我们用的字处理软件 &lt;em>Word&lt;/em> 或 &lt;em>Pages&lt;/em> 有大量的排版、字体设置。它使我们专心于码字，用「标记」语法，来代替常见的排版格式。例如此文从内容到格式，甚至插图，键盘就可以通通搞定了。目前来看，支持 Markdown 语法的编辑器有很多，包括很多网站（例如&lt;a href="https://www.jianshu.com" target="_blank">简书&lt;/a>）也支持了 Markdown 的文字录入。Markdown 从写作到完成，导出格式随心所欲，你可以导出 HTML 格式的文件用来网站发布，也可以十分方便的导出 PDF 格式，这种格式写出的简历更能得到 HR 的好感。甚至可以利用 &lt;a href="https://link.jianshu.com?t=http://www.getcloudapp.com" target="_blank" rel="nofollow">CloudApp&lt;/a> 这种云服务工具直接上传至网页用来分享你的文章，全球最大的轻博客平台 &lt;a href="https://link.jianshu.com?t=http://te1ee.tumblr.com" target="_blank" rel="nofollow">Tumblr&lt;/a>，也支持 Mou 这类 Markdown 工具的直接上传。&lt;/p>
&lt;h3>Markdown 官方文档&lt;/h3>
&lt;blockquote>
&lt;p>这里可以看到官方的 Markdown 语法规则文档，当然，&lt;strong>后文我也会用自己的方式阐述这些语法的具体用法&lt;/strong>。&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>&lt;a href="https://link.jianshu.com?t=http://daringfireball.net/projects/markdown/syntax" target="_blank" rel="nofollow">&lt;em>创始人 John Gruber 的 Markdown 语法说明&lt;/em>&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://link.jianshu.com?t=http://wowubuntu.com/markdown/##list" target="_blank" rel="nofollow">&lt;em>Markdown 中文版语法说明&lt;/em>&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3>使用 Markdown 的优点&lt;/h3>
&lt;ul>
&lt;li>专注你的文字内容而不是排版样式，安心写作。&lt;/li>
&lt;li>轻松的导出 HTML、PDF 和本身的 .md 文件。&lt;/li>
&lt;li>纯文本内容，兼容所有的文本编辑器与字处理软件。&lt;/li>
&lt;li>随时修改你的文章版本，不必像字处理软件生成若干文件版本导致混乱。&lt;/li>
&lt;li>可读、直观、学习成本低。&lt;/li>
&lt;/ul>
&lt;h3>使用 Markdown 的误区&lt;/h3>
&lt;blockquote>
&lt;p>*We believe that writing is about content, about what you want to say – not about fancy formatting. *&lt;/p>
&lt;/blockquote>
&lt;p>我们坚信写作写的是内容，所思所想，而不是花样格式。&lt;br>
— &lt;em>Ulysses for Mac&lt;/em>&lt;/p>
&lt;ul>
&lt;li>Markdown 旨在简洁、高效，也由于 Markdown 的易读易写，人们用不同的编程语言实现了多个版本的解析器和生成器，这就导致了目前不同的 Markdown 工具集成了不同的功能（基础功能大致相同），例如流程图与时序图，复杂表格与复杂公式的呈现，虽然功能的丰富并没有什么本质的缺点，但终归有些背离初衷，何况在编写的过程中很费神，不如使用专业的工具撰写来的更有效率，所以如果你需实现复杂功能，专业的图形界面工具会更加方便。&lt;strong>当然，如果你对折腾这些不同客户端对 Markdown 的定制所带来高阶功能感到愉悦的话，那也是无可厚非的。&lt;/strong>
&lt;/li>
&lt;/ul>
&lt;div class="image-package">
&lt;img src="https://ww2.sinaimg.cn/large/6aee7dbbgw1eq320claw3j21kw0kjdpc.jpg" data-original-src="http://ww2.sinaimg.cn/large/6aee7dbbgw1eq320claw3j21kw0kjdpc.jpg" alt="[flowchart.js on Github（使用 Markdown 绘制流程图）](https://github.com/adrai/flowchart.js)" style="cursor: zoom-in;">&lt;div class="image-caption">[flowchart.js on Github（使用 Markdown 绘制流程图）](https://github.com/adrai/flowchart.js)&lt;/div>
&lt;/div>
&lt;h3>我该用什么工具？&lt;/h3>
&lt;div class="image-package">
&lt;img src="https://ww2.sinaimg.cn/large/6aee7dbbgw1esvkj19bqmj20e80e874z.jpg" data-original-src="http://ww2.sinaimg.cn/large/6aee7dbbgw1esvkj19bqmj20e80e874z.jpg" alt="Mou for Mac" style="cursor: zoom-in;">&lt;div class="image-caption">Mou for Mac&lt;/div>
&lt;/div>
&lt;ul>
&lt;li>在 Mac OS X 上，我强烈建议你用 &lt;a href="https://link.jianshu.com?t=http://mouapp.com" target="_blank" rel="nofollow">Mou&lt;/a> 这款免费且十分好用的 Markdown 编辑器，它支持&lt;strong>实时预览&lt;/strong>，既左边是你编辑 Markdown 语言，右边会实时的生成预览效果。不仅如此，Mou 还有一些有趣的偏好设置（&lt;em>Preference&lt;/em>），例如主题（&lt;em>Themes&lt;/em>）与样式（&lt;em>CSS&lt;/em>），它们可以配置出定制化的文本编辑效果与导出效果，如果你对自带的主题与样式不满意还可以到 &lt;a href="https://link.jianshu.com?t=https://github.com/search?utf8=%E2%9C%93&amp;amp;q=Mou" target="_blank" rel="nofollow">GitHub&lt;/a> 上搜索其它爱好者为 Mou 编写的更多主题样式，导入的方式可以在偏好设置的 Themes 或 CSS 选项中 选择 reload。&lt;/li>
&lt;/ul>
&lt;div class="image-package">
&lt;img src="https://ww1.sinaimg.cn/large/6aee7dbbgw1effcq2gx92j210j0ustj7.jpg" data-original-src="http://ww1.sinaimg.cn/large/6aee7dbbgw1effcq2gx92j210j0ustj7.jpg" alt="Mou 的编写与预览窗口" style="cursor: zoom-in;">&lt;div class="image-caption">Mou 的编写与预览窗口&lt;/div>
&lt;/div>
&lt;p>如果你从事文字工作，我强烈建议你购买 &lt;em>&lt;a href="https://link.jianshu.com?t=http://www.ulyssesapp.com" target="_blank" rel="nofollow">Ulysses for Mac&lt;/a>&lt;/em>，这款软件入围了苹果 Mac App Store 的 &lt;em>The Best of 2013&lt;/em>。它支持更多的写作格式、多文档的支持。Mou，iA writer 这些软件都是基于单文档的管理方式，而 Ulysses 支持 Folder、Filter 的管理，一个 Folder 里面可以创建多个 Sheet，Sheet 之间也可以进行 Combine 处理。&lt;/p>
&lt;div class="image-package">
&lt;img src="https://ww1.sinaimg.cn/large/6aee7dbbjw1eqgrj7suqoj217a0aiq4u.jpg" data-original-src="http://ww1.sinaimg.cn/large/6aee7dbbjw1eqgrj7suqoj217a0aiq4u.jpg" alt="Mac 上一些 Markdown 编辑器" style="cursor: zoom-in;">&lt;div class="image-caption">Mac 上一些 Markdown 编辑器&lt;/div>
&lt;/div>
&lt;ul>
&lt;li>&lt;p>由于笔者很少接触 Windows，Windows 下的 Markdown 没有过多涉猎，经朋友介绍，有两款还算不错，一款叫做 &lt;a href="https://link.jianshu.com?t=http://www.markdownpad.com" target="_blank" rel="nofollow">MarkdownPad&lt;/a> ，另一款叫做 &lt;a href="https://link.jianshu.com?t=http://code52.org/DownmarkerWPF/" target="_blank" rel="nofollow">MarkPad&lt;/a>。&lt;/p>&lt;/li>
&lt;li>&lt;p>iOS 端很多 app 早已经支持了 Markdown 录入，例如 Drafts，Day One，iA writer 等，另外 Ulysses for iPad 现在已经上架，可以说是 iOS 平台最好的编辑器了。&lt;/p>&lt;/li>
&lt;li>&lt;p>在 Web端，我强烈推荐&lt;a href="https://www.jianshu.com" target="_blank">简书&lt;/a>这款产品，上面有无数热爱文字的人在不停的创造，分享。在 Web 端使用 Markdown 没有比简书更舒服的地方了，同样支持左右两栏的实时预览，字体优雅，简洁。&lt;/p>&lt;/li>
&lt;/ul>
&lt;div class="image-package">
&lt;img src="https://ww2.sinaimg.cn/large/6aee7dbbgw1effdkfijo1j21220nigth.jpg" data-original-src="http://ww2.sinaimg.cn/large/6aee7dbbgw1effdkfijo1j21220nigth.jpg" alt="简书的编辑预览模式" style="cursor: zoom-in;">&lt;div class="image-caption">简书的编辑预览模式&lt;/div>
&lt;/div>
&lt;h2>二，Markdown 语法的简要规则&lt;/h2>
&lt;h3>标题&lt;/h3>
&lt;div class="image-package">
&lt;img src="https://ww1.sinaimg.cn/large/6aee7dbbgw1effeaclhiyj20eh09cwez.jpg" data-original-src="http://ww1.sinaimg.cn/large/6aee7dbbgw1effeaclhiyj20eh09cwez.jpg" alt="标题" style="cursor: zoom-in;">&lt;div class="image-caption">标题&lt;/div>
&lt;/div>
&lt;p>标题是每篇文章都需要也是最常用的格式，在 Markdown 中，如果一段文字被定义为标题，只要在这段文字前加 &lt;code>##&lt;/code> 号即可。&lt;/p>
&lt;p>&lt;code>## 一级标题&lt;/code>&lt;/p>
&lt;p>&lt;code>#### 二级标题&lt;/code>&lt;/p>
&lt;p>&lt;code>###### 三级标题&lt;/code>&lt;/p>
&lt;p>以此类推，总共六级标题，建议在井号后加一个空格，这是最标准的 Markdown 语法。&lt;/p>
&lt;h3>列表&lt;/h3>
&lt;p>熟悉 HTML 的同学肯定知道有序列表与无序列表的区别，在 Markdown 下，列表的显示只需要在文字前加上 &lt;code>-&lt;/code> 或 &lt;code>*&lt;/code> 即可变为无序列表，有序列表则直接在文字前加&lt;code>1.&lt;/code> &lt;code>2.&lt;/code> &lt;code>3.&lt;/code> 符号要和文字之间加上一个字符的空格。&lt;/p>
&lt;div class="image-package">
&lt;img src="https://ww4.sinaimg.cn/large/6aee7dbbgw1effew5aftij20d80bz3yw.jpg" data-original-src="http://ww4.sinaimg.cn/large/6aee7dbbgw1effew5aftij20d80bz3yw.jpg" alt="无序列表与有序列表" style="cursor: zoom-in;">&lt;div class="image-caption">无序列表与有序列表&lt;/div>
&lt;/div>
&lt;h3>引用&lt;/h3>
&lt;p>如果你需要引用一小段别处的句子，那么就要用引用的格式。&lt;/p>
&lt;blockquote>
&lt;p>例如这样&lt;/p>
&lt;/blockquote>
&lt;p>只需要在文本前加入 &lt;code>&amp;gt;&lt;/code> 这种尖括号（大于号）即可&lt;/p>
&lt;div class="image-package">
&lt;img src="https://ww3.sinaimg.cn/large/6aee7dbbgw1effezhonxlj20e009c3yu.jpg" data-original-src="http://ww3.sinaimg.cn/large/6aee7dbbgw1effezhonxlj20e009c3yu.jpg" alt="引用" style="cursor: zoom-in;">&lt;div class="image-caption">引用&lt;/div>
&lt;/div>
&lt;h3>图片与链接&lt;/h3>
&lt;p>插入链接与插入图片的语法很像，区别在一个 &lt;code>!&lt;/code>号&lt;/p>
&lt;p>图片为：&lt;code>![]()&lt;/code>&lt;/p>
&lt;p>链接为：&lt;code>[]()&lt;/code>&lt;/p>
&lt;p>插入图片的地址需要图床，这里推荐&lt;a href="https://link.jianshu.com?t=http://weibotuchuang.sinaapp.com" target="_blank" rel="nofollow">围脖图床修复计划&lt;/a> 与 &lt;a href="https://link.jianshu.com?t=http://www.getcloudapp.com" target="_blank" rel="nofollow">CloudApp&lt;/a> 的服务，生成URL地址即可。&lt;/p>
&lt;div class="image-package">
&lt;img src="https://ww2.sinaimg.cn/large/6aee7dbbgw1efffa67voyj20ix0ctq3n.jpg" data-original-src="http://ww2.sinaimg.cn/large/6aee7dbbgw1efffa67voyj20ix0ctq3n.jpg" alt="URL 与图片" style="cursor: zoom-in;">&lt;div class="image-caption">URL 与图片&lt;/div>
&lt;/div>
&lt;h3>粗体与斜体&lt;/h3>
&lt;p>Markdown 的粗体和斜体也非常简单，用两个 &lt;code>*&lt;/code> 包含一段文本就是粗体的语法，用一个 &lt;code>*&lt;/code> 包含一段文本就是斜体的语法。&lt;/p>
&lt;p>例如：&lt;strong>这里是粗体&lt;/strong> &lt;em>这里是斜体&lt;/em>&lt;/p>
&lt;h3>表格&lt;/h3>
&lt;p>表格是我觉得 Markdown 比较累人的地方，例子如下：&lt;/p>
&lt;pre class="hljs ruby">&lt;code class="ruby">&lt;span class="hljs-params">| Tables |&lt;/span> Are &lt;span class="hljs-params">| Cool |&lt;/span>
&lt;span class="hljs-params">| ------------- |&lt;/span>&lt;span class="hljs-symbol">:-------------&lt;/span>&lt;span class="hljs-symbol">:|&lt;/span> -----&lt;span class="hljs-symbol">:|&lt;/span>
&lt;span class="hljs-params">| col 3 is |&lt;/span> right-aligned &lt;span class="hljs-params">| $1600 |&lt;/span>
&lt;span class="hljs-params">| col 2 is |&lt;/span> centered &lt;span class="hljs-params">| $12 |&lt;/span>
&lt;span class="hljs-params">| zebra stripes |&lt;/span> are neat &lt;span class="hljs-params">| $1 |&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>这种语法生成的表格如下：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Tables&lt;/th>
&lt;th style="text-align:center">Are&lt;/th>
&lt;th style="text-align:right">Cool&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>col 3 is&lt;/td>
&lt;td style="text-align:center">right-aligned&lt;/td>
&lt;td style="text-align:right">$1600&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>col 2 is&lt;/td>
&lt;td style="text-align:center">centered&lt;/td>
&lt;td style="text-align:right">$12&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>zebra stripes&lt;/td>
&lt;td style="text-align:center">are neat&lt;/td>
&lt;td style="text-align:right">$1&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3>代码框&lt;/h3>
&lt;p>如果你是个程序猿，需要在文章里优雅的引用代码框，在 Markdown下实现也非常简单，只需要用两个 ` 把中间的代码包裹起来。图例：&lt;/p>
&lt;div class="image-package">
&lt;img src="https://ww3.sinaimg.cn/large/6aee7dbbgw1effg1lsa97j20lt0a8dgs.jpg" data-original-src="http://ww3.sinaimg.cn/large/6aee7dbbgw1effg1lsa97j20lt0a8dgs.jpg" style="cursor: zoom-in;">&lt;div class="image-caption">&lt;/div>
&lt;/div>
&lt;p>使用 &lt;code>tab&lt;/code> 键即可缩进。&lt;/p>
&lt;h3>分割线&lt;/h3>
&lt;p>分割线的语法只需要三个 &lt;code>*&lt;/code> 号，例如：&lt;/p>
&lt;hr>
&lt;blockquote>
&lt;p>到这里，Markdown 的基本语法在日常的使用中基本就没什么大问题了，只要多加练习，配合好用的工具，写起东西来肯定会行云流水。更多的语法规则，其实 Mou 的 Help 文档栗子很好，当你第一次使用 Mou 时，就会显示该文档。可以用来对用的查找和学习。&lt;/p>
&lt;/blockquote>
&lt;div class="image-package">
&lt;img src="https://ww3.sinaimg.cn/large/6aee7dbbgw1effgmnpgqlj210j0us44j.jpg" data-original-src="http://ww3.sinaimg.cn/large/6aee7dbbgw1effgmnpgqlj210j0us44j.jpg" style="cursor: zoom-in;">&lt;div class="image-caption">&lt;/div>
&lt;/div>
&lt;h2>
&lt;strong>三，相关推荐&lt;/strong>:&lt;/h2>
&lt;h3>&lt;strong>工具&lt;/strong>&lt;/h3>
&lt;p>&lt;em>图床工具用来上传图片获取 URL 地址&lt;/em>&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://link.jianshu.com?t=http://droplr.com" target="_blank" rel="nofollow">Droplr&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://link.jianshu.com?t=http://www.getcloudapp.com" target="_blank" rel="nofollow">Cloudapp&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://link.jianshu.com?t=https://itunes.apple.com/cn/app/yi-xiang/id672522335?mt=12&amp;amp;uo=4" target="_blank" rel="nofollow">ezShare for Mac&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://link.jianshu.com?t=http://weibotuchuang.sinaapp.com" target="_blank" rel="nofollow">围脖图床修复计划&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;em>在线好用的Markdown工具，为印象笔记而生&lt;/em>&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://link.jianshu.com?t=http://maxiang.info" target="_blank" rel="nofollow">马克飞象，专为印象笔记打造的Markdown编辑器，非常推荐&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3>
&lt;strong>相关文章阅读&lt;/strong>：&lt;/h3>
&lt;ul>
&lt;li>&lt;p>&lt;a href="https://www.jianshu.com/p/qqgjln" target="_blank">为什么作家应该用 Markdown 保存自己的文稿&lt;/a>&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;a href="https://link.jianshu.com?t=http://www.yangzhiping.com/tech/r-markdown-knitr.html" target="_blank" rel="nofollow">Markdown写作浅谈&lt;/a>&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;a href="https://link.jianshu.com?t=http://www.appinn.com/markdown-tools/" target="_blank" rel="nofollow">Markdown 工具补完&lt;/a>&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;a href="https://www.jianshu.com/p/63HYZ6" target="_blank">Drafts + Scriptogr.am + Dropbox 打造移动端 Markdown 风格博客&lt;/a>&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;a href="https://link.jianshu.com?t=http://www.ituring.com.cn/article/23" target="_blank" rel="nofollow">图灵社区，怎样使用Markdown&lt;/a>&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;a href="https://link.jianshu.com?t=http://news.cnblogs.com/n/139649/" target="_blank" rel="nofollow">为什么我们要学习Markdown的三个理由&lt;/a>&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;a href="https://link.jianshu.com?t=http://ibuick.me/?p=4093" target="_blank" rel="nofollow">Markdown 语法写作入门指南 by ibuick&lt;/a>&lt;/p>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>&lt;strong>本文首发在&lt;a href="https://link.jianshu.com?t=http://sspai.com/25137" target="_blank" rel="nofollow">少数派&lt;/a>转载请注明原作者，如果你觉得这篇文章对你有帮助或启发，也可以来请我&lt;a href="https://link.jianshu.com?t=http://ww2.sinaimg.cn/large/6aee7dbbjw1eiixgkex2ij21kw0t7wn5.jpg" target="_blank" rel="nofollow">喝咖啡&lt;/a>。&lt;br>
利益相关：本篇文章所有涉及到的软件均为笔者日常所用工具，无任何广告费用。&lt;/strong>&lt;/p>
&lt;pre>&lt;code> &amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
&lt;/code>&lt;/pre></description></item><item><title>网站转战阿里云服务器</title><link>https://blog.gaein.cn/passages/change-idc-to-alicloud/</link><pubDate>Sat, 27 Apr 2019 23:40:49 +0800</pubDate><guid>https://blog.gaein.cn/passages/change-idc-to-alicloud/</guid><description>&lt;p>网站有一段时间不能访问，原因是转备案到阿里云了。&lt;/p>
&lt;h2 id="原因">原因
&lt;/h2>&lt;p>最近网站没法访问了，原因很简单，不是服务器日常爆炸，而是拿去转备案了。
因为备案比较费事，不说材料准备，审核也要挺长时间（这次大概是15天）所以我不会轻易的转备案的。
不过最近仍然抛弃了陪伴我2年的主机屋，入了阿里云，原因很简单：&lt;/p>
&lt;ol>
&lt;li>阿里云确实在性能上比主机屋强&lt;/li>
&lt;li>阿里云的学生云服务器（24岁以下）才114/年，相比较90/月的老服务器来说太值了！&lt;/li>
&lt;li>服务稳定，工作效率高&lt;/li>
&lt;li>备案服务免费&lt;/li>
&lt;li>功能齐全，其他各项服务也很优秀&lt;/li>
&lt;/ol>
&lt;p>当然，主机屋也有一定的优点，比如很少需要手机验证码（因为上学的原因，没办法接收短信，以至于在阿里云重启服务器都成了难题）&lt;/p>
&lt;h2 id="购买前">购买前
&lt;/h2>&lt;p>实在是无法相信自己的眼睛，114/年，确认再三后终于入手。因为是放假前三天看见的，就提前在闲鱼买了阿里云的幕布（他自己印的，20块钱，这样比较方便）&lt;/p>
&lt;p>放假当天，先买了服务器，不过需要审核（因为限制24岁）&lt;/p>
&lt;p>流程：购买&amp;gt;审核&amp;gt;发放提货券&amp;gt;绑定账号&amp;gt;提取阿里云服务器。&lt;/p>
&lt;p>提货券有效期一个月，记得及时用啊！一开始我还以为商品有问题，那个有效期是服务器，还专门打了电话问一下。&lt;/p>
&lt;h2 id="备案">备案
&lt;/h2>&lt;p>到手后申请备案，然后打印核验单，把幕布粘墙上，架起三脚架和相机，拍照。家里有个相机是真的舒服。&lt;/p>
&lt;p>阿里云上传资料是不限制大小的，不过尽量不要上传太大的文件，容易由于网络原因出错，当然，也要保证清晰。&lt;/p>
&lt;p>第二天阿里云审核就给我来电话了，先后来了两次（清明节都不放假的？）&lt;/p>
&lt;blockquote>
&lt;p>第一次比较戏剧，客服跟我说我还没到年龄。我就很迷茫了，我初三就备案成功了，高二反而没到年龄？客服于是和我解释说阿里云这边要求16周岁（按照身份证上面的生日算），您还有两个个月才够岁数。蒙了一秒钟，我默默回复了一句，今年是2019年&amp;hellip;客服沉默了一下，才发现日期算错了&amp;hellip;&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>第二次来电是提醒我域名快要到期，并且提醒我说如果中间到期备案是不会成功的，可见服务之细致。我还真忘了这码子事，赶紧续费一波。&lt;/p>&lt;/blockquote>
&lt;p>一番折腾，上传图片，终于进入到了管局审核阶段。&lt;/p>
&lt;h2 id="部署">部署
&lt;/h2>&lt;p>一狠心上了大佬们说很“优雅”的CentOS，以前都是用的Ubuntu（2021补：屑CentOS的时代过去了，Ubuntu好时代，来力！）&lt;/p>
&lt;p>一点点部署nginx，nodejs，hexo&amp;hellip;&amp;hellip;&lt;/p>
&lt;p>到现在主页也没有完成，虽然没感觉CentOS怎么好用（因为Ubuntu习惯了吧）不过确实学到了很多东西。具体部署可能会以后再发。&lt;/p></description></item><item><title>简析当前主流浏览器与内核</title><link>https://blog.gaein.cn/passages/introductions-of-browser/</link><pubDate>Sat, 16 Mar 2019 22:33:45 +0800</pubDate><guid>https://blog.gaein.cn/passages/introductions-of-browser/</guid><description>&lt;p>任何上过网的用户对浏览器是再熟悉不过了。只是用户看到仅仅只是浏览器本身，却很少能看到浏览器最核心的部分?浏览器内核。从第一款libwww（Library WorldWideWeb）浏览器发展至今已经经历了无数竞争与淘汰了。&lt;/p>
&lt;!-- more -->
&lt;h2 id="前言">前言
&lt;/h2>&lt;blockquote>
&lt;p>任何上过网的用户对浏览器是再熟悉不过了。只是用户看到仅仅只是浏览器本身，却很少能看到浏览器最核心的部分—浏览器内核。从第一款libwww（Library WorldWideWeb）浏览器发展至今已经经历了无数竞争与淘汰了。现在国内常见的浏览器有：IE、Firefox、QQ浏览器、Safari、Opera、Google Chrome、百度浏览器、搜狗浏览器、猎豹浏览器、360浏览器、UC浏览器、遨游浏览器、世界之窗浏览器等。但目前最为主流浏览器有五大款，分别是IE、Firefox、Google Chrome、Safari、Opera。
浏览器最重要的部分是浏览器的内核。浏览器内核是浏览器的核心，也称“渲染引擎”，用来解释网页语法并渲染到网页上。浏览器内核决定了浏览器该如何显示网页内容以及页面的格式信息。不同的浏览器内核对网页的语法解释也不同，因此网页开发者需要在不同内核的浏览器中测试网页的渲染效果。
简单介绍一下五大主流浏览器。（按时间顺序）&lt;/p>&lt;/blockquote>
&lt;h2 id="主流浏览器top5">主流浏览器(TOP5)
&lt;/h2>&lt;h4 id="1-ie浏览器">1. IE浏览器
&lt;/h4>&lt;p>IE是微软公司旗下浏览器，是目国内用户量最多的浏览器。IE诞生于1994年，当时微软为了对抗市场份额占据将近百分之九十的网景Netscape Navigator，于是在Windows中开发了自己的浏览器Internet Explorer，自此也引发了第一次浏览器大战。结果可想而知，微软大获全胜，网景不得不将自己卖给AOL公司。但实际上事情并没有结束，网景后来开发了风靡一时的Firefox火狐，至今Firefox也成为世界五大浏览器之一。
1996年，微软从Spyglass手里拿到Spyglass Mosaic的源代码和授权，开始开发自己的浏览器IE。后来，微软以IE和Windows捆绑的模式不断向市场扩展份额，使IE成为市场的绝对主流。现在装了Windows系统的电脑基本无法卸载IE。&lt;/p>
&lt;h4 id="2-opera浏览器">2. Opera浏览器
&lt;/h4>&lt;p>Opera是挪威Opera Software ASA公司旗下的浏览器。1995年，opera公司发布第一版Opera浏览器，使用自己研发的Presto内核。当时opera公司的开发团队不断完善Presto内核，使Opera浏览器一度成为顶级浏览器。直到2016年奇虎360和昆仑万维收购了Oprea浏览器，从此也丢弃了强大的Presto内核，改用当时Google开源的webkit内核。后来Opera浏览器跟随Google将浏览器内核改为Blink内核。自此Presto内核也淡出了互联网市场。&lt;/p>
&lt;h4 id="3safari浏览器">3.Safari浏览器：
&lt;/h4>&lt;p>第二次浏览器大战是从苹果公司发布Safari浏览器开始的。2003年，苹果公司在苹果手机上开发Safari浏览器，利用自己得天独厚的手机市场份额使Safari浏览器迅速成为世界主流浏览器。Safari是最早使用webkit内核的浏览器也是现在苹果默认的浏览器。&lt;/p>
&lt;h4 id="4firefox浏览器">4.Firefox浏览器：
&lt;/h4>&lt;p>Firefox浏览器使Mozilla公司旗下浏览器，也是刚才提到的网景公司后来的浏览器。网景被收购后，网景人员创办了Mozilla基金会，这是一个非盈利组织，他们在2004年推出自己的浏览器Firefox。Firefox采用Gecko作为内核。Gecko是一个开源的项目，代码完全公开，因此受到很多人的青睐。Firefox的问世加快了第二次浏览器大战的开始。第二次浏览器大战与第一次二元鼎力的局面不同，这一次的特点就是百家争鸣，也自此打破了IE浏览器从98年网景被收购后独步浏览器市场的局面。&lt;/p>
&lt;h4 id="5chrome浏览器">5.Chrome浏览器：
&lt;/h4>&lt;p>Chrome浏览器是google旗下的浏览器。Chrome浏览器至发布以来一直讲究简洁、快速、安全，所以Chrome浏览器到现在一直受人追捧。最开始Chrome采用webkit作为浏览器内核，直到2013年，google宣布不再使用苹果的webkit内核，开始使用webkit的分支内核Blink。&lt;/p>
&lt;h2 id="内核简介top4">内核简介(TOP4)
&lt;/h2>&lt;p>以上是五大浏览器的简介，接下来是四大内核。在介绍五大浏览器的同时也已经顺便介绍了四大内核。四大内核分别是：Trident（也称IE内核）、webkit、Blink、Gecko。五大浏览器采用的都是单内核，而随着浏览器的发展现在也出现了双内核。像360浏览器、QQ浏览器都是采用双内核。
作为前端开发，熟悉四大内核是非常有必要的。四大内核的解析不同使网页渲染效果更具多样化。下面总结一下各常用浏览器所使用的内核。&lt;/p>
&lt;h2 id="相关浏览器总结">相关浏览器总结
&lt;/h2>&lt;ol>
&lt;li>IE浏览器内核：Trident内核，也是俗称的IE内核；&lt;/li>
&lt;li>Chrome浏览器内核：统称为Chromium内核或Chrome内核，以前是Webkit内核，现在是Blink内核；&lt;/li>
&lt;li>Firefox浏览器内核：Gecko内核，俗称Firefox内核；&lt;/li>
&lt;li>Safari浏览器内核：Webkit内核；&lt;/li>
&lt;li>Opera浏览器内核：最初是自己的Presto内核，后来是Webkit，现在是Blink内核；&lt;/li>
&lt;li>360浏览器、猎豹浏览器内核：IE+Chrome双内核；&lt;/li>
&lt;li>搜狗、遨游、QQ浏览器内核：Trident（兼容模式）+Webkit（高速模式）；&lt;/li>
&lt;li>百度浏览器、世界之窗内核：IE内核；&lt;/li>
&lt;li>2345浏览器内核：以前是IE内核，现在也是IE+Chrome双内核；&lt;/li>
&lt;/ol>
&lt;p>写这篇文章主要是因为自己在前端开发过程常遇到浏览器兼容问题，以后有时间要对不同内核浏览器渲染效果的区别做一下总结。这是对不同浏览器和内核的总结，希望对大家有帮助。&lt;/p>
&lt;p>版权
作者：kookic
来源：CSDN
原文：https://blog.csdn.net/yuyanjing123456789/article/details/78689595
转载也是因为我遇到了兼容性方面的问题，看见这篇文章非常全面&lt;/p></description></item><item><title>Sueface二手电脑验机步骤 - 二手surface怎么验机</title><link>https://blog.gaein.cn/passages/sechand-surface-testing/</link><pubDate>Sat, 16 Mar 2019 16:34:35 +0800</pubDate><guid>https://blog.gaein.cn/passages/sechand-surface-testing/</guid><description>&lt;p>半个月前购入了一台Surface Pro 3 (i3/4G/64G)这里呢，贴一下验机步骤备用。最近两周一直在研究Surface系统（
我在Microsoft官网下载的Surface恢复系统没有简体中文）&lt;/p>
&lt;!-- more -->
&lt;h2 id="前言">前言
&lt;/h2>&lt;blockquote>
&lt;p>半个月前购入了一台Surface Pro 3 (i3/4G/64G)这里呢，贴一下验机步骤备用。最近两周一直在研究Surface系统（我在Microsoft官网下载的Surface恢复系统没有简体中文）&lt;/p>&lt;/blockquote>
&lt;h2 id="外观">外观
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>检查划痕，磕碰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>检查成色是否符合卖家描述&lt;/p>
&lt;/li>
&lt;li>
&lt;p>检测背部可调节支架调节是否流畅&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="屏幕">屏幕
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>关机后检查是否有斑点&lt;/p>
&lt;/li>
&lt;li>
&lt;p>对着灯（最好是我这样的条形LED）检查屏幕划痕&lt;/p>
&lt;/li>
&lt;li>
&lt;p>开机后使用软件检测屏幕是否有坏点&lt;/p>
&lt;/li>
&lt;li>
&lt;p>开机后在画图中检测触控是否完美&lt;/p>
&lt;/li>
&lt;li>
&lt;p>使用触控笔和Surface自带的FreshPaint检测触控笔触控和压感是否正常&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="真伪">真伪
&lt;/h2>&lt;blockquote>
&lt;p>目前基本没有伪造的Surface（一般人轻易搞不了）所以这里是针对更换屏幕、硬盘的&lt;/p>&lt;/blockquote>
&lt;ol>
&lt;li>使用软件检测配置，正品的屏幕一般是三星，硬盘是海力士&lt;/li>
&lt;/ol>
&lt;h2 id="其它">其它
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>在此电脑&amp;gt;属性中查看是否为Surface OEM系统&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在微软官网 &lt;a class="link" href="https://support.microsoft.com/zh-cn/devices?brand=surface" target="_blank" rel="noopener"
>https://support.microsoft.com/zh-cn/devices?brand=surface&lt;/a> 页面注册Surface（序列号在背面，或者在“Surfcae”软件中查看）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>检查电池情况&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>三星内存序列号含义——教你区分三星内存颗粒B-Die或者C-Die</title><link>https://blog.gaein.cn/passages/how-to-know-b-or-c-die/</link><pubDate>Sun, 17 Feb 2019 00:17:51 +0800</pubDate><guid>https://blog.gaein.cn/passages/how-to-know-b-or-c-die/</guid><description>&lt;p>经常有人问怎么区分三星B-Die或者C-Die啥的，今天呢闲来无事看了一下，就写在这里啦&lt;/p>
&lt;p>版权声明：标题图引用自淘宝，内部部分图片和内容引用于网络（如ChipHell），如果侵权请联系 &lt;a class="link" href="mailto:mail@Gaein.cn" >mail@Gaein.cn&lt;/a>&lt;/p>
&lt;h2 id="查询序列号">查询序列号
&lt;/h2>&lt;p>经常有人问怎么区分三星B-Die或者C-Die啥的，今天呢闲来无事看了一下，就写在这里啦&lt;/p>
&lt;p>首先要确定内存是三星的，具体可以用AIDA64软件来看，在主板&amp;gt;SPD&amp;gt;DRAM制造商一栏，比如我的是镁光公司制造的颗粒&lt;/p>
&lt;p>&lt;img src="https://s2.ax1x.com/2019/02/17/ks5Vrq.png"
loading="lazy"
alt="ks5Vrq.png"
>&lt;/p>
&lt;p>然后拆开内存的马甲（没有更省心啊哈哈）找到内存芯片上面的序列号&lt;/p>
&lt;p>&lt;img src="https://s2.ax1x.com/2019/02/17/ks5QG4.md.jpg"
loading="lazy"
alt="ks5QG4.md.jpg"
>]&lt;/p>
&lt;p>从第二行起：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">K4A8G085WB-BCPB
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="序列号含义">序列号含义
&lt;/h2>&lt;p>这是个B-Die芯片。我们来解释一下三星的序列号意义（部分内容为个人根据官网数据总结而来）：&lt;/p>
&lt;h3 id="k4">K4：
&lt;/h3>&lt;p>不同于ChipHell某个帖子的说法，我认为4并非代表DRAM产品。因为三星的LP-DDR3、LP-DDR4X产品中均出现了K3开头的型号，LP-DDR4X的中文名称是四代超低功耗双倍数据率同步动态随机存储器，双倍数据率同步动态随机存储器就是DRAM。而且在三星产品网页的网址&amp;quot;https://www.samsung.com/semiconductor/cn/dram/lpddr4x/&amp;ldquo;也能看出来其是DRAM产品，但并非K4开头。除此之外，HBM、HBM2均为KH开头。
（LP-DDR3、LP-DDR4X有K3，HBM、HBM2均为KH）&lt;/p>
&lt;h3 id="a">A：
&lt;/h3>&lt;p>代表DDR4。（此外：F是LP-DDR4，U是LP-DDR4X，B是DDR3，Q（K3开头）或E（K4开头）是LP-DDR3，Z是G-DDR6，G是G-DDR5，A8是HBM/HBM2）&lt;/p>
&lt;h3 id="8g">8G：
&lt;/h3>&lt;p>代表容量（整个内存容量，如果是这样的话应该是1Gx8（单面条）或者512MX16（双面）或者2GX4）（除此之外，DDR4产品用AG代表6GB，LP-DDR4产品用2代表12GB、6代表16GB、H代表24GB、B代表32GB、4和8分别代表4G和8G，LP-DDR4X产品用H6代表48GB、用H7代表64GB、12GB 16GB 24FB 32GB同LP-DDR4，DDR3用1G2G4G表示容量，LP-DDR3用F3（K3开头）或者6E（K4开头）表示16GB、HE表示24GB、F4（K3开头）或者BE（K4开头）表示32GB、用FA表示64G）&lt;/p>
&lt;h3 id="w后面的b">W后面的B：
&lt;/h3>&lt;p>代表版本：B，也就是B-Die颗粒（如果在三星官网找到那个内存颗粒的网页，然后点相关资源&amp;gt;DataSheet会发现标题写着“8Gb B-die DDR4 S-DRAM”）同样的，C就是C-Die，E是E-Die或者C-Die（对于其他产品如LP-DDR4等，并不适用）&lt;/p>
&lt;h3 id="-bcpb">-BCPB
&lt;/h3>&lt;p>我不是特别清楚，可以参考：https://www.chiphell.com/thread-1625004-1-1.html
但是原文我感觉有误，因为B表示78 FBGA的话，为什么96也写的B？&lt;/p>
&lt;p>至于W前面的字母，应该是和架构有关&lt;/p>
&lt;p>最稳妥的知道规格的方法还是去三星官网查询：https://www.samsung.com/semiconductor/cn/dram/ddr4/&lt;/p>
&lt;p>当然，看W后面的字母就知道是否是B-Die啦&lt;/p>
&lt;p>实在不信，可以点击链接进到颗粒具体的页面，然后看看相关资源&amp;gt;DataSheet写的是什么就好啦&lt;/p>
&lt;p>&lt;img src="https://s2.ax1x.com/2019/02/17/ksojM9.png"
loading="lazy"
alt="ksojM9.png"
>&lt;/p>
&lt;p>那么如何根据已经知道的信息在不拆开马甲的情况下确定大概的序列号呢（这样无法判断是否为B-Die）&lt;/p>
&lt;p>首先观察单面或者双面，侧面看看颗粒数目，根据容量确定架构&lt;/p>
&lt;p>比如8G单面条，8个颗粒就是1G x 8啦，速率根据AIDA64&amp;gt;主板&amp;gt;存取速度（不带SPD的）确定。&lt;/p>
&lt;p>然后在三星官网：https://www.samsung.com/semiconductor/cn/dram/ 选择响应的产品（如DDR4）在网页下面的筛选器筛选即可。只能缩小范围，无法确定具体型号的&lt;/p></description></item><item><title>2019年2月12日服务器宕机说明</title><link>https://blog.gaein.cn/passages/errorlog-190212/</link><pubDate>Tue, 12 Feb 2019 23:18:56 +0800</pubDate><guid>https://blog.gaein.cn/passages/errorlog-190212/</guid><description>&lt;p>网站从2019年2月12日早7点起宕机，到当天23:10基本恢复访问&lt;/p>
&lt;h3 id="宕机原因">宕机原因
&lt;/h3>&lt;p>忘记续费服务器，超时一周后导致服务器被删除&lt;/p>
&lt;h3 id="解决步骤">解决步骤：
&lt;/h3>&lt;ol>
&lt;li>上午同学发现网站无法访问联系我&lt;/li>
&lt;li>更改DNS到虚拟主机，但发现虚拟主机里面的index.html已经丢失&lt;/li>
&lt;li>下午到家联系IDC客服进行数据恢复&lt;/li>
&lt;li>13:55购入新服务器&lt;/li>
&lt;li>联系客服完成数据恢复&lt;/li>
&lt;li>更改DNS回到网站服务器&lt;/li>
&lt;li>晚上解决网卡设置问题（解决无法访问）&lt;/li>
&lt;li>23:10恢复主页、博客、博客（旧）、文件和res资源服务器的访问&lt;/li>
&lt;li>23:26恢复 SeaFile 客户端和网页版的访问&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>此后应牢记续费服务器事宜，及时备份服务器&lt;/p>&lt;/blockquote></description></item><item><title>Ubuntu更改IP后重新配置网卡</title><link>https://blog.gaein.cn/passages/config-ubuntueth/</link><pubDate>Tue, 12 Feb 2019 21:04:35 +0800</pubDate><guid>https://blog.gaein.cn/passages/config-ubuntueth/</guid><description>&lt;p>编辑/etc/network/interfaces：&lt;/p>
&lt;p>&lt;code>vim /etc/network/interfaces&lt;/code>&lt;/p>
&lt;p>内容如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">auto lo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface lo inet loopback
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auto eth0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface eth0 inet static //指定为静态
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">address 43.226.***.** //服务器IP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">netmask 255.255.240.0 //网关
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gateway 43.226.156.1 //子网掩码
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>不同的服务器或者不同的IDC配置文件有可能不同，请自行修改
修改完成后使用：&lt;/p>
&lt;p>&lt;code>sudo /etc/init.d/networking restart&lt;/code>&lt;/p>
&lt;p>重启网络设备&lt;/p></description></item><item><title>Minecraft启动器正版登录原理</title><link>https://blog.gaein.cn/passages/minecraft-login/</link><pubDate>Fri, 08 Feb 2019 21:04:35 +0800</pubDate><guid>https://blog.gaein.cn/passages/minecraft-login/</guid><description>&lt;p>前阵子为了给服务器做个启动器，需要正版登录，于是研究了一下这方面的内容&amp;hellip;结果百度上是千篇一律的：
&amp;ldquo;向MOJANG服务器POST账号密码&amp;rdquo;
那么我们的当前的问题是：
1、接收账号密码的服务器地址/IP是什么
2、POST的格式
至于如何POST数据，百度一搜一把
于是我研究了一下HeyoX的代码，结果&amp;hellip;没看懂
又是一番艰苦卓绝的百度，终于发现了一些有用的东西
&lt;a class="link" href="https://blessing.studio/minecraft-yggdrasil-api-third-party-implementation" target="_blank" rel="noopener"
>https://blessing.studio/minecraft-yggdrasil-api-third-party-implementation&lt;/a>
原来MOJANG验证系统叫Yggdrasil啊&amp;hellip;或许搜这个能有所帮助
于是，发现了神级WIKI，正式我需要的！
&lt;a class="link" href="https://wiki.vg/Authentication" target="_blank" rel="noopener"
>https://wiki.vg/Authentication&lt;/a>
这里面详细的写了包括登录、刷新、登出等
以下是翻译内容(&amp;quot;(?)是当前无法确定的翻译&amp;quot;)：
从 Minecraft 1.6 起引入了一个名为yggdrasil的新认证方案，它完全取代了以前的认证系统。Mojang的另一个游戏——Scrolls，也使用这种身份验证方法。Mojang表示，每个人都应该使用这个认证系统进行自定义登录，但是不应该从用户那里收集凭证。&lt;/p>
&lt;h2 id="目录">目录：
&lt;/h2>&lt;ul>
&lt;li>1.认证格式&lt;/li>
&lt;li>2.错误&lt;/li>
&lt;li>3.登录&lt;/li>
&lt;li>3.1.端点&lt;/li>
&lt;li>3.2.有效负载(?Payload)&lt;/li>
&lt;li>3.3.响应&lt;/li>
&lt;li>4.刷新&lt;/li>
&lt;li>3.1.端点&lt;/li>
&lt;li>3.2.有效负载(?Payload)&lt;/li>
&lt;li>3.3.响应&lt;/li>
&lt;li>5.生效(?Validate)&lt;/li>
&lt;li>3.1.端点&lt;/li>
&lt;li>3.2.有效负载(?Payload)&lt;/li>
&lt;li>3.3.响应&lt;/li>
&lt;li>6.登出&lt;/li>
&lt;li>3.1.端点&lt;/li>
&lt;li>3.2.有效负载(?Payload)&lt;/li>
&lt;li>3.3.响应&lt;/li>
&lt;li>7.失效&lt;/li>
&lt;li>3.1.端点&lt;/li>
&lt;li>3.2.有效负载(?Payload)&lt;/li>
&lt;li>3.3.响应&lt;/li>
&lt;li>8.加入服务器&lt;/li>
&lt;/ul>
&lt;h2 id="请求格式">请求格式
&lt;/h2>&lt;p>所有发送到ygdrasil的请求都发送到以下服务器：
&lt;a class="link" href="https://authserver.mojang.com" target="_blank" rel="noopener"
>https://authserver.mojang.com&lt;/a>
此外，它们还应遵守以下规则：&lt;/p>
&lt;ul>
&lt;li>是POST请求吗？&lt;/li>
&lt;li>将content-type头设置为&amp;quot;application/json&amp;quot;&lt;/li>
&lt;li>包含一个JSON编码的字典作为有效负载(?Payload)
如果请求成功，服务器将响应：&lt;/li>
&lt;li>HTTP状态码200&lt;/li>
&lt;li>在下面有一个符合规范的JSON编码字典
但是，如果请求失败，服务器将响应：&lt;/li>
&lt;li>适当的非200 HTTP状态代码&lt;/li>
&lt;li>遵循此格式（见下）的JSON编码字典：
{
&amp;ldquo;error&amp;rdquo;:&amp;ldquo;错误的简短描述&amp;rdquo;,
&amp;ldquo;errormessage&amp;rdquo;:&amp;ldquo;可以向用户显示的较长描述&amp;rdquo;,
&amp;ldquo;cause&amp;rdquo;:&amp;ldquo;错误原因&amp;rdquo; //可选
}&lt;/li>
&lt;/ul>
&lt;h2 id="错误">错误
&lt;/h2>&lt;p>以下是可能遇到的一些错误&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>错误&lt;/th>
&lt;th>原因&lt;/th>
&lt;th>错误信息&lt;/th>
&lt;th>笔记&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Method Not Allowed&lt;/td>
&lt;td>&lt;/td>
&lt;td>请求中的方法不允许用于请求URL的资源(?)&lt;/td>
&lt;td>发送了除POST以外方法的请求&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Not Found&lt;/td>
&lt;td>&lt;/td>
&lt;td>服务器上未找到任何与URL相匹配的内容&lt;/td>
&lt;td>发送到了不存在的端点&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ForbiddenOperationException&lt;/td>
&lt;td>用户迁移异常&lt;/td>
&lt;td>无效的凭证。用户已迁移，请使用电子邮件作为用户名&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ForbiddenOperationException&lt;/td>
&lt;td>&lt;/td>
&lt;td>无效的凭证。用户名或密码错误&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ForbiddenOperationException&lt;/td>
&lt;td>&lt;/td>
&lt;td>无效的凭证&lt;/td>
&lt;td>最近使用此用户名进行的登录尝试太多（详见/authenticate）。请注意，用户名和密码可能仍然有效！&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ForbiddenOperationException&lt;/td>
&lt;td>&lt;/td>
&lt;td>无效的令牌&lt;/td>
&lt;td>accessToken失效&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>IllegalArgumentException&lt;/td>
&lt;td>&lt;/td>
&lt;td>访问令牌已经分配了一个配置文件&lt;/td>
&lt;td>选择配置文件尚未生效&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>IllegalArgumentException&lt;/td>
&lt;td>&lt;/td>
&lt;td>凭证空&lt;/td>
&lt;td>用户名/密码未提交&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>IllegalArgumentException&lt;/td>
&lt;td>&lt;/td>
&lt;td>无效的salt版本&lt;/td>
&lt;td>？？？&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Unsupported Media Type&lt;/td>
&lt;td>&lt;/td>
&lt;td>服务器拒绝回复请求，因为请求的格式不受请求方法的支持&lt;/td>
&lt;td>数据未作为&amp;quot;application/json&amp;quot;提交&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="登录">登录
&lt;/h2>&lt;p>使用用户的密码进行登录&lt;/p>
&lt;h4 id="端点">端点
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">/authenticate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="有效负载">有效负载
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;agent&amp;#34;: { //默认是Minecraft
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;Minecraft&amp;#34;, //为了登录MOJANG的另外一款游戏Scrolls，应该使用&amp;#34;Scrolls&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;version&amp;#34;: 1 //数字可能会增长
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //未来的普通客户端(?by the vanilla client in the future)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;username&amp;#34;: &amp;#34;MOJANG账户名&amp;#34;, //可以是电子邮件或者玩家名
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //未迁移的账户（使用玩家名）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;password&amp;#34;: &amp;#34;MOJANG账户的密码&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;clientToken&amp;#34;: &amp;#34;客户端标识符(client identifier)&amp;#34;,//可选
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;requestUser&amp;#34;: true //可选，默认: false; 选择true将在响应中加入用户对象
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>clientToken应该是随机生成的标识符，并且对于每个请求都必须是相同的。Vanilla启动程序在第一次运行时生成一个随机的（版本4）的uuid并保存它，在随后的每个请求中都重复使用它。如果它被省略，服务器将基于Java的UUID.toString()生成一个随机令牌，然后由客户端存储。但是，这也会使该用户以前获得的所有客户端访问令牌失效。&lt;/p>
&lt;h4 id="响应">响应
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;accessToken&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;随机访问令牌（access token）&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">十六进制或&lt;/span>&lt;span class="n">JSON&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Web&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Token&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="err">未确认&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="err">正常的&lt;/span>&lt;span class="n">accessToken能够在payload&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">JWT中找到&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">第二个由&lt;/span> &lt;span class="s1">&amp;#39;.&amp;#39;&lt;/span>&lt;span class="err">分割的&lt;/span>&lt;span class="n">Base64编码的&lt;/span> &lt;span class="n">JSON&lt;/span> &lt;span class="n">object&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="err">在关键词&lt;/span> &lt;span class="s2">&amp;#34;yggt&amp;#34;&lt;/span>&lt;span class="err">中&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;clientToken&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;客户端标识符(client identifier)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">与接收到的相同&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;availableProfiles&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">只有在收到&lt;/span>&lt;span class="n">agent字段时才出现&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;agent&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;minecraft&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">大概和以前相同的值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;配置文件标识符&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">十六进制&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;玩家名&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;userId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;十六进制字符&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;createdAt&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="err">数值&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">（账户创建时间）自&lt;/span>&lt;span class="mi">1970&lt;/span>&lt;span class="err">年&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="err">月&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="err">日起毫秒&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;legacyProfile&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">true&lt;/span> &lt;span class="err">或者&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">即使失败也存在&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;suspended&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">true&lt;/span> &lt;span class="err">或者&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">很可能是否&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;paid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">true&lt;/span> &lt;span class="err">或者&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">很可能是是&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;migrated&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">true&lt;/span> &lt;span class="err">或者&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">即使是迁移账号也是否&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="err">?&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">bugs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">mojang&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">browse&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">WEB&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1461&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err">（作者不确定）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;legacy&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">true&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="bp">false&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">只有当为是时才会出现在应中。默认为&lt;/span>&lt;span class="bp">false&lt;/span>&lt;span class="err">。对新的&lt;/span>&lt;span class="n">legacyProfile而言是多余的&lt;/span>&lt;span class="err">。。。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;selectedProfile&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">只有在收到&lt;/span>&lt;span class="n">agent字段时才出现&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;无短线的uuid&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;游戏名&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;userId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;十六进制字符&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;createdAt&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1325376000000&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;legacyProfile&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">true&lt;/span> &lt;span class="err">或者&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;suspended&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">true&lt;/span> &lt;span class="err">或者&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;paid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">true&lt;/span> &lt;span class="err">或者&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;migrated&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">true&lt;/span> &lt;span class="err">或者&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;legacy&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">true&lt;/span> &lt;span class="err">或者&lt;/span> &lt;span class="bp">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;user&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">仅当请求负载中的&lt;/span>&lt;span class="n">requestUser为true时才存在&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;user identifier&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">十六进制&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;email&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;user@email.example&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">为迁移账户的&lt;/span> &lt;span class="n">Hashed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err">（作者不确定）&lt;/span> &lt;span class="err">值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;user@email.example&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">未迁移帐户的常规名称，迁移帐户的电子邮件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;registerIp&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;198.51.100.*&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">最后一次登录的&lt;/span>&lt;span class="n">IP地址&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;migratedFrom&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;minecraft.net&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;migratedAt&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1420070400000&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;registeredAt&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1325376000000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">或许比配置文件创造的时间稍早一些&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;passwordChangedAt&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1569888000000&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;dateOfBirth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">2208988800000&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;suspended&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;blocked&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;secured&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;migrated&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">甚至在&lt;/span>&lt;span class="n">migratedAt和migratedFrom存在时似乎也是否&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;emailVerified&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;legacyUser&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;verifiedByParent&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;preferredLanguage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">或许不是所有账户都存在此项&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;en&amp;#34;&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="n">Java&lt;/span> &lt;span class="n">locale&lt;/span> &lt;span class="err">格式&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">docs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">oracle&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">javase&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">util&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Locale&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="c1">##toString--)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;twitch_access_token&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="err">只有连接了&lt;/span>&lt;span class="n">twitch账户时才存在&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">see&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">account&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">mojang&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">me&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">settings&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;twitch oauth token&amp;#34;&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="n">OAuth&lt;/span> &lt;span class="mf">2.0&lt;/span> &lt;span class="n">Token&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">alphanumerical&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">g&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">twitch&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tv&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kraken&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="n">oauth_token&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">Twitch&lt;/span> &lt;span class="n">API的文档&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">justintv&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Twitch&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">API&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>未完待续
Note: 如果用户希望保持登录状态，强烈建议您保存accesToken而不是密码本身。&lt;/p>
&lt;p>目前每个账户仅有一个配置文件，但是未来可能会有多个配置文件。如果用户试图登录到没有随附Minecraft许可证的有效Mojang帐户，则身份验证将成功，但响应将不包含selectedProfile字段，并且availableProfiles数组将为空。&lt;/p>
&lt;p>Some instances in the wild have been observed of Mojang returning a flat null for failed refresh attempts against legacy accounts. It&amp;rsquo;s not clear what the actual error tied to the null response is and it is extremely rare, but implementations should be wary of null output from the response.&lt;/p>
&lt;p>This endpoint is severely rate-limited: multiple /authenticate requests for the same account in a short amount of time (think 3 requests in a few seconds), even with the correct password, will eventually lead to an Invalid credentials. response. This error clears up a few seconds later.
Refresh&lt;/p>
&lt;p>Refreshes a valid accessToken. It can be used to keep a user logged in between gaming sessions and is preferred over storing the user&amp;rsquo;s password in a file (see lastlogin).
Endpoint&lt;/p>
&lt;p>/refresh&lt;/p>
&lt;p>Payload&lt;/p>
&lt;p>{
&amp;ldquo;accessToken&amp;rdquo;: &amp;ldquo;valid accessToken&amp;rdquo;,
&amp;ldquo;clientToken&amp;rdquo;: &amp;ldquo;client identifier&amp;rdquo;, // This needs to be identical to the one used
// to obtain the accessToken in the first place
&amp;ldquo;selectedProfile&amp;rdquo;: { // optional; sending it will result in an error
&amp;ldquo;id&amp;rdquo;: &amp;ldquo;profile identifier&amp;rdquo;, // hexadecimal
&amp;ldquo;name&amp;rdquo;: &amp;ldquo;player name&amp;rdquo;
},
&amp;ldquo;requestUser&amp;rdquo;: true // optional; default: false; true adds the user object to the response
}&lt;/p>
&lt;p>Note: The provided accessToken gets invalidated.
Response&lt;/p>
&lt;p>{
&amp;ldquo;accessToken&amp;rdquo;: &amp;ldquo;random access token&amp;rdquo;, // hexadecimal
&amp;ldquo;clientToken&amp;rdquo;: &amp;ldquo;client identifier&amp;rdquo;, // identical to the one received
&amp;ldquo;selectedProfile&amp;rdquo;: {
&amp;ldquo;id&amp;rdquo;: &amp;ldquo;profile identifier&amp;rdquo;, // hexadecimal
&amp;ldquo;name&amp;rdquo;: &amp;ldquo;player name&amp;rdquo;
},
&amp;ldquo;user&amp;rdquo;: { // only present if requestUser was true in the request payload
&amp;ldquo;id&amp;rdquo;: &amp;ldquo;user identifier&amp;rdquo;, // hexadecimal
&amp;ldquo;properties&amp;rdquo;: [
{
&amp;ldquo;name&amp;rdquo;: &amp;ldquo;preferredLanguage&amp;rdquo;, // might not be present for all accounts
&amp;ldquo;value&amp;rdquo;: &amp;ldquo;en&amp;rdquo; // Java locale format (https://docs.oracle.com/javase/8/docs/api/java/util/Locale.html##toString&amp;ndash;)
},
{
&amp;ldquo;name&amp;rdquo;: &amp;ldquo;twitch_access_token&amp;rdquo;, // only present if a twitch account is associated (see https://account.mojang.com/me/settings)
&amp;ldquo;value&amp;rdquo;: &amp;ldquo;twitch oauth token&amp;rdquo; // OAuth 2.0 Token; alphanumerical; e.g. https://api.twitch.tv/kraken?oauth_token=[&amp;hellip;]
// the Twitch API is documented here: https://github.com/justintv/Twitch-API
}
]
}
}&lt;/p>
&lt;p>Validate&lt;/p>
&lt;p>Checks if an accessToken is usable for authentication with a Minecraft server. The Minecraft Launcher (as of version 1.6.13) calls this endpoint on startup to verify that its saved token is still usable, and calls /refresh if this returns an error.&lt;/p>
&lt;p>Note that an accessToken may be unusable for authentication with a Minecraft server, but still be good enough for /refresh. This mainly happens when one has used another client (e.g. played Minecraft on another PC with the same account). It seems only the most recently obtained accessToken for a given account can reliably be used for authentication (the next-to-last token also seems to remain valid, but don&amp;rsquo;t rely on it).&lt;/p>
&lt;p>/validate may be called with or without a clientToken. If a clientToken is provided, it should match the one used to obtain the accessToken. The Minecraft Launcher does send a clientToken to /validate.
Endpoint&lt;/p>
&lt;p>/validate&lt;/p>
&lt;p>Payload&lt;/p>
&lt;p>{
&amp;ldquo;accessToken&amp;rdquo;: &amp;ldquo;valid accessToken&amp;rdquo;,
&amp;ldquo;clientToken&amp;rdquo;: &amp;ldquo;associated clientToken&amp;rdquo; // optional, see above
}&lt;/p>
&lt;p>Response&lt;/p>
&lt;p>Returns an empty payload (204 No Content) if successful, an error JSON with status 403 Forbidden otherwise.
Signout&lt;/p>
&lt;p>Invalidates accessTokens using an account&amp;rsquo;s username and password.
Endpoint&lt;/p>
&lt;p>/signout&lt;/p>
&lt;p>Payload&lt;/p>
&lt;p>{
&amp;ldquo;username&amp;rdquo;: &amp;ldquo;mojang account name&amp;rdquo;,
&amp;ldquo;password&amp;rdquo;: &amp;ldquo;mojang account password&amp;rdquo;
}&lt;/p>
&lt;p>Response&lt;/p>
&lt;p>Returns an empty payload if successful.
Invalidate&lt;/p>
&lt;p>Invalidates accessTokens using a client/access token pair.
Endpoint&lt;/p>
&lt;p>/invalidate&lt;/p>
&lt;p>Payload&lt;/p>
&lt;p>{
&amp;ldquo;accessToken&amp;rdquo;: &amp;ldquo;valid accessToken&amp;rdquo;,
&amp;ldquo;clientToken&amp;rdquo;: &amp;ldquo;client identifier&amp;rdquo; // This needs to be identical to the one used
// to obtain the accessToken in the first place
}&lt;/p>
&lt;p>Response&lt;/p>
&lt;p>Returns an empty payload if successful.
Joining a Server&lt;/p>
&lt;p>See Protocol Encryption##Authentication&lt;/p></description></item><item><title>优雅的从 VMWare 官网上下载完整版 Workstation Pro</title><link>https://blog.gaein.cn/passages/download-workstation-pro/</link><pubDate>Wed, 23 Jan 2019 14:46:35 +0800</pubDate><guid>https://blog.gaein.cn/passages/download-workstation-pro/</guid><description>&lt;p>VMWare是世界闻名的虚拟机软件，那么如何在官网下载正版呢？&lt;/p>
&lt;h2 id="打开vmware官网">打开VMWare官网
&lt;/h2>&lt;p>&lt;a class="link" href="https://www.vmware.com/cn.html" target="_blank" rel="noopener"
>VMware中国&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Download-Workstation-Pro/01.webp"
loading="lazy"
alt="首页"
>&lt;/p>
&lt;h2 id="转到下载页面">转到下载页面
&lt;/h2>&lt;p>点击左侧下载&amp;gt;产品下载&amp;gt;Workstation Pro&lt;/p>
&lt;p>&lt;strong>！注意，是“产品下载”中的Workstation Pro而不是“免费产品试用版和演示”中的&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Download-Workstation-Pro/02.webp"
loading="lazy"
alt="下载"
>&lt;/p>
&lt;h2 id="跳转到软件下载">跳转到软件下载
&lt;/h2>&lt;p>跳转后在页面中选择自己需要的，跳转至下载&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Download-Workstation-Pro/03.webp"
loading="lazy"
alt="下载详细页面"
>&lt;/p>
&lt;h2 id="点击了解更多信息">点击“了解更多信息”
&lt;/h2>&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Download-Workstation-Pro/04.webp"
loading="lazy"
alt="更多信息"
>&lt;/p>
&lt;h2 id="记下内部版本号">记下“内部版本号”
&lt;/h2>&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Download-Workstation-Pro/05.webp"
loading="lazy"
alt="版本号"
>&lt;/p>
&lt;h2 id="拼接链接">拼接链接：
&lt;/h2>&lt;p>&lt;code>&amp;quot;https://download3.vmware.com/software/wkst/file/VMware-workstation-full-&amp;quot;+版本（15.0.2）+&amp;quot;-&amp;quot;+内部版本号（10952284）+&amp;quot;.exe&amp;quot;&lt;/code>&lt;/p>
&lt;p>比如我这个15.0.2,10952284的下载链接就是
&lt;a class="link" href="https://download3.vmware.com/software/wkst/file/VMware-workstation-full-15.0.2-10952284.exe" target="_blank" rel="noopener"
>https://download3.vmware.com/software/wkst/file/VMware-workstation-full-15.0.2-10952284.exe&lt;/a>&lt;/p>
&lt;h2 id="脚本">脚本
&lt;/h2>&lt;blockquote>
&lt;p>2021.5.15 补充&lt;/p>&lt;/blockquote>
&lt;p>前阵子无聊扒了一下VMWare的API，瞎写了一个屎山脚本，用于实验室内网资源站更新VMWare方便一些：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># import requests&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">httpx&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nn">requests&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">json&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vmware_public_api_url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;https://my.vmware.com/channel/public/api/v1.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">get_latest_version&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vmware_all_url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">vmware_public_api_url&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;/products/getProductsAtoZ?locale=en_US&amp;amp;isPrivate=false&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;[INFO]向&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">vmware_all_url&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">发送请求，请稍后...&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">all_file_resp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">requests&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vmware_all_url&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">latest_rev&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">all_file_resp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">status_code&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">200&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ret_json&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loads&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">all_file_resp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">products_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ret_json&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;productCategoryList&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s2">&amp;#34;productList&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">item&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">products_list&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">item&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;VMware Workstation Pro&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">latest_rev&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">item&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;actions&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s2">&amp;#34;target&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">latest_rev&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">get_info_by_version&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nb">dict&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vmware_list_url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">vmware_public_api_url&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;/products/getRelatedDLGList?category=desktop_end_user_computing&amp;amp;product=vmware_workstation_pro&amp;amp;version=&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;amp;dlgType=PRODUCT_BINARY&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;[INFO]向&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">vmware_list_url&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">发送请求，请稍后...&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">resp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">requests&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vmware_list_url&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">resp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">status_code&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">200&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loads&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">resp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="s2">&amp;#34;dlgEditionsLists&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s2">&amp;#34;dlgList&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;ERROR:&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">resp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">status_code&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2"> at url &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">vmware_list_url&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">get_file_by_id&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">product_id&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dl_group&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vmware_file_url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">vmware_public_api_url&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;/dlg/details?locale=en_US&amp;amp;downloadGroup=&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">dl_group&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;amp;productId=&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">product_id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;[INFO]向&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">vmware_file_url&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">发送请求，请稍后...&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">resp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">requests&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vmware_file_url&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">resp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">status_code&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">200&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loads&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">resp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="s2">&amp;#34;downloadFiles&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="vm">__name__&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;__main__&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">latest_version&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">get_latest_version&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">latest_version&lt;/span> &lt;span class="ow">is&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;[INFO]获取到最新版本&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">latest_version&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vmware_info&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">get_info_by_version&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">latest_version&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">vmware_info&lt;/span> &lt;span class="ow">is&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;[INFO]获取到：ID &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">vmware_info&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;productId&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">,名称 &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">vmware_info&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">,发布时间 &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">vmware_info&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;releaseDate&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file_info&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">get_file_by_id&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vmware_info&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;productId&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">vmware_info&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;code&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;[INFO]获取到：文件名 &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">file_info&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;fileName&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">,MD5&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">file_info&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;md5checksum&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">,文件大小&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">file_info&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;fileSize&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">download_url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;https://download3.vmware.com/software/wkst/file/&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">file_info&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;fileName&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;[INFO]拼接下载链接：&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">download_url&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>屎山（但是能跑）&lt;/p></description></item><item><title>值得一试：阿斯加特 AN2 石墨烯黑科技固态开箱评测</title><link>https://blog.gaein.cn/passages/asgord-m2-an2-ssd/</link><pubDate>Fri, 07 Dec 2018 21:34:35 +0800</pubDate><guid>https://blog.gaein.cn/passages/asgord-m2-an2-ssd/</guid><description>&lt;p>随着SSD价格的回落，越来越多的人选择入手了新的固态硬盘。考虑到老的东芝 A100 实在是有些慢了，于是权衡了影驰和阿斯加特后入手了阿斯加特 AN2 SSD(250G)。这款硬盘采用石墨烯散热，薄薄的一层黑色片代替以前厚重的金属散热。速度也很可观，于是便从某宝入手了。&lt;/p>
&lt;p>目前在阿斯加特官网上面只有 AN 系列和雷赤系列，没有找到新的 AN2。&lt;/p>
&lt;h2 id="包装">包装
&lt;/h2>&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Asgord-M2-AN2-SSD/01.webp"
loading="lazy"
alt="包装盒"
>&lt;/p>
&lt;p>阿斯加特 AN2 的盒子以黑色为主色调，辅之以红色，非常帅气。正面写有白字的 Asgord AN series M.2 NVMe SSD，侧面有 Asgord 标识。&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Asgord-M2-AN2-SSD/02.webp"
loading="lazy"
alt="背面包装"
>&lt;/p>
&lt;p>背面则是介绍和基本的一些信息（比如容量等）&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Asgord-M2-AN2-SSD/03.webp"
loading="lazy"
alt="信息"
>&lt;/p>
&lt;h2 id="内部">内部
&lt;/h2>&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Asgord-M2-AN2-SSD/04.webp"
loading="lazy"
alt="内部"
>&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Asgord-M2-AN2-SSD/05.webp"
loading="lazy"
alt="内部-拆开"
>&lt;/p>
&lt;p>拆开包装后，里面就是主角啦！&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Asgord-M2-AN2-SSD/06.webp"
loading="lazy"
alt="工具"
>&lt;/p>
&lt;p>另外还有说明书、螺丝以及螺丝刀&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Asgord-M2-AN2-SSD/07.webp"
loading="lazy"
alt="所有"
>&lt;/p>
&lt;p>全家福qwq&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Asgord-M2-AN2-SSD/08.webp"
loading="lazy"
alt="说明书"
>&lt;/p>
&lt;p>说明书里面内容比较详细，带图片说明了安装方法等&lt;/p>
&lt;h2 id="硬盘">硬盘
&lt;/h2>&lt;p>再来仔细的端详一下硬盘&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Asgord-M2-AN2-SSD/09.webp"
loading="lazy"
alt="硬盘"
>&lt;/p>
&lt;p>硬盘表面是磨砂质感的黑色散热，上面有红色的 Asgord LOGO&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Asgord-M2-AN2-SSD/10.webp"
loading="lazy"
alt="背面"
>&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Asgord-M2-AN2-SSD/11.webp"
loading="lazy"
alt="背面详细"
>&lt;/p>
&lt;p>背面和外包装大致相同，写了一些基本的信息和防伪查询码&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Asgord-M2-AN2-SSD/12.webp"
loading="lazy"
alt="侧面"
>&lt;/p>
&lt;p>这张图可以看出散热非常的薄，侧面几乎看不出&lt;/p>
&lt;h2 id="测试">测试
&lt;/h2>&lt;p>是骡子是马应该拉出来溜溜才对&lt;/p>
&lt;p>官方宣传的速度是：&lt;/p>
&lt;ul>
&lt;li>READ:2100MB/S&lt;/li>
&lt;li>WRITE:1800MB/S&lt;/li>
&lt;/ul>
&lt;p>因为主板没有 M.2 接口，只能用 PCI- E转接卡，没有 nvme 协议肯定会有所损失，另外主板的接口还是 PCIE2.0&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Asgord-M2-AN2-SSD/13.webp"
loading="lazy"
alt="硬盘和卡"
>&lt;/p>
&lt;p>PCIE-M.2 是某宝花了几十买的，据说浦科特的那个非常好，只不过转接卡快赶上我固态的价格了&amp;hellip;&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Asgord-M2-AN2-SSD/14.webp"
loading="lazy"
alt="接口"
>&lt;/p>
&lt;p>仔细看看做工还算可以，一开始这个 SATA 吓我一大跳，仔细一看，一个是基于 SATA 的，另一个是 PCIE 的&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Asgord-M2-AN2-SSD/15.webp"
loading="lazy"
alt="安装硬盘"
>&lt;/p>
&lt;p>非常轻松的按照说明书按照 SSD，第一次装 M.2 的固态，感觉有点像笔记本内存的装法？？？&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Asgord-M2-AN2-SSD/16.webp"
loading="lazy"
alt="安装完成"
>&lt;/p>
&lt;p>安装完成&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Asgord-M2-AN2-SSD/17.webp"
loading="lazy"
alt="总体"
>&lt;/p>
&lt;p>安装到电脑的 PCIE 插槽上面，至少需要 PCIE X4 才能发挥出来它的性能，还好 ROG 有四个槽，我插在了 PCIE X8/X16 上面，应该是没有问题的了&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Asgord-M2-AN2-SSD/18.webp"
loading="lazy"
alt="速度测试"
>&lt;/p>
&lt;p>随便用了两个比较常见的软件进行测试，结果总结如下，可见比较 SATA SSD 来说， M.2 的优势是显而易见的。不过并没有达到官方宣传速度。&lt;/p>
&lt;p>测试平台：&lt;/p>
&lt;ul>
&lt;li>CPU: AMD FX8300&lt;/li>
&lt;li>Mother Board: ASUS Republic Of Gamers Crosshair V Formula&lt;/li>
&lt;li>Graphics Card: DATALAND RX 460 X-serial 4G&lt;/li>
&lt;li>OS: Windows 10 x64&lt;/li>
&lt;/ul></description></item><item><title>华硕 C5F 改 BIOS 支持 NVMe SSD 启动</title><link>https://blog.gaein.cn/passages/cvf-nvme-bios/</link><pubDate>Wed, 05 Dec 2018 16:01:40 +0800</pubDate><guid>https://blog.gaein.cn/passages/cvf-nvme-bios/</guid><description>&lt;h2 id="前言">前言
&lt;/h2>&lt;p>最近入手了阿斯加特的AN2系列的NVMe SSD，苦于主板不支持NVMe协议，没法用作系统盘。百度无果之后就尝试着自己MOD一个BIOS了
首先在华硕官网找到C5F的BIOS，另外拿了一个970PRO的BIOS（华硕支持NVMe的AM3+主板好像只有970）大上周用了C6H的BIOS好像刷坏了，还专门买了个编程器&lt;/p>
&lt;p>网上的模块我不知道为什么没法用（大概是因为他们都是Intel板子的吧&amp;lt;瞎扯淡）于是只好自己从其他支持NVMe板子中提取&lt;/p>
&lt;h2 id="实践">实践
&lt;/h2>&lt;h3 id="工具准备">工具准备
&lt;/h3>&lt;h4 id="文件">文件
&lt;/h4>&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/CVF-NVMe-BIOS/01.webp"
loading="lazy"
alt="文件目录"
>&lt;/p>
&lt;p>首先把C5F的BIOS复制到UBU的目录下，然后运行UBU.BAT，升级一些东西，为NVMe模块挪出地方&lt;/p>
&lt;h4 id="升级模块">升级模块
&lt;/h4>&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/CVF-NVMe-BIOS/02.webp"
loading="lazy"
alt="控制台"
>&lt;/p>
&lt;p>按照提示升级，需要一些英文基础，&lt;strong>注意网卡那边的升级不要选错版本！&lt;/strong>
完成后输入0退出，再输入0保存为BIOS.BIN&lt;/p>
&lt;h4 id="提取模块">提取模块
&lt;/h4>&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/CVF-NVMe-BIOS/03.webp"
loading="lazy"
alt="Fl842R.png"
>&lt;/p>
&lt;p>使用MMTool打开970的BIOS文件&lt;/p>
&lt;blockquote>
&lt;p>注意，需要使用MMTool 4打开，MMTool5会出错。&lt;/p>
&lt;p>MMTool在Windows10下会显示不全，所以我开了个Windows7的虚拟机来操作&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/CVF-NVMe-BIOS/04.webp"
loading="lazy"
alt="打开后"
>&lt;/p>
&lt;p>成功读取BIOS，找到NVMe相关的模块（NVMe、NVMeSmm、NVMeINT13）&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/CVF-NVMe-BIOS/05.webp"
loading="lazy"
alt="模块"
>&lt;/p>
&lt;p>选中“NVMe” Extract菜单，点击Extract，提取。文件名为“模块.ffs”&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/CVF-NVMe-BIOS/06.webp"
loading="lazy"
alt="提取"
>&lt;/p>
&lt;p>其他两个也如法炮制&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/CVF-NVMe-BIOS/07.webp"
loading="lazy"
alt="选中模块"
>&lt;/p>
&lt;p>再打开C5F的BIOS，找到CSMCORE，插入这三个模块，注意勾选“Insert Compress”&lt;/p>
&lt;p>插入完成后应该在CSMCORE同卷（01）的最后&lt;/p>
&lt;p>保存文件&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/CVF-NVMe-BIOS/08.webp"
loading="lazy"
alt="文件大小"
>&lt;/p>
&lt;p>4194304字节大概是3.99MB，BIOS能够盛下&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/CVF-NVMe-BIOS/09.webp"
loading="lazy"
alt="刷入BIOS"
>&lt;/p>
&lt;p>使用AFU刷入BIOS，点击OPEN打开，FLASH写入，期间会有弹窗提示，注意关闭其他软件。&lt;/p>
&lt;blockquote>
&lt;p>刷BIOS有风险，请做好准备，手里有BIOS烧录器的最好。&lt;/p>&lt;/blockquote>
&lt;p>虽然这样下来主板里面仍然没有我的SSD，但是试了一下总算可以正常使用系统了，算是勉强解决，后续再研究。&lt;/p>
&lt;h2 id="参考">参考
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="http://tieba.baidu.com/p/5085204352" target="_blank" rel="noopener"
>【2017整理】如何在使用AMI UEFI BIOS的老平台上加入NVMe支持&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://tieba.baidu.com/p/4963703768" target="_blank" rel="noopener"
>主板没法从NVMe启动咋办？硬改BIOS！&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://post.smzdm.com/p/555177/" target="_blank" rel="noopener"
>老夫卿发少年狂——老主板升级PCI-E NVMe SSD攻略&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>CSharp批量重命名图片为指定格式</title><link>https://blog.gaein.cn/passages/renamer-files/</link><pubDate>Sun, 04 Nov 2018 14:11:09 +0800</pubDate><guid>https://blog.gaein.cn/passages/renamer-files/</guid><description>&lt;p>最近社里面交图片，要求格式为 姓名-编号
作为一个懒癌晚期患者，我默默打开了visual studio
下面是代码，原理是获取文件名，保存到数组中，再循环重命名到最后一个&lt;/p>
&lt;!-- More -->
&lt;p>最近社里面交图片，要求格式为 姓名-编号
作为一个懒癌晚期患者，我默默打开了visual studio
下面是代码，原理是获取文件名，保存到数组中，再循环重命名到最后一个&lt;/p>
&lt;blockquote>
&lt;p>2021年2月补充
（我2年前写的什么玩意是）重命名采用MoveTo方法就行了，因为我联想到Linux下重命名也是mv&amp;hellip;&lt;/p>&lt;/blockquote>
&lt;p>重命名采用的方法是引用VB.NET里面的重命名&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cs" data-lang="cs">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System.Collections.Generic&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System.IO&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System.Linq&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System.Text&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System.Threading.Tasks&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System.Windows&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System.Windows.Controls&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System.Windows.Data&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System.Windows.Documents&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System.Windows.Forms&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System.Windows.Input&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System.Windows.Media&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System.Windows.Media.Imaging&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System.Windows.Navigation&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">System.Windows.Shapes&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">Microsoft.VisualBasic.Devices&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">namespace&lt;/span> &lt;span class="nn">Rename&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;summary&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// MainWindow.xaml 的交互逻辑&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cs">/// &amp;lt;/summary&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">partial&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">MainWindow&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">Window&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">MainWindow&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">InitializeComponent&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Output&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Text&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;窗口初始化完成&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">P_Click&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">object&lt;/span> &lt;span class="n">sender&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">RoutedEventArgs&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Output&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Text&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;初始化..&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">string&lt;/span> &lt;span class="n">path&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Bin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Text&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">string&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">files&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">10000&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">string&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Name&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Text&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Output&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Text&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;初始化变量成功&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">DirectoryInfo&lt;/span> &lt;span class="n">folder&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">DirectoryInfo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">@path&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">folder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetFiles&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;*.jpg&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">Count&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">files&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">folder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetFiles&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;*.jpg&amp;#34;&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">Name&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i&lt;/span>&lt;span class="p">++;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Output&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Text&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;文件获取成功，共&amp;#34;&lt;/span>&lt;span class="p">+&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">+&lt;/span>&lt;span class="s">&amp;#34;个&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Computer&lt;/span> &lt;span class="n">MyComputer&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Computer&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">MyComputer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">FileSystem&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">RenameFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">+&lt;/span>&lt;span class="s">@&amp;#34;\&amp;#34;&lt;/span>&lt;span class="p">+&lt;/span>&lt;span class="n">files&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">+&lt;/span>&lt;span class="s">&amp;#34;-&amp;#34;&lt;/span>&lt;span class="p">+&lt;/span> &lt;span class="n">Convert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">+&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">)+&lt;/span> &lt;span class="s">&amp;#34;.jpg&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Output&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Text&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;正在转换，&amp;#34;&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">+&lt;/span>&lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">+&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="s">&amp;#34;个&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s&lt;/span>&lt;span class="p">++;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Output&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Text&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;转换完成！&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">Where_Click&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">object&lt;/span> &lt;span class="n">sender&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">RoutedEventArgs&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Output&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Text&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;正在浏览文件夹&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">FolderBrowserDialog&lt;/span> &lt;span class="n">dialog&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">FolderBrowserDialog&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dialog&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Description&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;请选择文件路径&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Windows&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Forms&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">DialogResult&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">dialog&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ShowDialog&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">result&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Windows&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Forms&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">DialogResult&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Cancel&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">string&lt;/span> &lt;span class="n">folderPath&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">dialog&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SelectedPath&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Trim&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">DirectoryInfo&lt;/span> &lt;span class="n">theFolder&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">DirectoryInfo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">folderPath&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">theFolder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Exists&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Bin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Text&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">folderPath&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">finally&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Output&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Text&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;完成&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Linux挂载新硬盘</title><link>https://blog.gaein.cn/passages/linux-add-newdisk/</link><pubDate>Sat, 20 Oct 2018 12:07:15 +0800</pubDate><guid>https://blog.gaein.cn/passages/linux-add-newdisk/</guid><description>&lt;p>最近给Ubuntu添加了一块硬盘，下面是具体的步骤&lt;/p>
&lt;!-- more -->
&lt;p>
买的云服务器IDC给了一块10GB的数据盘，因为系统盘不大，就要把数据盘用上了
&lt;/p>
&lt;p>
但是Linux下数据盘并没有挂载，Linux的磁盘系统也不同于windows，需要挂载使用
&lt;/p>
&lt;h1 label="标题居左" style="font-size: 32px; font-weight: bold; border-bottom: 2px solid rgb(204, 204, 204); padding: 0px 4px 0px 0px; text-align: left; margin: 0px 0px 10px;">
1、新建分区并格式化&lt;br/>
&lt;/h1>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">fdisk -l&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/10/20/i04JfK.png" alt="" width="516" height="328"/>
&lt;/p>
&lt;p>
查看当前的硬盘，可以看到有sda、sdb两块盘，第一块作为系统盘已经分区，sdb就是我们要挂载的数据盘
&lt;/p>
&lt;p>
首先进行分区
&lt;/p>
&lt;pre class="fy-prettyprint linenums">fdisk /dev/sdb&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/10/20/i048Fx.png" alt="" width="491" height="162"/>
&lt;/p>
&lt;p>
进入磁盘sdb（如果你是磁盘sdc就相应的替换为sdc）相当于选中这个硬盘的意思
&lt;/p>
&lt;p>
首先输入m看一下帮助
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/10/20/i041T1.png" alt="" width="567" height="571"/>
&lt;/p>
&lt;p>
比较简单，应该很容易看懂，暂时把几个常用的写上了意思
&lt;/p>
&lt;pre class="fy-prettyprint linenums">Command (m for help): p ##显示磁盘信息
Disk /dev/sdb: 10 GiB, 10737418240 bytes, 20971520 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 4096 bytes
I/O size (minimum/optimal): 4096 bytes / 4096 bytes
Disklabel type: dos
Disk identifier: 0xb5106536
&lt;p>Command (m for help): n ##新建分区
Partition type
p primary (0 primary, 0 extended, 4 free)
e extended (container for logical partitions)
Select (default p): p ##新建逻辑分区
Partition number (1-4, default 1):
First sector (2048-20971519, default 2048):
Last sector, +sectors or +size{K,M,G,T,P} (2048-20971519, default 20971519):
##直接留空，我只想把所有的空间分一个分区
Created a new partition 1 of type &amp;amp;##39;Linux&amp;amp;##39; and of size 10 GiB.&lt;/p>
&lt;p>Command (m for help): w ##保存退出
The partition table has been altered.
Calling ioctl() to re-read partition table.
Syncing disks.&lt;/pre>&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/10/20/i04lwR.png" alt="" width="560" height="382"/>
&lt;/p>
&lt;p>
再次使用fdisk -l已经可以看到sdb有一个分区sdb1了
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/10/20/i04tSO.png" alt="" width="511" height="397"/>
&lt;/p>
&lt;p>
同Windows一样，磁盘需要格式化后才能使用
&lt;/p>
&lt;p>
用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">mkntfs /dev/sdb1&lt;/pre>
&lt;p>
来格式化为NTFS格式，其他格式可以自行百度
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/10/20/i04GY6.png" alt="" width="391" height="57"/>
&lt;/p>
&lt;p>
出现
&lt;/p>
&lt;pre class="fy-prettyprint linenums">Cluster size has been automatically set to 4096 bytes.
Initializing device with zeroes: 100% - Done.
Creating NTFS volume structures.
mkntfs completed successfully. Have a nice day.&lt;/pre>
&lt;p>
即为格式化完成
&lt;/p>
&lt;h1 label="标题居中" style="font-size: 32px; font-weight: bold; border-bottom: 2px solid rgb(204, 204, 204); padding: 0px 4px 0px 0px; text-align: center; margin: 0px 0px 20px;">
2、挂载磁盘
&lt;/h1>
&lt;div>
&lt;p>
&lt;br/>
&lt;/p>
&lt;p>
临时挂载可以使用mount命令，但是重启后需要重新挂载
&lt;/p>
&lt;p>
用法为
&lt;/p>
&lt;pre class="fy-prettyprint linenums">mount 分区 目录&lt;/pre>
&lt;p>
比如我需要使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">mount /dev/sdb1 /data&lt;/pre>
&lt;p>
挂载
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/10/20/i0IkGV.png" alt="" width="542" height="83"/>
&lt;/p>
&lt;p>
（当然前提是存在目录/data）
&lt;/p>
&lt;p>
编辑
&lt;/p>
&lt;pre class="prettyprint" name="code">/etc/fstab&lt;/pre>
&lt;p>
来永久挂载磁盘
&lt;/p>
&lt;pre class="fy-prettyprint linenums">## /etc/fstab: static file system information.
##
## Use &amp;##39;blkid&amp;##39; to print the universally unique identifier for a
## device; this may be used with UUID= as a more robust way to name devices
## that works even if disks are added and removed. See fstab(5).
##
## &amp;lt;file system&amp;gt; &amp;lt;mount point&amp;gt; &amp;lt;type&amp;gt; &amp;lt;options&amp;gt; &amp;lt;dump&amp;gt; &amp;lt;pass&amp;gt;
## / was on /dev/sda1 during installation
UUID=22e202f3-ae04-4995-b214-de7f192f33c4 / ext4 errors=remount-ro 0 1
## swap was on /dev/sda5 during installation
UUID=472580b3-a87b-4fe2-8bda-59b59d087ec6 none swap sw 0 0
/dev/fd0 /media/floppy0 auto rw,user,noauto,exec,utf8 0 0
/dev/sdb1 /data ntfs defaults 0 0
磁盘 挂载目录 磁盘格式&lt;/pre>
&lt;/div>
&lt;p>
需要注意的是，中间的空不需要打空格，用TAB制表符更方便&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">root@rootadmin:/data## mkdir blog
root@rootadmin:/data## dir
blog
root@rootadmin:/data## reboot
Connection closing...Socket close.
&lt;p>Connection closed by foreign host.&lt;/p>
&lt;p>Disconnected from remote host(GAEIN.CN) at 12:21:20.&lt;/p>
&lt;p>Type `help&amp;amp;##39; to learn how to use Xshell prompt.
[C:~]$&lt;/p>
&lt;p>Connecting to &lt;em>.&lt;/em>.&lt;em>.&lt;/em>:22&amp;hellip;&lt;/p>
&lt;p>Connection established.
To escape to local shell, press &amp;amp;##39;Ctrl+Alt+]&amp;amp;##39;.&lt;/p>
&lt;p>Welcome to Ubuntu 18.04.1 LTS (GNU/Linux 4.15.0-38-generic x86_64)&lt;/p>
&lt;ul>
&lt;li>Documentation: &lt;a class="link" href="https://help.ubuntu.com" target="_blank" rel="noopener"
>https://help.ubuntu.com&lt;/a>&lt;/li>
&lt;li>Management: &lt;a class="link" href="https://landscape.canonical.com" target="_blank" rel="noopener"
>https://landscape.canonical.com&lt;/a>&lt;/li>
&lt;li>Support: &lt;a class="link" href="https://ubuntu.com/advantage" target="_blank" rel="noopener"
>https://ubuntu.com/advantage&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>System information as of Sat Oct 20 12:21:29 CST 2018&lt;/p>
&lt;p>System load: 0.49 Processes: 89
Usage of /: 24.9% of 12.67GB Users logged in: 0
Memory usage: 7% IP address for eth0: &lt;em>.&lt;/em>.&lt;em>.&lt;/em>
Swap usage: 0%&lt;/p>
&lt;ul>
&lt;li>Canonical Livepatch is available for installation.
&lt;ul>
&lt;li>Reduce system reboots and improve kernel security. Activate at:
&lt;a class="link" href="https://ubuntu.com/livepatch" target="_blank" rel="noopener"
>https://ubuntu.com/livepatch&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>0 个可升级软件包。
0 个安全更新。&lt;/p>
&lt;p>Failed to connect to &lt;a class="link" href="https://changelogs.ubuntu.com/meta-release-lts" target="_blank" rel="noopener"
>https://changelogs.ubuntu.com/meta-release-lts&lt;/a>. Check your Internet connection or proxy settings&lt;/p>
&lt;p>Last login: Sat Oct 20 11:26:33 2018 from &lt;em>.&lt;/em>.&lt;em>.&lt;/em>
rootadmin@rootadmin:~$ cd /data
rootadmin@rootadmin:/data$ dir
blog
rootadmin@rootadmin:/data$&lt;/pre>&lt;/p>
&lt;p>
重启了一下，挂载确实成功了&lt;br/>
&lt;/p></description></item><item><title>Ubuntu下apt“无法解析域名”解决方案</title><link>https://blog.gaein.cn/passages/fix-ubuntu-dns-error/</link><pubDate>Sat, 20 Oct 2018 11:42:39 +0800</pubDate><guid>https://blog.gaein.cn/passages/fix-ubuntu-dns-error/</guid><description>&lt;blockquote>
&lt;p>注意：本博客过于久远，内容可能已经不适用&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>注意：正确的更改DNS的方法见博客：&lt;a class="link" href="https://blog.gaein.cn/passages/Public-DNS-and-configure-DNS" target="_blank" rel="noopener"
>常见公共DNS服务&amp;amp;Linux和Windows下修改DNS的方法&lt;/a>&lt;/p>&lt;/blockquote>
&lt;p>DNS莫名其妙出错，啥也干不了&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Fix-Ubuntu-DNS-Error/01.webp"
loading="lazy"
alt="错误"
>&lt;/p>
&lt;p>百度了一波，发现解决方案很简单，就是手动加入DNS&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo vim /etc/resolv.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>加入DNS&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nameserver 119.29.29.29
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>当然可以自己去百度其他家的DNS，我这是DNS PUBLIC+的地址&lt;/p>&lt;/blockquote>
&lt;p>按照百度说的我保存重启&lt;/p>
&lt;p>结果发现并没有什么卵用&amp;hellip;&lt;/p>
&lt;p>仔细观摩一下文件&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 127.0.0.53 is the systemd-resolved stub resolver.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># run &amp;#34;systemd-resolve --status&amp;#34; to see details about the actual nameservers.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nameserver 127.0.0.53&amp;lt;/pre&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>被覆盖了&lt;/p>
&lt;p>而且说明也写着“DO NOT EDIT THIS FILE BY HAND”&lt;/p>
&lt;p>我按照其他的方法修改了一下编辑resolv.conf.d目录下的base文件&lt;/p>
&lt;p>不过也没有效果&lt;/p>
&lt;p>但是按照第二篇看的文章找到了问题所在：&lt;/p>
&lt;p>重启系统后DNS设置不但不会被应用还会被覆盖，应该重启网卡来解决&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo /etc/init.d/networking restart&amp;lt;/pre&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>完美解决&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Fix-Ubuntu-DNS-Error/02.webp"
loading="lazy"
alt="修复"
>&lt;/p>
&lt;p>参考：&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="http://www.myexceptions.net/ai/1477082.html" target="_blank" rel="noopener"
>ubuntu apt-get 异常 Temporary failure resolving &amp;lsquo;us.archive.ubuntu.com&amp;rsquo; 解决 - 人工智能&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.csdn.net/tsq292978891/article/details/75039926" target="_blank" rel="noopener"
>ubuntu16.04 出现域名解析暂时失败 解决方法_tsq292978891的博客-CSDN博客_域名解析暂时失败&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.csdn.net/u012207345/article/details/78339218" target="_blank" rel="noopener"
>ubuntu域名解析失败解决方案_廿四桥明月夜的博客-CSDN博客_ubuntu域名解析失败&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>不过刚刚重启了好像又被覆盖了，很是绝望&lt;/p>
&lt;p>干脆写了个脚本，然后开机自动运行脚本得了&amp;hellip;&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">### BEGIN INIT INFO&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Provides: run.sh &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Required-start: $local_fs $remote_fs $network $syslog &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Required-Stop: $local_fs $remote_fs $network $syslog &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Default-Start: 2 3 4 5 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Default-Stop: 0 1 6 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Short-Description: starts the run.shh daemon &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Description: starts run.sh using start-stop-daemon &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">### END INIT INFO&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;nameserver 119.29.29.29&amp;#34;&lt;/span> &amp;gt;&amp;gt; /etc/resolv.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo /etc/init.d/networking restart
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后复制到init.d中，再&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">update-rc.d run.sh defaults 99
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Ubuntu终端更改为中文</title><link>https://blog.gaein.cn/passages/change-ubuntu-to-chinese/</link><pubDate>Fri, 17 Aug 2018 09:36:49 +0800</pubDate><guid>https://blog.gaein.cn/passages/change-ubuntu-to-chinese/</guid><description>&lt;p>由于本人英文渣，加之一个服务器终端是中文一个服务器终端是英文（当然两个服务器都穷的续不起了）&lt;/p>
&lt;p>所以今天更改Ubuntu的语言为中文&lt;/p>
&lt;p>因为是服务器所以只能通过终端更改&lt;/p>
&lt;p>首先安装下语言包&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo apt search language-pack-zh-hans
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我先使用apt搜索了一下语言包&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Change-Ubuntu-To-Chinese/01.webp"
loading="lazy"
alt="搜索结果"
>&lt;/p>
&lt;p>使用命令安装他们&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo apt install language-pack-zh-hans
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install language-pack-zh-hans-base
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装下对于程序的语言支持&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo apt install &lt;span class="sb">`&lt;/span>check-language-support -l zh&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将语言设置为中文&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo localectl set-locale.UTF-8
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>重启系统&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>随便输入个什么命令，比如 &lt;code>date&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Change-Ubuntu-To-Chinese/02.webp"
loading="lazy"
alt="显示"
>&lt;/p>
&lt;p>显示为中文，修改成功&lt;/p>
&lt;p>如果没有修改成功的话，使用文本编辑器编辑文件&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo vim /etc/default/locale
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Change-Ubuntu-To-Chinese/03.webp"
loading="lazy"
alt="编辑文件"
>&lt;/p>
&lt;p>将 &lt;code>LANG LANGUAGE等&lt;/code> 后面换成&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">zh_CN.UTF-8
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Change-Ubuntu-To-Chinese/04.webp"
loading="lazy"
alt="编辑文件内容"
>&lt;/p>
&lt;p>重启系统后就是中文了&lt;/p>
&lt;p>&lt;img src="https://img.cdn.gaein.cn/website_used/blog/Change-Ubuntu-To-Chinese/05.webp"
loading="lazy"
alt="中文显示"
>&lt;/p>
&lt;p>参考：&lt;/p>
&lt;ol>
&lt;li>&lt;a class="link" href="https://www.linuxdashen.com/ubuntu%e5%a6%82%e4%bd%95%e5%9c%a8%e7%bb%88%e7%ab%af%e4%b8%8b%e6%9b%b4%e6%94%b9%e7%b3%bb%e7%bb%9f%e8%af%ad%e8%a8%80" target="_blank" rel="noopener"
>ubuntu如何在终端下更改系统语言 - Linux大神博客&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.csdn.net/cnylsy/article/details/52474433" target="_blank" rel="noopener"
>Ubuntu 14.04 英文SSH终端更改为中文显示_雅礼·实验-CSDN博客&lt;/a>&lt;/li>
&lt;/ol></description></item><item><title>NodeBB设置——使用NginX进行反代理并优化</title><link>https://blog.gaein.cn/passages/configure-nginx-for-nodebb/</link><pubDate>Wed, 25 Jul 2018 21:16:00 +0800</pubDate><guid>https://blog.gaein.cn/passages/configure-nginx-for-nodebb/</guid><description>&lt;p>nodeBB在默认的4567开启，通常需要nginx作为反代理才能更好的访问，并且nginx也能开启一些优化使访问更快速&lt;/p>
&lt;!-- More -->
&lt;p>默认安装nginx的配置文件在 /etc/nginx/nginx.conf 使用&lt;/p>
&lt;p>vim /etc/nginx/nginx.conf&lt;/p>
&lt;p>编辑配置文件，在http{}之间，追加&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">server {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 80;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server_name www.xxx.com; ## 你的域名
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Real-IP $remote_addr;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Forwarded-Proto $scheme;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Host $http_host;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-NginX-Proxy true;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_pass http://127.0.0.1:4567;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_redirect off;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ## Socket.IO Support
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_http_version 1.1;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Upgrade $http_upgrade;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Connection &amp;#34;upgrade&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>因为我网站跑的服务器在香港，配置又不行，所以只能想办法来优化一下&lt;/p>
&lt;p>先上整个的配置文件，因为用了宝塔面板（SSL实在弄不好）所以配置文件可能与其他的有出入，请自行修改&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##基础设置
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 80;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 443 ssl;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server_name www.minecrafter.cn;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##错误页面
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> error_page 502 /502.html;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location = /502.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> root /502;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> internal;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##反代理设置
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Real-IP $remote_addr;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Forwarded-Proto $scheme;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Host $http_host;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-NginX-Proxy true;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##proxy_pass http://127.0.0.1:4567;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##proxy_pass http://io_nodes;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_redirect off;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ## Socket.IO Support
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_http_version 1.1;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Upgrade $http_upgrade;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Connection &amp;#34;upgrade&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##gizip设置
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gzip on;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gzip_min_length 1000;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gzip_proxied off;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gzip_types text/plain application/xml text/javascript application/javascript application/x-javascript text/css application/json;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##SSL-START SSL相关配置，请勿删除或修改下一行带注释的404规则
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##error_page 404/404.html;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##HTTP_TO_HTTPS_START
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if ($server_port !~ 443)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> rewrite ^(/.*)$ https://$host$1 permanent;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##HTTP_TO_HTTPS_END
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_certificate /etc/letsencrypt/live/www.minecrafter.cn/fullchain.pem;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_certificate_key /etc/letsencrypt/live/www.minecrafter.cn/privkey.pem;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_protocols TLSv1.1 TLSv1.2;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_prefer_server_ciphers on;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_session_cache shared:SSL:10m;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_session_timeout 10m;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> error_page 497 https://$host$request_uri;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##SSL-END
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##静态资源代理设置
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location @nodebb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_pass http://io_nodes;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location ~ ^/assets/(.*)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> root /data/nodebb/;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> try_files /build/public/$1 /public/$1 @nodebb;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location /plugins/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> root /data/nodebb/build/public/;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> try_files $uri @nodebb;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_pass http://io_nodes;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ##负载均衡设置
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">upstream io_nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip_hash;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server 127.0.0.1:526;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server 127.0.0.1:527;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这是最终版本，有负载均衡，资源代理，压缩&lt;/p>
&lt;p>不需要压缩删除 ##gzip设置的内容即可&lt;/p>
&lt;p>不需要负载均衡（仅一个端口）删除 ##负载均衡的内容，将 ##静态资源代理设置的内容中&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">proxy_pass http://io_nodes;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>改成&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">proxy_pass ##端口依情况而定
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>不需要静态资源代理删除 ##静态资源代理内容，如果有负载均衡，删除&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">##proxy_pass http://io_nodes;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>前的“##”&lt;/p>
&lt;p>没有则删除&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">proxy_pass http://127.0.0.1:4567; ##端口依情况而定
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>前的“##”&lt;/p>
&lt;p>除了nginx之外要做的&lt;/p>
&lt;p>集群使用：&lt;/p>
&lt;p>默认情况下，NodeBB将在一个进程上运行，某些调用可能比其他进程更长，从而导致相同资源的延迟或队列等待。要解决这个问题，可以通过添加多个端口到config.json中来指示NodeBB在多个进程上运行。&lt;/p>
&lt;p>我习惯把端口数目设置为核心数，首先使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cat /proc/cpuinfo| grep &amp;#34;cpu cores&amp;#34;| uniq
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看核心数目（我的四核）&lt;/p>
&lt;p>在nodebb目录下（就是输./nodebb setup那个目录），使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">vim config.json
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>编辑配置文件&lt;/p>
&lt;p>将与端口有关的port:4567,改成&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;port&amp;#34;: [&amp;#34;4567&amp;#34;, &amp;#34;4568&amp;#34;] //这将启动2个进程，分别监听这2个端口
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>具体为什么可以百度JSON格式，如果重启nodebb出错请检查这个文件，端口随便写，不要占用80(HTTP),22(SSH),443(SSL),6379(Redis),27017(MongoDB)等&lt;/p>
&lt;p>在Nginx配置文件中加入&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">upstream io_nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip_hash;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server 127.0.0.1:4567;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server 127.0.0.1:4568;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>端口依config内容而定&lt;/p>
&lt;p>然后把以前配置文件中的&lt;/p>
&lt;p>proxy_pass 一行&lt;/p>
&lt;p>改成&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">proxy_pass http://io_nodes;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>即可&lt;/p></description></item><item><title>NodeBB小贴士——也是所有云服务器的小贴士：记得在相关软件中开启端口</title><link>https://blog.gaein.cn/passages/tips-for-nodebb/</link><pubDate>Wed, 25 Jul 2018 01:27:20 +0800</pubDate><guid>https://blog.gaein.cn/passages/tips-for-nodebb/</guid><description>&lt;pre>&lt;code>因为没有在面板中开启端口，碰壁过好几次
回来想想哭笑不得，但是这样的例子还不止我一个
&lt;/code>&lt;/pre>
&lt;h2 id="所以提示大家记得在">所以提示大家，记得在
&lt;/h2>&lt;pre>&lt;code> 1. 服务器系统防火墙
2. 服务器系统安全狗
3. 服务器自己安装的面板
4. 服务商提供的管理面板
5. 服务商提供的安全策略组
中开启相应端口
&lt;/code>&lt;/pre>
&lt;h2 id="nodebb需要端口">NodeBB需要端口
&lt;/h2>&lt;pre>&lt;code> 80，http
4567，默认端口（记得添加你在config.json中定义的）
6379，redis
27017，mongodb
443，SSL
按需添加
&amp;lt;img src=&amp;quot;https://s1.ax1x.com/2018/07/25/PYOYhn.jpg&amp;quot; alt=&amp;quot;&amp;quot; data-load=&amp;quot;full&amp;quot; style=&amp;quot;&amp;quot; width=&amp;quot;1697&amp;quot; height=&amp;quot;548&amp;quot;/&amp;gt;
&lt;/code>&lt;/pre></description></item><item><title>在CentOS上搭建现代化的论坛Nodebb|NodeBB安装记录（Linux-CentOS篇）</title><link>https://blog.gaein.cn/passages/install-nodebb-on-centos/</link><pubDate>Sat, 21 Jul 2018 19:20:03 +0800</pubDate><guid>https://blog.gaein.cn/passages/install-nodebb-on-centos/</guid><description>&lt;p>
CentOS在各种服务器上使用的较多，所以捏，就来尝试一下CnetOS上安装NodeBB
&lt;/p>
&lt;p>
CentOS 7 on VMWare
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8H8tf.jpg" alt="" data-load="full" style="" width="1717" height="935"/>
&lt;/p>
&lt;p>
不过我这次选择的数据库是MongoDB
&lt;/p>
&lt;p>
一、准备工作
&lt;/p>
&lt;p>
打开终端，切换到root用户
&lt;/p>
&lt;pre class="fy-prettyprint linenums">su root&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8H3AP.jpg" alt="https://s1.ax1x.com/2018/07/21/P8H3AP.jpg"/>
&lt;/p>
&lt;p>
关闭SELinux（有些可能没有，跳过）
&lt;/p>
&lt;pre class="fy-prettyprint linenums">vim /etc/sysconfig/selinux&lt;/pre>
&lt;p>
如果没有vim（见&lt;a href="https://blog-old.gaein.cn/post/Nodebb-Linux-Ubuntu.html" target="_self" textvalue="https://blog-old.gaein.cn/post/Nodebb-Linux-Ubuntu.html">https://blog-old.gaein.cn/post/Nodebb-Linux-Ubuntu.html&lt;/a>
&lt;/p>
&lt;p>
就用yum安装呗
&lt;/p>
&lt;pre class="fy-prettyprint linenums">yum install vim ##如果 vim 指令未安装，那就安装它&lt;/pre>
&lt;p>
按下i键（当然如果你想知道有什么键可以自行百度）
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8HOud.jpg" alt="" data-load="full" style="" width="750" height="521"/>
&lt;/p>
&lt;p>
找到 &lt;code>SELINUX&lt;/code> 然后修改成 &lt;code>disabled&lt;/code>.
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8Hbge.jpg" alt="" data-load="full" style="" width="756" height="517"/>
&lt;/p>
&lt;p>
按下ESC退出编辑模式，输入:，再输入退出并保存命令：wq
&lt;/p>
&lt;pre class="fy-prettyprint linenums">yum update
yum -y install epel-release
yum -y groupinstall &amp;quot;Development Tools&amp;quot;
yum -y install git ImageMagick ImageMagick-devel##更新系统并安装一些基础工具&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8HqjH.jpg" alt="" width="619" height="477"/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8bm5V.jpg" alt="" data-load="full" style="" width="769" height="547"/>
&lt;/p>
&lt;p>
二、安装NodeJS
&lt;/p>
&lt;p>
在Github可以找到最新的nvm安装命令
&lt;/p>
&lt;p>
&lt;a href="https://github.com/creationix/nvm" _src="https://github.com/creationix/nvm">https://github.com/creationix/nvm&lt;/a>&lt;br/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8buCT.jpg" alt="" data-load="full" style="" width="1098" height="732"/>
&lt;/p>
&lt;p>
所以我们使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash
##或者
wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash&lt;/pre>
&lt;p>
安装nvm（这是一个快速部署的脚本）
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/21/P8beU0.jpg" alt="" data-load="full" style="" width="744" height="193"/>
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">export NVM_DIR=&amp;quot;$HOME/.nvm&amp;quot;
[ -s &amp;quot;$NVM_DIR/nvm.sh&amp;quot; ] &amp;amp;&amp;amp; . &amp;quot;$NVM_DIR/nvm.sh&amp;quot; ## This loads nvm&lt;/pre>
&lt;p>
把nvm添加到环境变量
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">source ~/.bashrc&lt;/pre>
&lt;p>
令环境变量生效
&lt;/p>
&lt;p>
最后使用&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">command -v nvm&lt;/pre>
&lt;p>
检查是否安装成功
&lt;/p>
&lt;p>
安装成功之后，如果是国内的机器需要使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">export NVM_NODEJS_ORG_MIRROR=http://npm.taobao.org/mirrors/node
export NVM_IOJS_ORG_MIRROR=http://npm.taobao.org/mirrors/iojs&lt;/pre>
&lt;p>
让nvm使用淘宝源&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">npm config set registry http://registry.npm.taobao.org/&lt;/pre>
&lt;p>
让npm使用淘宝源
&lt;/p>
&lt;p>
使用&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">nvm install --lts&lt;/pre>
&lt;p>
安装lts版本的nodejs
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfSzj.jpg" alt="" data-load="full" style="" width="723" height="233"/>
&lt;/p>
&lt;p>
之后记得使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">npm -v&lt;/pre>
&lt;p>
和
&lt;/p>
&lt;pre class="fy-prettyprint linenums">nodeb -v&lt;/pre>
&lt;p>
检查版本，如果成功输出版本号，则安装成功
&lt;/p>
&lt;p>
三，安装数据库（MongoDB）
&lt;/p>
&lt;p>
使用命令&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">vim /etc/yum.repos.d/mongodb-org-3.6.repo&lt;/pre>
&lt;p>
创建文件并且输入i进行编辑，将以下内容粘贴进去
&lt;/p>
&lt;pre class="fy-prettyprint linenums">[mongodb-org-3.6]name=MongoDB
Repositorybaseurl=
gpgcheck=1
enabled=1
gpgkey=https://www.mongodb.org/static/pgp/server-3.6.asc&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYWzWQ.jpg" alt="" data-load="full" style="" width="781" height="534"/>
&lt;/p>
&lt;p>
输入:wq保存并退出
&lt;/p>
&lt;p>
再使用&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">yum updata&lt;/pre>
&lt;p>
更新
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfkwV.jpg" alt="" width="380" height="181"/>
&lt;/p>
&lt;p>
使用&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">yum -y install mongodb-org&lt;/pre>
&lt;p>
安装mongoDB
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYWvFS.jpg" alt="" data-load="full" style="" width="738" height="506"/>
&lt;/p>
&lt;p>
因为是国外的服务器所以速度不行，当然也可以自行在使用update之前把链接替换为国内的镜像站
&lt;/p>
&lt;p>
完成之后使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">service mongod start ##启动 Mongodb
mongod --version ##查看 Mongodb 版本&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYf9Qs.jpg" alt="" width="555" height="478"/>
&lt;/p>
&lt;p>
&lt;span style="color: ##0070C0;">有一点需要注意：如果版本3.4.10的话需要升级，因为3.4.10以下有风险&lt;/span>
&lt;/p>
&lt;p>
安装完成后，为了消除 MongoDB 的性能警告，需要关闭 Linux 巨型页：
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">echo never &amp;gt; /sys/kernel/mm/transparent_hugepage/enabled
echo never &amp;gt; /sys/kernel/mm/transparent_hugepage/defrag&lt;/pre>
&lt;p>
来关闭
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfKyR.jpg" alt="" data-load="full" style="" width="744" height="63"/>
&lt;/p>
&lt;p>
不同于官方文档，在获取nodebb之前，我选择先进行数据库设置
&lt;/p>
&lt;p>
输入
&lt;/p>
&lt;pre class="fy-prettyprint linenums">mongo&lt;/pre>
&lt;p>
进入mongoDB的命令行
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfPLq.jpg" alt="" data-load="full" style="" width="777" height="373"/>
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">use nodebb&lt;/pre>
&lt;p>
新建数据库（名为nodebb）
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfFe0.jpg" alt="" width="224" height="64"/>
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">db.createUser({user: &amp;quot;nodebb&amp;quot; ,pwd: &amp;quot;替换成你的密码&amp;quot; ,roles:[ &amp;quot;readWrite&amp;quot; ]})&lt;/pre>
&lt;p>
添加用户角色&lt;span style="color: ##0070C0;">（牢记用户名（此处为nodebb）和密码！）&lt;/span>
&lt;/p>
&lt;p>
&lt;span style="color: ##0070C0;">&lt;img src="https://s1.ax1x.com/2018/07/24/PYfAoT.jpg" alt="" data-load="full" style="" width="767" height="113"/>&lt;/span>
&lt;/p>
&lt;p>
如果需要在nodebb后台查看数据库数据，输入以下代码
&lt;/p>
&lt;pre class="fy-prettyprint linenums">db.grantRolesToUser( &amp;quot;nodebb&amp;quot; ,[{ role: &amp;quot;clusterMonitor&amp;quot;, db: &amp;quot;admin&amp;quot; }]);&lt;/pre>
&lt;p>
打开权限认证，使用命令
&lt;/p>
&lt;pre class="fy-prettyprint linenums">vim /etc/mongod.conf&lt;/pre>
&lt;p>
取消注释并改为
&lt;/p>
&lt;pre class="fy-prettyprint linenums">security:
authorization: enabled&lt;/pre>
&lt;p>
如图所示
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfeW4.jpg" alt="" data-load="full" style="" width="752" height="270"/>
&lt;/p>
&lt;p>
使用&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">service mongod restart&lt;/pre>
&lt;p>
重启mongoDB
&lt;/p>
&lt;p>
四、安装NodeBB
&lt;/p>
&lt;p>
如果没有git，请使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">yum install git&lt;/pre>
&lt;p>
中文社区的文档中已经说明
&lt;/p>
&lt;blockquote>
&lt;p>
&lt;em>&lt;strong>在开始之前:&lt;/strong>&lt;/em>&lt;br/>&lt;strong>① 提前切换成root用户，免得麻烦。&lt;/strong>&lt;br/>&lt;strong>② 不要直接下载 Github 上发布的 release 压缩包&lt;/strong>，那里面没有 &lt;code>.git/config&lt;/code> 配置文件，而在安装过程中需要读取配置文件的值。正确的做法是使用 Git 从 GitHub 上克隆源代码。&lt;br/>
&lt;/p>
&lt;/blockquote>
&lt;p>
新建一个目录（如果是云服务器的话最好放在数据盘里面，默认的/root目录不会太大，不过因为我比较懒就直接这样了）
&lt;/p>
&lt;p>
可以使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">mkdir 目录&lt;/pre>
&lt;p>
来新建文件夹（注意有&amp;##39;/&amp;##39;和没有的区别）
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">cd 目录&lt;/pre>
&lt;p>
进入刚刚新建的目录（同样注意&amp;##39;/&amp;##39;）
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">git clone -b v1.10.x https://github.com/NodeBB/NodeBB.git nodebb##把nodebb克隆进nodebb文件夹&lt;/pre>
&lt;blockquote>
&lt;p>
现在，你可以使用国内的镜像仓库(&lt;code>https://gitee.com/NodeBB-CN/NodeBB.git&lt;/code>)来提高连接速度。&lt;br/>
&lt;/p>
&lt;/blockquote>
&lt;p>
这是中文社区文档上的话，但是...
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfCyn.jpg" alt="" data-load="full" style="" width="754" height="76"/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/25/PYLpqg.jpg" alt="" width="457" height="55"/>（这个是当时没有截图后来用物理机补的:D）
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/25/PYLCZQ.jpg" alt="" width="453" height="420"/>嗯...
&lt;/p>
&lt;p>
所以我闲的创建了一个仓库，可以使用 &lt;a href="https://gitee.com/nidb/NodeBB.git" _src="https://gitee.com/nidb/NodeBB.git">https://gitee.com/nidb/NodeBB.git&lt;/a>&lt;br/>
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">./nodebb setup&lt;/pre>
&lt;p>
来安装，当然，上一篇（&lt;a href="https://blog-old.gaein.cn/post/Nodebb-Linux-Ubuntu.html" target="_blank">在Ubuntu上搭建现代化的论坛Nodebb|NodeBB安装记录（Linux-Ubuntu篇）&lt;/a>）中说过，可以使用可视化的界面来安装，使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">./nodebb install&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfVFU.jpg" alt="" data-load="full" style="" width="1722" height="937"/>
&lt;/p>
&lt;p>
和普通的博客安装差不多啦！
&lt;/p>
&lt;p>
说明：
&lt;/p>
&lt;p>
Web Address(URL)是以后访问的地址，如果是搭建的论坛记得写域名（可以不加端口，以后在nginx反代理）当然，建议先使用默认的调试。注意不要忘记“http://”，结尾不要加&amp;##39;/&amp;##39;，只有这个链接能够访问论坛，其他链接访问会显示链接断开（比如我有一个服务器，IP是1.2.3.4，域名www.exp.com和exp.com都A记录过去了，这里我填写www.exp.com，那么exp.com和1.2.3.4访问的时候都会显示与“NodeBB的链接断开”）&lt;br/>
&lt;/p>
&lt;p>
Username，Email Address ，Password是论坛管理员的账号邮箱密码，牢记。邮箱要填写可以用的，以便以后开邮件验证功能的时候不用再去修改
&lt;/p>
&lt;p>
Confirm Password是确认密码
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfZYF.jpg" alt="" data-load="full" style="" width="778" height="693"/>
&lt;/p>
&lt;p>
数据库选择MongoDB
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYful9.jpg" alt="" data-load="full" style="" width="1118" height="185"/>
&lt;/p>
&lt;p>
Redis的话自己去网上看资料吧23333
&lt;/p>
&lt;p>
中文社区的文档都很详细的，这个是CentOS+Redis的链接：&lt;a href="https://www.kancloud.cn/a632079/nodebb-cn/372107" _src="https://www.kancloud.cn/a632079/nodebb-cn/372107">https://www.kancloud.cn/a632079/nodebb-cn/372107&lt;/a>&amp;nbsp; ，至于Ubuntu，看我以前的博文
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfnSJ.jpg" alt="" data-load="full" style="" width="726" height="685"/>
&lt;/p>
&lt;p>
Host IP or address of your MongoDB instance是数据库的地址，如果使用的是本机，默认即可
&lt;/p>
&lt;p>
Host port of your MongoDB instance是数据库端口，如果没有改过，默认即可
&lt;/p>
&lt;p>
MongoDB username是用户名，Password of your MongoDB database是密码，前面设置过的
&lt;/p>
&lt;p>
MongoDB database name是数据库名，前面use nodebb创建的
&lt;/p>
&lt;p>
点击Install NodeBB安装
&lt;/p>
&lt;p>
终端已经有反应了
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYflex.jpg" alt="" data-load="full" style="" width="1034" height="797"/>
&lt;/p>
&lt;p>
然后开始部署
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfMO1.jpg" alt="" data-load="full" style="" width="1014" height="637"/>
&lt;/p>
&lt;p>
这可能需要几分钟，部署完成后提示你使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">./nodebb start&lt;/pre>
&lt;p>
开启nodebb
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYf7hF.jpg" alt="" data-load="full" style="" width="1056" height="658"/>
&lt;/p>
&lt;p>
NodeBB已经成功运行，并且提示你三个常用的命令：分别是停止、日志（实时）、和重启
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/07/24/PYfGFO.jpg" alt="" data-load="full" style="" width="1529" height="572"/>
&lt;/p>
&lt;p>
打开&lt;a href="http://127.0.0.1:4567" _src="http://127.0.0.1:4567">http://127.0.0.1:4567&lt;/a>&lt;br/>
&lt;/p>
&lt;p>
已经可以正常访问！&lt;br/>
&lt;/p></description></item><item><title>在Ubuntu上搭建现代化的论坛Nodebb|NodeBB安装记录（Linux-Ubuntu篇）</title><link>https://blog.gaein.cn/passages/install-nodebb-on-ubuntu/</link><pubDate>Fri, 22 Jun 2018 23:47:33 +0800</pubDate><guid>https://blog.gaein.cn/passages/install-nodebb-on-ubuntu/</guid><description>&lt;p>
继上次&amp;nbsp;&lt;a href="https://blog-old.gaein.cn/post/nodeBB-windows-4.html" _src="https://blog-old.gaein.cn/post/nodeBB-windows-4.html">https://blog-old.gaein.cn/post/nodeBB-windows-4.html&lt;/a>&amp;nbsp;失败后，我仍然不思悔改，NodeBB就是好看！在老家闲来无事的时候租用了一个服务器，于是，故事开始了
&lt;/p>
&lt;p>
NodeBB是基于nodejs的现代化论坛程序
&lt;/p>
&lt;p>
系统我选择了Ubuntu，再多次干到凌晨四五点后，终于让网站成功运行了！
&lt;/p>
&lt;p>
&lt;br/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pphves.md.png"/>
&lt;/p>
&lt;p>
因为服务器是使用SSH链接的，所以即使有桌面，我也选择用终端（在安装NodeBB这方面桌面好像没用...）
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/PphqSS.png"/>
&lt;/p>
&lt;p>
&lt;br/>
&lt;/p>
&lt;p>
相关安装文档查看：
&lt;/p>
&lt;p>
&lt;a href="https://www.kancloud.cn/a632079/nodebb-cn/" _src="https://www.kancloud.cn/a632079/nodebb-cn/">https://www.kancloud.cn/a632079/nodebb-cn/&lt;/a>
&lt;/p>
&lt;div>
&lt;p>
&lt;br/>
&lt;/p>
&lt;p>
&lt;br/>
&lt;/p>
&lt;hr/>
&lt;p>
&lt;span style="font-size: 24px; color: ##FFC000;">前奏&lt;/span>
&lt;/p>
&lt;p>
第一步我选择切换到管理员账户（root）&lt;br/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp49YV.png"/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/PphHW8.png"/>
&lt;/p>
&lt;p>
貌似没有vim（一个强大的文本编辑软件）
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/PphOyQ.png"/>
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">apt-get install vim&lt;/pre>
&lt;p>
按y同意安装
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pphzoq.png"/>
&lt;/p>
&lt;p>
这网速真是伤感
&lt;/p>
&lt;p>
如果安装失败了，尝试用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">apt-get update&lt;/pre>
&lt;p>
更新，然后再尝试
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pphxwn.png"/>
&lt;/p>
&lt;p>
在执行第一条命令（快速安装nodejs用）的时候，又报错了&lt;br/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4pF0.png"/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4CWT.png"/>
&lt;/p>
&lt;p>
这系统真是纯洁，啥都没有...
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">apt install curl&lt;/pre>
&lt;p>
安装curl
&lt;/p>
&lt;hr/>
&lt;p>
&lt;span style="font-size: 24px; color: ##FFC000;">安装Node.js LTS&lt;/span>&lt;br/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4AOJ.png"/>
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -&lt;/pre>
&lt;p>
来快速安装Node.js
&lt;/p>
&lt;p>
如果服务器在大陆的话&lt;br/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4ky4.png"/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">vim /etc/apt/sources.list.d/nodesource.list&lt;/pre>
&lt;p>
将链接全部换成
&lt;/p>
&lt;pre class="fy-prettyprint linenums">https://mirrors.ustc.edu.cn/nodesource/deb/node_{版本号，例如: 8}.x&lt;/pre>
&lt;p>
&lt;br/>
&lt;/p>
&lt;p>
按“i”进入编辑模式，完成后按ESC退出编辑模式，再输入:wq 保存退出
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4iSU.png"/>&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4ZwR.png"/>
&lt;/p>
&lt;p>
再次更新APT源
&lt;/p>
&lt;pre class="fy-prettyprint linenums">sudo apt-get update&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4Vm9.png"/>
&lt;/p>
&lt;p>
然后通过APT安装Node.js&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">sudo apt-get install -y nodejs&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4eT1.png"/>
&lt;/p>
&lt;p>
使用&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">node -v&lt;/pre>
&lt;p>
检查版本，确实已经安装完成
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4uY6.png"/>
&lt;/p>
&lt;hr/>
&lt;p>
&lt;span style="font-size: 24px; color: ##FFC000;">数据库：Redis&lt;/span>&lt;br/>
&lt;/p>
&lt;p>
鉴于Redis体积较小等优点，数据库我选择了redis
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4KfK.png"/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">sudo add-apt-repository ppa:chris-lea/redis-server
sudo apt-get update
sudo apt-get install -y redis-server ##安装redis&lt;/pre>
&lt;p>
使用这三行来安装redis（当然是从上到下一行一行来）
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/22/Pp4nFx.png"/>
&lt;/p>
&lt;p>
按回车键继续
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp4xje.png"/>
&lt;/p>
&lt;p>
最后一步，慢慢等待
&lt;/p>
&lt;p>
&lt;span style="color: ##8064A2;">Redis安全设置（强烈推荐进行这一步）&lt;/span>&lt;br/>
&lt;/p>
&lt;p>
使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">vim /etc/redis/redis.conf&lt;/pre>
&lt;p>
编辑配置文件&lt;br/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp4vcD.png"/>
&lt;/p>
&lt;p>
按“i”进入编辑模式，在前面插入如下三行
&lt;/p>
&lt;pre class="fy-prettyprint linenums">requirepass yourpassword
bind 127.0.0.1
rename-command FLUSHALL &amp;quot;&amp;quot;&lt;/pre>
&lt;p>
其中，“yourpassword”是你自己设置的密码，记住它，后面要用到的
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp4X9K.png"/>
&lt;/p>
&lt;p>
我设置为2018password
&lt;/p>
&lt;p>
按ESC再输入:wq保存
&lt;/p>
&lt;p>
使用：
&lt;/p>
&lt;pre class="fy-prettyprint linenums">service redis-server restart&lt;/pre>
&lt;p>
重启redis
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp4Lh6.png"/>
&lt;/p>
&lt;p>
如果没有任何报错信息就是没问题了，否则检查你的配置文件
&lt;/p>
&lt;hr/>
&lt;p>
&lt;span style="font-size: 24px; color: ##FFC000;">NodeBB的安装&lt;/span>&lt;br/>
&lt;/p>
&lt;p>
一切无误，进入最后步骤了（这当然不是全部的全部）
&lt;/p>
&lt;p>
如果没有git，使用：
&lt;/p>
&lt;pre class="fy-prettyprint linenums">sudo apt-get install -y git build-essential&lt;/pre>
&lt;p>
安装它&lt;br/>
&lt;/p>
&lt;p>
不知道有没有，使用
&lt;/p>
&lt;pre class="fy-prettyprint linenums">git&lt;/pre>
&lt;p>
如果返回了一大串东西则是安装了，返回“Command &amp;##39;git&amp;##39; not found, but can be installed with:......”则是没有安装
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp4qtx.png"/>
&lt;/p>
&lt;p>
安装完毕后进入一个你喜欢的目录&lt;br/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp5pBd.png"/>
&lt;/p>
&lt;p>
在新版本的Ubuntu，你需要先
&lt;/p>
&lt;pre class="fy-prettyprint linenums">mkdir /www ##你喜欢的名字，带不带/有很大区别的&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp4j1O.png"/>
&lt;/p>
&lt;p>
然后再
&lt;/p>
&lt;pre class="fy-prettyprint linenums">cd /www&lt;/pre>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp59HA.png"/>
&lt;/p>
&lt;p>
使用命令，从git克隆nodebb
&lt;/p>
&lt;pre class="fy-prettyprint linenums">sudo git clone -b v1.9.x https://github.com/NodeBB/NodeBB.git nodebb ##这将在 /home 下面 新建一个名叫nodebb的文件夹并且会把程序从Github克隆到里面&lt;/pre>
&lt;p>
在大陆，尤其是网络环境不好的情况下，这个过程可能会非常漫长（解决方案见&lt;a href="https://blog-old.gaein.cn/post/NodeBB-Linux-CentOS.html）">https://blog-old.gaein.cn/post/NodeBB-Linux-CentOS.html）&lt;/a>&lt;br/>
&lt;/p>
&lt;p>
目前NodeBB已经更新v1.10.x，请将“v1.9.x”替换成“v1.10.x”在发送命令，以获取最新版
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp5SnH.png"/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp5PAI.png"/>
&lt;/p>
&lt;p>
在50kib/s的速度下，需要将近16分钟！
&lt;/p>
&lt;p>
妈呀，终于完成了，合个影&lt;br/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp5GgU.png"/>
&lt;/p>
&lt;p>
输入：&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">cd nodebb&lt;/pre>
&lt;p>
进入目录
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp583T.png"/>
&lt;/p>
&lt;p>
使用：&lt;br/>
&lt;/p>
&lt;pre class="fy-prettyprint linenums">./nodebb setup ##尽管我使用的是./nodebb start &amp;lt;=习惯的锅，由于没有运行过，仍然会进行安装&lt;/pre>
&lt;p>
进行安装
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/Pp53CV.png"/>
&lt;/p>
&lt;p>
可能还需要一些时间，顺便一提，在新版的NodeBB（1.7以后，也不算新啦！）中，可以使用：
&lt;/p>
&lt;pre class="fy-prettyprint linenums">./nodebb install&lt;/pre>
&lt;p>
进行可视化安装，也就是在服务器上面进入
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/24/P9Gyrj.png" alt="" style="" width="1078" height="827"/>
&lt;/p>
&lt;p>
&lt;a href="http://127.0.0.1:4567">http://127.0.0.1:4567&lt;/a>
&lt;/p>
&lt;p>
进行安装，和普通的PHP博客论坛什么的差不多，很简单！
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/PpIS2T.png"/>
&lt;/p>
&lt;p>
GOOGLE字体库全责！
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/23/PpICMF.png"/>
&lt;/p>
&lt;p>
再次成功翻车！
&lt;/p>
&lt;p>
无奈挂VPN
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/24/P9GDxg.png" alt="" style="" width="903" height="617"/>
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/24/P9G2aq.png" alt="" style="" width="1359" height="441"/>
&lt;/p>
&lt;p>
这个就是安装完成了，需要你输入一些信息
&lt;/p>
&lt;p>
第一个URL used... 如果有相要对外开放，请输入实际使用的域名:端口（4567），如果使用的不是这里设置的域名，会出现 无法连接的现象
&lt;/p>
&lt;p>
第二个是直接回车
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/24/P9G0G8.png" alt="" width="390" height="50"/>
&lt;/p>
&lt;p>
第三个我们安装的数据库是redis，熟入redis即可
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/24/P9GBRS.png" alt="" width="514" height="94"/>
&lt;/p>
&lt;p>
然后是前面设置的数据库密码（LINUX输入密码不会显示任何东西！）
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/24/P9GsMQ.png" alt="" width="320" height="132"/>
&lt;/p>
&lt;p>
管理员用户名和密码
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/24/P9GgZn.png" alt="" width="428" height="139"/>
&lt;/p>
&lt;p>
完成设置
&lt;/p>
&lt;p>
&lt;img src="https://s1.ax1x.com/2018/06/24/P9GRI0.png" alt="" style="" width="1371" height="807"/>
&lt;/p>
&lt;p>
NODEBB基础搭建完成！&lt;br/>
&lt;/p>
&lt;p>
&lt;br/>
&lt;/p>
&lt;/div></description></item><item><title>搜索</title><link>https://blog.gaein.cn/search/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.gaein.cn/search/</guid><description/></item></channel></rss>